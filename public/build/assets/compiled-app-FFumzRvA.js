leantime.clientsController=function(){var l=function(){jQuery(".projectDateFrom, .projectDateTo").datepicker({dateFormat:leantime.i18n.__("language.dateformat"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader")})},n=function(){jQuery(".clientTabs").tabs()},d=function(){document.addEventListener("DOMContentLoaded",function(){jQuery("#allClientsTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})})};return{initDates:l,initClientTabs:n,initClientTable:d}}();leantime.canvasController=function(){var l="",n=function(i){l=i},d=function(){window.addEventListener("load",function(){document.querySelectorAll(".loading").forEach(function(i){i.style.display="none"}),document.querySelectorAll(".filterBar .row-fluid").forEach(function(i){i.style.opacity="1"})})},c=function(){jQuery(".addCanvasLink").nyroModal(),document.querySelectorAll(".editCanvasLink").forEach(function(i){i.addEventListener("click",function(){jQuery("#editCanvas").modal("show")})}),document.querySelectorAll(".cloneCanvasLink").forEach(function(i){i.addEventListener("click",function(){jQuery("#cloneCanvas").modal("show")})}),document.querySelectorAll(".mergeCanvasLink").forEach(function(i){i.addEventListener("click",function(){jQuery("#mergeCanvas").modal("show")})}),document.querySelectorAll(".importCanvasLink").forEach(function(i){i.addEventListener("click",function(){jQuery("#importCanvas").modal("show")})})},e=!1,a={sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(i){i.style.display=""}),e==!0&&(e=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+l+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+l+"CanvasMilestone .deleteMilestone").nyroModal(a)},beforeClose:function(){location.reload()}},titleFromIframe:!0},f=function(){jQuery("."+l+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+l+"CanvasMilestone .deleteMilestone").nyroModal(a)},s=function(i){jQuery.nmManual(i,a)},t=function(i){if(i=="existing"){document.querySelectorAll("#newMilestone, #milestoneSelectors").forEach(function(k){k.style.display="none"});var p=document.getElementById("existingMilestone");p&&(p.style.display=""),f()}if(i=="new"){var y=document.getElementById("newMilestone");y&&(y.style.display=""),document.querySelectorAll("#existingMilestone, #milestoneSelectors").forEach(function(k){k.style.display="none"}),f()}if(i=="hide"){document.querySelectorAll("#newMilestone, #existingMilestone").forEach(function(k){k.style.display="none"});var E=document.getElementById("milestoneSelectors");E&&(E.style.display="")}},r=function(){e=!0},u=function(){document.body.addEventListener("click",function(i){var p=i.target.closest(".userDropdown .dropdown-menu a");if(p){var y=p.getAttribute("data-value").split("_");if(p.getAttribute("data-label"),y.length==3){var E=y[0],k=y[1];y[2],fetch(leantime.appUrl+"/api/"+l+"canvas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:E,author:k})}).then(function(){var _=document.querySelector("#userDropdownMenuLink"+E+" span.text span#userImage"+E+" img");_&&_.setAttribute("src",leantime.appUrl+"/api/users?profileImage="+k),leantime.toast.show({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}}})},h=function(){document.body.addEventListener("click",function(i){var p=i.target.closest(".statusDropdown .dropdown-menu a");if(p){var y=p.getAttribute("data-value").split("/"),E=p.getAttribute("data-label");if(y.length==2){var k=y[0],_=y[1],L=p.getAttribute("class");fetch(leantime.appUrl+"/api/"+l+"canvas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:k,status:_})}).then(function(){var g=document.querySelector("#statusDropdownMenuLink"+k+" span.text");g&&(g.textContent=E);var C=document.getElementById("statusDropdownMenuLink"+k);C&&(C.className=L+" dropdown-toggle f-left status "),leantime.toast.show({message:leantime.i18n.__("short_notifications.status_updated")})})}}})},o=function(){document.body.addEventListener("click",function(i){var p=i.target.closest(".relatesDropdown .dropdown-menu a");if(p){var y=p.getAttribute("data-value").split("/"),E=p.getAttribute("data-label");if(y.length==2){var k=y[0],_=y[1],L=p.getAttribute("class");fetch(leantime.appUrl+"/api/"+l+"canvas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:k,relates:_})}).then(function(){var g=document.querySelector("#relatesDropdownMenuLink"+k+" span.text");g&&(g.textContent=E);var C=document.getElementById("relatesDropdownMenuLink"+k);C&&(C.className=L+" dropdown-toggle f-left relates "),leantime.toast.show({message:leantime.i18n.__("short_notifications.relates_updated")})})}}})},w=function(i,p){p=p||{};var y=i,E=!1,k=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(x){x.style.display=""}),E&&(E=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+y+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+y+"CanvasMilestone .deleteMilestone").nyroModal(k())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},_=function(){jQuery("."+y+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+y+"CanvasMilestone .deleteMilestone").nyroModal(k())},L;p.rowSelectors&&p.rowSelectors.length>0?L=function(){p.rowSelectors.forEach(function(x){var H=0;document.querySelectorAll("#"+x+" div.contentInner").forEach(function(v){v.offsetHeight>H&&(H=v.offsetHeight+35)}),document.querySelectorAll("#"+x+" .column .contentInner").forEach(function(v){v.style.height=H+"px"})})}:p.nbRows&&p.nbRows>0?L=function(){var x=p.nbRows,H=["firstRow","secondRow","thirdRow","fourthRow"],v=document.documentElement.offsetHeight-320-20*x;x===2&&(v-=25);for(var j=0;j<x&&j<H.length;j++){var R="#"+H[j],I=v/x;x>=3&&(I=v*.333),document.querySelectorAll(R+" div.contentInner").forEach(function(X){X.offsetHeight>I&&(I=X.offsetHeight+50)}),document.querySelectorAll(R+" .column .contentInner").forEach(function(X){X.style.height=I+"px"})}}:L=function(){};var g={setCloseModal:function(){E=!0},toggleMilestoneSelectors:function(x){if(x=="existing"){document.querySelectorAll("#newMilestone, #milestoneSelectors").forEach(function(R){R.style.display="none"});var H=document.getElementById("existingMilestone");H&&(H.style.display=""),_()}if(x=="new"){var v=document.getElementById("newMilestone");v&&(v.style.display=""),document.querySelectorAll("#existingMilestone, #milestoneSelectors").forEach(function(R){R.style.display="none"}),_()}if(x=="hide"){document.querySelectorAll("#newMilestone, #existingMilestone").forEach(function(R){R.style.display="none"});var j=document.getElementById("milestoneSelectors");j&&(j.style.display="")}},openModalManually:function(x){jQuery.nmManual(x,k)},initUserDropdown:u,initStatusDropdown:h,initRelatesDropdown:o,setRowHeights:L};if(p.extras)for(var C in p.extras)p.extras.hasOwnProperty(C)&&(g[C]=p.extras[C]);return g};return{setCanvasName:n,initFilterBar:d,initCanvasLinks:c,initUserDropdown:u,initStatusDropdown:h,initRelatesDropdown:o,setCloseModal:r,toggleMilestoneSelectors:t,openModalManually:s,createController:w}}();leantime.cpCanvasController=leantime.canvasController.createController("cp",{nbRows:4});leantime.dbmCanvasController=leantime.canvasController.createController("dbm",{nbRows:3});leantime.eaCanvasController=leantime.canvasController.createController("ea",{nbRows:2});leantime.emCanvasController=leantime.canvasController.createController("em",{nbRows:4});var O=O||{};window.SNAKE=O;O.addEventListener=function(){if(window.addEventListener)return function(l,n,d,c){l.addEventListener(n,d,c)};if(window.attachEvent)return function(l,n,d){l.attachEvent("on"+n,d)}}();O.removeEventListener=function(){if(window.removeEventListener)return function(l,n,d,c){l.removeEventListener(n,d,c)};if(window.detachEvent)return function(l,n,d){l.detachEvent("on"+n,d)}}();O.Snake=O.Snake||function(){var l=[],n=function(){this.elm=null,this.elmStyle=null,this.row=-1,this.col=-1,this.xPos=-1e3,this.yPos=-1e3,this.next=null,this.prev=null};function d(c){var e=0,a=0,f;for(f in c)c[f].elm.currentStyle?a=parseFloat(c[f].elm.style["z-index"],10):window.getComputedStyle&&(a=parseFloat(document.defaultView.getComputedStyle(c[f].elm,null).getPropertyValue("z-index"),10)),!isNaN(a)&&a>e&&(e=a);return e+1}return function(c){if(!c||!c.playingBoard)return;localStorage.jsSnakeHighScore===void 0&&localStorage.setItem("jsSnakeHighScore",0);var e=this,a=c.playingBoard,f=5,s=1,t=-1,r=!0,u=!0,h=-1,o=[0,1,0,-1],w=[-1,0,1,0],i=[],p=[],y=80,E=!1,k=!1,_=document.getElementById("selectMode");_&&_.addEventListener("change",function(H){H=H||{};var v=H.target?parseInt(H.target.value):75;(isNaN(v)||v<25)&&(v=75),y=v,setTimeout(function(){document.getElementById("game-area").focus()},10)}),e.snakeBody={},e.snakeBody.b0=new n,e.snakeBody.b0.row=c.startRow||1,e.snakeBody.b0.col=c.startCol||1,e.snakeBody.b0.xPos=e.snakeBody.b0.row*a.getBlockWidth(),e.snakeBody.b0.yPos=e.snakeBody.b0.col*a.getBlockHeight(),e.snakeBody.b0.elm=L(),e.snakeBody.b0.elmStyle=e.snakeBody.b0.elm.style,a.getBoardContainer().appendChild(e.snakeBody.b0.elm),e.snakeBody.b0.elm.style.left=e.snakeBody.b0.xPos+"px",e.snakeBody.b0.elm.style.top=e.snakeBody.b0.yPos+"px",e.snakeBody.b0.next=e.snakeBody.b0,e.snakeBody.b0.prev=e.snakeBody.b0,e.snakeLength=1,e.snakeHead=e.snakeBody.b0,e.snakeTail=e.snakeBody.b0,e.snakeHead.elm.className=e.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),e.snakeHead.elm.id="snake-snakehead-alive",e.snakeHead.elm.className+=" snake-snakebody-alive";function L(){var H=document.createElement("div");return H.className="snake-snakebody-block",H.style.left="-1000px",H.style.top="-1000px",H.style.width=a.getBlockWidth()+"px",H.style.height=a.getBlockHeight()+"px",H}function g(H){for(var v,j=L(),R=1;R<H;R++)v=new n,v.elm=j.cloneNode(!0),v.elmStyle=v.elm.style,a.getBoardContainer().appendChild(v.elm),l[l.length]=v;v=new n,v.elm=j,a.getBoardContainer().appendChild(v.elm),l[l.length]=v}function C(){var H=localStorage.jsSnakeHighScore;e.snakeLength>H&&(alert("Congratulations! You have beaten your previous high score, which was "+H+"."),localStorage.setItem("jsSnakeHighScore",e.snakeLength))}function x(H){C(),e.snakeHead.elm.style.zIndex=d(e.snakeBody),e.snakeHead.elm.className=e.snakeHead.elm.className.replace(/\bsnake-snakebody-alive\b/,""),e.snakeHead.elm.className+=" snake-snakebody-dead",E=!0,H()}e.setPaused=function(H){k=H},e.getPaused=function(){return k},e.handleArrowKeys=function(H){if(E||k&&!c.premoveOnPause)return;e.snakeLength;let v=-1;switch(H){case 37:case 65:v=3;break;case 38:case 87:v=0;break;case 39:case 68:v=1;break;case 40:case 83:v=2;break}h!==s&&(t=v),(Math.abs(v-s)!==2&&(r||k)||u)&&(h=v,r=!1,u=!1)},e.go=function(){var H=e.snakeHead,v=e.snakeTail,j=a.grid;if(k===!0){setTimeout(function(){e.go()},y);return}if(e.snakeTail=v.prev,e.snakeHead=v,j[v.row]&&j[v.row][v.col]&&(j[v.row][v.col]=0),h!==-1&&(s=h,t!==-1&&(h=t,t=-1)),r=!0,v.col=H.col+o[s],v.row=H.row+w[s],v.xPos=H.xPos+i[s],v.yPos=H.yPos+p[s],v.elmStyle||(v.elmStyle=v.elm.style),v.elmStyle.left=v.xPos+"px",v.elmStyle.top=v.yPos+"px",e.snakeLength>1&&(v.elm.id="snake-snakehead-alive",H.elm.id=""),j[v.row][v.col]===0)j[v.row][v.col]=1,setTimeout(function(){e.go()},y);else if(j[v.row][v.col]>0)e.handleDeath();else if(j[v.row][v.col]===a.getGridFoodValue()){if(j[v.row][v.col]=1,!e.eatFood()){e.handleWin();return}setTimeout(function(){e.go()},y)}},e.eatFood=function(){l.length<=f&&g(f*2);for(var H=l.splice(0,f),v=H.length,j,R=e.snakeTail;v--;)j="b"+e.snakeLength++,e.snakeBody[j]=H[v],e.snakeBody[j].prev=R,e.snakeBody[j].elm.className=e.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),e.snakeBody[j].elm.className+=" snake-snakebody-alive",R.next=e.snakeBody[j],R=e.snakeBody[j];if(e.snakeTail=e.snakeBody[j],e.snakeTail.next=e.snakeHead,e.snakeHead.prev=e.snakeTail,!a.foodEaten())return!1;var I=document.getElementById("selectMode"),X=I.options[I.selectedIndex];return X.text.localeCompare("Rush")==0&&(y>30?y-=5:y=30),!0},e.handleDeath=function(){var H=document.getElementById("selectMode").value;y=parseInt(H),x(a.handleDeath)},e.handleWin=function(){x(a.handleWin)},e.rebirth=function(){E=!1,r=!0,u=!0,t=-1},e.reset=function(){if(E!==!1){for(var H=[],v=e.snakeHead.next,j;v!==e.snakeHead;)j=v.next,v.prev=null,v.next=null,H.push(v),v=j;e.snakeHead.next=e.snakeHead,e.snakeHead.prev=e.snakeHead,e.snakeTail=e.snakeHead,e.snakeLength=1;for(var R=0;R<H.length;R++)H[R].elm.style.left="-1000px",H[R].elm.style.top="-1000px",H[R].elm.className=e.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),H[R].elm.className+=" snake-snakebody-alive";l.concat(H),e.snakeHead.elm.className=e.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),e.snakeHead.elm.className+=" snake-snakebody-alive",e.snakeHead.elm.id="snake-snakehead-alive",e.snakeHead.row=c.startRow||1,e.snakeHead.col=c.startCol||1,e.snakeHead.xPos=e.snakeHead.row*a.getBlockWidth(),e.snakeHead.yPos=e.snakeHead.col*a.getBlockHeight(),e.snakeHead.elm.style.left=e.snakeHead.xPos+"px",e.snakeHead.elm.style.top=e.snakeHead.yPos+"px"}},g(f*2),i[0]=0,i[1]=a.getBlockWidth(),i[2]=0,i[3]=-1*a.getBlockWidth(),p[0]=-1*a.getBlockHeight(),p[1]=0,p[2]=a.getBlockHeight(),p[3]=0}}();O.Food=O.Food||function(){var l=0;function n(d,c){return Math.floor(Math.random()*(c+1-d))+d}return function(d){if(!(!d||!d.playingBoard)){var c=this,e=d.playingBoard,a,f,s=l++,t=document.createElement("div");t.setAttribute("id","snake-food-"+s),t.className="snake-food-block",t.style.width=e.getBlockWidth()+"px",t.style.height=e.getBlockHeight()+"px",t.style.left="-1000px",t.style.top="-1000px",e.getBoardContainer().appendChild(t),c.getFoodElement=function(){return t},c.randomlyPlaceFood=function(){e.grid[a]&&e.grid[a][f]===e.getGridFoodValue()&&(e.grid[a][f]=0);for(var r=0,u=0,h=0,o=e.grid.length-1,w=e.grid[0].length-1;e.grid[r][u]!==0;)if(r=n(1,o),u=n(1,w),h++,h>2e4)return!1;return e.grid[r][u]=e.getGridFoodValue(),a=r,f=u,t.style.top=r*e.getBlockHeight()+"px",t.style.left=u*e.getBlockWidth()+"px",!0}}}}();O.Board=O.Board||function(){var l=0;function n(e){var a=0,f=0,s;for(s in e)e[s].elm.currentStyle?f=parseFloat(e[s].elm.style["z-index"],10):window.getComputedStyle&&(f=parseFloat(document.defaultView.getComputedStyle(e[s].elm,null).getPropertyValue("z-index"),10)),!isNaN(f)&&f>a&&(a=f);return a+1}function d(){var e=0;return typeof window.innerWidth=="number"?e=window.innerWidth:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?e=document.documentElement.clientWidth:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth),e}function c(){var e=0;return typeof window.innerHeight=="number"?e=window.innerHeight:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?e=document.documentElement.clientHeight:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientHeight),e}return function(e){var a=this,f=l++,s=e||{},t=250,r=250,u=20,h=20,o=-1,w,i,p=1,y,E=!1,k,_,L,g,C,x,H,v,j;a.grid=[];function R(){_=document.createElement("div"),_.setAttribute("id","playingField"),_.className="snake-playing-field",O.addEventListener(_,"click",function(){k.focus()},!1),j=document.createElement("div"),j.className="snake-pause-screen",j.innerHTML="<div style='padding:10px;'>[Paused]<p/>Press [space] to unpause.</div>",L=document.createElement("div"),L.className="snake-panel-component",L.innerHTML="<a href='http://patorjk.com/blog/software/' class='snake-link'>more patorjk.com apps</a> - <a href='https://github.com/patorjk/JavaScript-Snake' class='snake-link'>source code</a> - <a href='https://www.youtube.com/channel/UCpcCLm9y6CsjHUrCvJHYHUA' class='snake-link'>pat's youtube</a>",g=document.createElement("div"),g.className="snake-panel-component",g.innerHTML="Length: 1",C=document.createElement("div"),C.className="snake-panel-component",C.innerHTML="Highscore: "+(localStorage.jsSnakeHighScore||0),x=ee(),H=de(),v=T(),O.addEventListener(k,"keyup",function(b){if(!b)var b=window.event;return b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation(),b.preventDefault&&b.preventDefault(),!1},!1),k.className="snake-game-container",j.style.zIndex=1e4,k.appendChild(j),k.appendChild(_),k.appendChild(L),k.appendChild(g),k.appendChild(C),k.appendChild(x),k.appendChild(H),k.appendChild(v),i=new O.Snake({playingBoard:a,startRow:2,startCol:2,premoveOnPause:s.premoveOnPause}),w=new O.Food({playingBoard:a}),x.style.zIndex=1e3}function I(){return t*a.getBlockWidth()}function X(){return r*a.getBlockHeight()}function ee(){var m=document.createElement("div");m.id="sbWelcome"+f,m.className="snake-welcome-dialog";var b=document.createElement("div"),Q="";s.fullScreen&&(Q="On Windows, press F11 to play in Full Screen mode."),b.innerHTML="JavaScript Snake<p></p>Use the <strong>arrow keys</strong> on your keyboard to play the game. "+Q+"<p></p>";var S=document.createElement("button");S.appendChild(document.createTextNode("Play Game"));var M=function(){O.removeEventListener(window,"keyup",q,!1),m.style.display="none",a.setBoardState(1),a.getBoardContainer().focus()},q=function(B){if(!B)var B=window.event;var F=B.which?B.which:B.keyCode;(F===32||F===13)&&M()};return O.addEventListener(window,"keyup",q,!1),O.addEventListener(S,"click",M,!1),m.appendChild(b),m.appendChild(S),m}function oe(m,b,Q){var S=document.createElement("div");S.id=b+f,S.className=Q;var M=document.createElement("div");M.innerHTML="JavaScript Snake<p></p>"+m+"<p></p>";var q=document.createElement("button");q.appendChild(document.createTextNode("Play Again?"));var U=function(){S.style.display="none",a.resetBoard(),a.setBoardState(1),a.getBoardContainer().focus()},B=function(A){if(!(p!==0||S.style.display!=="block")){if(!A)var A=window.event;var W=A.which?A.which:A.keyCode;(W===32||W===13)&&U()}};return O.addEventListener(window,"keyup",B,!0),O.addEventListener(q,"click",U,!1),S.appendChild(M),S.appendChild(q),S}function de(){return oe("You died :(","sbTryAgain","snake-try-again-dialog")}function T(){return oe("You win! :D","sbWin","snake-win-dialog")}function D(m){var b=Math.max(n(i.snakeBody),n({tmp:{elm:w.getFoodElement()}}));k.removeChild(m),k.appendChild(m),m.style.zIndex=b,m.style.display="block",a.setBoardState(0)}a.setPaused=function(m){E=m,i.setPaused(m),E?j.style.display="block":j.style.display="none"},a.getPaused=function(){return E},a.resetBoard=function(){O.removeEventListener(k,"keydown",y,!1),i.reset(),g.innerHTML="Length: 1",a.setupPlayingField()},a.getBoardState=function(){return p},a.setBoardState=function(m){p=m},a.getGridFoodValue=function(){return o},a.getPlayingFieldElement=function(){return _},a.setBoardContainer=function(m){typeof m=="string"&&(m=document.getElementById(m)),m!==k&&(k=m,_=null,a.setupPlayingField())},a.getBoardContainer=function(){return k},a.getBlockWidth=function(){return u},a.getBlockHeight=function(){return h},a.setupPlayingField=function(){_||R();var m,b,Q,S;s.fullScreen===!0?(Q=0,S=0,m=d()-20,b=c()-20):(Q=s.top,S=s.left,m=s.width,b=s.height);var M=a.getBlockWidth()*2+m%a.getBlockWidth(),q=Math.min(I()-M,m-M),U=a.getBlockHeight()*3+b%a.getBlockHeight(),B=Math.min(X()-U,b-U);k.style.left=S+"px",k.style.top=Q+"px",k.style.width=m+"px",k.style.height=b+"px",_.style.left=a.getBlockWidth()+"px",_.style.top=a.getBlockHeight()+"px",_.style.width=q+"px",_.style.height=B+"px";var F=U-a.getBlockHeight(),A=a.getBlockHeight()+B+Math.round((F-30)/2)+"px";L.style.top=A,L.style.width="450px",L.style.left=Math.round(m/2)-Math.round(450/2)+"px",g.style.top=A,g.style.left="30px",C.style.top=A,C.style.left=m-140+"px",m<700?L.style.display="none":L.style.display="block",a.grid=[];for(var W=q/a.getBlockWidth()+2,P=B/a.getBlockHeight()+2,N=0;N<P;N++){a.grid[N]=[];for(var Y=0;Y<W;Y++)Y===0||N===0||Y===W-1||N===P-1?a.grid[N][Y]=1:a.grid[N][Y]=0}w.randomlyPlaceFood(),y=function(z){if(!z)var z=window.event;var G=z.which?z.which:z.keyCode;if(a.getBoardState()===1){if(!(G>=37&&G<=40)&&!(G===87||G===65||G===83||G===68))return;O.removeEventListener(k,"keydown",y,!1),y=function(K){if(!K)var K=window.event;var V=K.which?K.which:K.keyCode;return V===32&&a.getBoardState()!=0&&a.setPaused(!a.getPaused()),i.handleArrowKeys(V),K.cancelBubble=!0,K.stopPropagation&&K.stopPropagation(),K.preventDefault&&K.preventDefault(),!1},O.addEventListener(k,"keydown",y,!1),i.rebirth(),i.handleArrowKeys(G),a.setBoardState(2),i.go()}return z.cancelBubble=!0,z.stopPropagation&&z.stopPropagation(),z.preventDefault&&z.preventDefault(),!1},O.addEventListener(k,"keydown",y,!1)},a.foodEaten=function(){return g.innerHTML="Length: "+i.snakeLength,i.snakeLength>localStorage.jsSnakeHighScore&&(localStorage.setItem("jsSnakeHighScore",i.snakeLength),C.innerHTML="Highscore: "+localStorage.jsSnakeHighScore),!!w.randomlyPlaceFood()},a.handleDeath=function(){D(H)},a.handleWin=function(){D(v)},s.fullScreen=typeof s.fullScreen>"u"?!1:s.fullScreen,s.top=typeof s.top>"u"?0:s.top,s.left=typeof s.left>"u"?0:s.left,s.width=typeof s.width>"u"?400:s.width,s.height=typeof s.height>"u"?400:s.height,s.premoveOnPause=typeof s.premoveOnPause>"u"?!1:s.premoveOnPause,s.fullScreen&&O.addEventListener(window,"resize",function(){a.setupPlayingField()},!1),a.setBoardState(0),s.boardContainer&&a.setBoardContainer(s.boardContainer)}}();leantime.goalCanvasController=leantime.canvasController.createController("goal",{extras:{initProgressChart:function(l,n,d){var c={type:"doughnut",data:{datasets:[{data:[n,d],backgroundColor:[leantime.dashboardController.chartColors.green,leantime.dashboardController.chartColors.grey],label:leantime.i18n.__("label.project_done")}],labels:[n+"%"]},options:{maintainAspectRatio:!0,responsive:!0,plugins:{legend:{position:"none"},title:{display:!1,text:"Complete"}},animation:{animateScale:!0,animateRotate:!0}}},e=document.getElementById(l).getContext("2d");new Chart(e,c)}}});leantime.ideasController=function(){var l=!1,n=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(w){w.style.display=""}),l==!0&&(l=!1,location.reload())},afterShowCont:function(){jQuery(".ideaModal, #commentForm, #commentForm .deleteComment, .leanCanvasMilestone .deleteMilestone").nyroModal(n())}}}},d=function(){jQuery(".ideaModal, #commentForm, #commentForm .deleteComment, .leanCanvasMilestone .deleteMilestone").nyroModal(n())},c=function(w){jQuery.nmManual(w,n)},e=function(){var w=document.querySelector("#ideaMason");if(!w)return;var i=new Packery(w,{itemSelector:".ticketBox",columnWidth:260,isResizable:!0});imagesLoaded(w).on("progress",function(){i.layout()});var p=w.querySelectorAll(".ticketBox");p.forEach(function(k){var _=new Draggabilly(k);_.on("dragStart",function(){k.classList.add("tilt"),y(k)}),_.on("dragEnd",function(){k.classList.remove("tilt"),k._moveHandler&&(document.removeEventListener("mousemove",k._moveHandler),delete k._moveHandler)}),i.bindDraggabillyEvents(_)});function y(k){var _=k.getBoundingClientRect().left,L=function(g){g.pageX>=_?(k.classList.add("right"),k.classList.remove("left")):(k.classList.add("left"),k.classList.remove("right")),_=g.pageX};document.addEventListener("mousemove",L),k._moveHandler=L}i.on("dragItemPositioned",E);function E(){var k=[],_=i.getItemElements();_.forEach(function(L,g){var C=g+1,x=L.getAttribute("data-value");k.push({id:x,sortIndex:C})}),fetch(leantime.appUrl+"/api/ideas",{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({action:"ideaSort",payload:JSON.stringify(k)})})}},a=function(){},f=function(){document.querySelectorAll(".mainIdeaContent img").forEach(function(w){var i=document.createElement("a");i.href=w.getAttribute("src"),i.className="imageModal",w.parentElement.insertBefore(i,w),i.appendChild(w)}),jQuery(".imageModal").nyroModal()},s=function(w){if(w=="existing"){var i=document.querySelector("#newMilestone"),p=document.querySelector("#milestoneSelectors"),y=document.querySelector("#existingMilestone");i&&(i.style.display="none"),p&&(p.style.display="none"),y&&(y.style.display=""),d()}if(w=="new"){var i=document.querySelector("#newMilestone"),y=document.querySelector("#existingMilestone"),p=document.querySelector("#milestoneSelectors");i&&(i.style.display=""),y&&(y.style.display="none"),p&&(p.style.display="none"),d()}if(w=="hide"){var i=document.querySelector("#newMilestone"),y=document.querySelector("#existingMilestone"),p=document.querySelector("#milestoneSelectors");i&&(i.style.display="none"),y&&(y.style.display="none"),p&&(p.style.display="")}},t=function(){l=!0},r=function(){document.body.addEventListener("click",function(w){var i=w.target.closest(".userDropdown .dropdown-menu a");if(i){var p=i.getAttribute("data-value").split("_");if(i.getAttribute("data-label"),p.length==3){var y=p[0],E=p[1];p[2],fetch(leantime.appUrl+"/api/ideas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:y,author:E})}).then(function(){var k=document.querySelector("#userDropdownMenuLink"+y+" span.text span#userImage"+y+" img");k&&k.setAttribute("src",leantime.appUrl+"/api/users?profileImage="+E),leantime.toast.show({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}}})},u=function(){document.body.addEventListener("click",function(w){var i=w.target.closest(".statusDropdown .dropdown-menu a");if(i){var p=i.getAttribute("data-value").split("_"),y=i.getAttribute("data-label");if(p.length==3){var E=p[0],k=p[1],_=p[2];fetch(leantime.appUrl+"/api/ideas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:E,box:k})}).then(function(){var L=document.querySelector("#statusDropdownMenuLink"+E+" span.text");L&&(L.textContent=y);var g=document.querySelector("#statusDropdownMenuLink"+E);g&&(g.className=_+" dropdown-toggle f-left status"),leantime.toast.show({message:leantime.i18n.__("short_notifications.status_updated"),style:"success"})})}}})},h=function(){var w=document.documentElement.scrollHeight-320;document.querySelectorAll("#sortableIdeaKanban .column .contentInner").forEach(function(i){i.style.height=w+"px"})},o=function(w){document.querySelectorAll("#sortableIdeaKanban .ticketBox").forEach(function(y){y.addEventListener("mouseenter",function(){this.style.background="var(--kanban-card-hover)"}),y.addEventListener("mouseleave",function(){this.style.background="var(--kanban-card-bg)"})});function i(y){var E=y.querySelectorAll(":scope > .moveable"),k=[];return E.forEach(function(_){if(_.id){var L=_.id.indexOf("_");L!==-1&&k.push(_.id.substring(0,L)+"[]="+_.id.substring(L+1))}}),k.join("&")}document.querySelectorAll("#sortableIdeaKanban .contentInner").forEach(function(y){y._sortableInstance&&y._sortableInstance.destroy(),y._sortableInstance=new Sortable(y,{group:"idea-kanban",draggable:".moveable",ghostClass:"ui-state-highlight",filter:".portlet-toggle",animation:150,onStart:function(E){E.item.classList.add("tilt"),p(E.item)},onEnd:function(E){E.item.classList.remove("tilt"),E.item._moveHandler&&(document.removeEventListener("mousemove",E.item._moveHandler),delete E.item._moveHandler);for(var k={action:"statusUpdate",payload:{}},_=0;_<w.length;_++){var L=document.querySelector(".contentInner.status_"+w[_]);L&&(k.payload[w[_]]=i(L))}fetch(leantime.appUrl+"/api/ideas",{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams(k)})}})});function p(y){var E=y.getBoundingClientRect().left,k=function(_){_.pageX>=E?(y.classList.add("right"),y.classList.remove("left")):(y.classList.add("left"),y.classList.remove("right")),E=_.pageX};document.addEventListener("mousemove",k),y._moveHandler=k}document.querySelectorAll(".portlet").forEach(function(y){var E=y.querySelector(".portlet-header");if(E){var k=document.createElement("span");k.className="portlet-toggle",E.prepend(k)}}),document.querySelectorAll(".portlet-toggle").forEach(function(y){y.addEventListener("click",function(){this.classList.toggle("expanded");var E=this.closest(".portlet").querySelector(".portlet-content");E&&(E.style.display=E.style.display==="none"?"":"none")})})};return{setCloseModal:t,toggleMilestoneSelectors:s,openModalManually:c,initMasonryWall:e,initBoardControlModal:a,initWallImageModals:f,initUserDropdown:r,initStatusDropdown:u,setKanbanHeights:h,initIdeaKanban:o}}();leantime.insightsCanvasController=leantime.canvasController.createController("insights",{nbRows:1});leantime.lbmCanvasController=leantime.canvasController.createController("lbm",{nbRows:2});leantime.leanCanvasController=leantime.canvasController.createController("lean",{nbRows:3});leantime.minempathyCanvasController=leantime.canvasController.createController("minempathy",{nbRows:3});leantime.obmCanvasController=leantime.canvasController.createController("obm",{nbRows:3});leantime.projectsController=function(){function l(){document.querySelectorAll("#sortableTicketKanban .column").forEach(function(_){var L=_.querySelectorAll(".moveable").length,g=_.querySelector(".count");g&&(g.textContent=L)})}var n=function(){jQuery(".projectDateFrom, .projectDateTo").datepicker({dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader")})},d=function(){jQuery(".projectTabs").tabs()},c=function(){var _={sizes:{minW:450,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(L){L.style.display=""}),n(),jQuery(".duplicateProjectModal, .formModal").nyroModal(_)},beforeClose:function(){location.reload()}}};jQuery(".duplicateProjectModal").nyroModal(_)},e=function(_){jQuery("#progressbar").progressbar({value:_})},a=function(){document.addEventListener("DOMContentLoaded",function(){jQuery("#allProjectsTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})})},f=function(_){var L=1,g=typeof _=="string"?document.querySelector(_):_;g.querySelectorAll("input.sorter").forEach(function(C){C.value=L,L++}),g._sortableInstance&&g._sortableInstance.destroy(),g._sortableInstance=new Sortable(g,{animation:150,onEnd:function(){L=1,g.querySelectorAll("input.sorter").forEach(function(C){C.value=L,L++})}})},s=function(){document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("#todosettings select.colorChosen").forEach(function(_){new SlimSelect({select:_,settings:{searchHighlight:!1}})})})},t=function(_){var L=document.querySelector("#todostatus-"+_);L&&L.parentElement&&L.parentElement.remove()},r=function(_){var L=-1;document.querySelectorAll("#todosettings ul .statusList").forEach(function(j){var R=j.querySelector(".labelKey");if(R){var I=R.value;parseInt(I)>=parseInt(L)&&(L=I)}});var g=parseInt(L)+1,C=document.querySelector(".newStatusTpl"),x=C.innerHTML.replaceAll("XXNEWKEYXX",g),H=document.querySelector("#todoStatusList");H.insertAdjacentHTML("beforeend","<li>"+x+"</li>"),document.querySelectorAll("#todosettings select.colorChosen").forEach(function(j){j.slim&&j.slim.destroy()}),leantime.projectsController.initSelectFields();var v=document.querySelector("#todoStatusList");v&&v._sortableInstance&&v._sortableInstance.destroy(),leantime.projectsController.initTodoStatusSortable("#todoStatusList")},u=null,h=function(_){if(o(),_.files&&_.files[0]){var L=new FileReader,g=document.querySelector("#projectAvatar");L.onload=function(C){u=new Croppie(g,{enableExif:!0,viewport:{width:200,height:200,type:"rectangle"},boundary:{width:250,height:250}}),u.bind({url:C.currentTarget.result});var x=document.querySelector("#previousImage");x&&(x.style.display="none")},L.readAsDataURL(_.files[0])}},o=function(){document.querySelector("#profileImg"),u&&(u.destroy(),u=null);var _=document.querySelector("#previousImage");_&&(_.style.display="")},w=function(){var _=document.querySelector("#save-picture");_&&_.classList.add("running");var L=document.querySelector("#profileImg");L&&L.setAttribute("src",leantime.appUrl+"/images/loaders/loader28.gif"),u.result({type:"blob",circle:!1}).then(function(g){var C=new FormData;C.append("file",g),fetch(leantime.appUrl+"/api/projects",{method:"POST",body:C,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(x){_&&_.classList.remove("running"),location.reload()}).catch(function(x){console.log(x)})})},i=function(_,L,g){function C(x){return String(x).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}document.addEventListener("DOMContentLoaded",function(){if(g===!1)var x=new Gantt("#gantt",_,{header_height:55,column_width:20,step:24,view_modes:["Day","Week","Month"],bar_height:40,static_progress_indicator:!0,bar_corner_radius:10,arrow_curve:10,padding:20,view_mode:"Month",date_format:leantime.i18n.__("language.momentJSDate"),language:"en",additional_rows:5,custom_popup_html:function(v){v._end;var j='<div class="details-container" style="min-width:600px;"> ';return v.projectName!==void 0&&(j+="<h3><b>"+v.name+"</b></h3>"),j+="<h4>"+C(v.name)+"</a></h4><br /> ",j+="</div>",j},on_click:function(v){},on_date_change:function(v,j,R){var I=v.id.split("-");let X=0,ee="";I.length>1?I[0]=="ticket"?(X=I[1],ee="ticket"):I[0]=="pgm"&&(X=I[1],ee="project"):X=I,ee=="ticket"?leantime.ticketsRepository.updateMilestoneDates(X,j,R,v._index+1):fetch(leantime.appUrl+"/api/projects",{method:"PATCH",body:new URLSearchParams({id:X,start:j,end:R,sortIndex:v._index+1}),credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"}})},on_sort_change:function(v){for(var j={action:"ganttSort",payload:{}},R=0;R<v.length;R++)j.payload[v[R].id]=v[R]._index+1;fetch(leantime.appUrl+"/api/projects",{method:"POST",body:new URLSearchParams(p(j)),credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"}})},on_progress_change:function(v,j){},on_view_change:function(v){leantime.usersRepository.updateUserViewSettings("projectGantt",v)},on_popup_show:function(v){}});else var x=new Gantt("#gantt",_,{readonlyGantt:!0,resizing:!1,progress:!1,is_draggable:!1,custom_popup_html:function(j){task._end;var R='<div class="details-container" style="min-width:600px;"> ';return task.projectName!==void 0&&(R+="<h3><b>"+j.name+"</b></h3>"),R+="<h4>"+C(j.name)+"</a></h4><br /> ",R+="</div>",R},on_click:function(j){},on_date_change:function(j,R,I){},on_progress_change:function(j,R){},on_view_change:function(j){leantime.usersRepository.updateUserViewSettings("projectGantt",j)}});var H=document.querySelector("#ganttTimeControl");H&&H.addEventListener("click",function(v){var j=v.target.closest("a");if(j){var R=j.getAttribute("data-value");x.change_view_mode(R),H.querySelectorAll("a").forEach(function(X){X.classList.remove("active")}),j.classList.add("active");var I=j.textContent;document.querySelectorAll(".viewText").forEach(function(X){X.textContent=I})}}),x.change_view_mode(L)})};function p(_,L){var g={};for(var C in _)if(_.hasOwnProperty(C)){var x=L?L+"["+C+"]":C;typeof _[C]=="object"&&_[C]!==null?Object.assign(g,p(_[C],x)):g[x]=_[C]}return g}var y=function(){document.addEventListener("DOMContentLoaded",function(){l();var _=document.querySelector(".filterBar .row-fluid");_&&(_.style.opacity="1");var L=document.documentElement.scrollHeight-250;document.querySelectorAll("#sortableProjectKanban .column .contentInner").forEach(function(g){g.offsetHeight>L&&(L=g.offsetHeight)}),L=L+50,document.querySelectorAll("#sortableProjectKanban .column .contentInner").forEach(function(g){g.style.minHeight=L+"px"})})},E=function(_){document.querySelectorAll("#sortableProjectKanban .projectBox").forEach(function(C){C.addEventListener("mouseenter",function(){this.style.background="var(--kanban-card-hover)"}),C.addEventListener("mouseleave",function(){this.style.background="var(--kanban-card-bg)"})});function L(C){var x=C.querySelectorAll(":scope > .moveable"),H=[];return x.forEach(function(v){if(v.id){var j=v.id.indexOf("_");j!==-1&&H.push(v.id.substring(0,j)+"[]="+v.id.substring(j+1))}}),H.join("&")}document.querySelectorAll("#sortableProjectKanban .contentInner").forEach(function(C){C._sortableInstance&&C._sortableInstance.destroy(),C._sortableInstance=new Sortable(C,{group:"project-kanban",draggable:".moveable",ghostClass:"ui-state-highlight",filter:".portlet-toggle, input, a, select, textarea",preventOnFilter:!1,animation:150,delay:25,delayOnTouchOnly:!0,onStart:function(x){x.item.classList.add("tilt"),g(x.item)},onEnd:function(x){x.item.classList.remove("tilt"),x.item._moveHandler&&(document.removeEventListener("mousemove",x.item._moveHandler),delete x.item._moveHandler),l();for(var H={action:"sortIndex",payload:{},handler:x.item.id},v=0;v<_.length;v++){var j=document.querySelector(".contentInner.status_"+_[v]);j&&(H.payload[_[v]]=L(j))}fetch(leantime.appUrl+"/api/projects",{method:"POST",body:new URLSearchParams(p(H)),credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"}})}})});function g(C){var x=C.getBoundingClientRect().left,H=function(v){v.pageX>=x?(C.classList.add("right"),C.classList.remove("left")):(C.classList.add("left"),C.classList.remove("right")),x=v.pageX};document.addEventListener("mousemove",H),C._moveHandler=H}document.querySelectorAll(".portlet").forEach(function(C){C.classList.add("ui-widget","ui-widget-content","ui-helper-clearfix","ui-corner-all");var x=C.querySelector(".portlet-header");x&&(x.classList.add("ui-widget-header","ui-corner-all"),x.insertAdjacentHTML("afterbegin","<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>"))}),document.querySelectorAll(".portlet-toggle").forEach(function(C){C.addEventListener("click",function(){this.classList.toggle("ui-icon-minusthick"),this.classList.toggle("ui-icon-plusthick");var x=this.closest(".portlet").querySelector(".portlet-content");x&&(x.style.display=x.style.display==="none"?"":"none")})})},k=function(_,L){L.classList.add("go"),L.classList.contains("isFavorite")?leantime.reactionsController.removeReaction("project",_,"favorite",function(){var g=L.querySelector("i");g&&(g.classList.remove("fa-solid"),g.classList.add("fa-regular")),L.classList.remove("isFavorite")}):leantime.reactionsController.addReactions("project",_,"favorite",function(){var g=L.querySelector("i");g&&(g.classList.remove("fa-regular"),g.classList.add("fa-solid")),L.classList.add("isFavorite")})};return{initDates:n,initProjectTabs:d,initProgressBar:e,initProjectTable:a,initDuplicateProjectModal:c,initTodoStatusSortable:f,initSelectFields:s,removeStatus:t,addToDoStatus:r,saveCroppie:w,clearCroppie:o,readURL:h,initGanttChart:i,setUpKanbanColumns:y,initProjectsKanban:E,favoriteProject:k}}();leantime.retrosCanvasController=leantime.canvasController.createController("retros",{nbRows:1});leantime.risksCanvasController=leantime.canvasController.createController("risks",{nbRows:2});leantime.sbCanvasController=leantime.canvasController.createController("sb",{rowSelectors:["stakeholderRow","financialsRow","culturechangeRow"]});leantime.smCanvasController=leantime.canvasController.createController("sm");leantime.sqCanvasController=leantime.canvasController.createController("sq");leantime.swotCanvasController=leantime.canvasController.createController("swot",{nbRows:2});leantime.kanbanController=function(){var l=function(o){var w=o.closest(".quickaddContainer"),i=w.querySelector("[data-quickadd-form]"),p=i.querySelector("[data-quickadd-input]"),y=w.querySelector(".quickAddLink"),E=i.classList.contains("active");E?(i.classList.remove("active"),i.style.display="none",i.dataset.submitting="false",y.style.display="",y.setAttribute("aria-expanded","false")):(i.classList.add("active"),i.style.display="block",i.dataset.submitting="false",y.style.display="none",y.setAttribute("aria-expanded","true"),p.focus())},n=function(){document.addEventListener("keydown",function(o){var w=o.target;if(w.matches("[data-quickadd-input]")){var i=w.closest("[data-quickadd-form]");if(i.dataset.submitting==="true"){o.preventDefault();return}var p=i.querySelector("[data-stay-open-input]");if(o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),i.dataset.submitting="true",p.value="0",i.submit()),o.key==="Enter"&&o.shiftKey&&(o.preventDefault(),i.dataset.submitting="true",p.value="1",i.submit()),o.key==="Escape"){o.preventDefault();var y=i.closest(".quickaddContainer"),E=y.querySelector(".quickAddLink");l(E),w.value=""}}})},d=function(){document.addEventListener("click",function(o){var w=document.querySelectorAll("[data-quickadd-form].active");w.forEach(function(i){var p=i.closest(".quickaddContainer"),y=p.querySelector(".quickAddLink"),E=i.querySelector("[data-quickadd-input]"),k=i.contains(o.target)||y.contains(o.target);if(i.dataset.submitting!=="true")if(!k&&E.value.trim()!==""){var _=i.querySelector("[data-stay-open-input]");_.value="0",i.dataset.submitting="true",i.submit()}else k||l(y)})})},c=function(o){var w=o.querySelectorAll(".column .contentInner");if(w.length!==0){w.forEach(function(p){p.style.minHeight="",p.style.height=""});var i=0;w.forEach(function(p){var y=p.offsetHeight;y>i&&(i=y)}),i>0&&w.forEach(function(p){p.style.minHeight=i+"px"})}},e=function(o){var w=o.querySelectorAll(".column .contentInner");w.forEach(function(i){i.style.minHeight="",i.style.height=""})},a=function(){requestAnimationFrame(function(){requestAnimationFrame(function(){var o=document.querySelectorAll(".kanban-swimlane-content:not(.collapsed)");o.forEach(function(w){c(w)})})})},f=function(o){var w=document.getElementById("swimlane-row-"+o),i=document.querySelector('.kanban-swimlane-sidebar[data-swimlane-id="'+o+'"]'),p=document.getElementById("swimlane-content-"+o);if(!w||!i||!p){console.error("Swimlane elements not found for ID:",o);return}var y=i.getAttribute("aria-expanded")==="true",E=!y;i.setAttribute("aria-expanded",E.toString());var k=i.querySelector(".kanban-lane-chevron i");k&&(k.className=E?"fa fa-chevron-down":"fa fa-chevron-right"),w.setAttribute("data-expanded",E.toString()),E?(p.classList.remove("collapsed"),c(p)):(p.classList.add("collapsed"),c(p)),fetch(leantime.appUrl+"/api/submenu",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({submenu:"swimlane_"+o,state:E?"open":"closed"})})},s=function(){document.addEventListener("keydown",function(o){var w=o.target.closest("[data-swimlane-id]");if(w){var i=w.getAttribute("data-swimlane-id");if((o.key==="Enter"||o.key===" ")&&(o.preventDefault(),f(i)),o.key==="ArrowDown"||o.key==="ArrowUp"){o.preventDefault();var p=Array.from(document.querySelectorAll("[data-swimlane-id]")),y=p.indexOf(w);o.key==="ArrowDown"&&y<p.length-1?p[y+1].focus():o.key==="ArrowUp"&&y>0&&p[y-1].focus()}}})},t=function(){if(!(typeof tippy>"u")){var o={allowHTML:!0,placement:"top",arrow:!0,theme:"light-border",trigger:"mouseenter focus",delay:[500,0]},w=[".status-segment[data-tippy-content]",".time-indicator[data-tippy-content]",".kanban-lane-count[data-tippy-content]",".tshirt-icon[data-tippy-content]",".thermometer-icon[data-tippy-content]",".user-avatar[data-tippy-content]",".type-icon[data-tippy-content]",".sprint-icon[data-tippy-content]",".milestone-icon[data-tippy-content]",".swimlane-header-label[data-tippy-content]"];w.forEach(function(i){var p=document.querySelectorAll(i);p.length>0&&tippy(p,o)})}},r=function(){"ontouchstart"in window&&document.querySelectorAll(".widgettitle").forEach(function(o){o.addEventListener("click",function(w){w.target.closest(".dropdown-toggle, .dropdown-menu")||this.classList.toggle("count-visible")})})},u=function(){var o=document.querySelectorAll(".kanban-swimlane-content.collapsed");o.forEach(function(w){c(w)})},h=function(){var o=document.querySelectorAll(".kanban-swimlane-row");if(o.length!==0&&!(window.innerWidth<=768)){var w=120,i=function(){o.forEach(function(p){var y=p.querySelector(".kanban-swimlane-sidebar"),E=p.querySelector(".kanban-swimlane-sidebar-inner"),k=p.querySelector(".kanban-swimlane-sentinel");if(!(!y||!E||!k)){var _=k.getBoundingClientRect(),L=y.getBoundingClientRect(),g=_.top<w&&L.bottom>w+100;if(g){var C=w-L.top,x=L.height-E.offsetHeight-12;C=Math.min(C,Math.max(0,x)),y.classList.add("is-sticky"),E.style.transform="translateY("+C+"px)"}else y.classList.remove("is-sticky"),E.style.transform=""}})};window.addEventListener("scroll",i,{passive:!0}),i()}};return document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){n(),d(),s(),t(),h(),r(),u(),a()}):(n(),d(),s(),t(),h(),r(),u(),a()),{toggleQuickAdd:l,initQuickAddKeyboard:n,initClickOutsideSave:d,toggleSwimlane:f,initSwimlaneKeyboard:s,initProgressBarTooltips:t,equalizeColumnHeights:c,resetColumnHeights:e,initCollapsedColumnHeights:u,initExpandedColumnHeights:a,initStickySwimlaneSidebars:h,initMobileColumnCountToggle:r}}();leantime.timesheetsController=function(){var l=function(d){document.addEventListener("DOMContentLoaded",function(){var c=document.querySelector("#allTimesheetsTable");if(c){var e=jQuery("#allTimesheetsTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,stateSave:!0,displayLength:100}),a=new jQuery.fn.dataTable.Buttons(e,{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(s,t,r,u){return typeof u.dataset.order<"u"&&(s=u.dataset.order),s}}}},{extend:"colvis",columns:":not(.noVis)"}]}),f=document.querySelector("#tableButtons");f&&f.appendChild(a.container()[0]),jQuery("#allTimesheetsTable").on("column-visibility.dt",function(s,t,r,u){e.draw(!1)})}})},n=function(){var d={sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(c){c.style.display=""})},afterShowCont:function(){jQuery(".editTimeModal").nyroModal(d)},beforeClose:function(){location.reload()}},titleFromIframe:!0};jQuery(".editTimeModal").nyroModal(d)};return{initTimesheetsTable:l,initEditTimeModal:n}}();leantime.valueCanvasController=leantime.canvasController.createController("value",{nbRows:3});leantime.wikiController=function(){var l=function(n,d){jQuery(n).jstree({core:{expand_selected_onload:!0,themes:{dots:!1}},state:{key:"tree_state"},types:{default:{icon:"far fa-file-alt"}},plugins:["wholerow","types","state"]}),jQuery(n).on("ready.jstree",function(c,e){jQuery(this).jstree("deselect_all"),jQuery(this).jstree("select_node","treenode_"+d,!0),jQuery(this).jstree("save_state")}),jQuery(n).on("activate_node.jstree",function(c,e){jQuery(this).jstree("save_state"),!(e==null||e.node==null||e.node.id==null)&&(window.location.href=e.node.a_attr.href)})};return{initTree:l}}();(function(){var l={duration:3200,close:"",location:"default",style:"success",size:"medium"},n={success:{bg:"var(--green)",color:"#fff",border:"var(--green)"},error:{bg:"var(--red)",color:"#fff",border:"var(--red)"},warning:{bg:"var(--yellow)",color:"#333",border:"var(--yellow)"},notice:{bg:"var(--accent1)",color:"#fff",border:"var(--accent1)"},default:{bg:"var(--secondary-background)",color:"var(--primary-font-color)",border:"var(--main-border-color)"}},d=!1;function c(){if(!d){d=!0;var t=document.createElement("style");t.textContent="#growls-default {  position: fixed; top: 70px; right: 20px; z-index: 100060;  display: flex; flex-direction: column; gap: 8px;  pointer-events: none; max-width: 380px;}.lt-toast {  pointer-events: auto; padding: 12px 36px 12px 16px; border-radius: var(--box-radius, 8px);  box-shadow: var(--regular-shadow, 0 2px 8px rgba(0,0,0,.15)); font-size: var(--font-size-s, 13px);  line-height: 1.4; position: relative; overflow: hidden;  opacity: 0; transform: translateX(30px);  transition: opacity .25s ease, transform .25s ease;}.lt-toast.lt-toast-visible {  opacity: 1; transform: translateX(0);}.lt-toast.lt-toast-outgoing {  opacity: 0; transform: translateX(30px);}.lt-toast-close {  position: absolute; top: 8px; right: 10px; cursor: pointer;  font-size: 18px; line-height: 1; opacity: .7;}.lt-toast-close:hover { opacity: 1; }.lt-toast-title {  font-weight: 600; margin-bottom: 2px;}.lt-toast-message { word-break: break-word; }",document.head.appendChild(t)}}function e(t){var r="growls-"+t,u=document.getElementById(r);return u||(u=document.createElement("div"),u.id=r,document.body.appendChild(u)),u}function a(t){c(),t=t||{};var r={};for(var u in l)r[u]=l[u];for(var h in t)r[h]=t[h];var o=n[r.style]||n.default,w=e(r.location),i=document.createElement("div");i.className="lt-toast",i.style.background=o.bg,i.style.color=o.color,i.style.borderLeft="4px solid "+o.border,i.innerHTML='<div class="lt-toast-close">'+r.close+"</div>"+(r.title?'<div class="lt-toast-title">'+r.title+"</div>":"")+'<div class="lt-toast-message">'+(r.message||"")+"</div>",w.appendChild(i);var p=i.querySelector(".lt-toast-close");p.addEventListener("click",function(_){_.stopPropagation(),k(i)}),i.addEventListener("contextmenu",function(_){_.preventDefault(),k(i)});var y=null;i.addEventListener("mouseenter",function(){y&&(clearTimeout(y),y=null)}),i.addEventListener("mouseleave",function(){E()}),i.offsetHeight,i.classList.add("lt-toast-visible");function E(){y=setTimeout(function(){k(i)},r.duration)}function k(_){y&&(clearTimeout(y),y=null),_.classList.remove("lt-toast-visible"),_.classList.add("lt-toast-outgoing"),_.addEventListener("transitionend",function(){_.parentNode&&_.parentNode.removeChild(_)}),setTimeout(function(){_.parentNode&&_.parentNode.removeChild(_)},500)}E()}var f=window.leantime||(window.leantime={});f.toast={show:a};var s=function(t){return a(t)};s.error=function(t){return t=t||{},t.style="error",t.title=t.title||"Error!",a(t)},s.notice=function(t){return t=t||{},t.style="notice",t.title=t.title||"Notice!",a(t)},s.warning=function(t){return t=t||{},t.style="warning",t.title=t.title||"Warning!",a(t)},window._growlShim=s})();window.leantime=window.leantime||{};window.leantime.companyColor=(document.querySelector("meta[name=theme-color]")||{}).content||null;window.leantime.colorScheme=(document.querySelector("meta[name=color-scheme]")||{}).content||null;window.leantime.theme=(document.querySelector("meta[name=theme]")||{}).content||null;window.leantime.appUrl=(document.querySelector("meta[name=identifier-URL]")||{}).content||null;window.leantime.version=(document.querySelector("meta[name=leantime-version]")||{}).content||null;var $=window.leantime;$.replaceSVGColors=function(){$.companyColor!="#1b75bb"&&document.querySelectorAll("svg > *").forEach(function(l){l.getAttribute("fill")=="#1b75bb"&&l.setAttribute("fill",$.companyColor)})};$.handleAsyncResponse=function(l){l!==void 0&&l.result!==void 0&&l.result.html!==void 0&&document.body.insertAdjacentHTML("beforeend",l.result.html)};document.addEventListener("DOMContentLoaded",function(){$.replaceSVGColors(),document.querySelectorAll(".confetti").forEach(function(d){d.addEventListener("click",function(){confetti.start()})}),tippy("[data-tippy-content]");var l=document.querySelector(".login-alert .alert");if(l&&l.textContent!==""){var n=document.querySelector(".login-alert");n&&(n.style.display="")}document.addEventListener("scroll",function(){document.documentElement.dataset.scroll=window.scrollY})});htmx.onLoad(function(l){tippy("[data-tippy-content]"),$.replaceSVGColors()});window.addEventListener("HTMX.ShowNotification",function(l){fetch($.appUrl+"/notifications/getLatestGrowl",{credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(n){return n.text()}).then(function(n){var d=JSON.parse(n);d.notification&&d.notification!=="undefined"&&$.toast.show({message:d.notification,style:d.notificationType})})});document.addEventListener("click",function(l){var n=l.target.closest('[data-toggle="dropdown"]');if(document.querySelectorAll(".dropdown.open, .btn-group.open").forEach(function(c){(!n||!c.contains(n))&&c.classList.remove("open")}),n){l.preventDefault(),l.stopPropagation();var d=n.closest(".dropdown, .btn-group");d&&d.classList.toggle("open")}});document.addEventListener("keydown",function(l){l.key==="Escape"&&document.querySelectorAll(".dropdown.open, .btn-group.open").forEach(function(n){n.classList.remove("open")})});(function(){var l=document.createElement("style");l.textContent=".modal.in {  display: block !important; position: fixed; top: 0; left: 0; right: 0; bottom: 0;  z-index: 100050; overflow-x: hidden; overflow-y: auto;}.modal .modal-dialog {  position: relative; margin: 60px auto; max-width: 600px;}.modal .modal-dialog.modal-lg { max-width: 900px; }.modal .modal-content {  background: var(--secondary-background, #fff); border-radius: var(--box-radius, 8px);  box-shadow: var(--large-shadow, 0 4px 20px rgba(0,0,0,.2)); padding: 20px;}.modal .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }.modal .modal-header .close { background: none; border: none; font-size: 24px; cursor: pointer; color: var(--primary-font-color); }.modal .modal-body { margin-bottom: 15px; }.modal .modal-footer { display: flex; justify-content: flex-end; gap: 8px; }",document.head.appendChild(l);var n=null;function d(e){e&&(e.style.display="block",e.offsetHeight,e.classList.add("in"),document.body.classList.add("modal-open"),n||(n=document.createElement("div"),n.className="modal-backdrop fade in",n.style.cssText="display:block;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:100049;",document.body.appendChild(n),n.addEventListener("click",function(){var a=document.querySelector(".modal.in");a&&c(a)})))}function c(e){e&&(e.classList.remove("in"),e.style.display="none",document.body.classList.remove("modal-open"),n&&n.parentNode&&(n.parentNode.removeChild(n),n=null))}document.addEventListener("click",function(e){var a=e.target.closest('[data-dismiss="modal"]');if(a){var f=a.closest(".modal");f&&c(f)}}),document.addEventListener("keydown",function(e){if(e.key==="Escape"){var a=document.querySelector(".modal.in");a&&c(a)}}),typeof jQuery<"u"&&(jQuery.fn.modal=function(e){return this.each(function(){e==="show"?d(this):e==="hide"?c(this):e==="toggle"&&(this.classList.contains("in")?c(this):d(this))}),this}),window.leantime=window.leantime||{},leantime.bootstrapModal={show:d,hide:c}})();(function(){function l(n,d){d=d||{};var c=n.querySelectorAll(":scope > ul > li > a"),e=[];if(c.forEach(function(f){var s=f.getAttribute("href");if(s&&s.charAt(0)==="#"){var t=n.querySelector(s);t&&e.push(t)}}),e.length!==0){var a=d.active||0;(typeof a!="number"||a<0||a>=e.length)&&(a=0),e.forEach(function(f,s){f.style.display=s===a?"":"none"}),c.forEach(function(f,s){s===a?f.parentElement.classList.add("ui-tabs-active","ui-state-active","active"):f.parentElement.classList.remove("ui-tabs-active","ui-state-active","active")}),c.forEach(function(f,s){f.addEventListener("click",function(t){t.preventDefault(),e.forEach(function(r){r.style.display="none"}),c.forEach(function(r){r.parentElement.classList.remove("ui-tabs-active","ui-state-active","active")}),e[s]&&(e[s].style.display=""),f.parentElement.classList.add("ui-tabs-active","ui-state-active","active")})}),d.create&&d.create.call(n,{},{tab:c[a],panel:e[a]})}}typeof jQuery<"u"&&(jQuery.fn.tabs=function(n){return this.each(function(){l(this,n)}),this})})();(function(){typeof jQuery>"u"||(jQuery.fn.chosen=function(l){return this.each(function(){var n=this;if(n.tagName==="SELECT"){if(n._slimSelect){try{n._slimSelect.destroy()}catch{}n._slimSelect=null}if(l!=="destroy"&&typeof SlimSelect<"u")try{n._slimSelect=new SlimSelect({select:n,showSearch:n.options&&n.options.length>8,allowDeselect:!n.hasAttribute("required")})}catch{}}}),this})})();leantime.snippets=function(){var l=function(t){var r=document.getElementById(t);r.select(),r.setSelectionRange(0,99999),navigator.clipboard.writeText(r.value),leantime.toast.show({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},n=function(t){navigator.clipboard.writeText(t),leantime.toast.show({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},d=function(){document.querySelectorAll(".confetti").forEach(function(t){t.addEventListener("click",function(){confetti.start()})})},c=function(t){var r=document.getElementById("accordion_toggle_"+t),u=r?r.querySelector("i.fa"):null,h="accordion_content-"+t,o="closed",w=document.getElementById("accordion_content-"+t);u&&u.classList.contains("fa-angle-right")?(u.classList.remove("fa-angle-right"),u.classList.add("fa-angle-down"),w&&(w.style.display=""),o="open"):u&&(u.classList.remove("fa-angle-down"),u.classList.add("fa-angle-right"),w&&(w.style.display="none"),o="closed");var i=new FormData;i.append("submenu",h),i.append("state",o),fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",body:i,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}})},e=function(t){var r=document.getElementById("themeStyleSheet"),u=r.getAttribute("href");t=="light"?(u=u.replace("dark.css","light.css"),r.setAttribute("href",u)):t=="dark"&&(u=u.replace("light.css","dark.css"),r.setAttribute("href",u))},a=function(t){var r=document.getElementById("themeStyleSheet"),u=r.getAttribute("href");t=="minimal"?(u=u.replace("default","minimal"),r.setAttribute("href",u)):t=="default"&&(u=u.replace("minimal","default"),r.setAttribute("href",u))},f=function(t){document.getElementById("fontStyleSetter").innerHTML=":root { --primary-font-family: '"+t+"', 'Helvetica Neue', Helvetica, sans-serif; }"},s=function(t,r){document.getElementById("colorSchemeSetter").innerHTML=":root { --accent1: "+t+"; --accent2: "+r+"}"};return{copyUrl:l,copyToClipboard:n,initConfettiClick:d,accordionToggle:c,toggleTheme:e,toggleFont:f,toggleColors:s,toggleBg:a}}();leantime.modals=function(){var l=!1;function n(){return document.getElementById("global-modal")}function d(){return document.getElementById("global-modal-content")}function c(){return document.getElementById("global-modal-box")}function e(){var g=document.getElementById("modal-blur-overlay");return g||(g=document.createElement("div"),g.id="modal-blur-overlay",g.addEventListener("click",function(){leantime.modals.closeModal()}),document.body.appendChild(g)),g}function a(){e().classList.add("active");var g=document.querySelector(".mainwrapper");g&&g.setAttribute("inert","")}function f(){e().classList.remove("active");var g=document.querySelector(".mainwrapper");g&&g.removeAttribute("inert")}function s(g){return/showTicket|ideaDialog|articleDialog/.test(g)}function t(){var g=d();g&&(g.innerHTML='<div style="display:flex;justify-content:center;align-items:center;padding:60px 40px;"><span class="tw:loading tw:loading-spinner tw:loading-lg"></span></div>')}function r(g){for(var C=g.querySelectorAll("script"),x=0;x<C.length;x++){for(var H=C[x],v=document.createElement("script"),j=0;j<H.attributes.length;j++)v.setAttribute(H.attributes[j].name,H.attributes[j].value);v.textContent=H.textContent,H.parentNode.replaceChild(v,H)}}function u(g){if(/<html[\s>]/i.test(g)||/<!DOCTYPE/i.test(g)){var C=new DOMParser().parseFromString(g,"text/html"),x=C.querySelector(".primaryContent");return x?x.innerHTML:C.body?C.body.innerHTML:g}return g}function h(g){g.querySelectorAll(".showDialogOnLoad").forEach(function(C){C.style.display=""}),window.htmx&&window.htmx.process(g),window.tippy&&tippy(g.querySelectorAll("[data-tippy-content]"))}function o(g){var C=g.headers.get("HX-Trigger");if(C&&C.indexOf("HTMX.closemodal")!==-1)return C.indexOf("HTMX.ShowNotification")!==-1&&window.dispatchEvent(new CustomEvent("HTMX.ShowNotification")),y(),Promise.resolve(null);var x=g.headers.get("HX-Redirect");return x?(y(),window.location.href=x,Promise.resolve(null)):g.text()}function w(){var g=d();if(g&&window.leantime&&window.leantime.tiptapController&&window.leantime.tiptapController.registry)try{window.leantime.tiptapController.registry.destroyWithin(g)}catch{}}function i(g){if(g!==null){var C=d();C&&(w(),C.innerHTML=u(g),r(C),h(C))}}function p(g){var C=n(),x=c();if(C){s(g)?(x.style.maxWidth="1024px",x.style.width="95vw",x.style.minHeight="80vh"):(x.style.maxWidth="48rem",x.style.width="",x.style.minHeight=""),t(),C.open||(a(),C.show()),l=!0;var H=leantime.appUrl.replace(/\/$/,""),v=g.indexOf("http")===0?g:H+g;fetch(v,{credentials:"include",headers:{"is-modal":"true","X-Requested-With":"XMLHttpRequest"}}).then(o).then(i).catch(function(j){console.error("modalManager: load error",j);var R=d();R&&(R.innerHTML='<div style="padding:24px;text-align:center;"><p>Could not load content.</p></div>')})}}function y(){var g=n();if(g&&l){l=!1,w(),f();try{history.pushState("",document.title,window.location.pathname+window.location.search)}catch{}if(g.open&&g.close(),typeof window.globalModalCallback=="function"){var C=window.globalModalCallback;window.globalModalCallback=null,C()}else location.reload()}}var E=function(){var g=window.location.hash.substring(1);if(g){var C=g.split("/");C.length>2&&C[1]!=="tab"&&p(g)}},k=function(){y()},_=function(g){typeof g=="function"&&(window.globalModalCallback=g)},L=function(g){var C=leantime.appUrl.replace(/\/$/,""),x=g;g.indexOf(C)===0&&(x=g.substring(C.length)),p(x)};return{openModal:E,setCustomModalCallback:_,closeModal:k,openByUrl:L,renderContent:i}}();document.addEventListener("DOMContentLoaded",function(){leantime.modals.openModal(),document.addEventListener("click",function(n){var d=n.target.closest('a[href^="#/"], a.formModal, a.ticketModal');if(d){var c=d.getAttribute("href");if(c){if(c.indexOf("#/")===0){n.preventDefault(),n.stopPropagation(),window.globalModalCallback=function(){location.reload()};var e=c.substring(1);try{history.pushState("",document.title,window.location.pathname+window.location.search+c)}catch{}leantime.modals.openByUrl(e)}else if(d.classList.contains("formModal")||d.classList.contains("ticketModal")){if(c.indexOf("javascript:")===0)return;n.preventDefault(),n.stopPropagation(),window.globalModalCallback=function(){location.reload()},leantime.modals.openByUrl(c)}}}},!0);var l=document.getElementById("global-modal");l&&(l.addEventListener("keydown",function(n){n.key==="Escape"&&(n.preventDefault(),leantime.modals.closeModal())}),l.addEventListener("cancel",function(n){n.preventDefault(),leantime.modals.closeModal()}),l.addEventListener("close",function(){leantime.modals.closeModal()})),document.addEventListener("submit",function(n){var d=n.target;if(!(!d||!d.closest||!d.closest("#global-modal-content"))&&d.getAttribute("method")!=="dialog"&&!(d.hasAttribute("hx-post")||d.hasAttribute("hx-get")||d.hasAttribute("hx-put")||d.hasAttribute("hx-delete"))){n.preventDefault();var c=(d.getAttribute("method")||"GET").toUpperCase(),e=d.getAttribute("action")||window.location.href;document.getElementById("global-modal-content");var a={method:c,credentials:"include",headers:{"is-modal":"true","X-Requested-With":"XMLHttpRequest"}};if(c==="POST")a.body=new FormData(d);else{var f=new URLSearchParams(new FormData(d));e+=(e.indexOf("?")===-1?"?":"&")+f.toString()}fetch(e,a).then(function(s){var t=s.headers.get("HX-Trigger");if(t&&t.indexOf("HTMX.closemodal")!==-1)return t.indexOf("HTMX.ShowNotification")!==-1&&window.dispatchEvent(new CustomEvent("HTMX.ShowNotification")),leantime.modals.closeModal(),null;var r=s.headers.get("HX-Redirect");return r?(leantime.modals.closeModal(),window.location.href=r,null):s.text()}).then(function(s){leantime.modals.renderContent(s)}).catch(function(s){console.error("modalManager: form submit error",s)})}},!0)});window.addEventListener("hashchange",function(){leantime.modals.openModal()});window.addEventListener("closeModal",function(){leantime.modals.closeModal()});document.addEventListener("HTMX.closemodal",function(){leantime.modals.closeModal()});leantime.modals.nmManual=function(l,n){typeof n=="function"&&(n=n()),n&&n.callbacks&&typeof n.callbacks.beforeClose=="function"&&(window.globalModalCallback=n.callbacks.beforeClose),leantime.modals.openByUrl(l)};leantime.modals.nmTop=function(){return{close:function(){leantime.modals.closeModal()},elts:{cont:document.getElementById("global-modal-box"),bg:document.querySelector("#global-modal .tw\\:modal-backdrop"),load:document.querySelector("#global-modal .tw\\:loading"),all:document.getElementById("global-modal")}}};leantime.modals.initNyroModal=function(l,n){l instanceof HTMLElement&&(l=[l]),Array.prototype.forEach.call(l,function(d){if(!d.dataset.modalManagerInit){d.dataset.modalManagerInit="true",n&&n.callbacks&&(d._modalManagerOpts=n);var c=d.getAttribute("href");c&&d.addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),n&&n.callbacks&&typeof n.callbacks.beforeClose=="function"&&(window.globalModalCallback=n.callbacks.beforeClose),c.indexOf("#")===0){var a=c.substring(1);try{history.pushState("",document.title,window.location.pathname+window.location.search+c)}catch{}leantime.modals.openByUrl(a)}else leantime.modals.openByUrl(c)})}})};typeof jQuery<"u"&&(jQuery.nmManual=leantime.modals.nmManual,jQuery.nmTop=leantime.modals.nmTop,jQuery.fn.nyroModal=function(l){return leantime.modals.initNyroModal(this.toArray(),l),this});leantime.dateController=function(){function l(c){var e=leantime.i18n.__("language.dayNames").split(",");leantime.i18n.__("language.dayNamesShort").split(",");var a=leantime.i18n.__("language.dayNamesMin").split(","),f=leantime.i18n.__("language.monthNames").split(","),s=leantime.i18n.__("language.monthNamesShort").split(","),t=parseInt(leantime.i18n.__("language.firstDayOfWeek"),10)||0;return{dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr"),locale:{firstDayOfWeek:t,weekdays:{shorthand:a,longhand:e},months:{shorthand:s,longhand:f}},allowInput:!0,onChange:c?function(r,u,h){c.call(h.input,u,h)}:void 0}}var n=function(c,e,a){var f=typeof c=="string"?document.querySelector(c):c,s=typeof e=="string"?document.querySelector(e):e;if(!(!f||!s)&&!(f.hasAttribute("readonly")||s.hasAttribute("readonly"))){var t=l();t.onChange=function(o){o.length>0&&(h.set("minDate",o[0]),s.value||h.setDate(o[0],!0))};var r=l();r.onChange=function(o){o.length>0&&u.set("maxDate",o[0])};var u=flatpickr(f,t),h=flatpickr(s,r)}},d=function(c,e){var a=typeof c=="string"?document.querySelectorAll(c):c?[c]:[];a.forEach(function(f){if(f&&!f.hasAttribute("readonly")){var s=(f.value||"").trim(),t=s&&!/\d/.test(s);t&&(f.setAttribute("placeholder",s),f.value=""),flatpickr(f,l(e))}})};return{initDateRangePicker:n,initDatePicker:d,getBaseDatePickerConfig:l}}();(function(){if(!(typeof jQuery>"u")){var l=new WeakMap;jQuery.datepicker=jQuery.datepicker||{},jQuery.datepicker.setDefaults=function(){},jQuery.datepicker.parseDate=function(n,d){if(!d)return null;var c=leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr");return flatpickr.parseDate(d,c)},jQuery.datepicker.formatDate=function(n,d){if(!d)return"";var c=leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr");return flatpickr.formatDate(d,c)},jQuery.fn.datepicker,jQuery.fn.datepicker=function(n,d){return this.each(function(){var c=this;if(typeof n=="string"){var e=l.get(c);if(!e)return;if(n==="option"||n==="setDate")if(d==="minDate"||n==="setDate"){var a=arguments.length>2?arguments[2]:d;n==="setDate"?e.setDate(a,!0):e.set("minDate",a)}else d==="maxDate"&&e.set("maxDate",arguments[2]);return}if(!c.hasAttribute("readonly")){var f=leantime.dateController.getBaseDatePickerConfig();n&&n.onSelect&&(f.onChange=function(t,r,u){n.onSelect.call(c,r,u)});var s=flatpickr(c,f);l.set(c,s)}})}}})();leantime.dateHelper=function(){var l={jquery:{},luxon:{},flatpickr:{}};l.jquery={d:"dd",D:"D",j:"d",l:"DD",N:"",S:"",w:"",z:"o",W:"",F:"MM",m:"mm",M:"M",n:"m",t:"",L:"",o:"yy",Y:"yy",y:"y",a:"",A:"",B:"",g:"",G:"",h:"",H:"",i:"",s:"",u:"",e:"",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"@"},l.flatpickr={d:"d",D:"D",j:"j",l:"l",N:"",S:"",w:"w",z:"",W:"W",F:"F",m:"m",M:"M",n:"n",t:"",L:"",o:"Y",Y:"Y",y:"y",a:"K",A:"K",B:"",g:"G",G:"H",h:"h",H:"H",i:"i",s:"S",u:"",e:"",I:"",O:"",P:"",T:"",Z:"Z",c:"",r:"",U:"U"},l.luxon={d:"dd",D:"ccc",j:"d",l:"cccc",N:"c",S:"",w:"c",z:"o",W:"WW",F:"MMMM",m:"LL",M:"LLL",n:"L",t:"",L:"",o:"kk",Y:"yyyy",y:"yy",a:"a",A:"a",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",v:"SSS",e:"z",I:"",O:"ZZ",P:"ZZ",T:"ZZZ",Z:"",c:"",r:"",U:"X"};var n=function(c,e){let a=l[e],f="";return c.split("").forEach(function(s){a[s]!==void 0?f=f+""+a[s]:f=f+""+s}),f},d=function(c,e){let a=leantime.i18n.__("language."+c);return n(a,e)};return{mapFormat:n,getFormatFromSettings:d}}();leantime.authController=function(){var l=function(n){typeof n===void 0&&(n="body"),jQuery(n).find("input").not(".filterBar input").prop("readonly",!0),jQuery(n).find("input").not(".filterBar input").prop("disabled",!0),jQuery(n).find("select").not(".filterBar select, .mainSprintSelector").prop("readonly",!0),jQuery(n).find("select").not(".filterBar select, .mainSprintSelector").prop("disabled",!0),jQuery(n).find("textarea").not(".filterBar textarea").prop("disabled",!0),jQuery(n).find("a.delete").remove(),jQuery(n).find(".quickAddLink").hide(),jQuery(n).find(".tiptap-editor").length&&window.leantime&&window.leantime.tiptapController&&jQuery(n).find(".tiptap-editor").each(function(){var d=leantime.tiptapController.registry.get(this);d&&d.setEditable(!1)}),jQuery(n).find(".tiptap-toolbar").hide(),jQuery(n).find(".ticketDropdown a").removeAttr("data-toggle"),jQuery("#mainToggler").hide(),jQuery(".commentBox").hide(),jQuery(".deleteComment, .replyButton").hide(),jQuery(n).find(".dropdown i").removeClass("fa-caret-down")};return{makeInputReadonly:l}}();leantime.commentsController=function(){var l=function(){jQuery(".commentBox").show(),jQuery("#comments .replies .commentBox").hide(),jQuery(".deleteComment, .replyButton").show(),jQuery(".commentReply .tiptap-wrapper").each(function(){var d=jQuery(this).find(".tiptap-editor")[0];if(d&&window.leantime&&window.leantime.tiptapController){var c=leantime.tiptapController.registry.get(d);c&&c.setEditable(!0)}}),jQuery(".commentReply .tiptap-toolbar").show(),jQuery(".commenterFields input").prop("readonly",!1),jQuery(".commenterFields input").prop("disabled",!1),jQuery(".commenterFields textarea").prop("readonly",!1),jQuery(".commenterFields textarea").prop("disabled",!1)},n=function(d){d==0?jQuery("#mainToggler").hide():jQuery("#mainToggler").show(),window.leantime&&window.leantime.tiptapController&&window.leantime.tiptapController.registry&&jQuery(".commentBox .tiptap-editor").each(function(){leantime.tiptapController.registry.destroy(this)}),jQuery(".commentBox .tiptap-wrapper").remove(),jQuery(".commentBox textarea").remove(),jQuery(".commentBox").hide("fast",function(){}),jQuery("#comment"+d+" .commentReply").prepend('<textarea rows="5" cols="75" name="text" class="tiptapSimple"></textarea>'),window.leantime&&window.leantime.tiptapController&&leantime.tiptapController.initSimpleEditor(),jQuery("#comment"+d).show("fast"),jQuery("#father").val(d)};return{enableCommenterForms:l,toggleCommentBoxes:n}}();leantime.ticketsController=function(){function l(){let T=[];jQuery(".sortableTicketList").each(function(D){jQuery(this).find(".column").each(function(m){T[m]===void 0&&(T[m]=0);var b=jQuery(this).find(".moveable").length;T[m]+=b})}),jQuery(".widgettitle .count").each(function(D){jQuery(this).text(T[D])})}function n(){jQuery(".kanban-swimlane-row").each(function(){var T=jQuery(this),D=T.attr("id");if(D){D.replace("swimlane-row-","");var m=T.find(".kanban-swimlane-content"),b=m.find(".moveable").length,Q=T.find(".kanban-swimlane-sidebar");Q.find(".kanban-lane-count").text(b);var S=Q.attr("aria-label")||"",M=S.replace(/\d+ tasks/,b+" tasks");Q.attr("aria-label",M)}}),d()}function d(){jQuery(".kanban-swimlane-row").each(function(){var T=jQuery(this),D=T.find(".kanban-swimlane-content"),m=T.find(".micro-progress-bar .progress-segments");if(m.length){var b={},Q=0;D.find(".contentInner").each(function(){var M=jQuery(this),q=M.attr("class")||"",U=q.match(/status_(-?\d+)/);if(U){var B=U[1],F=M.find(".moveable").length;F>0&&(b[B]=F,Q+=F)}});var S=m.find(".status-segment");if(Q===0){S.css("flex","0 1 0%").find(".segment-count").text(""),S.attr("data-tippy-content","");return}S.each(function(){var M=jQuery(this),q=M.attr("class");if(q){var U=q.match(/status-(-?\d+)/);if(U){var B=U[1],F=b[B]||0,A=F/Q*100;M.css("flex",A+" 1 0%");var W=M.find(".segment-count");W.length&&W.text(F>0?F:"");var P=M.attr("data-tippy-content")||"",N=P.match(/^([^:]+):/),Y=N?N[1]:"Status "+B;M.attr("data-tippy-content",F>0?Y+": "+F:"")}}})}})}var c=function(T,D){var m=jQuery("#ticket_"+T);if(!m.length){console.warn("Card not found for ticket ID:",T);return}var b=m.closest(".contentInner"),Q=b.attr("class")||"",S=Q.match(/status_(\d+)/);if(!S){console.warn("Could not determine status for ticket:",T),location.reload();return}var M=S[1],q=jQuery("#kanboard-"+D+" .contentInner.status_"+M);if(!q.length){console.warn("Target swimlane not found:",D,M),location.reload();return}b[0]!==q[0]&&(m.addClass("card-moving-out"),setTimeout(function(){m.detach().appendTo(q),m.removeClass("card-moving-out").addClass("card-moving-in"),l(),n(),q.sortable&&q.sortable("refresh"),setTimeout(function(){m.removeClass("card-moving-in")},300)},200))},e=function(T,D){var m=jQuery(T).val();leantime.ticketsRepository.updateRemainingHours(D,m,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.remaining_hours_updated"),style:"success"})})},a=function(T,D){var m=jQuery(T).val();leantime.ticketsRepository.updatePlannedHours(D,m,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.planned_hours_updated"),style:"success"})})},f=function(){jQuery(".filterBar").toggle()},s=function(T,D,m){function b(Q){return String(Q).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}jQuery(document).ready(function(){if(m===!1)var Q=new Gantt("#gantt",T,{header_height:55,column_width:20,step:24,view_modes:["Day","Week","Month"],bar_height:40,static_progress_indicator:!0,bar_corner_radius:10,arrow_curve:10,padding:20,view_mode:"Month",date_format:leantime.i18n.__("language.momentJSDate"),language:leantime.i18n.__("language.code").slice(0,2),additional_rows:5,custom_popup_html:function(S){var M=S._end,q=jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),new Date(M)),U='<div class="details-container" style="min-width:600px;"> ';return S.projectName!==void 0&&(U+="<h3><b>"+S.projectName+"</b></h3>"),U+="<small>"+S.type+" #"+S.id+" </small>",S.type==="milestone"?U+='<h4><a href="#/tickets/editMilestone/'+S.id+'" >'+b(S.name)+"</a></h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+q+"</strong><br /> "+Math.round(S.progress)+'%</p> <a href="#/tickets/editMilestone/'+S.id+'" ><span class="fa fa-map"></span> '+leantime.i18n.__("links.edit_milestone")+'</a> | <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+S.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":U+='<h4><a href="#/tickets/showTicket/'+S.id+'">'+b(S.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+S.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",U+="</div>",U},on_click:function(S){},on_date_change:function(S,M,q){leantime.ticketsRepository.updateMilestoneDates(S.id,M,q,S._index+1)},on_sort_change:function(S){for(var M={action:"ganttSort",payload:{}},q=0;q<S.length;q++)M.payload[S[q].id]=S[q]._index+1;jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/tickets",data:M})},on_progress_change:function(S,M){},on_view_change:function(S){leantime.usersRepository.updateUserViewSettings("roadmap",S)},on_popup_show:function(S){}});else var Q=new Gantt("#gantt",T,{readonlyGantt:!0,resizing:!1,progress:!1,is_draggable:!1,custom_popup_html:function(M){var q=M._end,U=jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),new Date(q)),B='<div class="details-container" style="min-width:600px;"> ';return M.projectName!==void 0&&(B+="<h3><b>"+M.projectName+"</b></h3>"),B+="<small>"+M.type+" #"+M.id+" </small>",M.type==="milestone"?B+="<h4>"+b(M.name)+"</h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+U+"</strong><br /> "+Math.round(M.progress)+'%</p> <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+M.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":B+='<h4><a href="#/tickets/showTicket/'+M.id+'">'+b(M.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+M.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",B+="</div>",B},on_click:function(M){},on_date_change:function(M,q,U){},on_progress_change:function(M,q){},on_view_change:function(M){leantime.usersRepository.updateUserViewSettings("roadmap",M)}});jQuery("#ganttTimeControl").on("click","a",function(){var S=jQuery(this),M=S.attr("data-value");Q.change_view_mode(M),S.parent().parent().find("a").removeClass("active"),S.addClass("active");var q=S.text();jQuery(".viewText").text(q)}),Q.change_view_mode(D)})},t=function(){Date.prototype.addDays=function(Q){return this.setDate(this.getDate()+Q),this},jQuery.datepicker.setDefaults({beforeShow:function(Q){if(jQuery(Q).attr("readonly"))return!1}});var T=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),D=jQuery("#sprintStart").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){m.datepicker("option","minDate",b(this));var Q=b(this).addDays(13);m.datepicker("setDate",Q)}),m=jQuery("#sprintEnd").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){D.datepicker("option","maxDate",b(this))});function b(Q){var S;try{S=jQuery.datepicker.parseDate(T,Q.value)}catch(M){S=null,console.log(M)}return S}},r=function(){var T=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),D=jQuery("#milestoneEditFrom").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){m.datepicker("option","minDate",b(this))}),m=jQuery("#milestoneEditTo").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){D.datepicker("option","maxDate",b(this))});function b(Q){var S;try{S=jQuery.datepicker.parseDate(T,Q.value)}catch(M){S=null,console.log(M)}return S}},u=function(){var T=leantime.dateHelper.getFormatFromSettings("dateformat","jquery");jQuery(".milestoneEditFromAsync").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){var m=jQuery(this).val(),b=jQuery(this).attr("data-id"),Q=jQuery(".toDateTicket-"+b);Q.datepicker("option","minDate",D(this)),jQuery(".toDateTicket-"+b).val(),leantime.ticketsRepository.updateEditFromDates(b,m,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})})}),jQuery(".milestoneEditToAsync").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){var m=jQuery(this).attr("data-id"),b=jQuery(".fromDateTicket-"+m);b.datepicker("option","maxDate",D(this));var Q=jQuery(this).val();jQuery(".fromDateTicket-"+m).val(),leantime.ticketsRepository.updateEditToDates(m,Q,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})})});function D(m){var b;try{b=jQuery.datepicker.parseDate(T,m.value)}catch(Q){b=null,console.log(Q)}return b}},h=function(){jQuery('[data-toggle="tooltip"]').tooltip()},o=function(){var T={"0.5":"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"};jQuery(".effortDropdown .dropdown-menu a").unbind().on("click",function(){var D=jQuery(this).attr("data-value").split("_");if(D.length===2){var m=D[0],b=D[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:m,storypoints:b}}).done(function(){jQuery("#effortDropdownMenuLink"+m+" span.text").text(T[b]),jQuery.growl({message:leantime.i18n.__("short_notifications.effort_updated"),style:"success"}),leantime.kanbanGroupBy==="storypoints"&&c(m,b)})}else console.log("Ticket Controller: Effort data value not set correctly")})},w=function(){var T={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"};jQuery(".priorityDropdown .dropdown-menu a").unbind().on("click",function(){var D=jQuery(this).attr("data-value").split("_");if(D.length===2){var m=D[0],b=D[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:m,priority:b}}).done(function(){jQuery("#priorityDropdownMenuLink"+m+" span.text").text(T[b]),jQuery("#priorityDropdownMenuLink"+m).removeClass("priority-bg-1 priority-bg-2 priority-bg-3 priority-bg-4 priority-bg-5"),jQuery("#priorityDropdownMenuLink"+m).addClass("priority-bg-"+b),jQuery("#priorityDropdownMenuLink"+m).parents(".ticketBox").removeClass("priority-border-1 priority-border-2 priority-border-3 priority-border-4 priority-border-5"),jQuery("#priorityDropdownMenuLink"+m).parents(".ticketBox").addClass("priority-border-"+b),jQuery.growl({message:leantime.i18n.__("short_notifications.priority_updated"),style:"success"}),leantime.kanbanGroupBy==="priority"&&c(m,b)})}else console.log("Ticket Controller: Priority data value not set correctly")})},i=function(){jQuery(".milestoneDropdown .dropdown-menu a").unbind().on("click",function(){var T=jQuery(this).attr("data-value").split("_"),D=jQuery(this).attr("data-label");if(T.length===3){var m=T[0],b=T[1],Q=T[2];jQuery("#milestoneDropdownMenuLink"+m+" span.text").append(" ..."),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:m,milestoneid:b}}).done(function(){jQuery("#milestoneDropdownMenuLink"+m+" span.text").text(D),jQuery("#milestoneDropdownMenuLink"+m).css("backgroundColor",Q),jQuery.growl({message:leantime.i18n.__("short_notifications.milestone_updated"),style:"success"}),leantime.kanbanGroupBy==="milestoneid"&&c(m,b)})}})},p=function(){jQuery(".statusDropdown .dropdown-menu a").unbind().on("click",function(){var T=jQuery(this).attr("data-value").split("_"),D=jQuery(this).attr("data-label");if(T.length==3){var m=T[0],b=T[1],Q=T[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:m,status:b}}).done(function(S){jQuery("#statusDropdownMenuLink"+m+" span.text").text(D),jQuery("#statusDropdownMenuLink"+m).removeClass().addClass(Q+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated"),style:"success"}),leantime.handleAsyncResponse(S)})}})},y=function(){jQuery(".userDropdown .dropdown-menu a").unbind().on("click",function(){var T=jQuery(this).attr("data-value").split("_"),D=jQuery(this).attr("data-label");if(T.length===3){var m=T[0],b=T[1];T[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:m,editorId:b}}).done(function(){jQuery("#userDropdownMenuLink"+m+" span.text span#userImage"+m+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+b),jQuery("#userDropdownMenuLink"+m+" span.text span#user"+m).text(D),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"}),leantime.kanbanGroupBy==="editorId"&&c(m,b)})}})},E=function(){jQuery(".asyncInputUpdate").on("change",function(){var T=jQuery(this).attr("data-label").split("-");if(T.length==2){var D=T[0],m=T[1],b=jQuery(this).val();jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:m,[D]:b}}).done(function(){jQuery.growl({message:leantime.i18n.__("notifications.subtask_saved"),style:"success"})})}})},k=function(){jQuery(".sprintDropdown .dropdown-menu a").unbind().on("click",function(){var T=jQuery(this).attr("data-value").split("_"),D=jQuery(this).attr("data-label");if(T.length==2){var m=T[0],b=T[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:m,sprint:b}}).done(function(){jQuery("#sprintDropdownMenuLink"+m+" span.text").text(D),jQuery.growl({message:leantime.i18n.__("short_notifications.sprint_updated"),style:"success"}),leantime.kanbanGroupBy==="sprint"&&c(m,b)})}})},_=function(){var T=["#821219","#BB1B25","#75BB1B","#4B7811","#fdab3d","#1bbbb1","#006d9f","#124F7D","#082236","#5F0F40","#bb1b75","#F26CA7","#BB611B","#aaaaaa","#4c4c4c"];jQuery("input.simpleColorPicker").simpleColorPicker({colors:T,onChangeColor:function(m){jQuery(this).css("background",m),jQuery(this).css("color","#fff")}});var D=jQuery("input.simpleColorPicker").val();D!=""&&jQuery("input.simpleColorPicker").css("background",D)},L=function(){jQuery(".date-picker-form-control .reset-button").on("click",function(){const T=jQuery(this).attr("data-id");jQuery("#due-date-picker-"+T).val(leantime.i18n.__("text.anytime")),leantime.ticketsRepository.updateDueDates(T,null,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})})}),leantime.dateController.initDatePicker(".quickDueDates, .duedates",function(T,D){var m=D.currentDay,b=D.currentMonth,Q=D.currentYear,S=new Date(Q,b,m),M=jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),S),q=jQuery(this).attr("data-id");leantime.ticketsRepository.updateDueDates(q,M,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})})})},g=function(T,D,m,b){var Q=document.getElementById(b).getContext("2d");new Chart(Q,{type:"line",data:{labels:T,datasets:[{label:leantime.i18n.__("label.booked_hours"),backgroundColor:"rgba(201,48,44, 0.5)",borderColor:"rgb(201,48,44)",data:D},{label:leantime.i18n.__("label.planned_hours"),backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgb(54, 162, 235)",data:m}]},options:{scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.booked_hours")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.planned_hours")},ticks:{beginAtZero:!0}}}}})},C=function(){jQuery(document).ready(function(){let T=new URL(window.location.href),D=T.searchParams.get("tab"),m=0;D&&(m=jQuery(".ticketTabs").find('a[href="#'+D+'"]').parent().index()),jQuery(".ticketTabs").tabs({create:function(b,Q){jQuery(".ticketTabs").css("visibility","visible")},activate:function(b,Q){T=new URL(window.location.href),T.searchParams.set("tab",Q.newPanel[0].id),window.history.replaceState(null,null,T)},load:function(){},enable:function(){},active:m})})},x=function(T){jQuery("#ticketSearch").on("submit",function(D){D.preventDefault();var m=jQuery("#projectIdInput").val(),b=jQuery("#userSelect").val(),Q=jQuery("#milestoneSelect").val(),S=jQuery("#termInput").val(),M=jQuery("#sprintSelect").val(),q=jQuery("#typeSelect").val(),U=jQuery("#prioritySelect").val(),B=jQuery("#statusSelect").val(),F=jQuery("#sortBySelect").val(),A=jQuery("input[name='groupBy']:checked").val(),W=jQuery("input[name='showTasks']:checked").val(),P="?search=true";m!=""&&m!=null&&(P=P+"&projectId="+m),b!=""&&b!=null&&(P=P+"&users="+b),Q!=""&&Q!=null&&(P=P+"&milestone="+Q),S!=""&&S!=null&&(P=P+"&term="+S),M!=""&&M!=null&&(P=P+"&sprint="+M),q!=""&&q!=null&&(P=P+"&type="+q),U!=""&&U!=null&&(P=P+"&priority="+U),B!=""&&B!=null&&(P=P+"&status="+B),F!=""&&F!=null&&(P=P+"&sort="+F),A!=""&&A!=null&&(P=P+"&groupBy="+A),W!=""&&W!=null&&(P=P+"&showTasks="+W);var N=T+P;window.location.href=N})},H=function(T){var D=jQuery("#projectIdInput").val(),m=jQuery("#userSelect").val(),b=jQuery("#milestoneSelect").val(),Q=jQuery("#termInput").val(),S=jQuery("#sprintSelect").val(),M=jQuery("#typeSelect").val(),q=jQuery("#prioritySelect").val(),U=jQuery("#statusSelect").val(),B=jQuery("#sortBySelect").val(),F=jQuery("input[name='groupBy']:checked").val(),A="?search=true";D!=""&&D!=null&&(A=A+"&projectId="+D),m!=""&&m!=null&&(A=A+"&users="+m),b!=""&&b!=null&&(A=A+"&milestone="+b),Q!=""&&Q!=null&&(A=A+"&term="+Q),S!=""&&S!=null&&(A=A+"&sprint="+S),M!=""&&M!=null&&(A=A+"&type="+M),q!=""&&q!=null&&(A=A+"&priority="+q),U!=""&&U!=null&&(A=A+"&status="+U),B!=""&&B!=null&&(A=A+"&sort="+B),F!=""&&F!=null&&(A=A+"&groupBy="+F);var W=T+A;window.location.href=W},v=function(){jQuery(document).ready(function(){l(),n(),jQuery(".filterBar .row-fluid").css("opacity","1"),jQuery(".sortableTicketList").each(function(){let T=jQuery(this).attr("id");var D=jQuery(this).closest(".kanban-swimlane-row");if(D.length&&D.attr("data-expanded")==="false")return;let m=250;jQuery(this).find(".column .contentInner").each(function(){jQuery(this).height()>m&&(m=jQuery(this).height())}),jQuery("#"+T+" .column .contentInner").css("height",m)})})},j=function(T){var D=T;jQuery(".sortableTicketList.kanbanBoard .ticketBox").hover(function(){jQuery(this).css("background","var(--kanban-card-hover)")},function(){jQuery(this).css("background","var(--kanban-card-bg)")}),jQuery(".sortableTicketList").each(function(){var b=this;jQuery(b).find(".contentInner").sortable({connectWith:".contentInner",items:"> .moveable",tolerance:"intersect",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,cancel:".portlet-toggle,:input,a,input",distance:10,start:function(Q,S){S.item.addClass("tilt"),m(S.item);var M=S.item.closest(".sortableTicketList.kanbanBoard");S.item.data("originalSwimlaneId",M.attr("id"))},stop:function(Q,S){S.item.removeClass("tilt"),jQuery("html").unbind("mousemove",S.item.data("move_handler")),S.item.removeData("move_handler"),l(),n(),jQuery(".sortableTicketList").find(".contentInner").each(function(){var Z=jQuery(this),fe=Z.find(".moveable").length>0;if(fe){Z.removeClass("empty-column"),Z.attr("data-empty-text","");var He=Z.attr("aria-label")||"";Z.attr("aria-label",He.replace("Empty column","")+" column items")}else Z.addClass("empty-column"),Z.attr("data-empty-text","Empty"),Z.attr("aria-label","Empty column")});var M=S.item.closest(".sortableTicketList.kanbanBoard"),q=M.attr("id"),U=S.item.data("originalSwimlaneId");if(U&&q&&U!==q){var B=S.item[0].id.replace("ticket_",""),F=q.replace("kanboard-",""),A={milestoneid:"milestoneid",editorId:"editorId",priority:"priority",storypoints:"storypoints",sprint:"sprint",dueDate:"dateToFinish"},W=leantime.kanbanGroupBy,P=A[W];if(W==="dueDate"){var N=new Date;switch(N.setHours(12,0,0,0),F){case"0":var Y=new Date(N);Y.setDate(Y.getDate()-1),F=Y.toISOString().split("T")[0];break;case"1":var ie=new Date(N),z=6-ie.getDay();z<0&&(z=0),ie.setDate(ie.getDate()+z),F=ie.toISOString().split("T")[0];break;case"2":var G=new Date(N),xe=6-G.getDay()+7;G.setDate(G.getDate()+xe),F=G.toISOString().split("T")[0];break;case"3":var K=new Date(N);K.setDate(K.getDate()+21),F=K.toISOString().split("T")[0];break;case"4":F="";break}}if(P&&B){var V=jQuery("#ticket_"+B);if(W==="milestoneid"){var te=jQuery("#swimlane-row-"+F+" .swimlane-header-label"),Te=te.text()||leantime.i18n.__("label.no_milestone"),pe=V.find(".milestoneDropdown .dropdown-toggle .text");pe.length&&pe.text(Te);var ce=V.find('.milestoneDropdown .dropdown-menu a[data-value^="'+B+"_"+F+'_"]'),ae="#b0b0b0";if(ce.length&&F!=="0"&&F!==""){var ge=ce.attr("data-value");if(ge){var he=ge.split("_");he.length>=3&&(ae=he.slice(2).join("_"))}if(!ae||ae==="#b0b0b0"){var ye=ce.attr("style");if(ye){var ve=ye.match(/background-color:\s*([^;]+)/i);ve&&(ae=ve[1].trim())}}}V.find(".milestoneDropdown .dropdown-toggle").css("background-color",ae)}else if(W==="priority"){V.removeClass(function(Z,fe){return(fe.match(/(^|\s)priority-border-\S+/g)||[]).join(" ")}).addClass("priority-border-"+F);var Le={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"},re=jQuery("#priorityDropdownMenuLink"+B);re.length&&(re.find("span.text").text(Le[F]||F),re.removeClass("priority-bg-1 priority-bg-2 priority-bg-3 priority-bg-4 priority-bg-5"),re.addClass("priority-bg-"+F))}else if(W==="editorId"){var ue=jQuery("#userDropdownMenuLink"+B);if(ue.length){ue.find("span.text span img").attr("src",leantime.appUrl+"/api/users?profileImage="+F);var te=jQuery("#swimlane-row-"+F+" .swimlane-header-label"),je=te.text()||leantime.i18n.__("label.not_assigned");ue.find("span.text span#user"+B).text(je)}}else if(W==="storypoints"){var De={"0.5":"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"},be=jQuery("#effortDropdownMenuLink"+B);be.length&&be.find("span.text").text(De[F]||F)}else if(W==="sprint"){var we=jQuery("#sprintDropdownMenuLink"+B);if(we.length){var te=jQuery("#swimlane-row-"+F+" .swimlane-header-label"),Me=te.text()||leantime.i18n.__("label.backlog");we.find("span.text").text(Me)}}else if(W==="dueDate"){var le=V.find(".dues .fa-calendar").parent();if(le.length&&F){var me=F.split("-"),Ee=me[1]+"/"+me[2]+"/"+me[0];le.contents().filter(function(){return this.nodeType===3}).first().replaceWith(" "+Ee)}else le.length&&!F&&le.contents().filter(function(){return this.nodeType===3}).first().replaceWith(" No due date")}jQuery.growl({message:"To-Do Updated",style:"success"});var _e={id:B};_e[P]=F,jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:_e}).fail(function(){jQuery.growl({message:leantime.i18n.__("short_notifications.not_saved")||"Error updating ticket",style:"error"}),location.reload()})}}S.item.removeData("originalSwimlaneId");for(var ke=S.item.closest(".sortableTicketList"),Se={action:"kanbanSort",payload:{},handler:S.item[0].id},ne=0;ne<D.length;ne++)ke.find(".contentInner.status_"+D[ne]).length&&(Se.payload[D[ne]]=ke.find(".contentInner.status_"+D[ne]).sortable("serialize"));jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/tickets",data:Se}).done(function(Z){leantime.handleAsyncResponse(Z)})}})});function m(b){var Q=b.position().left,S=function(M){M.pageX+5>Q?(b.addClass("right"),b.removeClass("left")):M.pageX<Q+5?(b.addClass("left"),b.removeClass("right")):(b.removeClass("left"),b.removeClass("right")),Q=M.pageX};jQuery("html").bind("mousemove",S),b.data("move_handler",S)}jQuery(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>"),jQuery(".portlet-toggle").click(function(){var b=jQuery(this);b.toggleClass("ui-icon-minusthick ui-icon-plusthick"),b.closest(".portlet").find(".portlet-content").toggle()})},R=function(T){function D(m){return!isNaN(parseFloat(m))&&isFinite(m)}jQuery(document).ready(function(){var m=[],b=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom">p<"clear">',searching:!1,stateSave:!0,displayLength:100,order:m,columnDefs:[{visible:!1,targets:10},{visible:!1,targets:11},{target:"no-sort",orderable:!1}],footerCallback:function(Q,S,M,q,U){var B=this.api(),F=B.column(10).data().reduce(function(P,N){return D(P)===!1&&(P=jQuery(P).val()),D(N)===!1&&(N=jQuery(N).val()),isNaN(P)&&(P=0),isNaN(N)&&(N=0),parseFloat(P)+parseFloat(N)},0),A=B.column(11).data().reduce(function(P,N){return D(P)===!1&&(P=jQuery(P).val()),D(N)===!1&&(N=jQuery(N).val()),isNaN(P)&&(P=0),isNaN(N)&&(N=0),parseFloat(P)+parseFloat(N)},0),W=B.column(12).data().reduce(function(P,N){return parseFloat(P)+parseFloat(N)},0);jQuery(B.column(9).footer()).html("Total"),jQuery(B.column(10).footer()).html(F),jQuery(B.column(11).footer()).html(A),jQuery(B.column(12).footer()).html(W)}});new jQuery.fn.dataTable.Buttons(b.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(Q,S,M,q){return typeof jQuery(q).data("order")<"u"&&(Q=jQuery(q).data("order")),Q}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(jQuery("#tableButtons")),b.table(0).on("column-visibility",function(Q,S,M,q){for(var U=1;U<b.tables().context.length;U++)b.tables(U).column(M).visible(q);b.draw()}),jQuery(".ticketTable input").on("change",function(Q,S,M,q){jQuery(this).parent().attr("data-order",jQuery(this).val()),b.draw()})})},I=function(T){jQuery(document).ready(function(){var D=[];jQuery(".listStyleTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"<"center"p>><"clear">',searching:!1,stateSave:!0,displayLength:25,order:D,fnDrawCallback:function(m){m._iDisplayLength>m.fnRecordsDisplay()?jQuery(m.nTableWrapper).find(".dataTables_paginate").hide():jQuery(m.nTableWrapper).find(".dataTables_paginate").show()}})})},X=function(T){jQuery(document).ready(function(){var D=[],m=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"><"clear">',searching:!1,stateSave:!0,displayLength:100,order:D,columnDefs:[{visible:!1,targets:7},{visible:!1,targets:8},{target:"no-sort",orderable:!1}]});new jQuery.fn.dataTable.Buttons(m.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(b,Q,S,M){return typeof jQuery(M).data("order")<"u"&&(b=jQuery(M).data("order")),b}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(jQuery("#tableButtons")),m.table(0).on("column-visibility",function(b,Q,S,M){for(var q=1;q<m.tables().context.length;q++)m.tables(q).column(S).visible(M);m.draw()}),jQuery(".ticketTable input").on("change",function(b,Q,S,M){jQuery(this).parent().attr("data-order",jQuery(this).val()),m.draw()})})},ee=function(T,D){window.leantime&&window.leantime.tiptapController&&window.leantime.tiptapController.registry&&leantime.tiptapController.registry.destroyAll(),jQuery(".ticketRows").removeClass("active"),jQuery("#row-"+T).addClass("active"),jQuery(D).html("<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px' /></div>");function m(b){jQuery(b).find("form").each(function(){jQuery(this).on("submit",function(Q){Q.preventDefault(),window.leantime&&window.leantime.tiptapController&&window.leantime.tiptapController.registry&&leantime.tiptapController.registry.destroyAll(),jQuery(b).html("<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px'/></div>");var S=jQuery(this).serialize();jQuery.ajax({url:jQuery(this).attr("action"),data:S,type:"post",success:function(M){jQuery(b).html(M),m(b)},error:function(){}})})})}jQuery.get(leantime.appUrl+"/tickets/showTicket/"+T,function(b){jQuery(D).html(b),m(D)})},oe=function(){jQuery("#tags").tagsInput({autocomplete_url:leantime.appUrl+"/api/tags"}),jQuery("#tags_tag").on("focusout",function(){let T=jQuery(this).val();T!=""&&jQuery("#tags").addTag(T)})},de=function(T,D){var m="Discussion on To-Do #"+D+`:
\r`+jQuery("#commentText-"+T).text();jQuery('li a[href*="timesheet"]').click(),jQuery("#timesheet #description").val(m)};return{toggleFilterBar:f,initGanttChart:s,updateRemainingHours:e,updatePlannedHours:a,initTimeSheetChart:g,initTicketTabs:C,initTicketSearchSubmit:x,initTicketKanban:j,initTicketsTable:R,initEffortDropdown:o,initPriorityDropdown:w,initMilestoneDropdown:i,initStatusDropdown:p,initUserDropdown:y,initSprintDropdown:k,initToolTips:h,initTagsInput:oe,initMilestoneDatesAsyncUpdate:u,initAsyncInputChange:E,initDueDateTimePickers:L,setUpKanbanColumns:v,addCommentTimesheetContent:de,initMilestoneTable:X,initMilestoneDates:r,initTicketsList:I,loadTicketToContainer:ee,initTicketSearchUrlBuilder:H,initSprintDates:t,initSimpleColorPicker:_}}();var J=window.leantime||(window.leantime={});J.ticketsRepository=function(){var l=function(f,s,t,r){let u=J.dateHelper.getFormatFromSettings("dateformat","luxon"),h=J.dateHelper.getFormatFromSettings("timeformat","luxon"),o=luxon.DateTime.fromSQL(s).toFormat(u),w=luxon.DateTime.fromSQL(s).toFormat(h),i=luxon.DateTime.fromSQL(t).toFormat(u),p=luxon.DateTime.fromSQL(t).toFormat(h);fetch(J.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:f,editFrom:o,editTo:i,timeFrom:w,timeTo:p,sortIndex:r})})},n=function(f,s,t){fetch(J.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:f,hourRemaining:s})}).then(function(){t()})},d=function(f,s,t){fetch(J.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:f,planHours:s})}).then(function(){t()})},c=function(f,s,t){fetch(J.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:f,dateToFinish:s})}).then(function(){t()})},e=function(f,s,t){fetch(J.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:f,editFrom:s})}).then(function(){t()})},a=function(f,s,t){fetch(J.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:f,editTo:s})}).then(function(){t()})};return{updateMilestoneDates:l,updateRemainingHours:n,updatePlannedHours:d,updateDueDates:c,updateEditFromDates:e,updateEditToDates:a}}();leantime.dashboardController=function(){var l={};leantime.theme=="dark"?l={red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(56, 56, 56)"}:l={red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"};var n=function(){var t=moment().startOf("week").add(5,"days"),r=document.querySelector("#dateToFinish");r&&(r.value=t.format("YYYY-MM-DD"))},d=function(t,r,u){var h={type:"doughnut",data:{datasets:[{data:[r,u],backgroundColor:[leantime.dashboardController.chartColors.green,leantime.dashboardController.chartColors.grey],label:leantime.i18n.__("label.project_done")}],labels:[r+"% Done",u+"% Open"]},options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:""}},animation:{animateScale:!0,animateRotate:!0}}},o=document.getElementById(t).getContext("2d");new Chart(o,h)},c=function(t,r,u){moment.locale(leantime.i18n.__("language.code"));var h={type:"line",data:{labels:t,datasets:[{label:leantime.i18n.__("label.ideal"),backgroundColor:leantime.dashboardController.chartColors.blue,borderColor:leantime.dashboardController.chartColors.blue,data:r,fill:!1,lineTension:0},{label:"Actual",backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:u,fill:!1,lineTension:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},plugins:{legend:{position:"bottom"},title:{display:!1,text:"Line Chart"},tooltips:{mode:"index",intersect:!1}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0}}}}},o=document.getElementById("sprintBurndown").getContext("2d");return _burndownChart=new Chart(o,h),_burndownChart},e=function(t,r,u,h,o){var w=document.getElementById(t);w&&w.addEventListener("click",function(i){o.data.datasets[0].data=u,o.data.datasets[1].data=h,o.options.scales.y.title.text=r,document.querySelectorAll(".chartButtons").forEach(function(p){p.classList.remove("active")}),w.classList.add("active"),o.update()})},a=function(t,r){moment.locale(leantime.i18n.__("language.code"));var u={type:"line",data:{labels:t,datasets:[{label:leantime.i18n.__("label.done_todos"),backgroundColor:leantime.dashboardController.chartColors.green,borderColor:leantime.dashboardController.chartColors.green,data:r.done.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.progress_todos"),backgroundColor:leantime.dashboardController.chartColors.yellow,borderColor:leantime.dashboardController.chartColors.yellow,data:r.progress.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.new_todos"),backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:r.open.data,fill:!0,lineTension:0,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},elements:{point:{pointStyle:"line",radius:"0"}},plugins:{tooltips:{mode:"index",intersect:!1},legend:{position:"bottom"},title:{display:!1,text:"Line Chart"}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0},stacked:!0}}}},h=document.getElementById("backlogBurndown").getContext("2d");return _burndownChart=new Chart(h,u),_burndownChart},f=function(t,r,u,h){var o=document.getElementById(t);o&&o.addEventListener("click",function(w){h.data.datasets[0].data=r.done.data,h.data.datasets[1].data=r.progress.data,h.data.datasets[2].data=r.open.data,h.options.scales.y.title.text=u,document.querySelectorAll(".backlogChartButtons").forEach(function(i){i.classList.remove("active")}),o.classList.add("active"),h.update()})},s=function(){document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".duedates").forEach(function(t){leantime.dateController.initDatePicker(t,function(r){var u=r;u==""&&(this.value=leantime.i18n.__("text.anytime"));var h=moment(u,leantime.i18n.__("language.momentJSDate")).format("YYYY-MM-DD HH:mm:ss"),o=this.getAttribute("data-id"),w=h;leantime.ticketsRepository.updateDueDates(o,w,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.duedate_updated")})})})})})};return{chartColors:l,initBurndown:c,initChartButtonClick:e,initBacklogBurndown:a,initBacklogChartButtonClick:f,initProgressChart:d,prepareHiddenDueDate:n,initDueDateTimePickers:s}}();leantime.usersController=function(){var l=null,n=function(t){if(d(),t.files&&t.files[0]){var r=new FileReader,u=document.querySelector("#profileImg");r.onload=function(h){l=new Croppie(u,{enableExif:!0,viewport:{width:175,height:175,type:"circle"},boundary:{width:200,height:200}}),l.bind({url:h.currentTarget.result});var o=document.querySelector("#previousImage");o&&(o.style.display="none")},r.readAsDataURL(t.files[0])}},d=function(){l&&(l.destroy(),l=null);var t=document.querySelector("#previousImage");t&&(t.style.display="")},c=function(){var t=document.querySelector("#save-picture");t&&t.classList.add("running");var r=document.querySelector("#profileImg");r&&r.setAttribute("src",leantime.appUrl+"/images/loaders/loader28.gif"),l&&l.result({type:"blob",circle:!0}).then(function(u){leantime.usersService.saveUserPhoto(u)})},e=function(){document.addEventListener("DOMContentLoaded",function(){jQuery("#allUsersTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})})},a=function(){var t={sizes:{minW:400,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(r){r.style.display=""}),jQuery(".userImportModal").nyroModal(t)}}};jQuery(".userImportModal").nyroModal(t)},f=function(){var t={sizes:{minW:900,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(r){r.style.display=""}),jQuery(".userEditModal").nyroModal(t)},beforeClose:function(){location.reload()}}};jQuery(".userEditModal").nyroModal(t)},s=function(t){let r,u=document.getElementById(t),h=document.getElementById("pwStrength"),o=new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})"),w=new RegExp("((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))");function i(p){o.test(p)?(h.style.backgroundColor="#107530",h.textContent=leantime.i18n.__("label.strong")):w.test(p)?(h.style.backgroundColor="#C5850D",h.textContent=leantime.i18n.__("label.medium")):(h.style.backgroundColor="#CC6B6B",h.textContent=leantime.i18n.__("label.weak"))}u.addEventListener("input",()=>{h.style.display="block",clearTimeout(r),r=setTimeout(()=>i(u.value),500),u.value.length!==0?h.style.display!="block":h.style.display="none"})};return{readURL:n,clearCroppie:d,saveCroppie:c,initUserTable:e,_initModals:a,checkPWStrength:s,initUserEditModal:f}}();leantime.usersRepository=function(){var l=function(d){var c=new FormData;c.append("file",d),fetch(leantime.appUrl+"/api/users",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"},body:c}).then(function(e){var a=document.querySelector("#save-picture");a&&a.classList.remove("running"),location.reload()}).catch(function(e){console.log(e)})},n=function(d,c){fetch(leantime.appUrl+"/api/users",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({patchViewSettings:d,value:c})})};return{saveUserPhoto:l,updateUserViewSettings:n}}();leantime.usersService=function(){var l=function(n){leantime.usersRepository.saveUserPhoto(n)};return{saveUserPhoto:l}}();leantime.reactionsController=function(){return{addReactions:function(d,c,e,a){fetch(leantime.appUrl+"/api/reactions",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"add",module:d,moduleId:c,reaction:e})}).then(function(){a()})},removeReaction:function(d,c,e,a){fetch(leantime.appUrl+"/api/reactions",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"remove",module:d,moduleId:c,reaction:e})}).then(function(){a()})}}}();leantime.helperController=function(){var l=function(u,h){h?leantime.helperRepository.updateUserModalSettings(u,!0):leantime.helperRepository.updateUserModalSettings(u,!1)},n=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.tourFactory.startTour("myWorkDashboard")},d=function(){leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal()},c=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("projectDashboard"),leantime.tourFactory.startTour("projectDashboard")},e=function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("kanbanBoard"),leantime.tourFactory.startTour("kanbanBoard")},a=function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("milestoneView"),leantime.tourFactory.startTour("milestoneView")},f=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("goals"),leantime.tourFactory.startTour("goalsView")},s=function(){document.addEventListener("DOMContentLoaded",function(){var u={sizes:{minW:700,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(h){h.style.display=""}),jQuery(".onboardingModal").nyroModal(u)},beforeClose:function(){location.reload()}}};jQuery(".onboardingModal").nyroModal(u),jQuery.nmManual(leantime.appUrl+"/help/firstLogin",u)})},t=function(u,h,o){document.addEventListener("DOMContentLoaded",function(){jQuery.nmManual(leantime.appUrl+"/help/showOnboardingDialog?module="+u,{sizes:{minW:h||200,minH:o||500},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){leantime.replaceSVGColors()},afterShowCont:function(){htmx.process("#global-modal-content")}}})})},r=function(u){leantime.helperRepository.updateUserModalSettings(u),leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal()};return{showHelperModal:t,hideAndKeepHidden:r,setDontShowAgain:l,closeModal:d,startMyWorkDashboardTour:n,startProjectDashboardTour:c,startKanbanTour:e,startMilestoneTour:a,startGoalTour:f,firstLoginModal:s}}();var se=window.leantime||(window.leantime={});se.helperRepository=function(){var l=function(c,e=!1){fetch(se.appUrl+"/api/users",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({settings:c,permanent:e?1:0,patchModalSettings:1})})},n=function(){fetch(se.appUrl+"/api/sessions",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({tourActive:1})})},d=function(){fetch(se.appUrl+"/api/sessions",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({tourActive:0})})};return{updateUserModalSettings:l,startingTour:n,stopTour:d}}();leantime.tourFactory=function(){var l=function(a){return new Shepherd.Tour({useModalOverlay:!0,defaultStepOptions:{classes:"shepherd-theme-arrows",scrollTo:!1,cancelIcon:{enabled:!0}},tourName:a})},n=function(a){leantime.helperRepository.updateUserModalSettings(a),typeof _paq<"u"&&_paq.push(["trackEvent","Tour","Completed",a])},d=function(a){return{myWorkDashboard:[{id:"welcome-step",title:" Welcome to the Dashboard Tour",text:"Let's start with a few basics to get you up to speed on the navigation and different elements inside Leantime."},{id:"top-nav-step",title:"Work Modes",text:"The top navigation shows you the current 'work mode' you're in. You can be inside a project, your personal work area, or in the company mode.",attachTo:{element:".work-modes",on:"bottom"}},{id:"menu-step",title:"Left Navigation",text:"The left navigation breaks down the current work mode and gives you access to different areas. Everything presented here is part of the currently selected work mode above.",attachTo:{element:".leftpanel",on:"right"}},{id:"my-menu",title:"My Profile Bar",text:"Here you'll find links to your account as well as notifications and latest news about Leantime.",attachTo:{element:".headmenu.pull-right",on:"bottom"}},{id:"dashboard-widgets",title:"Your Dashboard Widgets",text:"Your dashboard is broken up into various widgets showing you focused information about your work.",attachTo:{element:".primaryContent",on:"top"}},{id:"dashboard-widgets-dandd",title:"Customize Your Dashboard",text:"Widgets can be resized and moved around using the drag and drop functionality.",attachTo:{element:"#widget_wrapper_todos .grid-handler-top",on:"bottom"}},{id:"my-todo-widget",title:"My To-Dos",text:"The My To-Do widget shows you all the tasks that are currently assigned to you.",attachTo:{element:"#widget_wrapper_todos",on:"top"}},{id:"my-todo-widget2",title:"Group To-Dos",text:"You can use the dropdowns here to filter your tasks by project or group them by priority, status, project, or dates.",attachTo:{element:"#yourToDoContainer > .clear",on:"bottom"}},{id:"my-todo-widget4",title:"Sort To-Dos",text:"Each To-Do can be dragged and dropped to change its order. You can also drag and drop a task to the calendar to schedule it.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child",on:"bottom"}},{id:"my-todo-widget-timer",title:"Start the Timer",text:"When you're ready to start working on a task, just click the start timer button.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .timerContainer",on:"bottom"}},{id:"my-todo-widget-complete",title:"Complete a Task",text:"Once a task is complete, you can mark it as done by clicking the status dropdown.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .statusDropdown",on:"bottom"}},{id:"my-todo-widget-add",title:"Add More Tasks",text:"You can add more tasks by clicking the plus button in each section, or by using the 3-dot menu next to each task.",attachTo:{element:"#yourToDoContainer .fa-circle-plus",on:"bottom"}},{id:"finish",title:"Congratulations!",text:"You've completed the My Work dashboard tour. Head to <a href='"+leantime.appUrl+"/dashboard/show'>your project</a> to learn more about project management in Leantime."}],projectDashboard:[{id:"left-nav",title:"Project Menu",text:"The project menu organizes your project into different sections: <strong>Data Room</strong> - to host all your files and information, <strong>Think</strong> - to strategize, ideate and define, <strong>Make</strong> - to manage goals, milestones and tasks.",attachTo:{element:".leftmenu ul",on:"left"}},{id:"project-selector",title:"Project Selector",text:"Use the project selector to jump between projects. The left menu shows everything related to your current project.",attachTo:{element:".bigProjectSelector",on:"bottom"}},{id:"project-checklist",title:"Checklist",text:"The project checklist is a quick reference to see if your project contains all the necessary information for successful execution.",attachTo:{element:"#progressForm",on:"bottom"}},{id:"project-status",title:"Quick Status Updates",text:"You can use status updates to quickly share the progress of your project with your team using red, yellow and green colors. The status will be visible across the application.",attachTo:{element:".project-updates",on:"left"}},{id:"project-progress",title:"Progress",text:"The project progress indicator shows you how much work you have completed. It accounts for various task sizes, team velocity, and project milestones.",attachTo:{element:".project-progress",on:"left"}},{id:"latest-tasks",title:"Latest Tasks",text:"The list of latest tasks shows you the most recent tasks added to your project and can be used as a project inbox.",attachTo:{element:".latest-todos",on:"left"}},{id:"teams",title:"Team",text:"The team box shows you the members of this project.",attachTo:{element:".team-container",on:"top"}},{id:"finished",title:"Congratulations!",text:"You've completed the project dashboard tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>To-Dos</a> to learn more about the various ways to manage your tasks in Leantime."}],kanbanBoard:[{id:"kanban-overview",title:"Your Kanban Board",text:"This is your Kanban board. It helps you visualize your work and limit work-in-progress.",attachTo:{element:".kanban-board-wrapper",on:"top"}},{id:"kanban-columns",title:"Work Flow",text:"Tasks move from left to right as they progress. Drag and drop cards to update their status.",attachTo:{element:".column",on:"right"}},{id:"kanban-columns2",title:"Flexible Columns",text:"Using the 3-dot menu, you can add or remove columns and rename them.",attachTo:{element:".column .widgettitle .inlineDropDownContainer",on:"right"}},{id:"kanban-filter",title:"Filter Tasks",text:"You can filter your tasks by various fields like priority, status, project, or dates.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"kanban-group",title:"Swimlanes",text:"Additionally, you can group your tasks to create Kanban swimlanes. This helps you visualize your work by team members, priority, or milestones.",attachTo:{element:".filterWrapper > .btn-group",on:"bottom"}},{id:"kanban-sprints",title:"Sprints",text:"If you manage your work in sprints, you can use the dropdown here to select, create, and update sprints.",attachTo:{element:".pageheader .dropdown",on:"bottom"}},{id:"kanban-congrats",title:"Congratulations!",text:"This concludes the Kanban tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Milestones</a> to learn how to create and manage milestones in Leantime."}],milestoneView:[{id:"milestone-overview",title:"Milestones",text:"Milestones help you track major outcomes and project phases.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-drag",title:"Drag & Sort",text:"Each bar represents one milestone. You can drag them along the timeline, reorder, and resize them. Everything you do on this screen updates the timing of your milestones.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-filter",title:"Filter",text:"You can filter your milestones and also view tasks that are part of them.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"milestone-timeframes",title:"Timeframes",text:"You can change the timeframe of the timeline view to see more of the year or dive deep into a daily breakdown.",attachTo:{element:".col-md-4 .pull-right",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the milestone tour. Head to the <a href='"+leantime.appUrl+"/goalcanvas/dashboard'>Goals</a> to learn how to create and manage goals in Leantime."}],goalsView:[{id:"goals-overview",title:"Goals",text:"Goals help you track measurable impact on your projects."},{id:"goal-parts",title:"Objectives & Metrics",text:"Each goal is made up of an Objective (what you're trying to accomplish) and a Metric (how you'll measure it).",attachTo:{element:".ticketBox",on:"top"}},{id:"goal-progress",title:"Goal Progress",text:"As you update your goal metrics, the progress bar will show you how far along you are.",attachTo:{element:".ticketBox > .row > .col-md-12 .progress",on:"bottom"}},{id:"milestone-connection",title:"Milestones & Goals",text:"You can connect goals to milestones to track the task-level progress of your goals. This helps identify gaps in your project plan.",attachTo:{element:".ticketBox.fixed",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the goals tour. Milestones, Goals, and To-Dos are the basic building blocks in Leantime. Use them to break down your work into manageable chunks. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Kanban Board</a> to review your tasks."}]}[a]||[]},c=function(a){const f=l(a),s=d(a);return s.forEach((t,r)=>{const u=r===0,h=r===s.length-1,o=[];u||o.push({text:leantime.i18n.__("tour.back"),classes:"shepherd-button-secondary",action:f.back}),h?o.push({text:leantime.i18n.__("tour.finish"),action:function(){n(a),confetti(),f.complete()}}):o.push({text:leantime.i18n.__("tour.next"),action:f.next}),h||o.unshift({text:leantime.i18n.__("tour.cancel"),classes:"shepherd-button-secondary",action:f.cancel}),f.addStep({...t,buttons:o})}),f.on("complete",function(){n(a)}),f},e=function(a){const f=c(a);return f.start(),f};return{createTour:l,buildTour:c,startTour:e,getTourDefinition:d}}();leantime.confettiHelper=function(){var l=function(d){const e={...{particleCount:100,spread:70,origin:{y:.6},disableForReducedMotion:!0},...d};typeof confetti=="function"?confetti(e):console.error("Confetti library not loaded")},n=function(){l({particleCount:150,spread:90,origin:{y:.8},colors:["#26a69a","#00bcd4","#4caf50","#8bc34a","#cddc39"]}),setTimeout(function(){l({particleCount:80,spread:120,origin:{y:.7},colors:["#ff9800","#ff5722","#f44336","#e91e63","#9c27b0"]})},500)};return{triggerConfetti:l,celebrateSuccess:n}}();leantime.firstTaskController=function(){var l=function(){var n=document.querySelector("#firstTaskOnboarding");if(n){n.addEventListener("submit",function(c){c.preventDefault();var e=document.querySelector("#firstTask"),a=e.value.trim();if(a==="")return e.classList.add("error"),!1;e.classList.remove("error"),leantime.confettiHelper.celebrateSuccess(),setTimeout(function(){n.submit()},1500)});var d=document.querySelector("#firstTask");d&&d.addEventListener("input",function(){this.classList.remove("error")})}};return{initFirstTaskForm:l}}();document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){leantime.firstTaskController.initFirstTaskForm()}):leantime.firstTaskController.initFirstTaskForm();leantime.menuController=function(){var l=function(a){if(a!==""){var f=document.querySelector("#submenu-"+a),s=document.querySelector("#submenu-icon-"+a),t="";f&&(f.style.display==="none"||getComputedStyle(f).display==="none"?(f.style.display="block",s&&(s.classList.remove("fa-angle-right"),s.classList.add("fa-angle-down")),t="open"):(f.style.display="none",s&&(s.classList.remove("fa-angle-down"),s.classList.add("fa-angle-right")),t="closed"),fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({submenu:a,state:t})}))}},n=function(){document.querySelectorAll(".project-select").forEach(function(r){new SlimSelect({select:r})}),document.addEventListener("click",function(r){r.target.closest(".projectselector.dropdown-menu")&&r.stopPropagation()});var a=document.querySelector(".projectSelectorTabs");if(a){var f=a.querySelectorAll("ul > li > a"),s=localStorage.getItem("currentMenuTab"),t=0;s&&f.forEach(function(r,u){r.getAttribute("href")==="#"+s&&(t=u)}),f.forEach(function(r,u){var h=r.getAttribute("href");if(!(!h||h.charAt(0)!=="#")){var o=document.querySelector(h);o&&(u===t?(o.style.display="",r.parentElement.classList.add("ui-tabs-active")):(o.style.display="none",r.parentElement.classList.remove("ui-tabs-active")),r.addEventListener("click",function(w){w.preventDefault(),f.forEach(function(p){var y=p.getAttribute("href");if(y&&y.charAt(0)==="#"){var E=document.querySelector(y);E&&(E.style.display="none")}p.parentElement.classList.remove("ui-tabs-active")}),o&&(o.style.display=""),r.parentElement.classList.add("ui-tabs-active");var i=h.replace("#","");localStorage.setItem("currentMenuTab",i)}))}})}},d=function(){if(window.innerWidth<576){var a=document.querySelector(".mainwrapper");a&&(a.classList.remove("menuopen"),a.classList.add("menuclosed"))}var f=document.querySelector(".barmenu");f&&f.addEventListener("click",function(){var s=document.querySelector(".mainwrapper");s&&(s.classList.contains("menuopen")?(s.classList.remove("menuopen"),s.classList.add("menuclosed"),leantime.menuRepository.updateUserMenuSettings("closed")):(s.classList.remove("menuclosed"),s.classList.add("menuopen"),leantime.menuRepository.updateUserMenuSettings("open")))})},c=function(a,f="",s){var t=document.querySelector("#"+s+"-toggler-"+a),r=document.querySelector("#"+s+"-projectSelectorlist-group-"+a);if(t)if(f==="closed"?(t.classList.remove("closed","open"),t.classList.add("open")):f==="open"&&(t.classList.remove("open","closed"),t.classList.add("closed")),t.classList.contains("open")){t.classList.remove("open"),t.classList.add("closed");var u=t.querySelector("i");u&&(u.classList.remove("fa-angle-down"),u.classList.add("fa-angle-right")),r&&(r.classList.add("closed"),r.classList.remove("open")),e(a,"closed",s)}else{t.classList.remove("closed"),t.classList.add("open");var u=t.querySelector("i");u&&(u.classList.remove("fa-angle-right"),u.classList.add("fa-angle-down")),r&&(r.classList.add("open"),r.classList.remove("closed")),e(a,"open",s)}};let e=function(a,f,s){fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({submenu:s+"-projectSelectorlist-group-"+a,state:f})})};return{toggleSubmenu:l,initProjectSelector:n,initLeftMenuHamburgerButton:d,updateGroupDropdownSetting:e,toggleProjectDropDownList:c}}();var Ce=window.leantime||(window.leantime={});Ce.menuRepository=function(){var l=function(n){fetch(Ce.appUrl+"/api/sessions",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({menuState:n})})};return{updateUserMenuSettings:l}}();leantime.settingController=function(){var l,n=function(e){if(d(),e.files&&e.files[0]){var a=new FileReader,f=jQuery("#logoImg");a.onload=function(s){l=f.croppie({enableExif:!0,enforceBoundary:!1,viewport:{width:220,height:40,type:"square"},boundary:{width:400,height:200}}),l.croppie("bind",{url:s.currentTarget.result});var t=document.querySelector("#previousImage");t&&(t.style.display="none")},a.readAsDataURL(e.files[0])}},d=function(){jQuery("#logoImg").croppie("destroy");var e=document.querySelector("#previousImage");e&&(e.style.display="")},c=function(){var e=document.querySelector("#save-logo");e&&e.classList.add("running");var a=document.querySelector("#logoImg");a&&a.setAttribute("src",leantime.appUrl+"/images/loaders/loader28.gif"),l.croppie("result",{type:"blob",circle:!1,size:"original",quality:1}).then(function(f){leantime.settingService.saveLogo(f)})};return{readURL:n,clearCroppie:d,saveCroppie:c}}();leantime.settingRepository=function(){var l=function(n){var d=new FormData;d.append("file",n),fetch(leantime.appUrl+"/api/setting",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"},body:d}).then(function(c){var e=document.querySelector("#save-logo");e&&e.classList.remove("running"),location.reload()}).catch(function(c){console.log(c)})};return{saveLogo:l}}();leantime.settingService=function(){var l=function(n){leantime.settingRepository.saveLogo(n)};return{saveLogo:l}}();leantime.widgetController=function(){var l=[],n=function(t,r){let u=t.gridX||0,h=t.gridY||0,o=t.gridWidth||2,w=t.gridHeight||2;if(r.willItFit({x:u,y:h,width:o,height:w}))return{x:u,y:h};let i=Math.max(...r.engine.nodes.map(p=>p.y+p.h),0);for(let p=0;p<=i+1;p++)for(let y=0;y<=12-o;y++)if(r.willItFit({newX:y,newY:p,width:o,height:w}))return{x:y,y:p};return{x:0,y:i+1}};GridStack.renderCB=function(t,r){r.content&&typeof DOMPurify<"u"&&(t.innerHTML=DOMPurify.sanitize(r.content))};var d=function(){l=GridStack.init({margin:"0px 15px 15px 0px",handle:".grid-handler-top",minRow:2,cellHeight:"30px",float:!0,draggable:{handle:".grid-handler-top",appendTo:"body"},lazyLoad:!1,columnOpts:{breakpointForWindow:!0,breakpoints:[{w:700,c:1},{w:950,c:6}]}}),l.on("dragstop",function(r,u){c()}),l.on("resizestop",function(r,u){c()}),document.querySelectorAll(".grid-stack-item").forEach(function(r){var u=r.querySelector(".removeWidget");u&&u.addEventListener("click",function(){e(this.closest(".grid-stack-item"))});var h=r.querySelector(".fitContent");h&&h.addEventListener("click",function(){a(this.closest(".grid-stack-item"))})});var t=document.querySelector("#gridBoard");t&&(t.style.opacity="1")},c=function(){let t=l.save();t.sort((h,o)=>h.y===o.y?h.x-o.x:h.y-o.y);let r=null;arguments.length>0&&arguments[0].action==="toggleWidget"&&(r={widgetId:arguments[0].widgetId,visible:arguments[0].visible}),t.forEach(function(h){var o=document.createElement("div");o.innerHTML=h.content;var w=o.querySelector("[hx-get]");h.id=w?w.getAttribute("id"):null,h.widgetUrl=w?w.getAttribute("hx-get"):null,h.widgetTrigger=w?w.getAttribute("hx-trigger"):null,h.x==null&&(h.x=0),h.gridX=h.x,h.y==null&&(h.y=0),h.gridY=h.y,h.w==null&&(h.w=1),h.gridWidth=h.w,h.h==null&&(h.h=1),h.gridHeight=h.h,h.content=""});var u=new URLSearchParams;u.append("action","saveGrid"),t.forEach(function(h,o){Object.keys(h).forEach(function(w){var i=h[w];i!=null&&u.append("data["+o+"]["+w+"]",i)})}),r&&Object.keys(r).forEach(function(h){u.append("visibilityData["+h+"]",r[h])}),fetch(leantime.appUrl+"/widgets/widgetManager",{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:u})},e=function(t){t.remove(),l.removeWidget(t,!0),c()},a=function(t){document.querySelector(".grid-stack").gridstack.resizeToContent(t,!1),c()},f=function(t,r,u){let h=document.querySelector(".grid-stack").gridstack,o=r.checked;if(n(u,h),o){const i=document.createElement("div");i.className="grid-stack-item";const p=document.createElement("div");p.className=`grid-stack-item-content tw:p-none ${u.widgetBackground=="default"?"maincontentinner":u.background}`,p.innerHTML=s(u),i.appendChild(p),h.el.appendChild(i),h.makeWidget(i,{x:u.gridX||0,y:u.gridY||50,w:u.gridWidth||2,h:u.gridHeight||2}),htmx.process(i),c({action:"toggleWidget",widgetId:t,visible:o})}else{var w=document.getElementById(t);w&&e(w.closest(".grid-stack-item"))}},s=function(t){return'<div class="widgetInner">        <div class="'+(t.widgetBackground=="default"?"tw:pb-l":"")+`">
            <div class="stickyHeader" style="padding:15px; height:50px;  width:100%;">
               <div class="grid-handler-top tw:h-[40px] tw:cursor-grab tw:float-left tw:mr-sm">
                    <i class="fa-solid fa-grip-vertical"></i>
                </div>
           `+(t.name!=""?'<h5 class="subtitle tw:pb-m tw:float-left tw:mr-sm">'+t.name+"</h5>":"")+`
            <div class="inlineDropDownContainer tw:float-right">
                <a href="javascript:void(0);" class="dropdown-toggle ticketDropDown editHeadline" data-toggle="dropdown">
                    <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="javascript:void(0)" class="fitContent"><i class="fa-solid fa-up-right-and-down-left-from-center"></i> Resize to fit content</a></li>
                        <li><a href="javascript:void(0)" class="removeWidget"><i class="fa fa-eye-slash"></i> Hide</a></li>
                </ul>
            </div>

        </div>
 <div class="widgetContent tw:px-l">
             <div hx-get="`+t.widgetUrl+'" hx-trigger="'+t.widgetTrigger+'" hx-target="this" hx-swap="innerHTML" id="'+t.id+`"></div>
        </div>
       </div>
        <div class="clear"></div>
    </div>
`};return{resizeWidget:a,removeWidget:e,saveGrid:c,initGrid:d,toggleWidgetVisibility:f}}();leantime.calendarController=function(){var l=function(e){var a=new Date;a.getDate(),a.getMonth(),a.getFullYear();var f=document.body.offsetHeight-260,s=document.querySelector("#calendar"),t=new FullCalendar.Calendar(s,{timeZone:leantime.i18n.__("usersettings.timezone"),height:f,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listDay"},titleFormat:{year:"numeric",month:"long"},dayHeaderFormat:{weekday:"short"},eventTimeFormat:leantime.dateHelper.getFormatFromSettings("timeformat","luxon"),direction:leantime.i18n.__("language.isRTL")=="false"?"ltr":"rtl",firstDay:parseInt(leantime.i18n.__("language.firstDayOfWeek"),10),locale:leantime.i18n.__("language.code"),buttonText:{today:leantime.i18n.__("buttons.today"),month:leantime.i18n.__("buttons.month"),week:leantime.i18n.__("buttons.week"),day:leantime.i18n.__("buttons.day")},selectable:!0,select:function(r){var u=prompt(leantime.i18n.__("label.event_title"));u&&t.addEvent({title:u,start:r.start,end:r.end,allDay:r.allDay}),t.unselect()},events:e,eventColor:"#0866c6"});t.render()},n=function(){document.addEventListener("DOMContentLoaded",function(){Date.prototype.addDays=function(r){return this.setDate(this.getDate()+r),this};var e=leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr"),a=document.querySelector("#event_date_from"),f=document.querySelector("#event_date_to"),s=flatpickr(a,{dateFormat:e,locale:{firstDayOfWeek:parseInt(leantime.i18n.__("language.firstDayOfWeek"),10)},allowInput:!0,onOpen:function(r,u,h){if(h.element.hasAttribute("readonly"))return h.close(),!1},onChange:function(r,u){r.length>0&&t.set("minDate",r[0]),f.value===""&&t.setDate(r[0],!0)}}),t=flatpickr(f,{dateFormat:e,locale:{firstDayOfWeek:parseInt(leantime.i18n.__("language.firstDayOfWeek"),10)},allowInput:!0,onChange:function(r){r.length>0&&s.set("maxDate",r[0])}})})},d=function(){var e={sizes:{minW:400,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".formModal").nyroModal(e)},beforeClose:function(){location.reload()}},titleFromIframe:!0};jQuery(".exportModal").nyroModal(e)},c=function(e,a){let f=document.querySelector(e),s=leantime.dateHelper.getFormatFromSettings("dateformat","luxon"),t=leantime.dateHelper.getFormatFromSettings("timeformat","luxon");const r=new FullCalendar.Calendar(f,{timeZone:leantime.i18n.__("usersettings.timezone"),height:"calc(100% - 65px)",stickyHeaderDates:!0,initialView:a,eventStartEditable:!0,dayHeaderFormat:s,eventTimeFormat:t,slotLabelFormat:t,views:{multiMonthOneMonth:{type:"multiMonth",duration:{months:1},multiMonthTitleFormat:{month:"long",year:"numeric"},dayHeaderFormat:{weekday:"short"}},timeGridDay:{dayHeaders:!1},listWeek:{listDayFormat:{weekday:"long"},listDaySideFormat:leantime.dateHelper.getFormatFromSettings("dateformat","luxon")}},droppable:!0,eventSources,editable:!0,headerToolbar:!1,nowIndicator:!0,eventDrop:function(o){o.event.extendedProps.enitityType=="ticket"?fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:o.event.extendedProps.enitityId,editFrom:luxon.DateTime.fromJSDate(o.event.start).toFormat(s),timeFrom:luxon.DateTime.fromJSDate(o.event.start).toFormat(t),editTo:luxon.DateTime.fromJSDate(o.event.end).toFormat(s),timeTo:luxon.DateTime.fromJSDate(o.event.end).toFormat(t)})}):o.event.extendedProps.enitityType=="event"&&fetch(leantime.appUrl+"/api/calendar",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:o.event.extendedProps.enitityId,dateFrom:o.event.startStr,dateTo:o.event.endStr})})},eventResize:function(o){o.event.extendedProps.enitityType=="ticket"?fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:o.event.extendedProps.enitityId,editFrom:luxon.DateTime.fromJSDate(o.event.start).toFormat(s),timeFrom:luxon.DateTime.fromJSDate(o.event.start).toFormat(t),editTo:luxon.DateTime.fromJSDate(o.event.end).toFormat(s),timeTo:luxon.DateTime.fromJSDate(o.event.end).toFormat(t)})}):o.event.extendedProps.enitityType=="event"&&fetch(leantime.appUrl+"/api/calendar",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:o.event.extendedProps.enitityId,dateFrom:o.event.startStr,dateTo:o.event.endStr})})},eventReceive:function(o){fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:o.event.id,editFrom:luxon.DateTime.fromJSDate(o.event.start).toFormat(s),timeFrom:luxon.DateTime.fromJSDate(o.event.start).toFormat(t),editTo:luxon.DateTime.fromJSDate(o.event.end).toFormat(s),timeTo:luxon.DateTime.fromJSDate(o.event.end).toFormat(t)})})},eventDragStart:function(o){},eventDidMount:function(o){o.isDraggable===!1&&o.el.classList.add("locked"),o.event.extendedProps.location!=null&&o.event.extendedProps.location!=""&&o.event.extendedProps.location.indexOf("http")==0&&(o.el.setAttribute("href",o.event.extendedProps.location),o.el.setAttribute("target","_blank"))}});document.addEventListener("DOMContentLoaded",function(){var o=document.querySelector("#yourToDoContainer");o&&u(o),h(),r.scrollToTime(Date.now())});function u(o){var w=o;w&&new FullCalendar.ThirdPartyDraggable(w,{itemSelector:".draggable-todo",mirrorClass:"dragging-mirror",eventDragMinDistance:10,mirrorSelector:function(i){return i.closest(".ticketBox")},eventData:function(i){let p=JSON.parse(i.dataset.event);return{id:p.id,title:p.title,color:p.color,enitityType:"ticket",duration:"01:00",url:p.url}}}),r.scrollToTime(Date.now())}function h(){r.setOption("locale",leantime.i18n.__("language.code")),r.render(),r.scrollToTime(Date.now());var o=document.querySelector(".minCalendar .fc-prev-button");o&&o.addEventListener("click",function(){r.prev(),r.getCurrentData()});var w=document.querySelector(".minCalendar .fc-next-button");w&&w.addEventListener("click",function(){r.next()});var i=document.querySelector(".minCalendar .fc-today-button");i&&i.addEventListener("click",function(){r.today()}),document.querySelectorAll(".minCalendar .calendarViewSelect").forEach(function(p){p.addEventListener("click",function(y){console.log(this.dataset.value),r.changeView(this.dataset.value),fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({submenu:"dashboardCalendarView",state:this.dataset.value})})})}),document.querySelectorAll(".day-button").forEach(function(p){p.addEventListener("click",function(){var y=this.dataset.date;r.gotoDate(y),document.querySelectorAll(".day-button").forEach(function(E){E.classList.remove("active")}),this.classList.add("active")})})}htmx.onLoad(function(o){return o.id=="yourToDoContainer"&&u(o),f})};return{initCalendar:l,initEventDatepickers:n,initExportModal:d,initWidgetCalendar:c}}();
