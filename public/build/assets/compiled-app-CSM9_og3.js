const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/game-snake-BiB7-ObF.js","assets/_commonjsHelpers-BosuxZz1.js"])))=>i.map(i=>d[i]);
import{_ as U}from"./preload-helper-DPi8upcZ.js";(function(){var a={duration:3200,close:"×",location:"default",style:"success",size:"medium"},r={success:{bg:"var(--green)",color:"#fff",border:"var(--green)"},error:{bg:"var(--red)",color:"#fff",border:"var(--red)"},warning:{bg:"var(--yellow)",color:"#333",border:"var(--yellow)"},notice:{bg:"var(--accent1)",color:"#fff",border:"var(--accent1)"},default:{bg:"var(--secondary-background)",color:"var(--primary-font-color)",border:"var(--main-border-color)"}},l=!1;function s(){if(!l){l=!0;var e=document.createElement("style");e.textContent="#growls-default {  position: fixed; top: 70px; right: 20px; z-index: 100060;  display: flex; flex-direction: column; gap: 8px;  pointer-events: none; max-width: 380px;}.lt-toast {  pointer-events: auto; padding: 12px 36px 12px 16px; border-radius: var(--box-radius, 8px);  box-shadow: var(--regular-shadow, 0 2px 8px rgba(0,0,0,.15)); font-size: var(--font-size-s, 13px);  line-height: 1.4; position: relative; overflow: hidden;  opacity: 0; transform: translateX(30px);  transition: opacity .25s ease, transform .25s ease;}.lt-toast.lt-toast-visible {  opacity: 1; transform: translateX(0);}.lt-toast.lt-toast-outgoing {  opacity: 0; transform: translateX(30px);}.lt-toast-close {  position: absolute; top: 8px; right: 10px; cursor: pointer;  font-size: 18px; line-height: 1; opacity: .7;}.lt-toast-close:hover { opacity: 1; }.lt-toast-title {  font-weight: 600; margin-bottom: 2px;}.lt-toast-message { word-break: break-word; }",document.head.appendChild(e)}}function o(e){var t="growls-"+e,i=document.getElementById(t);return i||(i=document.createElement("div"),i.id=t,document.body.appendChild(i)),i}function c(e){s(),e=e||{};var t={};for(var i in a)t[i]=a[i];for(var n in e)t[n]=e[n];var m=r[t.style]||r.default,x=o(t.location),d=document.createElement("div");d.className="lt-toast",d.style.background=m.bg,d.style.color=m.color,d.style.borderLeft="4px solid "+m.border,d.innerHTML='<div class="lt-toast-close">'+t.close+"</div>"+(t.title?'<div class="lt-toast-title">'+t.title+"</div>":"")+'<div class="lt-toast-message">'+(t.message||"")+"</div>",x.appendChild(d);var S=d.querySelector(".lt-toast-close");S.addEventListener("click",function(C){C.stopPropagation(),k(d)}),d.addEventListener("contextmenu",function(C){C.preventDefault(),k(d)});var L=null;d.addEventListener("mouseenter",function(){L&&(clearTimeout(L),L=null)}),d.addEventListener("mouseleave",function(){j()}),d.offsetHeight,d.classList.add("lt-toast-visible");function j(){L=setTimeout(function(){k(d)},t.duration)}function k(C){L&&(clearTimeout(L),L=null),C.classList.remove("lt-toast-visible"),C.classList.add("lt-toast-outgoing"),C.addEventListener("transitionend",function(){C.parentNode&&C.parentNode.removeChild(C)}),setTimeout(function(){C.parentNode&&C.parentNode.removeChild(C)},500)}j()}var v=window.leantime||(window.leantime={});v.toast={show:c};var b=function(e){return c(e)};b.error=function(e){return e=e||{},e.style="error",e.title=e.title||"Error!",c(e)},b.notice=function(e){return e=e||{},e.style="notice",e.title=e.title||"Notice!",c(e)},b.warning=function(e){return e=e||{},e.style="warning",e.title=e.title||"Warning!",c(e)},window._growlShim=b})();window.leantime=window.leantime||{};window.leantime.companyColor=(document.querySelector("meta[name=theme-color]")||{}).content||null;window.leantime.colorScheme=(document.querySelector("meta[name=color-scheme]")||{}).content||null;window.leantime.theme=(document.querySelector("meta[name=theme]")||{}).content||null;window.leantime.appUrl=(document.querySelector("meta[name=identifier-URL]")||{}).content||null;window.leantime.version=(document.querySelector("meta[name=leantime-version]")||{}).content||null;var $=window.leantime;$.replaceSVGColors=function(){$.companyColor!="#1b75bb"&&document.querySelectorAll("svg > *").forEach(function(a){a.getAttribute("fill")=="#1b75bb"&&a.setAttribute("fill",$.companyColor)})};$.handleAsyncResponse=function(a){a!==void 0&&a.result!==void 0&&a.result.html!==void 0&&document.body.insertAdjacentHTML("beforeend",a.result.html)};document.addEventListener("DOMContentLoaded",function(){$.replaceSVGColors(),document.querySelectorAll(".confetti").forEach(function(l){l.addEventListener("click",function(){confetti.start()})}),tippy("[data-tippy-content]");var a=document.querySelector(".login-alert .alert");if(a&&a.textContent!==""){var r=document.querySelector(".login-alert");r&&(r.style.display="")}document.addEventListener("scroll",function(){document.documentElement.dataset.scroll=window.scrollY})});htmx.onLoad(function(a){tippy("[data-tippy-content]"),$.replaceSVGColors()});window.addEventListener("HTMX.ShowNotification",function(a){fetch($.appUrl+"/notifications/getLatestGrowl",{credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(r){return r.text()}).then(function(r){var l=JSON.parse(r);l.notification&&l.notification!=="undefined"&&$.toast.show({message:l.notification,style:l.notificationType})})});document.addEventListener("click",function(a){var r=a.target.closest('[data-toggle="dropdown"]');if(document.querySelectorAll(".dropdown.open, .btn-group.open").forEach(function(s){(!r||!s.contains(r))&&s.classList.remove("open")}),r){a.preventDefault(),a.stopPropagation();var l=r.closest(".dropdown, .btn-group");l&&l.classList.toggle("open")}});document.addEventListener("keydown",function(a){a.key==="Escape"&&document.querySelectorAll(".dropdown.open, .btn-group.open").forEach(function(r){r.classList.remove("open")})});(function(){var a=document.createElement("style");a.textContent=".modal.in {  display: block !important; position: fixed; top: 0; left: 0; right: 0; bottom: 0;  z-index: 100050; overflow-x: hidden; overflow-y: auto;}.modal .modal-dialog {  position: relative; margin: 60px auto; max-width: 600px;}.modal .modal-dialog.modal-lg { max-width: 900px; }.modal .modal-content {  background: var(--secondary-background, #fff); border-radius: var(--box-radius, 8px);  box-shadow: var(--large-shadow, 0 4px 20px rgba(0,0,0,.2)); padding: 20px;}.modal .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }.modal .modal-header .close { background: none; border: none; font-size: 24px; cursor: pointer; color: var(--primary-font-color); }.modal .modal-body { margin-bottom: 15px; }.modal .modal-footer { display: flex; justify-content: flex-end; gap: 8px; }",document.head.appendChild(a);var r=null;function l(o){o&&(o.style.display="block",o.offsetHeight,o.classList.add("in"),document.body.classList.add("modal-open"),r||(r=document.createElement("div"),r.className="modal-backdrop fade in",r.style.cssText="display:block;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:100049;",document.body.appendChild(r),r.addEventListener("click",function(){var c=document.querySelector(".modal.in");c&&s(c)})))}function s(o){o&&(o.classList.remove("in"),o.style.display="none",document.body.classList.remove("modal-open"),r&&r.parentNode&&(r.parentNode.removeChild(r),r=null))}document.addEventListener("click",function(o){var c=o.target.closest('[data-dismiss="modal"]');if(c){var v=c.closest(".modal");v&&s(v)}}),document.addEventListener("keydown",function(o){if(o.key==="Escape"){var c=document.querySelector(".modal.in");c&&s(c)}}),typeof jQuery<"u"&&(jQuery.fn.modal=function(o){return this.each(function(){o==="show"?l(this):o==="hide"?s(this):o==="toggle"&&(this.classList.contains("in")?s(this):l(this))}),this}),window.leantime=window.leantime||{},leantime.bootstrapModal={show:l,hide:s}})();(function(){function a(r,l){l=l||{};var s=r.querySelectorAll(":scope > ul > li > a"),o=[];if(s.forEach(function(v){var b=v.getAttribute("href");if(b&&b.charAt(0)==="#"){var e=r.querySelector(b);e&&o.push(e)}}),o.length!==0){var c=l.active||0;(typeof c!="number"||c<0||c>=o.length)&&(c=0),o.forEach(function(v,b){v.style.display=b===c?"":"none"}),s.forEach(function(v,b){b===c?v.parentElement.classList.add("ui-tabs-active","ui-state-active","active"):v.parentElement.classList.remove("ui-tabs-active","ui-state-active","active")}),s.forEach(function(v,b){v.addEventListener("click",function(e){e.preventDefault(),o.forEach(function(t){t.style.display="none"}),s.forEach(function(t){t.parentElement.classList.remove("ui-tabs-active","ui-state-active","active")}),o[b]&&(o[b].style.display=""),v.parentElement.classList.add("ui-tabs-active","ui-state-active","active")})}),l.create&&l.create.call(r,{},{tab:s[c],panel:o[c]})}}typeof jQuery<"u"&&(jQuery.fn.tabs=function(r){return this.each(function(){a(this,r)}),this})})();(function(){typeof jQuery>"u"||(jQuery.fn.chosen=function(a){return this.each(function(){var r=this;if(r.tagName==="SELECT"){if(r._slimSelect){try{r._slimSelect.destroy()}catch{}r._slimSelect=null}if(a!=="destroy"&&typeof SlimSelect<"u")try{r._slimSelect=new SlimSelect({select:r,showSearch:r.options&&r.options.length>8,allowDeselect:!r.hasAttribute("required")})}catch{}}}),this})})();var Re={},je;function mt(){return je||(je=1,leantime.editorController=function(){var a=[{start:"*",end:"*",format:"italic"},{start:"_",end:"_",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"__",end:"__",format:"bold"},{start:"~~",end:"~~",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"},{start:"1. ",cmd:"InsertOrderedList",value:{"list-style-type":"decimal"}},{start:"1) ",cmd:"InsertOrderedList",value:{"list-style-type":"decimal"}},{start:"a. ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-alpha"}},{start:"a) ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-alpha"}},{start:"i. ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-roman"}},{start:"i) ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-roman"}},{start:"[ ] ",cmd:"InsertChecklist"},{start:">",format:"blockquote"},{start:"`",end:"`",format:"code"},{start:"```",end:"```",format:"pre"},{start:"~",end:"~",cmd:"createLink"},{start:"---",replacement:"<hr/>"},{start:"--",replacement:"—"},{start:"-",replacement:"—"},{start:"(c)",replacement:"©"}],r={delimiter:"@",delay:20,source:function(n,m,x){x==="@"&&fetch(leantime.appUrl+"/api/users?projectUsersAccess=current&query="+encodeURIComponent(n),{credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(d){return d.json()}).then(function(d){for(var S=[],L=0;L<d.length;L++)S[L]={name:d[L].firstname+" "+d[L].lastname,id:d[L].id,email:d[L].username};m(S)})},highlighter:function(n){return n.replace(new RegExp("("+this.query+")","ig"),function(m,x){return"<strong>"+x+"</strong>"})},insert:function(n){return'<a class="userMention" data-tagged-user-id="'+n.id+'" href="javascript:void(0)"><img src="'+leantime.appUrl+"/api/users?profileImage="+n.id+'" alt="'+n.name+' Image"/>'+n.name.trim()+"</a>&nbsp;"},items:10},l=function(n,m,x){var d,S;d=new XMLHttpRequest,d.withCredentials=!1,d.open("POST",leantime.appUrl+"/api/files"),d.onload=function(){if(d.status<200||d.status>=300){x("HTTP Error: "+d.status);return}m(d.responseText)},S=new FormData,S.append("file",n.blob()),d.send(S)},s=function(n,m,x){window.filePickerCallback=n;var d={afterShowCont:function(){leantime.modals.initNyroModal(document.querySelectorAll(".fileModal"),{callbacks:d})}};leantime.modals.nmManual(leantime.appUrl+"/files/showAll?modalPopUp=true",{stack:!0,callbacks:d,sizes:{minW:500,minH:500}});var S=leantime.modals.nmTop().elts;S.cont&&(S.cont.style.zIndex="1000010"),S.bg&&(S.bg.style.zIndex="1000010"),S.load&&(S.load.style.zIndex="1000010"),S.all&&(S.all.style.zIndex="1000010")},o=function(n,m){n.on("change",function(){}),n.on("init",function(x){var d=n.getDoc().getElementsByClassName("confetti");d&&d.length>0&&d[0].addEventListener("click",function(){confetti.start()})}),n.on("focus",function(){var x=n.getDoc().getElementsByClassName("tinyPlaceholder");if(x.length>0)for(;x[0];)x[0].parentNode.removeChild(x[0])}),n.on("submit",function(){var x=n.getDoc().getElementsByClassName("tinyPlaceholder");if(x.length>0){for(;x[0];)x[0].remove();n.save()}})},c=leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",v=leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",b=function(n){tinymce.init({selector:"textarea.tinymceSimple",iframe_aria_text:"",width:"100%",skin_url:c,content_css:v,content_style:"body.mce-content-body{ font-size:14px; } img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,shortlink,checklist,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advlist,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | link unlink image | checklist bullist numlist | emoticons",browser_spellcheck:!0,toolbar_location:"bottom",branding:!1,statusbar:!1,convert_urls:!0,paste_data_images:!0,menubar:!1,relative_urls:!0,document_base_url:leantime.appUrl+"/",default_link_target:"_blank",table_appearance_options:!1,mentions:r,textpattern_patterns:a,images_upload_handler:l,file_picker_callback:s,setup:o})},e=function(){var n=document.querySelector("input[name=id]"),m=n?n.value:null;m||(m="new");let x="none";window.leantime.currentProject&&(x=window.leantime.currentProject);var d=window.innerHeight-50-205;tinymce.init({selector:"textarea.complexEditor",iframe_aria_text:"",width:"100%",skin_url:leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",content_css:leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",content_style:"html {text-align:center;} body.mce-content-body{ font-size:14px; } img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,embed,autoresize,shortlink,checklist,bettertable,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advancedTemplate,advlist,codesample,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | formatselect forecolor | alignleft aligncenter alignright | link unlink image media embed emoticons | checklist bullist numlist | table  | codesample | advancedTemplate | restoredraft",autosave_prefix:"leantime-complexEditor-autosave-{path}{query}-{id}-"+x+"-"+m+"-",autosave_restore_when_empty:m!=="new",autosave_retention:"10m",browser_spellcheck:!0,contextmenu:!1,autosave_retention:"120m",autosave_interval:"10s",autosave_ask_before_unload:!1,branding:!1,statusbar:!1,convert_urls:!0,menubar:!1,resizable:!0,templates:leantime.appUrl+"/wiki/templates",body_class:"mce-content-body",paste_data_images:!0,relative_urls:!0,document_base_url:leantime.appUrl+"/",table_appearance_options:!1,min_height:400,max_height:d,default_link_target:"_blank",codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Rust",value:"rust"},{text:"SQL",value:"sql"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"Swift",value:"swift"},{text:"Objective C",value:"objectivec"},{text:"Go",value:"go"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],mentions:r,textpattern_patterns:a,images_upload_handler:l,file_picker_callback:s,setup:o})},t=function(n){var m=document.querySelector("input[name=id]"),x=m?m.value:null;(x==null||x==null)&&(x="new");let d="none";window.leantime.currentProject&&(d=window.leantime.currentProject),tinymce.init({selector:"textarea.notesEditor",iframe_aria_text:"",width:"100%",skin_url:leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",content_css:leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",content_style:"html {text-align:center;} body.mce-content-body{ font-size:14px; color:var(--secondary-font-color); max-width:none;} img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,embed,autoresize,shortlink,checklist,bettertable,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advancedTemplate,advlist,codesample,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | formatselect forecolor | alignleft aligncenter alignright | link image table emoticons | checklist bullist | advancedTemplate | restoredraft",toolbar_location:"bottom",browser_spellcheck:!0,contextmenu:!1,autosave_prefix:"leantime-complexEditor-autosave-{path}{query}-{id}-"+d+"-"+x+"-",autosave_restore_when_empty:!0,autosave_retention:"120m",autosave_interval:"10s",autosave_ask_before_unload:!1,branding:!1,statusbar:!1,convert_urls:!0,menubar:!1,resizable:!0,templates:leantime.appUrl+"/wiki/templates",body_class:"mce-content-body",paste_data_images:!0,relative_urls:!0,document_base_url:leantime.appUrl+"/",table_appearance_options:!1,min_height:400,default_link_target:"_blank",codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Rust",value:"rust"},{text:"SQL",value:"sql"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"Swift",value:"swift"},{text:"Objective C",value:"objectivec"},{text:"Go",value:"go"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],textpattern_patterns:a,mentions:r,textpattern_patterns:a,images_upload_handler:l,file_picker_callback:s,setup:function(S){o(S),S.on("blur",function(){S.save(),n()})}})},i=function(n){tinymce.init({selector:n,iframe_aria_text:"",width:"100%",skin_url:c,inline:!0,plugins:"autosave,imagetools,shortlink,checklist,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advlist,mention,slashcommands,textpattern",toolbar:"",toolbar_location:"bottom",browser_spellcheck:!0,contextmenu:!1,branding:!1,statusbar:!1,convert_urls:!0,paste_data_images:!0,menubar:!1,relative_urls:!0,document_base_url:leantime.appUrl+"/",default_link_target:"_blank",table_appearance_options:!1,mentions:r,textpattern_patterns:a,images_upload_handler:l,file_picker_callback:s,setup:o})};return{initSimpleEditor:b,initComplexEditor:e,initNotesEditor:t,initContentEditable:i}}()),Re}mt();leantime.snippets=function(){var a=function(e){var t=document.getElementById(e);t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),leantime.toast.show({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},r=function(e){navigator.clipboard.writeText(e),leantime.toast.show({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},l=function(){document.querySelectorAll(".confetti").forEach(function(e){e.addEventListener("click",function(){confetti.start()})})},s=function(e){var t=document.getElementById("accordion_toggle_"+e),i=t?t.querySelector("i.fa"):null,n="accordion_content-"+e,m="closed",x=document.getElementById("accordion_content-"+e);i&&i.classList.contains("fa-angle-right")?(i.classList.remove("fa-angle-right"),i.classList.add("fa-angle-down"),x&&(x.style.display=""),m="open"):i&&(i.classList.remove("fa-angle-down"),i.classList.add("fa-angle-right"),x&&(x.style.display="none"),m="closed");var d=new FormData;d.append("submenu",n),d.append("state",m),fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",body:d,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}})},o=function(e){var t=document.getElementById("themeStyleSheet"),i=t.getAttribute("href");e=="light"?(i=i.replace("dark.css","light.css"),t.setAttribute("href",i)):e=="dark"&&(i=i.replace("light.css","dark.css"),t.setAttribute("href",i))},c=function(e){var t=document.getElementById("themeStyleSheet"),i=t.getAttribute("href");e=="minimal"?(i=i.replace("default","minimal"),t.setAttribute("href",i)):e=="default"&&(i=i.replace("minimal","default"),t.setAttribute("href",i))},v=function(e){document.getElementById("fontStyleSetter").innerHTML=":root { --primary-font-family: '"+e+"', 'Helvetica Neue', Helvetica, sans-serif; }"},b=function(e,t){document.getElementById("colorSchemeSetter").innerHTML=":root { --accent1: "+e+"; --accent2: "+t+"}"};return{copyUrl:a,copyToClipboard:r,initConfettiClick:l,accordionToggle:s,toggleTheme:o,toggleFont:v,toggleColors:b,toggleBg:c}}();var He={},Pe;function ft(){return Pe||(Pe=1,leantime.modals=function(){var a=!1;function r(){return document.getElementById("global-modal")}function l(){return document.getElementById("global-modal-content")}function s(){return document.getElementById("global-modal-box")}function o(k){return/showTicket|ideaDialog|articleDialog/.test(k)}function c(){var k=l();k&&(k.innerHTML='<div style="display:flex;justify-content:center;align-items:center;padding:60px 40px;"><span class="tw:loading tw:loading-spinner tw:loading-lg"></span></div>')}function v(k){for(var C=k.querySelectorAll("script"),q=0;q<C.length;q++){for(var B=C[q],N=document.createElement("script"),P=0;P<B.attributes.length;P++)N.setAttribute(B.attributes[P].name,B.attributes[P].value);N.textContent=B.textContent,B.parentNode.replaceChild(N,B)}}function b(k){if(/<html[\s>]/i.test(k)||/<!DOCTYPE/i.test(k)){var C=new DOMParser().parseFromString(k,"text/html"),q=C.querySelector(".primaryContent");return q?q.innerHTML:C.body?C.body.innerHTML:k}return k}function e(k){k.querySelectorAll(".showDialogOnLoad").forEach(function(C){C.style.display=""}),window.htmx&&window.htmx.process(k),window.tippy&&tippy(k.querySelectorAll("[data-tippy-content]"))}function t(k){var C=k.headers.get("HX-Trigger");if(C&&C.indexOf("HTMX.closemodal")!==-1)return C.indexOf("HTMX.ShowNotification")!==-1&&window.dispatchEvent(new CustomEvent("HTMX.ShowNotification")),x(),Promise.resolve(null);var q=k.headers.get("HX-Redirect");return q?(x(),window.location.href=q,Promise.resolve(null)):k.text()}function i(){if(!(typeof tinymce>"u")){var k=l();if(k){for(var C=tinymce.get(),q=C.length-1;q>=0;q--)if(k.contains(C[q].getElement())){try{C[q].save()}catch{}try{C[q].destroy(!1)}catch{}}}}}function n(k){if(k!==null){var C=l();C&&(i(),C.innerHTML=b(k),v(C),e(C))}}function m(k){var C=r(),q=s();if(C){q.className=q.className.replace(/tw:max-w-\S+/g,"").trim(),q.style.minHeight="",o(k)?(q.classList.add("tw:max-w-5xl"),q.style.minHeight="80vh"):q.classList.add("tw:max-w-3xl"),c(),C.open||C.showModal(),a=!0;var B=leantime.appUrl.replace(/\/$/,""),N=k.indexOf("http")===0?k:B+k;fetch(N,{credentials:"include",headers:{"is-modal":"true","X-Requested-With":"XMLHttpRequest"}}).then(t).then(n).catch(function(P){console.error("modalManager: load error",P);var W=l();W&&(W.innerHTML='<div style="padding:24px;text-align:center;"><p>Could not load content.</p></div>')})}}function x(){var k=r();if(k&&a){a=!1,i();try{history.pushState("",document.title,window.location.pathname+window.location.search)}catch{}if(k.open&&k.close(),typeof window.globalModalCallback=="function"){var C=window.globalModalCallback;window.globalModalCallback=null,C()}else location.reload()}}var d=function(){var k=window.location.hash.substring(1);if(k){var C=k.split("/");C.length>2&&C[1]!=="tab"&&m(k)}},S=function(){x()},L=function(k){typeof k=="function"&&(window.globalModalCallback=k)},j=function(k){var C=leantime.appUrl.replace(/\/$/,""),q=k;k.indexOf(C)===0&&(q=k.substring(C.length)),m(q)};return{openModal:d,setCustomModalCallback:L,closeModal:S,openByUrl:j}}(),document.addEventListener("DOMContentLoaded",function(){leantime.modals.openModal(),leantime.modals.initNyroModal(document.querySelectorAll("a.formModal"),{callbacks:{beforeClose:function(){location.reload()}}});var a=document.getElementById("global-modal");a&&(a.addEventListener("cancel",function(r){r.preventDefault(),leantime.modals.closeModal()}),a.addEventListener("close",function(){leantime.modals.closeModal()})),document.addEventListener("submit",function(r){var l=r.target;if(!(!l||!l.closest||!l.closest("#global-modal-content"))&&l.getAttribute("method")!=="dialog"&&!(l.hasAttribute("hx-post")||l.hasAttribute("hx-get")||l.hasAttribute("hx-put")||l.hasAttribute("hx-delete"))){r.preventDefault();var s=(l.getAttribute("method")||"GET").toUpperCase(),o=l.getAttribute("action")||window.location.href,c=document.getElementById("global-modal-content"),v={method:s,credentials:"include",headers:{"is-modal":"true","X-Requested-With":"XMLHttpRequest"}};if(s==="POST")v.body=new FormData(l);else{var b=new URLSearchParams(new FormData(l));o+=(o.indexOf("?")===-1?"?":"&")+b.toString()}fetch(o,v).then(function(e){var t=e.headers.get("HX-Trigger");if(t&&t.indexOf("HTMX.closemodal")!==-1)return t.indexOf("HTMX.ShowNotification")!==-1&&window.dispatchEvent(new CustomEvent("HTMX.ShowNotification")),leantime.modals.closeModal(),null;var i=e.headers.get("HX-Redirect");return i?(leantime.modals.closeModal(),window.location.href=i,null):e.text()}).then(function(e){if(e!==null){var t=e;if(/<html[\s>]/i.test(e)||/<!DOCTYPE/i.test(e)){var i=new DOMParser().parseFromString(e,"text/html"),n=i.querySelector(".primaryContent");t=n?n.innerHTML:i.body?i.body.innerHTML:e}destroyModalEditors(),c.innerHTML=t;for(var m=c.querySelectorAll("script"),x=0;x<m.length;x++){for(var d=m[x],S=document.createElement("script"),L=0;L<d.attributes.length;L++)S.setAttribute(d.attributes[L].name,d.attributes[L].value);S.textContent=d.textContent,d.parentNode.replaceChild(S,d)}c.querySelectorAll(".showDialogOnLoad").forEach(function(j){j.style.display=""}),window.htmx&&window.htmx.process(c),window.tippy&&tippy(c.querySelectorAll("[data-tippy-content]"))}}).catch(function(e){console.error("modalManager: form submit error",e)})}},!0)}),window.addEventListener("hashchange",function(){leantime.modals.openModal()}),window.addEventListener("closeModal",function(){leantime.modals.closeModal()}),document.addEventListener("HTMX.closemodal",function(){leantime.modals.closeModal()}),leantime.modals.nmManual=function(a,r){typeof r=="function"&&(r=r()),r&&r.callbacks&&typeof r.callbacks.beforeClose=="function"&&(window.globalModalCallback=r.callbacks.beforeClose),leantime.modals.openByUrl(a)},leantime.modals.nmTop=function(){return{close:function(){leantime.modals.closeModal()},elts:{cont:document.getElementById("global-modal-box"),bg:document.querySelector("#global-modal .tw\\:modal-backdrop"),load:document.querySelector("#global-modal .tw\\:loading"),all:document.getElementById("global-modal")}}},leantime.modals.initNyroModal=function(a,r){a instanceof HTMLElement&&(a=[a]),Array.prototype.forEach.call(a,function(l){if(!l.dataset.modalManagerInit){l.dataset.modalManagerInit="true",r&&r.callbacks&&(l._modalManagerOpts=r);var s=l.getAttribute("href");s&&s.indexOf("#")===0||s&&l.addEventListener("click",function(o){o.preventDefault(),r&&r.callbacks&&typeof r.callbacks.beforeClose=="function"&&(window.globalModalCallback=r.callbacks.beforeClose),leantime.modals.openByUrl(s)})}})},typeof jQuery<"u"&&(jQuery.nmManual=leantime.modals.nmManual,jQuery.nmTop=leantime.modals.nmTop,jQuery.fn.nyroModal=function(a){return leantime.modals.initNyroModal(this.toArray(),a),this})),He}ft();var Ue={},Be;function pt(){return Be||(Be=1,leantime.dateController=function(){function a(s){var o=leantime.i18n.__("language.dayNames").split(",");leantime.i18n.__("language.dayNamesShort").split(",");var c=leantime.i18n.__("language.dayNamesMin").split(","),v=leantime.i18n.__("language.monthNames").split(","),b=leantime.i18n.__("language.monthNamesShort").split(","),e=parseInt(leantime.i18n.__("language.firstDayOfWeek"),10)||0;return{dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr"),locale:{firstDayOfWeek:e,weekdays:{shorthand:c,longhand:o},months:{shorthand:b,longhand:v}},allowInput:!0,onChange:s?function(t,i,n){s.call(n.input,i,n)}:void 0}}var r=function(s,o,c){var v=typeof s=="string"?document.querySelector(s):s,b=typeof o=="string"?document.querySelector(o):o;if(!(!v||!b)&&!(v.hasAttribute("readonly")||b.hasAttribute("readonly"))){var e=a();e.onChange=function(m){m.length>0&&(n.set("minDate",m[0]),b.value||n.setDate(m[0],!0))};var t=a();t.onChange=function(m){m.length>0&&i.set("maxDate",m[0])};var i=flatpickr(v,e),n=flatpickr(b,t)}},l=function(s,o){var c=typeof s=="string"?document.querySelector(s):s;c&&(c.hasAttribute("readonly")||flatpickr(c,a(o)))};return{initDateRangePicker:r,initDatePicker:l,getBaseDatePickerConfig:a}}(),function(){if(!(typeof jQuery>"u")){var a=new WeakMap;jQuery.datepicker=jQuery.datepicker||{},jQuery.datepicker.setDefaults=function(){},jQuery.datepicker.parseDate=function(r,l){if(!l)return null;var s=leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr");return flatpickr.parseDate(l,s)},jQuery.datepicker.formatDate=function(r,l){if(!l)return"";var s=leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr");return flatpickr.formatDate(l,s)},jQuery.fn.datepicker,jQuery.fn.datepicker=function(r,l){return this.each(function(){var s=this;if(typeof r=="string"){var o=a.get(s);if(!o)return;if(r==="option"||r==="setDate")if(l==="minDate"||r==="setDate"){var c=arguments.length>2?arguments[2]:l;r==="setDate"?o.setDate(c,!0):o.set("minDate",c)}else l==="maxDate"&&o.set("maxDate",arguments[2]);return}if(!s.hasAttribute("readonly")){var v=leantime.dateController.getBaseDatePickerConfig();r&&r.onSelect&&(v.onChange=function(e,t,i){r.onSelect.call(s,t,i)});var b=flatpickr(s,v);a.set(s,b)}})}}}()),Ue}pt();leantime.dateHelper=function(){var a={jquery:{},luxon:{},flatpickr:{}};a.jquery={d:"dd",D:"D",j:"d",l:"DD",N:"",S:"",w:"",z:"o",W:"",F:"MM",m:"mm",M:"M",n:"m",t:"",L:"",o:"yy",Y:"yy",y:"y",a:"",A:"",B:"",g:"",G:"",h:"",H:"",i:"",s:"",u:"",e:"",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"@"},a.flatpickr={d:"d",D:"D",j:"j",l:"l",N:"",S:"",w:"w",z:"",W:"W",F:"F",m:"m",M:"M",n:"n",t:"",L:"",o:"Y",Y:"Y",y:"y",a:"K",A:"K",B:"",g:"G",G:"H",h:"h",H:"H",i:"i",s:"S",u:"",e:"",I:"",O:"",P:"",T:"",Z:"Z",c:"",r:"",U:"U"},a.luxon={d:"dd",D:"ccc",j:"d",l:"cccc",N:"c",S:"",w:"c",z:"o",W:"WW",F:"MMMM",m:"LL",M:"LLL",n:"L",t:"",L:"",o:"kk",Y:"yyyy",y:"yy",a:"a",A:"a",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",v:"SSS",e:"z",I:"",O:"ZZ",P:"ZZ",T:"ZZZ",Z:"",c:"",r:"",U:"X"};var r=function(s,o){let c=a[o],v="";return s.split("").forEach(function(b){c[b]!==void 0?v=v+""+c[b]:v=v+""+b}),v},l=function(s,o){let c=leantime.i18n.__("language."+s);return r(c,o)};return{mapFormat:r,getFormatFromSettings:l}}();leantime.accessibilityController=function(){var a=function(){var e=document.querySelectorAll(".ss-main");e.forEach(function(t){if(!t.dataset.a11yEnhanced){var i=t.previousElementSibling;if(!(!i||i.tagName!=="SELECT")){var n="",m=i.getAttribute("id");if(m){var x=document.querySelector('label[for="'+m+'"]');x&&(n=x.textContent.trim())}var d=i.hasAttribute("multiple");t.setAttribute("role","combobox"),t.setAttribute("aria-haspopup","listbox"),t.setAttribute("aria-expanded","false"),t.setAttribute("aria-label",n||i.getAttribute("data-placeholder")||(d?"Select options":"Select option")),d&&t.setAttribute("aria-multiselectable","true");var S=t.parentElement?t.parentElement.querySelector(".ss-content .ss-list"):null;S&&S.setAttribute("role","listbox");var L=new MutationObserver(function(k){k.forEach(function(C){if(C.attributeName==="class"){var q=t.parentElement?t.parentElement.querySelector(".ss-content"):null;if(q){var B=q.classList.contains("ss-open");t.setAttribute("aria-expanded",B?"true":"false")}}})}),j=t.parentElement?t.parentElement.querySelector(".ss-content"):null;j&&L.observe(j,{attributes:!0,attributeFilter:["class"]}),t.dataset.a11yEnhanced="true"}}})},r=function(){var e=document.querySelectorAll("div.tagsinput");e.forEach(function(t){var i=t.nextElementSibling;if(!(!i||i.type!=="text")){var n=i.getAttribute("id"),m="Enter tags";if(n){var x=document.querySelector('label[for="'+n+'"]');x&&(m=x.textContent.trim())}t.setAttribute("role","list"),t.setAttribute("aria-label",m);var d=t.querySelectorAll("span.tag");d.forEach(function(j){j.setAttribute("role","listitem")});var S=t.querySelector("input");if(S&&(S.setAttribute("aria-label","Add new tag"),n&&S.setAttribute("aria-describedby",n+"-help")),n&&!document.getElementById(n+"-help")){var L=document.createElement("span");L.id=n+"-help",L.className="sr-only",L.textContent="Type and press enter to add tags. Press backspace to remove the last tag.",t.parentNode.insertBefore(L,t.nextSibling)}}})},l=function(){var e=document.querySelectorAll("input.hasDatepicker");e.forEach(function(t){var i=t.getAttribute("id"),n="";if(i){var m=document.querySelector('label[for="'+i+'"]');m&&(n=m.textContent.trim())}if(t.setAttribute("role","textbox"),t.setAttribute("aria-label",n||"Select date"),i&&(t.setAttribute("aria-describedby",i+"-help"),!document.getElementById(i+"-help"))){var x=document.createElement("span");x.id=i+"-help",x.className="sr-only",x.textContent="Date input. Use arrow keys to navigate calendar. Press enter to select date.",t.parentNode.insertBefore(x,t.nextSibling)}}),document._a11yDatepickerBound||(document.addEventListener("focusin",function(t){t.target&&t.target.matches&&t.target.matches("input.hasDatepicker")&&setTimeout(function(){var i=document.getElementById("ui-datepicker-div");i&&i.style.display!=="none"&&(i.setAttribute("role","dialog"),i.setAttribute("aria-label","Choose date"),i.setAttribute("aria-modal","true"))},100)}),document._a11yDatepickerBound=!0)},s=function(){typeof tinymce<"u"&&tinymce.on("AddEditor",function(e){var t=e.editor,i="Rich text editor",n=document.querySelector('label[for="'+t.id+'"]');n&&(i=n.textContent.trim()),t.on("init",function(){var m=document.getElementById(t.id+"_ifr");if(m&&(m.setAttribute("aria-label",i),!document.getElementById(t.id+"-help"))){var x=document.createElement("span");x.id=t.id+"-help",x.className="sr-only",x.textContent="Rich text editor. Press ALT+F10 to access toolbar. Press ESC to return to editing area.",m.parentNode.insertBefore(x,m.nextSibling)}})})},o=function(){var e=document.querySelectorAll('input[type="time"]');e.forEach(function(t){var i=t.getAttribute("id");if(i&&!document.querySelector('label[for="'+i+'"]')){var n="Time",m=t.closest(".form-group");if(m){var x=m.querySelector("label");x&&(n=x.textContent.trim()+" time")}t.setAttribute("aria-label",n)}})},c=function(){var e=document.querySelectorAll(".ticketBox");e.forEach(function(t){t.getAttribute("tabindex")||t.setAttribute("tabindex","0");var i=t.querySelector(".ticketHeadline"),n=i?i.textContent.trim():"";n&&(t.setAttribute("role","article"),t.setAttribute("aria-label","Task: "+n)),t.dataset.keyboardBound||(t.addEventListener("keydown",function(m){var x=m.target,d=x.matches('a, button, input, select, textarea, [role="button"], [tabindex]')||x.closest(".dropdown-toggle, .ticketDropdown, .inlineDropDownContainer");if((m.key==="Enter"||m.key===" ")&&!d&&m.target===t){m.preventDefault();var S=t.querySelector("a");S&&S.click()}}),t.dataset.keyboardBound="true")})},v=function(){a(),r(),l(),o(),c()},b=function(){v(),s(),document.addEventListener("htmx:afterSwap",function(){setTimeout(v,100)}),document.addEventListener("shown.bs.modal",function(){setTimeout(v,100)}),setTimeout(a,1e3)};return{init:b,enhanceSlimSelectAccessibility:a,enhanceTagsInputAccessibility:r,enhanceDatepickerAccessibility:l,enhanceTinyMCEAccessibility:s,fixTimepickerLabels:o,enhanceKanbanCardAccessibility:c}}();document.addEventListener("DOMContentLoaded",function(){leantime.accessibilityController.init()});leantime.authController=function(){var a=function(r){(typeof r>"u"||!r)&&(r="body");var l=document.querySelector(r);if(l){l.querySelectorAll("input").forEach(function(o){o.closest(".filterBar")||(o.readOnly=!0,o.disabled=!0)}),l.querySelectorAll("select").forEach(function(o){!o.closest(".filterBar")&&!o.classList.contains("mainSprintSelector")&&(o.readOnly=!0,o.disabled=!0)}),l.querySelectorAll("textarea").forEach(function(o){o.closest(".filterBar")||(o.disabled=!0)}),l.querySelectorAll("a.delete").forEach(function(o){o.remove()}),l.querySelectorAll(".quickAddLink").forEach(function(o){o.style.display="none"}),l.querySelectorAll(".complexEditor").forEach(function(o){typeof tinymce<"u"&&tinymce.get(o.id)&&tinymce.get(o.id).getBody().setAttribute("contenteditable","false")}),l.querySelectorAll(".tinymceSimple").forEach(function(o){typeof tinymce<"u"&&tinymce.get(o.id)&&tinymce.get(o.id).getBody().setAttribute("contenteditable","false")}),l.querySelectorAll(".tox-editor-header").forEach(function(o){o.style.display="none"}),l.querySelectorAll(".tox-statusbar").forEach(function(o){o.style.display="none"}),l.querySelectorAll(".ticketDropdown a").forEach(function(o){o.removeAttribute("data-toggle")});var s=document.getElementById("mainToggler");s&&(s.style.display="none"),document.querySelectorAll(".commentBox").forEach(function(o){o.style.display="none"}),document.querySelectorAll(".deleteComment, .replyButton").forEach(function(o){o.style.display="none"}),l.querySelectorAll(".dropdown i").forEach(function(o){o.classList.remove("fa-caret-down")})}};return{makeInputReadonly:a}}();leantime.commentsController=function(){var a=function(){document.querySelectorAll(".commentBox").forEach(function(l){l.style.display=""}),document.querySelectorAll("#comments .replies .commentBox").forEach(function(l){l.style.display="none"}),document.querySelectorAll(".deleteComment, .replyButton").forEach(function(l){l.style.display=""}),document.querySelectorAll(".commentReply .tinymceSimple").forEach(function(l){var s=tinymce.get(l.id);s&&s.getBody().setAttribute("contenteditable","true")}),document.querySelectorAll(".commentReply .tox-editor-header").forEach(function(l){l.style.display=""}),document.querySelectorAll(".commenterFields input").forEach(function(l){l.readOnly=!1,l.disabled=!1}),document.querySelectorAll(".commenterFields textarea").forEach(function(l){l.readOnly=!1,l.disabled=!1})},r=function(l){if(l==0){var s=document.getElementById("mainToggler");s&&(s.style.display="none")}else{var s=document.getElementById("mainToggler");s&&(s.style.display="")}document.querySelectorAll(".commentBox textarea").forEach(function(b){b.remove()}),document.querySelectorAll(".commentBox").forEach(function(b){b.style.display="none"});var o=document.getElementById("comment"+l);if(o){var c=o.querySelector(".commentReply");c&&c.insertAdjacentHTML("afterbegin",'<textarea rows="5" cols="75" name="text" class="tinymceSimple"></textarea>')}leantime.editorController.initSimpleEditor(),o&&(o.style.display="");var v=document.getElementById("father");v&&(v.value=l)};return{enableCommenterForms:a,toggleCommentBoxes:r}}();leantime.ticketsController=function(){function a(){let h=[];document.querySelectorAll(".sortableTicketList").forEach(function(g){g.querySelectorAll(".column").forEach(function(_,u){h[u]===void 0&&(h[u]=0);var f=_.querySelectorAll(".moveable").length;h[u]+=f})}),document.querySelectorAll(".widgettitle .count").forEach(function(g,_){g.textContent=h[_]})}function r(){document.querySelectorAll(".kanban-swimlane-row").forEach(function(h){var g=h.id;if(g){g.replace("swimlane-row-","");var _=h.querySelector(".kanban-swimlane-content"),u=_?_.querySelectorAll(".moveable").length:0,f=h.querySelector(".kanban-swimlane-sidebar");if(f){f.querySelectorAll(".kanban-lane-count").forEach(function(y){y.textContent=u});var w=f.getAttribute("aria-label")||"",p=w.replace(/\d+ tasks/,u+" tasks");f.setAttribute("aria-label",p)}}}),l()}function l(){document.querySelectorAll(".kanban-swimlane-row").forEach(function(h){var g=h.querySelector(".kanban-swimlane-content"),_=h.querySelector(".micro-progress-bar .progress-segments");if(_){var u={},f=0;g&&g.querySelectorAll(".contentInner").forEach(function(p){var y=p.getAttribute("class")||"",T=y.match(/status_(-?\d+)/);if(T){var A=T[1],E=p.querySelectorAll(".moveable").length;E>0&&(u[A]=E,f+=E)}});var w=_.querySelectorAll(".status-segment");if(f===0){w.forEach(function(p){p.style.flex="0 1 0%";var y=p.querySelector(".segment-count");y&&(y.textContent=""),p.setAttribute("data-tippy-content","")});return}w.forEach(function(p){var y=p.getAttribute("class");if(y){var T=y.match(/status-(-?\d+)/);if(T){var A=T[1],E=u[A]||0,D=E/f*100;p.style.flex=D+" 1 0%";var I=p.querySelector(".segment-count");I&&(I.textContent=E>0?E:"");var M=p.getAttribute("data-tippy-content")||"",Q=M.match(/^([^:]+):/),O=Q?Q[1]:"Status "+A;p.setAttribute("data-tippy-content",E>0?O+": "+E:"")}}})}})}var s=function(h,g){var _=document.getElementById("ticket_"+h);if(!_){console.warn("Card not found for ticket ID:",h);return}var u=_.closest(".contentInner"),f=u&&u.getAttribute("class")||"",w=f.match(/status_(\d+)/);if(!w){console.warn("Could not determine status for ticket:",h),location.reload();return}var p=w[1],y=document.querySelector("#kanboard-"+g+" .contentInner.status_"+p);if(!y){console.warn("Target swimlane not found:",g,p),location.reload();return}u!==y&&(_.classList.add("card-moving-out"),setTimeout(function(){y.appendChild(_),_.classList.remove("card-moving-out"),_.classList.add("card-moving-in"),a(),r(),setTimeout(function(){_.classList.remove("card-moving-in")},300)},200))},o=function(h,g){var _=typeof h=="string"?document.querySelector(h):h,u=_.value;leantime.ticketsRepository.updateRemainingHours(g,u,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.remaining_hours_updated"),style:"success"})})},c=function(h,g){var _=typeof h=="string"?document.querySelector(h):h,u=_.value;leantime.ticketsRepository.updatePlannedHours(g,u,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.planned_hours_updated"),style:"success"})})},v=function(){document.querySelectorAll(".filterBar").forEach(function(h){h.style.display=h.style.display==="none"?"":"none"})},b=function(h,g,_){function u(f){return String(f).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}document.addEventListener("DOMContentLoaded",function(){function f(y){return typeof jQuery<"u"&&jQuery.datepicker&&jQuery.datepicker.formatDate?jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),new Date(y)):new Date(y).toLocaleDateString()}if(_===!1)var w=new Gantt("#gantt",h,{header_height:55,column_width:20,step:24,view_modes:["Day","Week","Month"],bar_height:40,static_progress_indicator:!0,bar_corner_radius:10,arrow_curve:10,padding:20,view_mode:"Month",date_format:leantime.i18n.__("language.momentJSDate"),language:leantime.i18n.__("language.code").slice(0,2),additional_rows:5,custom_popup_html:function(y){var T=y._end,A=f(T),E='<div class="details-container" style="min-width:600px;"> ';return y.projectName!==void 0&&(E+="<h3><b>"+y.projectName+"</b></h3>"),E+="<small>"+y.type+" #"+y.id+" </small>",y.type==="milestone"?E+='<h4><a href="#/tickets/editMilestone/'+y.id+'" >'+u(y.name)+"</a></h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+A+"</strong><br /> "+Math.round(y.progress)+'%</p> <a href="#/tickets/editMilestone/'+y.id+'" ><span class="fa fa-map"></span> '+leantime.i18n.__("links.edit_milestone")+'</a> | <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+y.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":E+='<h4><a href="#/tickets/showTicket/'+y.id+'">'+u(y.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+y.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",E+="</div>",E},on_click:function(y){},on_date_change:function(y,T,A){leantime.ticketsRepository.updateMilestoneDates(y.id,T,A,y._index+1)},on_sort_change:function(y){for(var T={action:"ganttSort",payload:{}},A=0;A<y.length;A++)T.payload[y[A].id]=y[A]._index+1;var E=new URLSearchParams;E.append("action",T.action);for(var D in T.payload)E.append("payload["+D+"]",T.payload[D]);fetch(leantime.appUrl+"/api/tickets",{method:"POST",body:E,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}})},on_progress_change:function(y,T){},on_view_change:function(y){leantime.usersRepository.updateUserViewSettings("roadmap",y)},on_popup_show:function(y){}});else var w=new Gantt("#gantt",h,{readonlyGantt:!0,resizing:!1,progress:!1,is_draggable:!1,custom_popup_html:function(T){var A=T._end,E=f(A),D='<div class="details-container" style="min-width:600px;"> ';return T.projectName!==void 0&&(D+="<h3><b>"+T.projectName+"</b></h3>"),D+="<small>"+T.type+" #"+T.id+" </small>",T.type==="milestone"?D+="<h4>"+u(T.name)+"</h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+E+"</strong><br /> "+Math.round(T.progress)+'%</p> <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+T.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":D+='<h4><a href="#/tickets/showTicket/'+T.id+'">'+u(T.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+T.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",D+="</div>",D},on_click:function(T){},on_date_change:function(T,A,E){},on_progress_change:function(T,A){},on_view_change:function(T){leantime.usersRepository.updateUserViewSettings("roadmap",T)}});var p=document.getElementById("ganttTimeControl");p&&p.addEventListener("click",function(y){var T=y.target.closest("a");if(T){var A=T.getAttribute("data-value");w.change_view_mode(A),p.querySelectorAll("a").forEach(function(D){D.classList.remove("active")}),T.classList.add("active");var E=T.textContent;document.querySelectorAll(".viewText").forEach(function(D){D.textContent=E})}}),w.change_view_mode(g)})},e=function(){Date.prototype.addDays=function(f){return this.setDate(this.getDate()+f),this},jQuery.datepicker.setDefaults({beforeShow:function(f){if(f.hasAttribute("readonly"))return!1}});var h=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),g=jQuery("#sprintStart").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){_.datepicker("option","minDate",u(this));var f=u(this).addDays(13);_.datepicker("setDate",f)}),_=jQuery("#sprintEnd").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){g.datepicker("option","maxDate",u(this))});function u(f){var w;try{w=jQuery.datepicker.parseDate(h,f.value)}catch(p){w=null,console.log(p)}return w}},t=function(){var h=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),g=jQuery("#milestoneEditFrom").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){_.datepicker("option","minDate",u(this))}),_=jQuery("#milestoneEditTo").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){g.datepicker("option","maxDate",u(this))});function u(f){var w;try{w=jQuery.datepicker.parseDate(h,f.value)}catch(p){w=null,console.log(p)}return w}},i=function(){var h=leantime.dateHelper.getFormatFromSettings("dateformat","jquery");jQuery(".milestoneEditFromAsync").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){var _=this.value,u=this.getAttribute("data-id"),f=jQuery(".toDateTicket-"+u);f.datepicker("option","minDate",g(this)),leantime.ticketsRepository.updateEditFromDates(u,_,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})})}),jQuery(".milestoneEditToAsync").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){var _=this.getAttribute("data-id"),u=jQuery(".fromDateTicket-"+_);u.datepicker("option","maxDate",g(this));var f=this.value;leantime.ticketsRepository.updateEditToDates(_,f,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})})});function g(_){var u;try{u=jQuery.datepicker.parseDate(h,_.value)}catch(f){u=null,console.log(f)}return u}},n=function(){typeof jQuery<"u"&&jQuery.fn.tooltip&&jQuery('[data-toggle="tooltip"]').tooltip()},m=function(){var h={"0.5":"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"};document.querySelectorAll(".effortDropdown .dropdown-menu a").forEach(function(g){g.replaceWith(g.cloneNode(!0))}),document.querySelectorAll(".effortDropdown .dropdown-menu a").forEach(function(g){g.addEventListener("click",function(){var _=this.getAttribute("data-value").split("_");if(_.length===2){var u=_[0],f=_[1],w=new URLSearchParams;w.append("id",u),w.append("storypoints",f),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:w,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var p=document.querySelector("#effortDropdownMenuLink"+u+" span.text");p&&(p.textContent=h[f]),leantime.toast.show({message:leantime.i18n.__("short_notifications.effort_updated"),style:"success"}),leantime.kanbanGroupBy==="storypoints"&&s(u,f)})}else console.log("Ticket Controller: Effort data value not set correctly")})})},x=function(){var h={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"};document.querySelectorAll(".priorityDropdown .dropdown-menu a").forEach(function(g){g.replaceWith(g.cloneNode(!0))}),document.querySelectorAll(".priorityDropdown .dropdown-menu a").forEach(function(g){g.addEventListener("click",function(){var _=this.getAttribute("data-value").split("_");if(_.length===2){var u=_[0],f=_[1],w=new URLSearchParams;w.append("id",u),w.append("priority",f),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:w,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var p=document.getElementById("priorityDropdownMenuLink"+u);if(p){var y=p.querySelector("span.text");y&&(y.textContent=h[f]),p.classList.remove("priority-bg-1","priority-bg-2","priority-bg-3","priority-bg-4","priority-bg-5"),p.classList.add("priority-bg-"+f);var T=p.closest(".ticketBox");T&&(T.classList.remove("priority-border-1","priority-border-2","priority-border-3","priority-border-4","priority-border-5"),T.classList.add("priority-border-"+f))}leantime.toast.show({message:leantime.i18n.__("short_notifications.priority_updated"),style:"success"}),leantime.kanbanGroupBy==="priority"&&s(u,f)})}else console.log("Ticket Controller: Priority data value not set correctly")})})},d=function(){document.querySelectorAll(".milestoneDropdown .dropdown-menu a").forEach(function(h){h.replaceWith(h.cloneNode(!0))}),document.querySelectorAll(".milestoneDropdown .dropdown-menu a").forEach(function(h){h.addEventListener("click",function(){var g=this.getAttribute("data-value").split("_"),_=this.getAttribute("data-label");if(g.length===3){var u=g[0],f=g[1],w=g[2],p=document.querySelector("#milestoneDropdownMenuLink"+u+" span.text");p&&p.insertAdjacentHTML("beforeend"," ...");var y=new URLSearchParams;y.append("id",u),y.append("milestoneid",f),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:y,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var T=document.querySelector("#milestoneDropdownMenuLink"+u+" span.text");T&&(T.textContent=_);var A=document.getElementById("milestoneDropdownMenuLink"+u);A&&(A.style.backgroundColor=w),leantime.toast.show({message:leantime.i18n.__("short_notifications.milestone_updated"),style:"success"}),leantime.kanbanGroupBy==="milestoneid"&&s(u,f)})}})})},S=function(){document.querySelectorAll(".statusDropdown .dropdown-menu a").forEach(function(h){h.replaceWith(h.cloneNode(!0))}),document.querySelectorAll(".statusDropdown .dropdown-menu a").forEach(function(h){h.addEventListener("click",function(){var g=this.getAttribute("data-value").split("_"),_=this.getAttribute("data-label");if(g.length==3){var u=g[0],f=g[1],w=g[2],p=new URLSearchParams;p.append("id",u),p.append("status",f),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:p,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(y){return y.json()}).then(function(y){var T=document.querySelector("#statusDropdownMenuLink"+u+" span.text");T&&(T.textContent=_);var A=document.getElementById("statusDropdownMenuLink"+u);A&&(A.className=w+" dropdown-toggle f-left status "),leantime.toast.show({message:leantime.i18n.__("short_notifications.status_updated"),style:"success"}),leantime.handleAsyncResponse(y)})}})})},L=function(){document.querySelectorAll(".userDropdown .dropdown-menu a").forEach(function(h){h.replaceWith(h.cloneNode(!0))}),document.querySelectorAll(".userDropdown .dropdown-menu a").forEach(function(h){h.addEventListener("click",function(){var g=this.getAttribute("data-value").split("_"),_=this.getAttribute("data-label");if(g.length===3){var u=g[0],f=g[1];g[2];var w=new URLSearchParams;w.append("id",u),w.append("editorId",f),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:w,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var p=document.querySelector("#userDropdownMenuLink"+u+" span.text span#userImage"+u+" img");p&&p.setAttribute("src",leantime.appUrl+"/api/users?profileImage="+f);var y=document.querySelector("#userDropdownMenuLink"+u+" span.text span#user"+u);y&&(y.textContent=_),leantime.toast.show({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"}),leantime.kanbanGroupBy==="editorId"&&s(u,f)})}})})},j=function(){document.querySelectorAll(".asyncInputUpdate").forEach(function(h){h.addEventListener("change",function(){var g=this.getAttribute("data-label").split("-");if(g.length==2){var _=g[0],u=g[1],f=this.value,w=new URLSearchParams;w.append("id",u),w.append(_,f),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:w,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){leantime.toast.show({message:leantime.i18n.__("notifications.subtask_saved"),style:"success"})})}})})},k=function(){document.querySelectorAll(".sprintDropdown .dropdown-menu a").forEach(function(h){h.replaceWith(h.cloneNode(!0))}),document.querySelectorAll(".sprintDropdown .dropdown-menu a").forEach(function(h){h.addEventListener("click",function(){var g=this.getAttribute("data-value").split("_"),_=this.getAttribute("data-label");if(g.length==2){var u=g[0],f=g[1],w=new URLSearchParams;w.append("id",u),w.append("sprint",f),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:w,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var p=document.querySelector("#sprintDropdownMenuLink"+u+" span.text");p&&(p.textContent=_),leantime.toast.show({message:leantime.i18n.__("short_notifications.sprint_updated"),style:"success"}),leantime.kanbanGroupBy==="sprint"&&s(u,f)})}})})},C=function(){document.querySelectorAll("input.simpleColorPicker").forEach(function(h){h.type="color",h.style.height="34px",h.style.padding="2px",h.style.cursor="pointer",h.value&&h.value.charAt(0)!=="#"&&(h.value="#"+h.value),h.value||(h.value="#1b75bb"),h.addEventListener("input",function(){this.style.background=this.value})})},q=function(){document.querySelectorAll(".date-picker-form-control .reset-button").forEach(function(h){h.addEventListener("click",function(){var g=this.getAttribute("data-id"),_=document.getElementById("due-date-picker-"+g);_&&(_.value=leantime.i18n.__("text.anytime")),leantime.ticketsRepository.updateDueDates(g,null,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})})})}),leantime.dateController.initDatePicker(".quickDueDates, .duedates",function(h,g){var _=g.currentDay,u=g.currentMonth,f=g.currentYear,w=new Date(f,u,_),p=typeof jQuery<"u"&&jQuery.datepicker&&jQuery.datepicker.formatDate?jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),w):w.toLocaleDateString(),y=this.getAttribute("data-id");leantime.ticketsRepository.updateDueDates(y,p,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})})})},B=function(h,g,_,u){var f=document.getElementById(u).getContext("2d");new Chart(f,{type:"line",data:{labels:h,datasets:[{label:leantime.i18n.__("label.booked_hours"),backgroundColor:"rgba(201,48,44, 0.5)",borderColor:"rgb(201,48,44)",data:g},{label:leantime.i18n.__("label.planned_hours"),backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgb(54, 162, 235)",data:_}]},options:{scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.booked_hours")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.planned_hours")},ticks:{beginAtZero:!0}}}}})},N=function(){document.addEventListener("DOMContentLoaded",function(){let h=new URL(window.location.href),g=h.searchParams.get("tab"),_=0;if(g){var u=document.querySelector(".ticketTabs");if(u){var f=u.querySelector('a[href="#'+g+'"]');f&&f.parentElement&&(_=Array.prototype.indexOf.call(f.parentElement.parentElement.children,f.parentElement))}}typeof jQuery<"u"&&jQuery.fn.tabs&&jQuery(".ticketTabs").tabs({create:function(w,p){document.querySelectorAll(".ticketTabs").forEach(function(y){y.style.visibility="visible"})},activate:function(w,p){h=new URL(window.location.href),h.searchParams.set("tab",p.newPanel[0].id),window.history.replaceState(null,null,h)},load:function(){},enable:function(){},active:_})})},P=function(h){var g=document.getElementById("ticketSearch");g&&g.addEventListener("submit",function(_){_.preventDefault();var u=function(F){var H=document.getElementById(F);return H?H.value:void 0},f=function(F){var H=document.querySelector("input[name='"+F+"']:checked");return H?H.value:void 0},w=u("projectIdInput"),p=u("userSelect"),y=u("milestoneSelect"),T=u("termInput"),A=u("sprintSelect"),E=u("typeSelect"),D=u("prioritySelect"),I=u("statusSelect"),M=u("sortBySelect"),Q=f("groupBy"),O=f("showTasks"),R="?search=true";w!=""&&w!=null&&(R=R+"&projectId="+w),p!=""&&p!=null&&(R=R+"&users="+p),y!=""&&y!=null&&(R=R+"&milestone="+y),T!=""&&T!=null&&(R=R+"&term="+T),A!=""&&A!=null&&(R=R+"&sprint="+A),E!=""&&E!=null&&(R=R+"&type="+E),D!=""&&D!=null&&(R=R+"&priority="+D),I!=""&&I!=null&&(R=R+"&status="+I),M!=""&&M!=null&&(R=R+"&sort="+M),Q!=""&&Q!=null&&(R=R+"&groupBy="+Q),O!=""&&O!=null&&(R=R+"&showTasks="+O);var G=h+R;window.location.href=G})},W=function(h){var g=function(O){var R=document.getElementById(O);return R?R.value:void 0},_=function(O){var R=document.querySelector("input[name='"+O+"']:checked");return R?R.value:void 0},u=g("projectIdInput"),f=g("userSelect"),w=g("milestoneSelect"),p=g("termInput"),y=g("sprintSelect"),T=g("typeSelect"),A=g("prioritySelect"),E=g("statusSelect"),D=g("sortBySelect"),I=_("groupBy"),M="?search=true";u!=""&&u!=null&&(M=M+"&projectId="+u),f!=""&&f!=null&&(M=M+"&users="+f),w!=""&&w!=null&&(M=M+"&milestone="+w),p!=""&&p!=null&&(M=M+"&term="+p),y!=""&&y!=null&&(M=M+"&sprint="+y),T!=""&&T!=null&&(M=M+"&type="+T),A!=""&&A!=null&&(M=M+"&priority="+A),E!=""&&E!=null&&(M=M+"&status="+E),D!=""&&D!=null&&(M=M+"&sort="+D),I!=""&&I!=null&&(M=M+"&groupBy="+I);var Q=h+M;window.location.href=Q},z=function(){document.addEventListener("DOMContentLoaded",function(){a(),r(),document.querySelectorAll(".filterBar .row-fluid").forEach(function(h){h.style.opacity="1"}),document.querySelectorAll(".sortableTicketList").forEach(function(h){var g=h.id,_=h.closest(".kanban-swimlane-row");if(!(_&&_.getAttribute("data-expanded")==="false")){var u=250;h.querySelectorAll(".column .contentInner").forEach(function(f){f.offsetHeight>u&&(u=f.offsetHeight)}),document.querySelectorAll("#"+g+" .column .contentInner").forEach(function(f){f.style.height=u+"px"})}})})},V=function(h){var g=h;document.querySelectorAll(".sortableTicketList.kanbanBoard .ticketBox").forEach(function(f){f.addEventListener("mouseenter",function(){this.style.background="var(--kanban-card-hover)"}),f.addEventListener("mouseleave",function(){this.style.background="var(--kanban-card-bg)"})});function _(f){var w=f.querySelectorAll(":scope > .moveable"),p=[];return w.forEach(function(y){if(y.id){var T=y.id.indexOf("_");T!==-1&&p.push(y.id.substring(0,T)+"[]="+y.id.substring(T+1))}}),p.join("&")}document.querySelectorAll(".sortableTicketList").forEach(function(f){f.querySelectorAll(".contentInner").forEach(function(w){w._sortableInstance&&w._sortableInstance.destroy(),w._sortableInstance=new Sortable(w,{group:"ticket-kanban",draggable:".moveable",ghostClass:"ui-state-highlight",filter:".portlet-toggle, input, a, select, textarea",preventOnFilter:!1,animation:150,delay:10,delayOnTouchOnly:!0,onStart:function(p){p.item.classList.add("tilt"),u(p.item);var y=p.item.closest(".sortableTicketList.kanbanBoard");p.item.dataset.originalSwimlaneId=y?y.id:""},onEnd:function(p){p.item.classList.remove("tilt"),p.item._moveHandler&&(document.removeEventListener("mousemove",p.item._moveHandler),delete p.item._moveHandler),a(),r(),document.querySelectorAll(".sortableTicketList .contentInner").forEach(function(X){var ce=X.querySelectorAll(".moveable").length>0;if(ce){X.classList.remove("empty-column"),X.setAttribute("data-empty-text","");var ut=X.getAttribute("aria-label")||"";X.setAttribute("aria-label",ut.replace("Empty column","")+" column items")}else X.classList.add("empty-column"),X.setAttribute("data-empty-text","Empty"),X.setAttribute("aria-label","Empty column")});var y=p.item.closest(".sortableTicketList.kanbanBoard"),T=y?y.id:"",A=p.item.dataset.originalSwimlaneId;if(A&&T&&A!==T){var E=p.item.id.replace("ticket_",""),D=T.replace("kanboard-",""),I={milestoneid:"milestoneid",editorId:"editorId",priority:"priority",storypoints:"storypoints",sprint:"sprint",dueDate:"dateToFinish"},M=leantime.kanbanGroupBy,Q=I[M];if(M==="dueDate"){var O=new Date;switch(O.setHours(12,0,0,0),D){case"0":var R=new Date(O);R.setDate(R.getDate()-1),D=R.toISOString().split("T")[0];break;case"1":var G=new Date(O),F=6-G.getDay();F<0&&(F=0),G.setDate(G.getDate()+F),D=G.toISOString().split("T")[0];break;case"2":var H=new Date(O),nt=6-H.getDay()+7;H.setDate(H.getDate()+nt),D=H.toISOString().split("T")[0];break;case"3":var de=new Date(O);de.setDate(de.getDate()+21),D=de.toISOString().split("T")[0];break;case"4":D="";break}}if(Q&&E){var Y=document.getElementById("ticket_"+E);if(M==="milestoneid"){var Z=document.querySelector("#swimlane-row-"+D+" .swimlane-header-label"),ot=(Z?Z.textContent:"")||leantime.i18n.__("label.no_milestone"),ve=Y?Y.querySelector(".milestoneDropdown .dropdown-toggle .text"):null;ve&&(ve.textContent=ot);var ue=Y?Y.querySelector('.milestoneDropdown .dropdown-menu a[data-value^="'+E+"_"+D+'_"]'):null,ne="#b0b0b0";if(ue&&D!=="0"&&D!==""){var ye=ue.getAttribute("data-value");if(ye){var be=ye.split("_");be.length>=3&&(ne=be.slice(2).join("_"))}if(!ne||ne==="#b0b0b0"){var _e=ue.getAttribute("style");if(_e){var we=_e.match(/background-color:\s*([^;]+)/i);we&&(ne=we[1].trim())}}}var xe=Y?Y.querySelector(".milestoneDropdown .dropdown-toggle"):null;xe&&(xe.style.backgroundColor=ne)}else if(M==="priority"){Y&&(Y.className=Y.className.replace(/(^|\s)priority-border-\S+/g,""),Y.classList.add("priority-border-"+D));var it={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"},ie=document.getElementById("priorityDropdownMenuLink"+E);if(ie){var Se=ie.querySelector("span.text");Se&&(Se.textContent=it[D]||D),ie.classList.remove("priority-bg-1","priority-bg-2","priority-bg-3","priority-bg-4","priority-bg-5"),ie.classList.add("priority-bg-"+D)}}else if(M==="editorId"){var me=document.getElementById("userDropdownMenuLink"+E);if(me){var ke=me.querySelector("span.text span img");ke&&ke.setAttribute("src",leantime.appUrl+"/api/users?profileImage="+D);var Z=document.querySelector("#swimlane-row-"+D+" .swimlane-header-label"),rt=(Z?Z.textContent:"")||leantime.i18n.__("label.not_assigned"),Te=me.querySelector("span.text span#user"+E);Te&&(Te.textContent=rt)}}else if(M==="storypoints"){var lt={"0.5":"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"},Ce=document.getElementById("effortDropdownMenuLink"+E);if(Ce){var Le=Ce.querySelector("span.text");Le&&(Le.textContent=lt[D]||D)}}else if(M==="sprint"){var Ee=document.getElementById("sprintDropdownMenuLink"+E);if(Ee){var Z=document.querySelector("#swimlane-row-"+D+" .swimlane-header-label"),st=(Z?Z.textContent:"")||leantime.i18n.__("label.backlog"),De=Ee.querySelector("span.text");De&&(De.textContent=st)}}else if(M==="dueDate"){var Ae=Y?Y.querySelector(".dues .fa-calendar"):null,re=Ae?Ae.parentElement:null;if(re&&D){var fe=D.split("-"),ct=fe[1]+"/"+fe[2]+"/"+fe[0],ee=[];re.childNodes.forEach(function(X){X.nodeType===3&&ee.push(X)}),ee.length>0&&(ee[0].textContent=" "+ct)}else if(re&&!D){var ee=[];re.childNodes.forEach(function(ce){ce.nodeType===3&&ee.push(ce)}),ee.length>0&&(ee[0].textContent=" No due date")}}leantime.toast.show({message:"To-Do Updated",style:"success"});var pe=new URLSearchParams;pe.append("id",E),pe.append(Q,D),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:pe,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(X){if(!X.ok)throw new Error("Request failed")}).catch(function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.not_saved")||"Error updating ticket",style:"error"}),location.reload()})}}delete p.item.dataset.originalSwimlaneId;for(var dt=p.item.closest(".sortableTicketList"),oe={action:"kanbanSort",payload:{},handler:p.item.id},le=0;le<g.length;le++){var qe=dt.querySelector(".contentInner.status_"+g[le]);qe&&(oe.payload[g[le]]=_(qe))}var se=new URLSearchParams;se.append("action",oe.action),se.append("handler",oe.handler);for(var Me in oe.payload)se.append("payload["+Me+"]",oe.payload[Me]);fetch(leantime.appUrl+"/api/tickets",{method:"POST",body:se,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(X){return X.json()}).then(function(X){leantime.handleAsyncResponse(X)})}})})});function u(f){var w=f.getBoundingClientRect().left,p=function(y){y.pageX+5>w?(f.classList.add("right"),f.classList.remove("left")):y.pageX<w+5?(f.classList.add("left"),f.classList.remove("right")):(f.classList.remove("left"),f.classList.remove("right")),w=y.pageX};document.addEventListener("mousemove",p),f._moveHandler=p}document.querySelectorAll(".portlet").forEach(function(f){f.classList.add("ui-widget","ui-widget-content","ui-helper-clearfix","ui-corner-all"),f.querySelectorAll(".portlet-header").forEach(function(w){w.classList.add("ui-widget-header","ui-corner-all"),w.insertAdjacentHTML("afterbegin","<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>")})}),document.querySelectorAll(".portlet-toggle").forEach(function(f){f.addEventListener("click",function(){this.classList.toggle("ui-icon-minusthick"),this.classList.toggle("ui-icon-plusthick");var w=this.closest(".portlet");w&&w.querySelectorAll(".portlet-content").forEach(function(p){p.style.display=p.style.display==="none"?"":"none"})})})},J=function(h){function g(_){return!isNaN(parseFloat(_))&&isFinite(_)}document.addEventListener("DOMContentLoaded",function(){var _=[];function u(w){if(typeof w=="string"&&w.indexOf("<")!==-1){var p=document.createElement("div");p.innerHTML=w;var y=p.querySelector("input");return y?y.value:w}return w}var f=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom">p<"clear">',searching:!1,stateSave:!0,displayLength:100,order:_,columnDefs:[{visible:!1,targets:10},{visible:!1,targets:11},{target:"no-sort",orderable:!1}],footerCallback:function(w,p,y,T,A){var E=this.api(),D=E.column(10).data().reduce(function(F,H){return g(F)===!1&&(F=u(F)),g(H)===!1&&(H=u(H)),isNaN(F)&&(F=0),isNaN(H)&&(H=0),parseFloat(F)+parseFloat(H)},0),I=E.column(11).data().reduce(function(F,H){return g(F)===!1&&(F=u(F)),g(H)===!1&&(H=u(H)),isNaN(F)&&(F=0),isNaN(H)&&(H=0),parseFloat(F)+parseFloat(H)},0),M=E.column(12).data().reduce(function(F,H){return parseFloat(F)+parseFloat(H)},0),Q=E.column(9).footer();Q&&(Q.innerHTML="Total");var O=E.column(10).footer();O&&(O.innerHTML=D);var R=E.column(11).footer();R&&(R.innerHTML=I);var G=E.column(12).footer();G&&(G.innerHTML=M)}});new jQuery.fn.dataTable.Buttons(f.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(w,p,y,T){return typeof T.dataset.order<"u"&&T.dataset.order!==void 0&&(w=T.dataset.order),w}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(document.getElementById("tableButtons")),f.table(0).on("column-visibility",function(w,p,y,T){for(var A=1;A<f.tables().context.length;A++)f.tables(A).column(y).visible(T);f.draw()}),document.querySelectorAll(".ticketTable input").forEach(function(w){w.addEventListener("change",function(){this.parentElement.setAttribute("data-order",this.value),f.draw()})})})},te=function(h){document.addEventListener("DOMContentLoaded",function(){var g=[];jQuery(".listStyleTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"<"center"p>><"clear">',searching:!1,stateSave:!0,displayLength:25,order:g,fnDrawCallback:function(_){if(_._iDisplayLength>_.fnRecordsDisplay()){var u=_.nTableWrapper.querySelector(".dataTables_paginate");u&&(u.style.display="none")}else{var u=_.nTableWrapper.querySelector(".dataTables_paginate");u&&(u.style.display="")}}})})},ae=function(h){document.addEventListener("DOMContentLoaded",function(){var g=[],_=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"><"clear">',searching:!1,stateSave:!0,displayLength:100,order:g,columnDefs:[{visible:!1,targets:7},{visible:!1,targets:8},{target:"no-sort",orderable:!1}]});new jQuery.fn.dataTable.Buttons(_.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(u,f,w,p){return typeof p.dataset.order<"u"&&p.dataset.order!==void 0&&(u=p.dataset.order),u}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(document.getElementById("tableButtons")),_.table(0).on("column-visibility",function(u,f,w,p){for(var y=1;y<_.tables().context.length;y++)_.tables(y).column(w).visible(p);_.draw()}),document.querySelectorAll(".ticketTable input").forEach(function(u){u.addEventListener("change",function(){this.parentElement.setAttribute("data-order",this.value),_.draw()})})})},et=function(h,g){var _=typeof g=="string"?document.querySelector(g):g;if(typeof jQuery<"u"){var u=document.querySelectorAll("textarea.complexEditor");u.length>0&&jQuery("textarea.complexEditor").tinymce()!==null&&(jQuery("textarea.complexEditor").tinymce().save(),jQuery("textarea.complexEditor").tinymce().remove())}document.querySelectorAll(".ticketRows").forEach(function(p){p.classList.remove("active")});var f=document.getElementById("row-"+h);f&&f.classList.add("active"),_.innerHTML="<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px' /></div>";function w(p){p.querySelectorAll("form").forEach(function(y){y.addEventListener("submit",function(T){if(T.preventDefault(),typeof jQuery<"u"){var A=document.querySelectorAll("textarea.complexEditor");A.length>0&&jQuery("textarea.complexEditor").tinymce()!==null&&(jQuery("textarea.complexEditor").tinymce().save(),jQuery("textarea.complexEditor").tinymce().remove())}p.innerHTML="<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px'/></div>";var E=new FormData(this),D=this.getAttribute("action");fetch(D,{method:"POST",body:E,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(I){return I.text()}).then(function(I){p.innerHTML=I,w(p)})})})}fetch(leantime.appUrl+"/tickets/showTicket/"+h,{credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(p){return p.text()}).then(function(p){_.innerHTML=p,w(_)})},tt=function(){typeof jQuery<"u"&&jQuery.fn.tagsInput&&jQuery("#tags").tagsInput({autocomplete_url:leantime.appUrl+"/api/tags"});var h=document.getElementById("tags_tag");h&&h.addEventListener("focusout",function(){var g=this.value;g!=""&&typeof jQuery<"u"&&jQuery("#tags").addTag(g)})},at=function(h,g){var _=document.getElementById("commentText-"+h),u="Discussion on To-Do #"+g+`:
\r`+(_?_.textContent:""),f=document.querySelector('li a[href*="timesheet"]');f&&f.click();var w=document.querySelector("#timesheet #description");w&&(w.value=u)};return{toggleFilterBar:v,initGanttChart:b,updateRemainingHours:o,updatePlannedHours:c,initTimeSheetChart:B,initTicketTabs:N,initTicketSearchSubmit:P,initTicketKanban:V,initTicketsTable:J,initEffortDropdown:m,initPriorityDropdown:x,initMilestoneDropdown:d,initStatusDropdown:S,initUserDropdown:L,initSprintDropdown:k,initToolTips:n,initTagsInput:tt,initMilestoneDatesAsyncUpdate:i,initAsyncInputChange:j,initDueDateTimePickers:q,setUpKanbanColumns:z,addCommentTimesheetContent:at,initMilestoneTable:ae,initMilestoneDates:t,initTicketsList:te,loadTicketToContainer:et,initTicketSearchUrlBuilder:W,initSprintDates:e,initSimpleColorPicker:C}}();var K=window.leantime||(window.leantime={});K.ticketsRepository=function(){var a=function(v,b,e,t){let i=K.dateHelper.getFormatFromSettings("dateformat","luxon"),n=K.dateHelper.getFormatFromSettings("timeformat","luxon"),m=luxon.DateTime.fromSQL(b).toFormat(i),x=luxon.DateTime.fromSQL(b).toFormat(n),d=luxon.DateTime.fromSQL(e).toFormat(i),S=luxon.DateTime.fromSQL(e).toFormat(n);fetch(K.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:v,editFrom:m,editTo:d,timeFrom:x,timeTo:S,sortIndex:t})})},r=function(v,b,e){fetch(K.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:v,hourRemaining:b})}).then(function(){e()})},l=function(v,b,e){fetch(K.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:v,planHours:b})}).then(function(){e()})},s=function(v,b,e){fetch(K.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:v,dateToFinish:b})}).then(function(){e()})},o=function(v,b,e){fetch(K.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:v,editFrom:b})}).then(function(){e()})},c=function(v,b,e){fetch(K.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:v,editTo:b})}).then(function(){e()})};return{updateMilestoneDates:a,updateRemainingHours:r,updatePlannedHours:l,updateDueDates:s,updateEditFromDates:o,updateEditToDates:c}}();leantime.dashboardController=function(){var a={};leantime.theme=="dark"?a={red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(56, 56, 56)"}:a={red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"};var r=function(){var e=moment().startOf("week").add(5,"days"),t=document.querySelector("#dateToFinish");t&&(t.value=e.format("YYYY-MM-DD"))},l=function(e,t,i){var n={type:"doughnut",data:{datasets:[{data:[t,i],backgroundColor:[leantime.dashboardController.chartColors.green,leantime.dashboardController.chartColors.grey],label:leantime.i18n.__("label.project_done")}],labels:[t+"% Done",i+"% Open"]},options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:""}},animation:{animateScale:!0,animateRotate:!0}}},m=document.getElementById(e).getContext("2d");new Chart(m,n)},s=function(e,t,i){moment.locale(leantime.i18n.__("language.code"));var n={type:"line",data:{labels:e,datasets:[{label:leantime.i18n.__("label.ideal"),backgroundColor:leantime.dashboardController.chartColors.blue,borderColor:leantime.dashboardController.chartColors.blue,data:t,fill:!1,lineTension:0},{label:"Actual",backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:i,fill:!1,lineTension:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},plugins:{legend:{position:"bottom"},title:{display:!1,text:"Line Chart"},tooltips:{mode:"index",intersect:!1}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0}}}}},m=document.getElementById("sprintBurndown").getContext("2d");return _burndownChart=new Chart(m,n),_burndownChart},o=function(e,t,i,n,m){var x=document.getElementById(e);x&&x.addEventListener("click",function(d){m.data.datasets[0].data=i,m.data.datasets[1].data=n,m.options.scales.y.title.text=t,document.querySelectorAll(".chartButtons").forEach(function(S){S.classList.remove("active")}),x.classList.add("active"),m.update()})},c=function(e,t){moment.locale(leantime.i18n.__("language.code"));var i={type:"line",data:{labels:e,datasets:[{label:leantime.i18n.__("label.done_todos"),backgroundColor:leantime.dashboardController.chartColors.green,borderColor:leantime.dashboardController.chartColors.green,data:t.done.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.progress_todos"),backgroundColor:leantime.dashboardController.chartColors.yellow,borderColor:leantime.dashboardController.chartColors.yellow,data:t.progress.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.new_todos"),backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:t.open.data,fill:!0,lineTension:0,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},elements:{point:{pointStyle:"line",radius:"0"}},plugins:{tooltips:{mode:"index",intersect:!1},legend:{position:"bottom"},title:{display:!1,text:"Line Chart"}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0},stacked:!0}}}},n=document.getElementById("backlogBurndown").getContext("2d");return _burndownChart=new Chart(n,i),_burndownChart},v=function(e,t,i,n){var m=document.getElementById(e);m&&m.addEventListener("click",function(x){n.data.datasets[0].data=t.done.data,n.data.datasets[1].data=t.progress.data,n.data.datasets[2].data=t.open.data,n.options.scales.y.title.text=i,document.querySelectorAll(".backlogChartButtons").forEach(function(d){d.classList.remove("active")}),m.classList.add("active"),n.update()})},b=function(){document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".duedates").forEach(function(e){leantime.dateController.initDatePicker(e,function(t){var i=t;i==""&&(this.value=leantime.i18n.__("text.anytime"));var n=moment(i,leantime.i18n.__("language.momentJSDate")).format("YYYY-MM-DD HH:mm:ss"),m=this.getAttribute("data-id"),x=n;leantime.ticketsRepository.updateDueDates(m,x,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.duedate_updated")})})})})})};return{chartColors:a,initBurndown:s,initChartButtonClick:o,initBacklogBurndown:c,initBacklogChartButtonClick:v,initProgressChart:l,prepareHiddenDueDate:r,initDueDateTimePickers:b}}();leantime.usersController=function(){var a=null,r=function(e){if(l(),e.files&&e.files[0]){var t=new FileReader,i=document.querySelector("#profileImg");t.onload=function(n){a=new Croppie(i,{enableExif:!0,viewport:{width:175,height:175,type:"circle"},boundary:{width:200,height:200}}),a.bind({url:n.currentTarget.result});var m=document.querySelector("#previousImage");m&&(m.style.display="none")},t.readAsDataURL(e.files[0])}},l=function(){a&&(a.destroy(),a=null);var e=document.querySelector("#previousImage");e&&(e.style.display="")},s=function(){var e=document.querySelector("#save-picture");e&&e.classList.add("running");var t=document.querySelector("#profileImg");t&&t.setAttribute("src",leantime.appUrl+"/images/loaders/loader28.gif"),a&&a.result({type:"blob",circle:!0}).then(function(i){leantime.usersService.saveUserPhoto(i)})},o=function(){document.addEventListener("DOMContentLoaded",function(){jQuery("#allUsersTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})})},c=function(){var e={sizes:{minW:400,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(t){t.style.display=""}),jQuery(".userImportModal").nyroModal(e)}}};jQuery(".userImportModal").nyroModal(e)},v=function(){var e={sizes:{minW:900,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(t){t.style.display=""}),jQuery(".userEditModal").nyroModal(e)},beforeClose:function(){location.reload()}}};jQuery(".userEditModal").nyroModal(e)},b=function(e){let t,i=document.getElementById(e),n=document.getElementById("pwStrength"),m=new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})"),x=new RegExp("((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))");function d(S){m.test(S)?(n.style.backgroundColor="#107530",n.textContent=leantime.i18n.__("label.strong")):x.test(S)?(n.style.backgroundColor="#C5850D",n.textContent=leantime.i18n.__("label.medium")):(n.style.backgroundColor="#CC6B6B",n.textContent=leantime.i18n.__("label.weak"))}i.addEventListener("input",()=>{n.style.display="block",clearTimeout(t),t=setTimeout(()=>d(i.value),500),i.value.length!==0?n.style.display!="block":n.style.display="none"})};return{readURL:r,clearCroppie:l,saveCroppie:s,initUserTable:o,_initModals:c,checkPWStrength:b,initUserEditModal:v}}();var Fe={},Ie;function gt(){return Ie||(Ie=1,leantime.usersRepository=function(){var a=function(l){var s=new FormData;s.append("file",l),fetch(leantime.appUrl+"/api/users",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"},body:s}).then(function(o){var c=document.querySelector("#save-picture");c&&c.classList.remove("running"),location.reload()}).catch(function(o){console.log(o)})},r=function(l,s){fetch(leantime.appUrl+"/api/users",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({patchViewSettings:l,value:s})})};return{saveUserPhoto:a,updateUserViewSettings:r}}()),Fe}gt();leantime.usersService=function(){var a=function(r){leantime.usersRepository.saveUserPhoto(r)};return{saveUserPhoto:a}}();var Oe={},Ne;function ht(){return Ne||(Ne=1,leantime.canvasController=function(){var a="",r=function(d){a=d},l=function(){window.addEventListener("load",function(){document.querySelectorAll(".loading").forEach(function(d){d.style.display="none"}),document.querySelectorAll(".filterBar .row-fluid").forEach(function(d){d.style.opacity="1"})})},s=function(){jQuery(".addCanvasLink").nyroModal(),document.querySelectorAll(".editCanvasLink").forEach(function(d){d.addEventListener("click",function(){jQuery("#editCanvas").modal("show")})}),document.querySelectorAll(".cloneCanvasLink").forEach(function(d){d.addEventListener("click",function(){jQuery("#cloneCanvas").modal("show")})}),document.querySelectorAll(".mergeCanvasLink").forEach(function(d){d.addEventListener("click",function(){jQuery("#mergeCanvas").modal("show")})}),document.querySelectorAll(".importCanvasLink").forEach(function(d){d.addEventListener("click",function(){jQuery("#importCanvas").modal("show")})})},o=!1,c={sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(d){d.style.display=""}),o==!0&&(o=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+a+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+a+"CanvasMilestone .deleteMilestone").nyroModal(c)},beforeClose:function(){location.reload()}},titleFromIframe:!0},v=function(){jQuery("."+a+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+a+"CanvasMilestone .deleteMilestone").nyroModal(c)},b=function(d){jQuery.nmManual(d,c)},e=function(d){if(d=="existing"){document.querySelectorAll("#newMilestone, #milestoneSelectors").forEach(function(k){k.style.display="none"});var S=document.getElementById("existingMilestone");S&&(S.style.display=""),v()}if(d=="new"){var L=document.getElementById("newMilestone");L&&(L.style.display=""),document.querySelectorAll("#existingMilestone, #milestoneSelectors").forEach(function(k){k.style.display="none"}),v()}if(d=="hide"){document.querySelectorAll("#newMilestone, #existingMilestone").forEach(function(k){k.style.display="none"});var j=document.getElementById("milestoneSelectors");j&&(j.style.display="")}},t=function(){o=!0},i=function(){document.body.addEventListener("click",function(d){var S=d.target.closest(".userDropdown .dropdown-menu a");if(S){var L=S.getAttribute("data-value").split("_");if(S.getAttribute("data-label"),L.length==3){var j=L[0],k=L[1];L[2],fetch(leantime.appUrl+"/api/"+a+"canvas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:j,author:k})}).then(function(){var C=document.querySelector("#userDropdownMenuLink"+j+" span.text span#userImage"+j+" img");C&&C.setAttribute("src",leantime.appUrl+"/api/users?profileImage="+k),leantime.toast.show({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}}})},n=function(){document.body.addEventListener("click",function(d){var S=d.target.closest(".statusDropdown .dropdown-menu a");if(S){var L=S.getAttribute("data-value").split("/"),j=S.getAttribute("data-label");if(L.length==2){var k=L[0],C=L[1],q=S.getAttribute("class");fetch(leantime.appUrl+"/api/"+a+"canvas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:k,status:C})}).then(function(){var B=document.querySelector("#statusDropdownMenuLink"+k+" span.text");B&&(B.textContent=j);var N=document.getElementById("statusDropdownMenuLink"+k);N&&(N.className=q+" dropdown-toggle f-left status "),leantime.toast.show({message:leantime.i18n.__("short_notifications.status_updated")})})}}})},m=function(){document.body.addEventListener("click",function(d){var S=d.target.closest(".relatesDropdown .dropdown-menu a");if(S){var L=S.getAttribute("data-value").split("/"),j=S.getAttribute("data-label");if(L.length==2){var k=L[0],C=L[1],q=S.getAttribute("class");fetch(leantime.appUrl+"/api/"+a+"canvas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:k,relates:C})}).then(function(){var B=document.querySelector("#relatesDropdownMenuLink"+k+" span.text");B&&(B.textContent=j);var N=document.getElementById("relatesDropdownMenuLink"+k);N&&(N.className=q+" dropdown-toggle f-left relates "),leantime.toast.show({message:leantime.i18n.__("short_notifications.relates_updated")})})}}})},x=function(d,S){S=S||{};var L=d,j=!1,k=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(P){P.style.display=""}),j&&(j=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+L+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+L+"CanvasMilestone .deleteMilestone").nyroModal(k())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},C=function(){jQuery("."+L+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+L+"CanvasMilestone .deleteMilestone").nyroModal(k())},q;S.rowSelectors&&S.rowSelectors.length>0?q=function(){S.rowSelectors.forEach(function(P){var W=0;document.querySelectorAll("#"+P+" div.contentInner").forEach(function(z){z.offsetHeight>W&&(W=z.offsetHeight+35)}),document.querySelectorAll("#"+P+" .column .contentInner").forEach(function(z){z.style.height=W+"px"})})}:S.nbRows&&S.nbRows>0?q=function(){var P=S.nbRows,W=["firstRow","secondRow","thirdRow","fourthRow"],z=document.documentElement.offsetHeight-320-20*P;P===2&&(z-=25);for(var V=0;V<P&&V<W.length;V++){var J="#"+W[V],te=z/P;P>=3&&(te=z*.333),document.querySelectorAll(J+" div.contentInner").forEach(function(ae){ae.offsetHeight>te&&(te=ae.offsetHeight+50)}),document.querySelectorAll(J+" .column .contentInner").forEach(function(ae){ae.style.height=te+"px"})}}:q=function(){};var B={setCloseModal:function(){j=!0},toggleMilestoneSelectors:function(P){if(P=="existing"){document.querySelectorAll("#newMilestone, #milestoneSelectors").forEach(function(J){J.style.display="none"});var W=document.getElementById("existingMilestone");W&&(W.style.display=""),C()}if(P=="new"){var z=document.getElementById("newMilestone");z&&(z.style.display=""),document.querySelectorAll("#existingMilestone, #milestoneSelectors").forEach(function(J){J.style.display="none"}),C()}if(P=="hide"){document.querySelectorAll("#newMilestone, #existingMilestone").forEach(function(J){J.style.display="none"});var V=document.getElementById("milestoneSelectors");V&&(V.style.display="")}},openModalManually:function(P){jQuery.nmManual(P,k)},initUserDropdown:i,initStatusDropdown:n,initRelatesDropdown:m,setRowHeights:q};if(S.extras)for(var N in S.extras)S.extras.hasOwnProperty(N)&&(B[N]=S.extras[N]);return B};return{setCanvasName:r,initFilterBar:l,initCanvasLinks:s,initUserDropdown:i,initStatusDropdown:n,initRelatesDropdown:m,setCloseModal:t,toggleMilestoneSelectors:e,openModalManually:b,createController:x}}()),Oe}ht();var Xe={},We;function vt(){return We||(We=1,leantime.reactionsController=function(){return{addReactions:function(l,s,o,c){fetch(leantime.appUrl+"/api/reactions",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"add",module:l,moduleId:s,reaction:o})}).then(function(){c()})},removeReaction:function(l,s,o,c){fetch(leantime.appUrl+"/api/reactions",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"remove",module:l,moduleId:s,reaction:o})}).then(function(){c()})}}}()),Xe}vt();var Qe={},ze;function yt(){return ze||(ze=1,leantime.helperController=function(){var a=function(i,n){n?leantime.helperRepository.updateUserModalSettings(i,!0):leantime.helperRepository.updateUserModalSettings(i,!1)},r=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.tourFactory.startTour("myWorkDashboard")},l=function(){leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal()},s=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("projectDashboard"),leantime.tourFactory.startTour("projectDashboard")},o=function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("kanbanBoard"),leantime.tourFactory.startTour("kanbanBoard")},c=function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("milestoneView"),leantime.tourFactory.startTour("milestoneView")},v=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("goals"),leantime.tourFactory.startTour("goalsView")},b=function(){document.addEventListener("DOMContentLoaded",function(){var i={sizes:{minW:700,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(n){n.style.display=""}),jQuery(".onboardingModal").nyroModal(i)},beforeClose:function(){location.reload()}}};jQuery(".onboardingModal").nyroModal(i),jQuery.nmManual(leantime.appUrl+"/help/firstLogin",i)})},e=function(i,n,m){document.addEventListener("DOMContentLoaded",function(){jQuery.nmManual(leantime.appUrl+"/help/showOnboardingDialog?module="+i,{sizes:{minW:n||200,minH:m||500},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){leantime.replaceSVGColors()},afterShowCont:function(){htmx.process("#global-modal-content")}}})})},t=function(i){leantime.helperRepository.updateUserModalSettings(i),leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal()};return{showHelperModal:e,hideAndKeepHidden:t,setDontShowAgain:a,closeModal:l,startMyWorkDashboardTour:r,startProjectDashboardTour:s,startKanbanTour:o,startMilestoneTour:c,startGoalTour:v,firstLoginModal:b}}()),Qe}yt();var Ye={},Je;function bt(){if(Je)return Ye;Je=1;var a=window.leantime||(window.leantime={});return a.helperRepository=function(){var r=function(o,c=!1){fetch(a.appUrl+"/api/users",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({settings:o,permanent:c?1:0,patchModalSettings:1})})},l=function(){fetch(a.appUrl+"/api/sessions",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({tourActive:1})})},s=function(){fetch(a.appUrl+"/api/sessions",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({tourActive:0})})};return{updateUserModalSettings:r,startingTour:l,stopTour:s}}(),Ye}bt();leantime.tourFactory=function(){var a=function(c){return new Shepherd.Tour({useModalOverlay:!0,defaultStepOptions:{classes:"shepherd-theme-arrows",scrollTo:!1,cancelIcon:{enabled:!0}},tourName:c})},r=function(c){leantime.helperRepository.updateUserModalSettings(c),typeof _paq<"u"&&_paq.push(["trackEvent","Tour","Completed",c])},l=function(c){return{myWorkDashboard:[{id:"welcome-step",title:"👋 Welcome to the Dashboard Tour",text:"Let's start with a few basics to get you up to speed on the navigation and different elements inside Leantime."},{id:"top-nav-step",title:"Work Modes",text:"The top navigation shows you the current 'work mode' you're in. You can be inside a project, your personal work area, or in the company mode.",attachTo:{element:".work-modes",on:"bottom"}},{id:"menu-step",title:"Left Navigation",text:"The left navigation breaks down the current work mode and gives you access to different areas. Everything presented here is part of the currently selected work mode above.",attachTo:{element:".leftpanel",on:"right"}},{id:"my-menu",title:"My Profile Bar",text:"Here you'll find links to your account as well as notifications and latest news about Leantime.",attachTo:{element:".headmenu.pull-right",on:"bottom"}},{id:"dashboard-widgets",title:"Your Dashboard Widgets",text:"Your dashboard is broken up into various widgets showing you focused information about your work.",attachTo:{element:".primaryContent",on:"top"}},{id:"dashboard-widgets-dandd",title:"Customize Your Dashboard",text:"Widgets can be resized and moved around using the drag and drop functionality.",attachTo:{element:"#widget_wrapper_todos .grid-handler-top",on:"bottom"}},{id:"my-todo-widget",title:"My To-Dos",text:"The My To-Do widget shows you all the tasks that are currently assigned to you.",attachTo:{element:"#widget_wrapper_todos",on:"top"}},{id:"my-todo-widget2",title:"Group To-Dos",text:"You can use the dropdowns here to filter your tasks by project or group them by priority, status, project, or dates.",attachTo:{element:"#yourToDoContainer > .clear",on:"bottom"}},{id:"my-todo-widget4",title:"Sort To-Dos",text:"Each To-Do can be dragged and dropped to change its order. You can also drag and drop a task to the calendar to schedule it.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child",on:"bottom"}},{id:"my-todo-widget-timer",title:"Start the Timer",text:"When you're ready to start working on a task, just click the start timer button.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .timerContainer",on:"bottom"}},{id:"my-todo-widget-complete",title:"Complete a Task",text:"Once a task is complete, you can mark it as done by clicking the status dropdown.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .statusDropdown",on:"bottom"}},{id:"my-todo-widget-add",title:"Add More Tasks",text:"You can add more tasks by clicking the plus button in each section, or by using the 3-dot menu next to each task.",attachTo:{element:"#yourToDoContainer .fa-circle-plus",on:"bottom"}},{id:"finish",title:"Congratulations!",text:"You've completed the My Work dashboard tour. Head to <a href='"+leantime.appUrl+"/dashboard/show'>your project</a> to learn more about project management in Leantime."}],projectDashboard:[{id:"left-nav",title:"Project Menu",text:"The project menu organizes your project into different sections: <strong>Data Room</strong> - to host all your files and information, <strong>Think</strong> - to strategize, ideate and define, <strong>Make</strong> - to manage goals, milestones and tasks.",attachTo:{element:".leftmenu ul",on:"left"}},{id:"project-selector",title:"Project Selector",text:"Use the project selector to jump between projects. The left menu shows everything related to your current project.",attachTo:{element:".bigProjectSelector",on:"bottom"}},{id:"project-checklist",title:"Checklist",text:"The project checklist is a quick reference to see if your project contains all the necessary information for successful execution.",attachTo:{element:"#progressForm",on:"bottom"}},{id:"project-status",title:"Quick Status Updates",text:"You can use status updates to quickly share the progress of your project with your team using red, yellow and green colors. The status will be visible across the application.",attachTo:{element:".project-updates",on:"left"}},{id:"project-progress",title:"Progress",text:"The project progress indicator shows you how much work you have completed. It accounts for various task sizes, team velocity, and project milestones.",attachTo:{element:".project-progress",on:"left"}},{id:"latest-tasks",title:"Latest Tasks",text:"The list of latest tasks shows you the most recent tasks added to your project and can be used as a project inbox.",attachTo:{element:".latest-todos",on:"left"}},{id:"teams",title:"Team",text:"The team box shows you the members of this project.",attachTo:{element:".team-container",on:"top"}},{id:"finished",title:"Congratulations!",text:"You've completed the project dashboard tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>To-Dos</a> to learn more about the various ways to manage your tasks in Leantime."}],kanbanBoard:[{id:"kanban-overview",title:"Your Kanban Board",text:"This is your Kanban board. It helps you visualize your work and limit work-in-progress.",attachTo:{element:".kanban-board-wrapper",on:"top"}},{id:"kanban-columns",title:"Work Flow",text:"Tasks move from left to right as they progress. Drag and drop cards to update their status.",attachTo:{element:".column",on:"right"}},{id:"kanban-columns2",title:"Flexible Columns",text:"Using the 3-dot menu, you can add or remove columns and rename them.",attachTo:{element:".column .widgettitle .inlineDropDownContainer",on:"right"}},{id:"kanban-filter",title:"Filter Tasks",text:"You can filter your tasks by various fields like priority, status, project, or dates.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"kanban-group",title:"Swimlanes",text:"Additionally, you can group your tasks to create Kanban swimlanes. This helps you visualize your work by team members, priority, or milestones.",attachTo:{element:".filterWrapper > .btn-group",on:"bottom"}},{id:"kanban-sprints",title:"Sprints",text:"If you manage your work in sprints, you can use the dropdown here to select, create, and update sprints.",attachTo:{element:".pageheader .dropdown",on:"bottom"}},{id:"kanban-congrats",title:"Congratulations!",text:"This concludes the Kanban tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Milestones</a> to learn how to create and manage milestones in Leantime."}],milestoneView:[{id:"milestone-overview",title:"Milestones",text:"Milestones help you track major outcomes and project phases.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-drag",title:"Drag & Sort",text:"Each bar represents one milestone. You can drag them along the timeline, reorder, and resize them. Everything you do on this screen updates the timing of your milestones.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-filter",title:"Filter",text:"You can filter your milestones and also view tasks that are part of them.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"milestone-timeframes",title:"Timeframes",text:"You can change the timeframe of the timeline view to see more of the year or dive deep into a daily breakdown.",attachTo:{element:".col-md-4 .pull-right",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the milestone tour. Head to the <a href='"+leantime.appUrl+"/goalcanvas/dashboard'>Goals</a> to learn how to create and manage goals in Leantime."}],goalsView:[{id:"goals-overview",title:"Goals",text:"Goals help you track measurable impact on your projects."},{id:"goal-parts",title:"Objectives & Metrics",text:"Each goal is made up of an Objective (what you're trying to accomplish) and a Metric (how you'll measure it).",attachTo:{element:".ticketBox",on:"top"}},{id:"goal-progress",title:"Goal Progress",text:"As you update your goal metrics, the progress bar will show you how far along you are.",attachTo:{element:".ticketBox > .row > .col-md-12 .progress",on:"bottom"}},{id:"milestone-connection",title:"Milestones & Goals",text:"You can connect goals to milestones to track the task-level progress of your goals. This helps identify gaps in your project plan.",attachTo:{element:".ticketBox.fixed",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the goals tour. Milestones, Goals, and To-Dos are the basic building blocks in Leantime. Use them to break down your work into manageable chunks. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Kanban Board</a> to review your tasks."}]}[c]||[]},s=function(c){const v=a(c),b=l(c);return b.forEach((e,t)=>{const i=t===0,n=t===b.length-1,m=[];i||m.push({text:leantime.i18n.__("tour.back"),classes:"shepherd-button-secondary",action:v.back}),n?m.push({text:leantime.i18n.__("tour.finish"),action:function(){r(c),confetti(),v.complete()}}):m.push({text:leantime.i18n.__("tour.next"),action:v.next}),n||m.unshift({text:leantime.i18n.__("tour.cancel"),classes:"shepherd-button-secondary",action:v.cancel}),v.addStep({...e,buttons:m})}),v.on("complete",function(){r(c)}),v},o=function(c){const v=s(c);return v.start(),v};return{createTour:a,buildTour:s,startTour:o,getTourDefinition:l}}();leantime.confettiHelper=function(){var a=function(l){const o={...{particleCount:100,spread:70,origin:{y:.6},disableForReducedMotion:!0},...l};typeof confetti=="function"?confetti(o):console.error("Confetti library not loaded")},r=function(){a({particleCount:150,spread:90,origin:{y:.8},colors:["#26a69a","#00bcd4","#4caf50","#8bc34a","#cddc39"]}),setTimeout(function(){a({particleCount:80,spread:120,origin:{y:.7},colors:["#ff9800","#ff5722","#f44336","#e91e63","#9c27b0"]})},500)};return{triggerConfetti:a,celebrateSuccess:r}}();leantime.firstTaskController=function(){var a=function(){var r=document.querySelector("#firstTaskOnboarding");if(r){r.addEventListener("submit",function(s){s.preventDefault();var o=document.querySelector("#firstTask"),c=o.value.trim();if(c==="")return o.classList.add("error"),!1;o.classList.remove("error"),leantime.confettiHelper.celebrateSuccess(),setTimeout(function(){r.submit()},1500)});var l=document.querySelector("#firstTask");l&&l.addEventListener("input",function(){this.classList.remove("error")})}};return{initFirstTaskForm:a}}();document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){leantime.firstTaskController.initFirstTaskForm()}):leantime.firstTaskController.initFirstTaskForm();leantime.menuController=function(){var a=function(c){if(c!==""){var v=document.querySelector("#submenu-"+c),b=document.querySelector("#submenu-icon-"+c),e="";v&&(v.style.display==="none"||getComputedStyle(v).display==="none"?(v.style.display="block",b&&(b.classList.remove("fa-angle-right"),b.classList.add("fa-angle-down")),e="open"):(v.style.display="none",b&&(b.classList.remove("fa-angle-down"),b.classList.add("fa-angle-right")),e="closed"),fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({submenu:c,state:e})}))}},r=function(){document.querySelectorAll(".project-select").forEach(function(t){new SlimSelect({select:t})}),document.addEventListener("click",function(t){t.target.closest(".projectselector.dropdown-menu")&&t.stopPropagation()});var c=document.querySelector(".projectSelectorTabs");if(c){var v=c.querySelectorAll("ul > li > a"),b=localStorage.getItem("currentMenuTab"),e=0;b&&v.forEach(function(t,i){t.getAttribute("href")==="#"+b&&(e=i)}),v.forEach(function(t,i){var n=t.getAttribute("href");if(!(!n||n.charAt(0)!=="#")){var m=document.querySelector(n);m&&(i===e?(m.style.display="",t.parentElement.classList.add("ui-tabs-active")):(m.style.display="none",t.parentElement.classList.remove("ui-tabs-active")),t.addEventListener("click",function(x){x.preventDefault(),v.forEach(function(S){var L=S.getAttribute("href");if(L&&L.charAt(0)==="#"){var j=document.querySelector(L);j&&(j.style.display="none")}S.parentElement.classList.remove("ui-tabs-active")}),m&&(m.style.display=""),t.parentElement.classList.add("ui-tabs-active");var d=n.replace("#","");localStorage.setItem("currentMenuTab",d)}))}})}},l=function(){if(window.innerWidth<576){var c=document.querySelector(".mainwrapper");c&&(c.classList.remove("menuopen"),c.classList.add("menuclosed"))}var v=document.querySelector(".barmenu");v&&v.addEventListener("click",function(){var b=document.querySelector(".mainwrapper");b&&(b.classList.contains("menuopen")?(b.classList.remove("menuopen"),b.classList.add("menuclosed"),leantime.menuRepository.updateUserMenuSettings("closed")):(b.classList.remove("menuclosed"),b.classList.add("menuopen"),leantime.menuRepository.updateUserMenuSettings("open")))})},s=function(c,v="",b){var e=document.querySelector("#"+b+"-toggler-"+c),t=document.querySelector("#"+b+"-projectSelectorlist-group-"+c);if(e)if(v==="closed"?(e.classList.remove("closed","open"),e.classList.add("open")):v==="open"&&(e.classList.remove("open","closed"),e.classList.add("closed")),e.classList.contains("open")){e.classList.remove("open"),e.classList.add("closed");var i=e.querySelector("i");i&&(i.classList.remove("fa-angle-down"),i.classList.add("fa-angle-right")),t&&(t.classList.add("closed"),t.classList.remove("open")),o(c,"closed",b)}else{e.classList.remove("closed"),e.classList.add("open");var i=e.querySelector("i");i&&(i.classList.remove("fa-angle-right"),i.classList.add("fa-angle-down")),t&&(t.classList.add("open"),t.classList.remove("closed")),o(c,"open",b)}};let o=function(c,v,b){fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({submenu:b+"-projectSelectorlist-group-"+c,state:v})})};return{toggleSubmenu:a,initProjectSelector:r,initLeftMenuHamburgerButton:l,updateGroupDropdownSetting:o,toggleProjectDropDownList:s}}();var Ve=window.leantime||(window.leantime={});Ve.menuRepository=function(){var a=function(r){fetch(Ve.appUrl+"/api/sessions",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({menuState:r})})};return{updateUserMenuSettings:a}}();leantime.settingController=function(){var a,r=function(o){if(l(),o.files&&o.files[0]){var c=new FileReader,v=jQuery("#logoImg");c.onload=function(b){a=v.croppie({enableExif:!0,enforceBoundary:!1,viewport:{width:220,height:40,type:"square"},boundary:{width:400,height:200}}),a.croppie("bind",{url:b.currentTarget.result});var e=document.querySelector("#previousImage");e&&(e.style.display="none")},c.readAsDataURL(o.files[0])}},l=function(){jQuery("#logoImg").croppie("destroy");var o=document.querySelector("#previousImage");o&&(o.style.display="")},s=function(){var o=document.querySelector("#save-logo");o&&o.classList.add("running");var c=document.querySelector("#logoImg");c&&c.setAttribute("src",leantime.appUrl+"/images/loaders/loader28.gif"),a.croppie("result",{type:"blob",circle:!1,size:"original",quality:1}).then(function(v){leantime.settingService.saveLogo(v)})};return{readURL:r,clearCroppie:l,saveCroppie:s}}();leantime.settingRepository=function(){var a=function(r){var l=new FormData;l.append("file",r),fetch(leantime.appUrl+"/api/setting",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"},body:l}).then(function(s){var o=document.querySelector("#save-logo");o&&o.classList.remove("running"),location.reload()}).catch(function(s){console.log(s)})};return{saveLogo:a}}();leantime.settingService=function(){var a=function(r){leantime.settingRepository.saveLogo(r)};return{saveLogo:a}}();leantime.widgetController=function(){var a=[],r=function(e,t){let i=e.gridX||0,n=e.gridY||0,m=e.gridWidth||2,x=e.gridHeight||2;if(t.willItFit({x:i,y:n,width:m,height:x}))return{x:i,y:n};let d=Math.max(...t.engine.nodes.map(S=>S.y+S.h),0);for(let S=0;S<=d+1;S++)for(let L=0;L<=12-m;L++)if(t.willItFit({newX:L,newY:S,width:m,height:x}))return{x:L,y:S};return{x:0,y:d+1}};GridStack.renderCB=function(e,t){t.content&&typeof DOMPurify<"u"&&(e.innerHTML=DOMPurify.sanitize(t.content))};var l=function(){a=GridStack.init({margin:"0px 15px 15px 0px",handle:".grid-handler-top",minRow:2,cellHeight:"30px",float:!0,draggable:{handle:".grid-handler-top",appendTo:"body"},lazyLoad:!1,columnOpts:{breakpointForWindow:!0,breakpoints:[{w:700,c:1},{w:950,c:6}]}}),a.on("dragstop",function(e,t){s()}),a.on("resizestop",function(e,t){s()}),document.querySelectorAll(".grid-stack-item").forEach(function(e){var t=e.querySelector(".removeWidget");t&&t.addEventListener("click",function(){o(this.closest(".grid-stack-item"))});var i=e.querySelector(".fitContent");i&&i.addEventListener("click",function(){c(this.closest(".grid-stack-item"))})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("#gridBoard");e&&(e.style.opacity="1")})},s=function(){let e=a.save();e.sort((n,m)=>n.y===m.y?n.x-m.x:n.y-m.y);let t=null;arguments.length>0&&arguments[0].action==="toggleWidget"&&(t={widgetId:arguments[0].widgetId,visible:arguments[0].visible}),e.forEach(function(n){var m=document.createElement("div");m.innerHTML=n.content;var x=m.querySelector("[hx-get]");n.id=x?x.getAttribute("id"):null,n.widgetUrl=x?x.getAttribute("hx-get"):null,n.widgetTrigger=x?x.getAttribute("hx-trigger"):null,n.x==null&&(n.x=0),n.gridX=n.x,n.y==null&&(n.y=0),n.gridY=n.y,n.w==null&&(n.w=1),n.gridWidth=n.w,n.h==null&&(n.h=1),n.gridHeight=n.h,n.content=""});var i=new URLSearchParams;i.append("action","saveGrid"),e.forEach(function(n,m){Object.keys(n).forEach(function(x){var d=n[x];d!=null&&i.append("data["+m+"]["+x+"]",d)})}),t&&Object.keys(t).forEach(function(n){i.append("visibilityData["+n+"]",t[n])}),fetch(leantime.appUrl+"/widgets/widgetManager",{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:i})},o=function(e){e.remove(),a.removeWidget(e,!0),s()},c=function(e){document.querySelector(".grid-stack").gridstack.resizeToContent(e,!1),s()},v=function(e,t,i){let n=document.querySelector(".grid-stack").gridstack,m=t.checked;if(r(i,n),m){const d=document.createElement("div");d.className="grid-stack-item";const S=document.createElement("div");S.className=`grid-stack-item-content tw:p-none ${i.widgetBackground=="default"?"maincontentinner":i.background}`,S.innerHTML=b(i),d.appendChild(S),n.el.appendChild(d),n.makeWidget(d,{x:i.gridX||0,y:i.gridY||50,w:i.gridWidth||2,h:i.gridHeight||2}),htmx.process(d),s({action:"toggleWidget",widgetId:e,visible:m})}else{var x=document.getElementById(e);x&&o(x.closest(".grid-stack-item"))}},b=function(e){return'<div class="widgetInner">        <div class="'+(e.widgetBackground=="default"?"tw:pb-l":"")+`">
            <div class="stickyHeader" style="padding:15px; height:50px;  width:100%;">
               <div class="grid-handler-top tw:h-[40px] tw:cursor-grab tw:float-left tw:mr-sm">
                    <i class="fa-solid fa-grip-vertical"></i>
                </div>
           `+(e.name!=""?'<h5 class="subtitle tw:pb-m tw:float-left tw:mr-sm">'+e.name+"</h5>":"")+`
            <div class="inlineDropDownContainer tw:float-right">
                <a href="javascript:void(0);" class="dropdown-toggle ticketDropDown editHeadline" data-toggle="dropdown">
                    <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="javascript:void(0)" class="fitContent"><i class="fa-solid fa-up-right-and-down-left-from-center"></i> Resize to fit content</a></li>
                        <li><a href="javascript:void(0)" class="removeWidget"><i class="fa fa-eye-slash"></i> Hide</a></li>
                </ul>
            </div>

        </div>
 <div class="widgetContent tw:px-l">
             <div hx-get="`+e.widgetUrl+'" hx-trigger="'+e.widgetTrigger+'" id="'+e.id+`"></div>
        </div>
       </div>
        <div class="clear"></div>
    </div>
`};return{resizeWidget:c,removeWidget:o,saveGrid:s,initGrid:l,toggleWidgetVisibility:v}}();const _t=Object.assign({"../../app/Domain/Calendar/Js/calendarController.js":()=>U(()=>import("./calendarController-Dt74k-h2.js"),[]),"../../app/Domain/Clients/Js/clientsController.js":()=>U(()=>import("./clientsController-rJN37dRD.js"),[]),"../../app/Domain/Cpcanvas/Js/cpCanvasController.js":()=>U(()=>import("./cpCanvasController-Bk9nlIMp.js"),[]),"../../app/Domain/Dbmcanvas/Js/dbmCanvasController.js":()=>U(()=>import("./dbmCanvasController-BfisiC0W.js"),[]),"../../app/Domain/Eacanvas/Js/eaCanvasController.js":()=>U(()=>import("./eaCanvasController-BBKpXTvo.js"),[]),"../../app/Domain/Emcanvas/Js/emCanvasController.js":()=>U(()=>import("./emCanvasController-BeXTfudd.js"),[]),"../../app/Domain/Gamecenter/Js/game-snake.js":()=>U(()=>import("./game-snake-BiB7-ObF.js").then(a=>a.g),__vite__mapDeps([0,1])),"../../app/Domain/Goalcanvas/Js/goalCanvasController.js":()=>U(()=>import("./goalCanvasController-Ln3cYq9R.js"),[]),"../../app/Domain/Ideas/Js/ideasController.js":()=>U(()=>import("./ideasController-B5tm3ndV.js"),[]),"../../app/Domain/Insightscanvas/Js/insightsCanvasController.js":()=>U(()=>import("./insightsCanvasController-D4xHaPBV.js"),[]),"../../app/Domain/Lbmcanvas/Js/lbmCanvasController.js":()=>U(()=>import("./lbmCanvasController-DWCLahfG.js"),[]),"../../app/Domain/Leancanvas/Js/leanCanvasController.js":()=>U(()=>import("./leanCanvasController-B9aMTJng.js"),[]),"../../app/Domain/Minempathycanvas/Js/risksCanvasController.js":()=>U(()=>import("./risksCanvasController-D76y0F1o.js"),[]),"../../app/Domain/Obmcanvas/Js/obmCanvasController.js":()=>U(()=>import("./obmCanvasController-D3ulNdVa.js"),[]),"../../app/Domain/Projects/Js/projectsController.js":()=>U(()=>import("./projectsController-BY15Utrs.js"),[]),"../../app/Domain/Retroscanvas/Js/retroCanvasController.js":()=>U(()=>import("./retroCanvasController-Bdzr-tck.js"),[]),"../../app/Domain/Riskscanvas/Js/risksCanvasController.js":()=>U(()=>import("./risksCanvasController-yt1qFgdB.js"),[]),"../../app/Domain/Sbcanvas/Js/sbCanvasController.js":()=>U(()=>import("./sbCanvasController-FLgGdgM2.js"),[]),"../../app/Domain/Smcanvas/Js/smCanvasController.js":()=>U(()=>import("./smCanvasController-DjnDEowx.js"),[]),"../../app/Domain/Sqcanvas/Js/sqCanvasController.js":()=>U(()=>import("./sqCanvasController-C8AMx8k5.js"),[]),"../../app/Domain/Swotcanvas/Js/swotCanvasController.js":()=>U(()=>import("./swotCanvasController-DM1_M8ZL.js"),[]),"../../app/Domain/Tickets/Js/kanbanController.js":()=>U(()=>import("./kanbanController-BaewnVvF.js"),[]),"../../app/Domain/Timesheets/Js/timesheetsController.js":()=>U(()=>import("./timesheetsController-BQyLQw80.js"),[]),"../../app/Domain/Valuecanvas/Js/valueCanvasController.js":()=>U(()=>import("./valueCanvasController-7Q7wZw1F.js"),[]),"../../app/Domain/Wiki/Js/wikiController.js":()=>U(()=>import("./wikiController-BEslrRep.js"),[])}),Ge=new Set;function ge(a){if(!a||Ge.has(a))return Promise.resolve();Ge.add(a);const r=[];for(const[l,s]of Object.entries(_t)){const o=l.match(/Domain\/([^/]+)\//);o&&o[1].toLowerCase()===a&&r.push(s())}return Promise.all(r)}function he(a){var r;try{return((r=new URL(a,window.location.origin).pathname.replace(/^\/hx\//,"/").split("/").filter(Boolean)[0])==null?void 0:r.toLowerCase())||""}catch{return""}}var Ke,Ze,$e;ge(($e=(Ze=(Ke=document.body)==null?void 0:Ke.dataset)==null?void 0:Ze.module)==null?void 0:$e.toLowerCase());document.addEventListener("htmx:configRequest",function(a){if(!a.detail.boosted)return;const r=he(a.detail.path||"");r&&ge(r)});document.addEventListener("htmx:pushedIntoHistory",function(){const a=he(window.location.pathname);a&&(document.body.dataset.module=a)});document.addEventListener("htmx:historyRestore",function(){const a=he(window.location.pathname);a&&(document.body.dataset.module=a,ge(a))});
