import{_ as R}from"./preload-helper-DPi8upcZ.js";var H=H||{},Re=jQuery("meta[name=theme-color]").attr("content");H.companyColor=Re;var Pe=jQuery("meta[name=color-scheme]").attr("content");H.colorScheme=Pe;var Fe=jQuery("meta[name=theme]").attr("content");H.theme=Fe;var He=jQuery("meta[name=identifier-URL]").attr("content");H.appUrl=He;var Ue=jQuery("meta[name=leantime-version]").attr("content");H.version=Ue;H.replaceSVGColors=function(){jQuery(document).ready(function(){H.companyColor!="#1b75bb"&&jQuery("svg").children().each(function(){jQuery(this).attr("fill")=="#1b75bb"&&jQuery(this).attr("fill",H.companyColor)})})};H.handleAsyncResponse=function(i){if(i!==void 0&&i.result!==void 0&&i.result.html!==void 0){var r=jQuery(i.result.html);jQuery("body").append(r)}};jQuery.noConflict();jQuery(document).ready(function(){H.replaceSVGColors(),jQuery(".confetti").click(function(){confetti.start()}),tippy("[data-tippy-content]"),jQuery(".login-alert .alert").text()!==""&&jQuery(".login-alert").fadeIn(),document.addEventListener("scroll",()=>{document.documentElement.dataset.scroll=window.scrollY})});htmx.onLoad(function(i){tippy("[data-tippy-content]"),H.replaceSVGColors()});window.addEventListener("HTMX.ShowNotification",function(i){jQuery.get(H.appUrl+"/notifications/getLatestGrowl",function(r){let d=JSON.parse(r);d.notification&&d.notification!=="undefined"&&jQuery.growl({message:d.notification,style:d.notificationType})})});leantime.editorController=function(){var i=[{start:"*",end:"*",format:"italic"},{start:"_",end:"_",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"__",end:"__",format:"bold"},{start:"~~",end:"~~",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"},{start:"1. ",cmd:"InsertOrderedList",value:{"list-style-type":"decimal"}},{start:"1) ",cmd:"InsertOrderedList",value:{"list-style-type":"decimal"}},{start:"a. ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-alpha"}},{start:"a) ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-alpha"}},{start:"i. ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-roman"}},{start:"i) ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-roman"}},{start:"[ ] ",cmd:"InsertChecklist"},{start:">",format:"blockquote"},{start:"`",end:"`",format:"code"},{start:"```",end:"```",format:"pre"},{start:"~",end:"~",cmd:"createLink"},{start:"---",replacement:"<hr/>"},{start:"--",replacement:"—"},{start:"-",replacement:"—"},{start:"(c)",replacement:"©"}],r={delimiter:"@",delay:20,source:function(o,_,v){v==="@"&&jQuery.getJSON(leantime.appUrl+"/api/users",{projectUsersAccess:"current",query:o},function(j){let T=[];for(let E=0;E<j.length;E++)T[E]={name:j[E].firstname+" "+j[E].lastname,id:j[E].id,email:j[E].username};_(T)})},highlighter:function(o){return o.replace(new RegExp("("+this.query+")","ig"),function(_,v){return"<strong>"+v+"</strong>"})},insert:function(o){return'<a class="userMention" data-tagged-user-id="'+o.id+'" href="javascript:void(0)"><img src="'+leantime.appUrl+"/api/users?profileImage="+o.id+'" alt="'+o.name+' Image"/>'+o.name.trim()+"</a>&nbsp;"},items:10},d=function(o,_,v){var j,T;j=new XMLHttpRequest,j.withCredentials=!1,j.open("POST",leantime.appUrl+"/api/files"),j.onload=function(){if(j.status<200||j.status>=300){v("HTTP Error: "+j.status);return}_(j.responseText)},T=new FormData,T.append("file",o.blob()),j.send(T)},g=function(o,_,v){window.filePickerCallback=o;var j={afterShowCont:function(){jQuery(".fileModal").nyroModal({callbacks:j})}};jQuery.nmManual(leantime.appUrl+"/files/showAll?modalPopUp=true",{stack:!0,callbacks:j,sizes:{minW:500,minH:500}}),jQuery.nmTop().elts.cont.css("zIndex","1000010"),jQuery.nmTop().elts.bg.css("zIndex","1000010"),jQuery.nmTop().elts.load.css("zIndex","1000010"),jQuery.nmTop().elts.all.find(".nyroModalCloseButton").css("zIndex","1000010")},h=function(o,_){o.on("change",function(){}),o.on("init",function(v){var j=o.getDoc().getElementsByClassName("confetti");j&&j.length>0&&j[0].addEventListener("click",function(){confetti.start()})}),o.on("focus",function(){var v=o.getDoc().getElementsByClassName("tinyPlaceholder");if(v.length>0)for(;v[0];)v[0].parentNode.removeChild(v[0])}),o.on("submit",function(){var v=o.getDoc().getElementsByClassName("tinyPlaceholder");if(v.length>0){for(;v[0];)v[0].remove();o.save()}})},l=leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",y=leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",u=function(o){jQuery("textarea.tinymceSimple").tinymce({iframe_aria_text:"",width:"100%",skin_url:l,content_css:y,content_style:"body.mce-content-body{ font-size:14px; } img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,shortlink,checklist,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advlist,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | link unlink image | checklist bullist numlist | emoticons",browser_spellcheck:!0,toolbar_location:"bottom",branding:!1,statusbar:!1,convert_urls:!0,paste_data_images:!0,menubar:!1,relative_urls:!0,document_base_url:leantime.appUrl+"/",default_link_target:"_blank",table_appearance_options:!1,mentions:r,textpattern_patterns:i,images_upload_handler:d,file_picker_callback:g,setup:h})},e=function(){var o=jQuery("input[name=id]").val();o||(o="new");let _="none";window.leantime.currentProject&&(_=window.leantime.currentProject);var v=window.innerHeight-50-205;jQuery("textarea.complexEditor").tinymce({iframe_aria_text:"",width:"100%",skin_url:leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",content_css:leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",content_style:"html {text-align:center;} body.mce-content-body{ font-size:14px; } img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,embed,autoresize,shortlink,checklist,bettertable,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advancedTemplate,advlist,codesample,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | formatselect forecolor | alignleft aligncenter alignright | link unlink image media embed emoticons | checklist bullist numlist | table  | codesample | advancedTemplate | restoredraft",autosave_prefix:"leantime-complexEditor-autosave-{path}{query}-{id}-"+_+"-"+o+"-",autosave_restore_when_empty:o!=="new",autosave_retention:"10m",browser_spellcheck:!0,contextmenu:!1,autosave_retention:"120m",autosave_interval:"10s",autosave_ask_before_unload:!1,branding:!1,statusbar:!1,convert_urls:!0,menubar:!1,resizable:!0,templates:leantime.appUrl+"/wiki/templates",body_class:"mce-content-body",paste_data_images:!0,relative_urls:!0,document_base_url:leantime.appUrl+"/",table_appearance_options:!1,min_height:400,max_height:v,default_link_target:"_blank",codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Rust",value:"rust"},{text:"SQL",value:"sql"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"Swift",value:"swift"},{text:"Objective C",value:"objectivec"},{text:"Go",value:"go"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],mentions:r,textpattern_patterns:i,images_upload_handler:d,file_picker_callback:g,setup:h})},t=function(o){var _=jQuery("input[name=id]").val();_==null&&(_="new");let v="none";window.leantime.currentProject&&(v=window.leantime.currentProject),jQuery("textarea.notesEditor").tinymce({iframe_aria_text:"",width:"100%",skin_url:leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",content_css:leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",content_style:"html {text-align:center;} body.mce-content-body{ font-size:14px; color:var(--secondary-font-color); max-width:none;} img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,embed,autoresize,shortlink,checklist,bettertable,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advancedTemplate,advlist,codesample,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | formatselect forecolor | alignleft aligncenter alignright | link image table emoticons | checklist bullist | advancedTemplate | restoredraft",toolbar_location:"bottom",browser_spellcheck:!0,contextmenu:!1,autosave_prefix:"leantime-complexEditor-autosave-{path}{query}-{id}-"+v+"-"+_+"-",autosave_restore_when_empty:!0,autosave_retention:"120m",autosave_interval:"10s",autosave_ask_before_unload:!1,branding:!1,statusbar:!1,convert_urls:!0,menubar:!1,resizable:!0,templates:leantime.appUrl+"/wiki/templates",body_class:"mce-content-body",paste_data_images:!0,relative_urls:!0,document_base_url:leantime.appUrl+"/",table_appearance_options:!1,min_height:400,default_link_target:"_blank",codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Rust",value:"rust"},{text:"SQL",value:"sql"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"Swift",value:"swift"},{text:"Objective C",value:"objectivec"},{text:"Go",value:"go"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],textpattern_patterns:i,mentions:r,textpattern_patterns:i,images_upload_handler:d,file_picker_callback:g,setup:function(j){h(j),j.on("blur",function(){j.save(),o()})}})},a=function(o){jQuery(o).tinymce({iframe_aria_text:"",width:"100%",skin_url:l,inline:!0,plugins:"autosave,imagetools,shortlink,checklist,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advlist,mention,slashcommands,textpattern",toolbar:"",toolbar_location:"bottom",browser_spellcheck:!0,contextmenu:!1,branding:!1,statusbar:!1,convert_urls:!0,paste_data_images:!0,menubar:!1,relative_urls:!0,document_base_url:leantime.appUrl+"/",default_link_target:"_blank",table_appearance_options:!1,mentions:r,textpattern_patterns:i,images_upload_handler:d,file_picker_callback:g,setup:h})};return{initSimpleEditor:u,initComplexEditor:e,initNotesEditor:t,initContentEditable:a}}();leantime.snippets=function(){var i=function(e){var t=document.getElementById(e);t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),jQuery.growl({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},r=function(e){navigator.clipboard.writeText(e),jQuery.growl({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},d=function(){jQuery(".confetti").click(function(){confetti.start()})},g=function(e){var t=jQuery("#accordion_toggle_"+e).find("i.fa").first(),a="accordion_content-"+e,o="closed";t.hasClass("fa-angle-right")?(t.removeClass("fa-angle-right"),t.addClass("fa-angle-down"),jQuery("#accordion_content-"+e).slideDown("fast"),o="open"):(t.removeClass("fa-angle-down"),t.addClass("fa-angle-right"),jQuery("#accordion_content-"+e).slideUp("fast"),o="closed"),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/submenu",data:{submenu:a,state:o}})},h=function(e){var t=jQuery("#themeStyleSheet").attr("href");e=="light"?(t=t.replace("dark.css","light.css"),jQuery("#themeStyleSheet").attr("href",t)):e=="dark"&&(t=t.replace("light.css","dark.css"),jQuery("#themeStyleSheet").attr("href",t))},l=function(e){var t=jQuery("#themeStyleSheet").attr("href");e=="minimal"?(t=t.replace("default","minimal"),jQuery("#themeStyleSheet").attr("href",t)):e=="default"&&(t=t.replace("minimal","default"),jQuery("#themeStyleSheet").attr("href",t))},y=function(e){jQuery("#fontStyleSetter").html(":root { --primary-font-family: '"+e+"', 'Helvetica Neue', Helvetica, sans-serif; }")},u=function(e,t){jQuery("#colorSchemeSetter").html(":root { --accent1: "+e+"; --accent2: "+t+"}")};return{copyUrl:i,copyToClipboard:r,initConfettiClick:d,accordionToggle:g,toggleTheme:h,toggleFont:y,toggleColors:u,toggleBg:l}}();leantime.modals=function(){var i=!1;function r(){return document.getElementById("global-modal")}function d(){return document.getElementById("global-modal-content")}function g(){return document.getElementById("global-modal-box")}function h(x){return/showTicket|ideaDialog|articleDialog/.test(x)}function l(){var x=d();x&&(x.innerHTML='<div style="display:flex;justify-content:center;align-items:center;padding:60px 40px;"><span class="tw:loading tw:loading-spinner tw:loading-lg"></span></div>')}function y(x){for(var M=x.querySelectorAll("script"),P=0;P<M.length;P++){for(var A=M[P],I=document.createElement("script"),O=0;O<A.attributes.length;O++)I.setAttribute(A.attributes[O].name,A.attributes[O].value);I.textContent=A.textContent,A.parentNode.replaceChild(I,A)}}function u(x){if(/<html[\s>]/i.test(x)||/<!DOCTYPE/i.test(x)){var M=new DOMParser().parseFromString(x,"text/html"),P=M.querySelector(".primaryContent");return P?P.innerHTML:M.body?M.body.innerHTML:x}return x}function e(x){jQuery(".showDialogOnLoad",x).show(),window.htmx&&window.htmx.process(x),window.tippy&&tippy(x.querySelectorAll("[data-tippy-content]"))}function t(x){var M=x.headers.get("HX-Trigger");if(M&&M.indexOf("HTMX.closemodal")!==-1)return M.indexOf("HTMX.ShowNotification")!==-1&&window.dispatchEvent(new CustomEvent("HTMX.ShowNotification")),_(),Promise.resolve(null);var P=x.headers.get("HX-Redirect");return P?(_(),window.location.href=P,Promise.resolve(null)):x.text()}function a(x){if(x!==null){var M=d();M&&(M.innerHTML=u(x),y(M),e(M))}}function o(x){var M=r(),P=g();if(M){P.className=P.className.replace(/tw:max-w-\S+/g,"").trim(),P.style.minHeight="",h(x)?(P.classList.add("tw:max-w-5xl"),P.style.minHeight="80vh"):P.classList.add("tw:max-w-3xl"),l(),M.open||M.showModal(),i=!0;var A=leantime.appUrl.replace(/\/$/,""),I=x.indexOf("http")===0?x:A+x;fetch(I,{credentials:"include",headers:{"is-modal":"true","X-Requested-With":"XMLHttpRequest"}}).then(t).then(a).catch(function(O){console.error("modalManager: load error",O);var J=d();J&&(J.innerHTML='<div style="padding:24px;text-align:center;"><p>Could not load content.</p></div>')})}}function _(){var x=r();if(x&&i){i=!1;try{history.pushState("",document.title,window.location.pathname+window.location.search)}catch{}if(x.open&&x.close(),typeof window.globalModalCallback=="function"){var M=window.globalModalCallback;window.globalModalCallback=null,M()}else location.reload()}}var v=function(){var x=window.location.hash.substring(1);if(x){var M=x.split("/");M.length>2&&M[1]!=="tab"&&o(x)}},j=function(){_()},T=function(x){typeof x=="function"&&(window.globalModalCallback=x)},E=function(x){var M=leantime.appUrl.replace(/\/$/,""),P=x;x.indexOf(M)===0&&(P=x.substring(M.length)),o(P)};return{openModal:v,setCustomModalCallback:T,closeModal:j,openByUrl:E}}();jQuery(document).ready(function(){leantime.modals.openModal();var i=document.getElementById("global-modal");i&&(i.addEventListener("cancel",function(r){r.preventDefault(),leantime.modals.closeModal()}),i.addEventListener("close",function(){leantime.modals.closeModal()})),document.addEventListener("submit",function(r){var d=r.target;if(!(!d||!d.closest||!d.closest("#global-modal-content"))&&d.getAttribute("method")!=="dialog"&&!(d.hasAttribute("hx-post")||d.hasAttribute("hx-get")||d.hasAttribute("hx-put")||d.hasAttribute("hx-delete"))){r.preventDefault();var g=(d.getAttribute("method")||"GET").toUpperCase(),h=d.getAttribute("action")||window.location.href,l=document.getElementById("global-modal-content"),y={method:g,credentials:"include",headers:{"is-modal":"true","X-Requested-With":"XMLHttpRequest"}};if(g==="POST")y.body=new FormData(d);else{var u=new URLSearchParams(new FormData(d));h+=(h.indexOf("?")===-1?"?":"&")+u.toString()}fetch(h,y).then(function(e){var t=e.headers.get("HX-Trigger");if(t&&t.indexOf("HTMX.closemodal")!==-1)return t.indexOf("HTMX.ShowNotification")!==-1&&window.dispatchEvent(new CustomEvent("HTMX.ShowNotification")),leantime.modals.closeModal(),null;var a=e.headers.get("HX-Redirect");return a?(leantime.modals.closeModal(),window.location.href=a,null):e.text()}).then(function(e){if(e!==null){var t=e;if(/<html[\s>]/i.test(e)||/<!DOCTYPE/i.test(e)){var a=new DOMParser().parseFromString(e,"text/html"),o=a.querySelector(".primaryContent");t=o?o.innerHTML:a.body?a.body.innerHTML:e}l.innerHTML=t;for(var _=l.querySelectorAll("script"),v=0;v<_.length;v++){for(var j=_[v],T=document.createElement("script"),E=0;E<j.attributes.length;E++)T.setAttribute(j.attributes[E].name,j.attributes[E].value);T.textContent=j.textContent,j.parentNode.replaceChild(T,j)}jQuery(".showDialogOnLoad",l).show(),window.htmx&&window.htmx.process(l),window.tippy&&tippy(l.querySelectorAll("[data-tippy-content]"))}}).catch(function(e){console.error("modalManager: form submit error",e)})}},!0)});window.addEventListener("hashchange",function(){leantime.modals.openModal()});window.addEventListener("closeModal",function(){leantime.modals.closeModal()});document.addEventListener("HTMX.closemodal",function(){leantime.modals.closeModal()});jQuery.nmManual=function(i,r){typeof r=="function"&&(r=r()),r&&r.callbacks&&typeof r.callbacks.beforeClose=="function"&&(window.globalModalCallback=r.callbacks.beforeClose),leantime.modals.openByUrl(i)};jQuery.nmTop=function(){return{close:function(){leantime.modals.closeModal()},elts:{cont:jQuery("#global-modal-box"),bg:jQuery("#global-modal .tw\\:modal-backdrop"),load:jQuery("#global-modal .tw\\:loading"),all:jQuery("#global-modal")}}};jQuery.fn.nyroModal=function(i){return this.each(function(){var r=jQuery(this);if(!r.data("modalManager-init")){r.data("modalManager-init",!0),i&&i.callbacks&&r.data("modalManager-opts",i);var d=r.attr("href");d&&d.indexOf("#")===0||d&&r.on("click.modalManager",function(g){g.preventDefault(),i&&i.callbacks&&typeof i.callbacks.beforeClose=="function"&&(window.globalModalCallback=i.callbacks.beforeClose),leantime.modals.openByUrl(d)})}})};leantime.dateController=function(){function i(h){return{numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),monthNamesShort:leantime.i18n.__("language.monthNamesShort").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek"),onSelect:h}}function r(h){var l=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),y;try{y=jQuery.datepicker.parseDate(l,h.value)}catch(u){y=null,console.log(u)}return y}var d=function(h,l,y){Date.prototype.addDays=function(t){return this.setDate(this.getDate()+t),this},jQuery.datepicker.setDefaults({beforeShow:function(t){if(jQuery(t).attr("readonly"))return!1}});var u=jQuery(h).datepicker(i()).on("change",function(t){e.datepicker("option","minDate",r(this)),jQuery(l).val()==""&&jQuery(l).val(jQuery(h).val())}),e=jQuery(l).datepicker(i()).on("change",function(){u.datepicker("option","maxDate",r(this))})},g=function(h,l){jQuery(h).datepicker(i(l))};return{initDateRangePicker:d,initDatePicker:g}}();leantime.dateHelper=function(){var i={jquery:{},luxon:{}};i.jquery={d:"dd",D:"D",j:"d",l:"DD",N:"",S:"",w:"",z:"o",W:"",F:"MM",m:"mm",M:"M",n:"m",t:"",L:"",o:"yy",Y:"yy",y:"y",a:"",A:"",B:"",g:"",G:"",h:"",H:"",i:"",s:"",u:"",e:"",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"@"},i.luxon={d:"dd",D:"ccc",j:"d",l:"cccc",N:"c",S:"",w:"c",z:"o",W:"WW",F:"MMMM",m:"LL",M:"LLL",n:"L",t:"",L:"",o:"kk",Y:"yyyy",y:"yy",a:"a",A:"a",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",v:"SSS",e:"z",I:"",O:"ZZ",P:"ZZ",T:"ZZZ",Z:"",c:"",r:"",U:"X"};var r=function(g,h){let l=i[h],y="";return g.split("").forEach(function(u){l[u]!==void 0?y=y+""+l[u]:y=y+""+u}),y},d=function(g,h){let l=leantime.i18n.__("language."+g);return r(l,h)};return{mapFormat:r,getFormatFromSettings:d}}();leantime.accessibilityController=function(){var i=function(){jQuery(".chosen-container").each(function(){var e=jQuery(this);if(!e.data("a11y-enhanced")){var t=null,a=e.attr("id");if(a&&a.indexOf("_chosen")>-1){var _=a.replace("_chosen","");t=jQuery("#"+_)}if((!t||!t.length)&&(t=e.prev("select[data-placeholder]")),(!t||!t.length)&&(t=e.siblings("select").first()),!(!t||!t.length)){var o="",_=t.attr("id");if(_){var v=jQuery('label[for="'+_+'"]');v.length&&(o=v.text().trim())}var j=e.find(".chosen-single"),T=e.find(".chosen-choices");j.length&&j.attr({role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-label":o||t.attr("data-placeholder")||"Select option",tabindex:"0"}),T.length&&T.attr({role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-label":o||t.attr("data-placeholder")||"Select options","aria-multiselectable":"true",tabindex:"0"}),e.on("chosen:showing_dropdown",function(){j.add(T).attr("aria-expanded","true")}),e.on("chosen:hiding_dropdown",function(){j.add(T).attr("aria-expanded","false")}),e.find(".chosen-drop").attr("role","listbox"),e.find(".chosen-results li").attr("role","option"),e.data("a11y-enhanced",!0)}}})},r=function(){jQuery(".ss-main").each(function(){var e=jQuery(this),t=e.prev("select");if(t.length){var a=jQuery('label[for="'+t.attr("id")+'"]'),o=a.length?a.text().trim():"";e.attr({role:"combobox","aria-haspopup":"listbox","aria-label":o||t.attr("data-placeholder")||"Select option","aria-multiselectable":t.attr("multiple")?"true":"false"})}})},d=function(){jQuery("div.tagsinput").each(function(){var e=jQuery(this),t=e.next('input[type="text"]');if(t.length){var a=t.attr("id"),o=jQuery('label[for="'+a+'"]'),_=o.length?o.text().trim():"Enter tags";e.attr({role:"list","aria-label":_}),e.find("span.tag").each(function(){jQuery(this).attr("role","listitem")});var v=e.find("input");v.attr({"aria-label":"Add new tag","aria-describedby":a+"-help"}),a&&!jQuery("#"+a+"-help").length&&e.after('<span id="'+a+'-help" class="sr-only">Type and press enter to add tags. Press backspace to remove the last tag.</span>')}})},g=function(){jQuery("input.hasDatepicker").each(function(){var e=jQuery(this),t=e.attr("id"),a=jQuery('label[for="'+t+'"]'),o=a.length?a.text().trim():"";e.attr({role:"textbox","aria-label":o||"Select date","aria-describedby":t+"-help"}),t&&!jQuery("#"+t+"-help").length&&e.after('<span id="'+t+'-help" class="sr-only">Date input. Use arrow keys to navigate calendar. Press enter to select date.</span>')}),jQuery(document).on("focus","input.hasDatepicker",function(){setTimeout(function(){var e=jQuery("#ui-datepicker-div");e.is(":visible")&&e.attr({role:"dialog","aria-label":"Choose date","aria-modal":"true"})},100)})},h=function(){typeof tinymce<"u"&&tinymce.on("AddEditor",function(e){var t=e.editor;jQuery("#"+t.id);var a=jQuery('label[for="'+t.id+'"]'),o=a.length?a.text().trim():"Rich text editor";t.on("init",function(){var _=jQuery("#"+t.id+"_ifr");_.attr("aria-label",o),jQuery("#"+t.id+"-help").length||_.after('<span id="'+t.id+'-help" class="sr-only">Rich text editor. Press ALT+F10 to access toolbar. Press ESC to return to editing area.</span>')})})},l=function(){jQuery('input[type="time"]').each(function(){var e=jQuery(this),t=e.attr("id");if(t&&!jQuery('label[for="'+t+'"]').length){var a="Time",o=e.closest(".form-group").find("label").first();o.length&&(a=o.text().trim()+" time"),e.attr("aria-label",a)}})},y=function(){jQuery(".ticketBox").each(function(){var e=jQuery(this);e.attr("tabindex")||e.attr("tabindex","0");var t=e.find(".ticketHeadline").text().trim();t&&e.attr({role:"article","aria-label":"Task: "+t}),e.data("keyboard-bound")||(e.on("keydown",function(a){var o=jQuery(a.target),_=o.is('a, button, input, select, textarea, [role="button"], [tabindex]')||o.closest(".dropdown-toggle, .ticketDropdown, .inlineDropDownContainer").length>0;if((a.key==="Enter"||a.key===" ")&&!_&&a.target===this){a.preventDefault();var v=e.find("a").first();v.length&&v[0].click()}}),e.data("keyboard-bound",!0))})},u=function(){i(),r(),d(),g(),h(),l(),y(),jQuery(document).on("htmx:afterSwap shown.bs.modal",function(){setTimeout(function(){i(),r(),d(),g(),l(),y()},100)}),jQuery(document).on("chosen:ready",function(){setTimeout(i,100)}),setTimeout(i,1e3)};return{init:u,enhanceChosenAccessibility:i,enhanceSlimSelectAccessibility:r,enhanceTagsInputAccessibility:d,enhanceDatepickerAccessibility:g,enhanceTinyMCEAccessibility:h,fixTimepickerLabels:l,enhanceKanbanCardAccessibility:y}}();jQuery(document).ready(function(){leantime.accessibilityController.init()});leantime.authController=function(){var i=function(r){typeof r===void 0&&(r="body"),jQuery(r).find("input").not(".filterBar input").prop("readonly",!0),jQuery(r).find("input").not(".filterBar input").prop("disabled",!0),jQuery(r).find("select").not(".filterBar select, .mainSprintSelector").prop("readonly",!0),jQuery(r).find("select").not(".filterBar select, .mainSprintSelector").prop("disabled",!0),jQuery(r).find("textarea").not(".filterBar textarea").prop("disabled",!0),jQuery(r).find("a.delete").remove(),jQuery(r).find(".quickAddLink").hide(),jQuery(r).find(".complexEditor").length&&jQuery(r).find(".complexEditor").each(function(d){jQuery(this).tinymce()&&jQuery(this).tinymce().getBody().setAttribute("contenteditable","false")}),jQuery(r).find(".tinymceSimple").length&&jQuery(r).find(".tinymceSimple").each(function(d){jQuery(this).tinymce()&&jQuery(this).tinymce().getBody().setAttribute("contenteditable","false")}),jQuery(r).find(".tox-editor-header").hide(),jQuery(r).find(".tox-statusbar").hide(),jQuery(r).find(".ticketDropdown a").removeAttr("data-toggle"),jQuery("#mainToggler").hide(),jQuery(".commentBox").hide(),jQuery(".deleteComment, .replyButton").hide(),jQuery(r).find(".dropdown i").removeClass("fa-caret-down")};return{makeInputReadonly:i}}();leantime.commentsController=function(){var i=function(){jQuery(".commentBox").show(),jQuery("#comments .replies .commentBox").hide(),jQuery(".deleteComment, .replyButton").show(),jQuery(".commentReply .tinymceSimple").tinymce().getBody().setAttribute("contenteditable","true"),jQuery(".commentReply .tox-editor-header").show(),jQuery(".commenterFields input").prop("readonly",!1),jQuery(".commenterFields input").prop("disabled",!1),jQuery(".commenterFields textarea").prop("readonly",!1),jQuery(".commenterFields textarea").prop("disabled",!1)},r=function(d){d==0?jQuery("#mainToggler").hide():jQuery("#mainToggler").show(),jQuery(".commentBox textarea").remove(),jQuery(".commentBox").hide("fast",function(){}),jQuery("#comment"+d+" .commentReply").prepend('<textarea rows="5" cols="75" name="text" class="tinymceSimple"></textarea>'),leantime.editorController.initSimpleEditor(),jQuery("#comment"+d).show("fast"),jQuery("#father").val(d)};return{enableCommenterForms:i,toggleCommentBoxes:r}}();leantime.ticketsController=function(){function i(){let m=[];jQuery(".sortableTicketList").each(function(p){jQuery(this).find(".column").each(function(n){m[n]===void 0&&(m[n]=0);var s=jQuery(this).find(".moveable").length;m[n]+=s})}),jQuery(".widgettitle .count").each(function(p){jQuery(this).text(m[p])})}function r(){jQuery(".kanban-swimlane-row").each(function(){var m=jQuery(this),p=m.attr("id");if(p){p.replace("swimlane-row-","");var n=m.find(".kanban-swimlane-content"),s=n.find(".moveable").length,b=m.find(".kanban-swimlane-sidebar");b.find(".kanban-lane-count").text(s);var c=b.attr("aria-label")||"",f=c.replace(/\d+ tasks/,s+" tasks");b.attr("aria-label",f)}}),d()}function d(){jQuery(".kanban-swimlane-row").each(function(){var m=jQuery(this),p=m.find(".kanban-swimlane-content"),n=m.find(".micro-progress-bar .progress-segments");if(n.length){var s={},b=0;p.find(".contentInner").each(function(){var f=jQuery(this),w=f.attr("class")||"",D=w.match(/status_(-?\d+)/);if(D){var C=D[1],k=f.find(".moveable").length;k>0&&(s[C]=k,b+=k)}});var c=n.find(".status-segment");if(b===0){c.css("flex","0 1 0%").find(".segment-count").text(""),c.attr("data-tippy-content","");return}c.each(function(){var f=jQuery(this),w=f.attr("class");if(w){var D=w.match(/status-(-?\d+)/);if(D){var C=D[1],k=s[C]||0,S=k/b*100;f.css("flex",S+" 1 0%");var F=f.find(".segment-count");F.length&&F.text(k>0?k:"");var Q=f.attr("data-tippy-content")||"",L=Q.match(/^([^:]+):/),N=L?L[1]:"Status "+C;f.attr("data-tippy-content",k>0?N+": "+k:"")}}})}})}var g=function(m,p){var n=jQuery("#ticket_"+m);if(!n.length){console.warn("Card not found for ticket ID:",m);return}var s=n.closest(".contentInner"),b=s.attr("class")||"",c=b.match(/status_(\d+)/);if(!c){console.warn("Could not determine status for ticket:",m),location.reload();return}var f=c[1],w=jQuery("#kanboard-"+p+" .contentInner.status_"+f);if(!w.length){console.warn("Target swimlane not found:",p,f),location.reload();return}s[0]!==w[0]&&(n.addClass("card-moving-out"),setTimeout(function(){n.detach().appendTo(w),n.removeClass("card-moving-out").addClass("card-moving-in"),i(),r(),w.sortable&&w.sortable("refresh"),setTimeout(function(){n.removeClass("card-moving-in")},300)},200))},h=function(m,p){var n=jQuery(m).val();leantime.ticketsRepository.updateRemainingHours(p,n,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.remaining_hours_updated"),style:"success"})})},l=function(m,p){var n=jQuery(m).val();leantime.ticketsRepository.updatePlannedHours(p,n,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.planned_hours_updated"),style:"success"})})},y=function(){jQuery(".filterBar").toggle()},u=function(m,p,n){function s(b){return String(b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}jQuery(document).ready(function(){if(n===!1)var b=new Gantt("#gantt",m,{header_height:55,column_width:20,step:24,view_modes:["Day","Week","Month"],bar_height:40,static_progress_indicator:!0,bar_corner_radius:10,arrow_curve:10,padding:20,view_mode:"Month",date_format:leantime.i18n.__("language.momentJSDate"),language:leantime.i18n.__("language.code").slice(0,2),additional_rows:5,custom_popup_html:function(c){var f=c._end,w=jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),new Date(f)),D='<div class="details-container" style="min-width:600px;"> ';return c.projectName!==void 0&&(D+="<h3><b>"+c.projectName+"</b></h3>"),D+="<small>"+c.type+" #"+c.id+" </small>",c.type==="milestone"?D+='<h4><a href="#/tickets/editMilestone/'+c.id+'" >'+s(c.name)+"</a></h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+w+"</strong><br /> "+Math.round(c.progress)+'%</p> <a href="#/tickets/editMilestone/'+c.id+'" ><span class="fa fa-map"></span> '+leantime.i18n.__("links.edit_milestone")+'</a> | <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+c.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":D+='<h4><a href="#/tickets/showTicket/'+c.id+'">'+s(c.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+c.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",D+="</div>",D},on_click:function(c){},on_date_change:function(c,f,w){leantime.ticketsRepository.updateMilestoneDates(c.id,f,w,c._index+1)},on_sort_change:function(c){for(var f={action:"ganttSort",payload:{}},w=0;w<c.length;w++)f.payload[c[w].id]=c[w]._index+1;jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/tickets",data:f})},on_progress_change:function(c,f){},on_view_change:function(c){leantime.usersRepository.updateUserViewSettings("roadmap",c)},on_popup_show:function(c){}});else var b=new Gantt("#gantt",m,{readonlyGantt:!0,resizing:!1,progress:!1,is_draggable:!1,custom_popup_html:function(f){var w=f._end,D=jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),new Date(w)),C='<div class="details-container" style="min-width:600px;"> ';return f.projectName!==void 0&&(C+="<h3><b>"+f.projectName+"</b></h3>"),C+="<small>"+f.type+" #"+f.id+" </small>",f.type==="milestone"?C+="<h4>"+s(f.name)+"</h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+D+"</strong><br /> "+Math.round(f.progress)+'%</p> <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+f.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":C+='<h4><a href="#/tickets/showTicket/'+f.id+'">'+s(f.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+f.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",C+="</div>",C},on_click:function(f){},on_date_change:function(f,w,D){},on_progress_change:function(f,w){},on_view_change:function(f){leantime.usersRepository.updateUserViewSettings("roadmap",f)}});jQuery("#ganttTimeControl").on("click","a",function(){var c=jQuery(this),f=c.attr("data-value");b.change_view_mode(f),c.parent().parent().find("a").removeClass("active"),c.addClass("active");var w=c.text();jQuery(".viewText").text(w)}),b.change_view_mode(p)})},e=function(){Date.prototype.addDays=function(b){return this.setDate(this.getDate()+b),this},jQuery.datepicker.setDefaults({beforeShow:function(b){if(jQuery(b).attr("readonly"))return!1}});var m=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),p=jQuery("#sprintStart").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){n.datepicker("option","minDate",s(this));var b=s(this).addDays(13);n.datepicker("setDate",b)}),n=jQuery("#sprintEnd").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){p.datepicker("option","maxDate",s(this))});function s(b){var c;try{c=jQuery.datepicker.parseDate(m,b.value)}catch(f){c=null,console.log(f)}return c}},t=function(){var m=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),p=jQuery("#milestoneEditFrom").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){n.datepicker("option","minDate",s(this))}),n=jQuery("#milestoneEditTo").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){p.datepicker("option","maxDate",s(this))});function s(b){var c;try{c=jQuery.datepicker.parseDate(m,b.value)}catch(f){c=null,console.log(f)}return c}},a=function(){var m=leantime.dateHelper.getFormatFromSettings("dateformat","jquery");jQuery(".milestoneEditFromAsync").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){var n=jQuery(this).val(),s=jQuery(this).attr("data-id"),b=jQuery(".toDateTicket-"+s);b.datepicker("option","minDate",p(this)),jQuery(".toDateTicket-"+s).val(),leantime.ticketsRepository.updateEditFromDates(s,n,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})})}),jQuery(".milestoneEditToAsync").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){var n=jQuery(this).attr("data-id"),s=jQuery(".fromDateTicket-"+n);s.datepicker("option","maxDate",p(this));var b=jQuery(this).val();jQuery(".fromDateTicket-"+n).val(),leantime.ticketsRepository.updateEditToDates(n,b,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})})});function p(n){var s;try{s=jQuery.datepicker.parseDate(m,n.value)}catch(b){s=null,console.log(b)}return s}},o=function(){jQuery('[data-toggle="tooltip"]').tooltip()},_=function(){var m={"0.5":"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"};jQuery(".effortDropdown .dropdown-menu a").unbind().on("click",function(){var p=jQuery(this).attr("data-value").split("_");if(p.length===2){var n=p[0],s=p[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:n,storypoints:s}}).done(function(){jQuery("#effortDropdownMenuLink"+n+" span.text").text(m[s]),jQuery.growl({message:leantime.i18n.__("short_notifications.effort_updated"),style:"success"}),leantime.kanbanGroupBy==="storypoints"&&g(n,s)})}else console.log("Ticket Controller: Effort data value not set correctly")})},v=function(){var m={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"};jQuery(".priorityDropdown .dropdown-menu a").unbind().on("click",function(){var p=jQuery(this).attr("data-value").split("_");if(p.length===2){var n=p[0],s=p[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:n,priority:s}}).done(function(){jQuery("#priorityDropdownMenuLink"+n+" span.text").text(m[s]),jQuery("#priorityDropdownMenuLink"+n).removeClass("priority-bg-1 priority-bg-2 priority-bg-3 priority-bg-4 priority-bg-5"),jQuery("#priorityDropdownMenuLink"+n).addClass("priority-bg-"+s),jQuery("#priorityDropdownMenuLink"+n).parents(".ticketBox").removeClass("priority-border-1 priority-border-2 priority-border-3 priority-border-4 priority-border-5"),jQuery("#priorityDropdownMenuLink"+n).parents(".ticketBox").addClass("priority-border-"+s),jQuery.growl({message:leantime.i18n.__("short_notifications.priority_updated"),style:"success"}),leantime.kanbanGroupBy==="priority"&&g(n,s)})}else console.log("Ticket Controller: Priority data value not set correctly")})},j=function(){jQuery(".milestoneDropdown .dropdown-menu a").unbind().on("click",function(){var m=jQuery(this).attr("data-value").split("_"),p=jQuery(this).attr("data-label");if(m.length===3){var n=m[0],s=m[1],b=m[2];jQuery("#milestoneDropdownMenuLink"+n+" span.text").append(" ..."),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:n,milestoneid:s}}).done(function(){jQuery("#milestoneDropdownMenuLink"+n+" span.text").text(p),jQuery("#milestoneDropdownMenuLink"+n).css("backgroundColor",b),jQuery.growl({message:leantime.i18n.__("short_notifications.milestone_updated"),style:"success"}),leantime.kanbanGroupBy==="milestoneid"&&g(n,s)})}})},T=function(){jQuery(".statusDropdown .dropdown-menu a").unbind().on("click",function(){var m=jQuery(this).attr("data-value").split("_"),p=jQuery(this).attr("data-label");if(m.length==3){var n=m[0],s=m[1],b=m[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:n,status:s}}).done(function(c){jQuery("#statusDropdownMenuLink"+n+" span.text").text(p),jQuery("#statusDropdownMenuLink"+n).removeClass().addClass(b+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated"),style:"success"}),leantime.handleAsyncResponse(c)})}})},E=function(){jQuery(".userDropdown .dropdown-menu a").unbind().on("click",function(){var m=jQuery(this).attr("data-value").split("_"),p=jQuery(this).attr("data-label");if(m.length===3){var n=m[0],s=m[1];m[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:n,editorId:s}}).done(function(){jQuery("#userDropdownMenuLink"+n+" span.text span#userImage"+n+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+s),jQuery("#userDropdownMenuLink"+n+" span.text span#user"+n).text(p),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"}),leantime.kanbanGroupBy==="editorId"&&g(n,s)})}})},x=function(){jQuery(".asyncInputUpdate").on("change",function(){var m=jQuery(this).attr("data-label").split("-");if(m.length==2){var p=m[0],n=m[1],s=jQuery(this).val();jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:n,[p]:s}}).done(function(){jQuery.growl({message:leantime.i18n.__("notifications.subtask_saved"),style:"success"})})}})},M=function(){jQuery(".sprintDropdown .dropdown-menu a").unbind().on("click",function(){var m=jQuery(this).attr("data-value").split("_"),p=jQuery(this).attr("data-label");if(m.length==2){var n=m[0],s=m[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:n,sprint:s}}).done(function(){jQuery("#sprintDropdownMenuLink"+n+" span.text").text(p),jQuery.growl({message:leantime.i18n.__("short_notifications.sprint_updated"),style:"success"}),leantime.kanbanGroupBy==="sprint"&&g(n,s)})}})},P=function(){var m=["#821219","#BB1B25","#75BB1B","#4B7811","#fdab3d","#1bbbb1","#006d9f","#124F7D","#082236","#5F0F40","#bb1b75","#F26CA7","#BB611B","#aaaaaa","#4c4c4c"];jQuery("input.simpleColorPicker").simpleColorPicker({colors:m,onChangeColor:function(n){jQuery(this).css("background",n),jQuery(this).css("color","#fff")}});var p=jQuery("input.simpleColorPicker").val();p!=""&&jQuery("input.simpleColorPicker").css("background",p)},A=function(){jQuery(".date-picker-form-control .reset-button").on("click",function(){const m=jQuery(this).attr("data-id");jQuery("#due-date-picker-"+m).val(leantime.i18n.__("text.anytime")),leantime.ticketsRepository.updateDueDates(m,null,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})})}),leantime.dateController.initDatePicker(".quickDueDates, .duedates",function(m,p){var n=p.currentDay,s=p.currentMonth,b=p.currentYear,c=new Date(b,s,n),f=jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),c),w=jQuery(this).attr("data-id");leantime.ticketsRepository.updateDueDates(w,f,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})})})},I=function(m,p,n,s){var b=document.getElementById(s).getContext("2d");new Chart(b,{type:"line",data:{labels:m,datasets:[{label:leantime.i18n.__("label.booked_hours"),backgroundColor:"rgba(201,48,44, 0.5)",borderColor:"rgb(201,48,44)",data:p},{label:leantime.i18n.__("label.planned_hours"),backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgb(54, 162, 235)",data:n}]},options:{scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.booked_hours")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.planned_hours")},ticks:{beginAtZero:!0}}}}})},O=function(){jQuery(document).ready(function(){let m=new URL(window.location.href),p=m.searchParams.get("tab"),n=0;p&&(n=jQuery(".ticketTabs").find('a[href="#'+p+'"]').parent().index()),jQuery(".ticketTabs").tabs({create:function(s,b){jQuery(".ticketTabs").css("visibility","visible")},activate:function(s,b){m=new URL(window.location.href),m.searchParams.set("tab",b.newPanel[0].id),window.history.replaceState(null,null,m)},load:function(){},enable:function(){},active:n})})},J=function(m){jQuery("#ticketSearch").on("submit",function(p){p.preventDefault();var n=jQuery("#projectIdInput").val(),s=jQuery("#userSelect").val(),b=jQuery("#milestoneSelect").val(),c=jQuery("#termInput").val(),f=jQuery("#sprintSelect").val(),w=jQuery("#typeSelect").val(),D=jQuery("#prioritySelect").val(),C=jQuery("#statusSelect").val(),k=jQuery("#sortBySelect").val(),S=jQuery("input[name='groupBy']:checked").val(),F=jQuery("input[name='showTasks']:checked").val(),Q="?search=true";n!=""&&n!=null&&(Q=Q+"&projectId="+n),s!=""&&s!=null&&(Q=Q+"&users="+s),b!=""&&b!=null&&(Q=Q+"&milestone="+b),c!=""&&c!=null&&(Q=Q+"&term="+c),f!=""&&f!=null&&(Q=Q+"&sprint="+f),w!=""&&w!=null&&(Q=Q+"&type="+w),D!=""&&D!=null&&(Q=Q+"&priority="+D),C!=""&&C!=null&&(Q=Q+"&status="+C),k!=""&&k!=null&&(Q=Q+"&sort="+k),S!=""&&S!=null&&(Q=Q+"&groupBy="+S),F!=""&&F!=null&&(Q=Q+"&showTasks="+F);var L=m+Q;window.location.href=L})},ye=function(m){var p=jQuery("#projectIdInput").val(),n=jQuery("#userSelect").val(),s=jQuery("#milestoneSelect").val(),b=jQuery("#termInput").val(),c=jQuery("#sprintSelect").val(),f=jQuery("#typeSelect").val(),w=jQuery("#prioritySelect").val(),D=jQuery("#statusSelect").val(),C=jQuery("#sortBySelect").val(),k=jQuery("input[name='groupBy']:checked").val(),S="?search=true";p!=""&&p!=null&&(S=S+"&projectId="+p),n!=""&&n!=null&&(S=S+"&users="+n),s!=""&&s!=null&&(S=S+"&milestone="+s),b!=""&&b!=null&&(S=S+"&term="+b),c!=""&&c!=null&&(S=S+"&sprint="+c),f!=""&&f!=null&&(S=S+"&type="+f),w!=""&&w!=null&&(S=S+"&priority="+w),D!=""&&D!=null&&(S=S+"&status="+D),C!=""&&C!=null&&(S=S+"&sort="+C),k!=""&&k!=null&&(S=S+"&groupBy="+k);var F=m+S;window.location.href=F},he=function(){jQuery(document).ready(function(){i(),r(),jQuery(".filterBar .row-fluid").css("opacity","1"),jQuery(".sortableTicketList").each(function(){let m=jQuery(this).attr("id");var p=jQuery(this).closest(".kanban-swimlane-row");if(p.length&&p.attr("data-expanded")==="false")return;let n=250;jQuery(this).find(".column .contentInner").each(function(){jQuery(this).height()>n&&(n=jQuery(this).height())}),jQuery("#"+m+" .column .contentInner").css("height",n)})})},ve=function(m){var p=m;jQuery(".sortableTicketList.kanbanBoard .ticketBox").hover(function(){jQuery(this).css("background","var(--kanban-card-hover)")},function(){jQuery(this).css("background","var(--kanban-card-bg)")}),jQuery(".sortableTicketList").each(function(){var s=this;jQuery(s).find(".contentInner").sortable({connectWith:".contentInner",items:"> .moveable",tolerance:"intersect",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,cancel:".portlet-toggle,:input,a,input",distance:10,start:function(b,c){c.item.addClass("tilt"),n(c.item);var f=c.item.closest(".sortableTicketList.kanbanBoard");c.item.data("originalSwimlaneId",f.attr("id"))},stop:function(b,c){c.item.removeClass("tilt"),jQuery("html").unbind("mousemove",c.item.data("move_handler")),c.item.removeData("move_handler"),i(),r(),jQuery(".sortableTicketList").find(".contentInner").each(function(){var U=jQuery(this),ie=U.find(".moveable").length>0;if(ie){U.removeClass("empty-column"),U.attr("data-empty-text","");var Ee=U.attr("aria-label")||"";U.attr("aria-label",Ee.replace("Empty column","")+" column items")}else U.addClass("empty-column"),U.attr("data-empty-text","Empty"),U.attr("aria-label","Empty column")});var f=c.item.closest(".sortableTicketList.kanbanBoard"),w=f.attr("id"),D=c.item.data("originalSwimlaneId");if(D&&w&&D!==w){var C=c.item[0].id.replace("ticket_",""),k=w.replace("kanboard-",""),S={milestoneid:"milestoneid",editorId:"editorId",priority:"priority",storypoints:"storypoints",sprint:"sprint",dueDate:"dateToFinish"},F=leantime.kanbanGroupBy,Q=S[F];if(F==="dueDate"){var L=new Date;switch(L.setHours(12,0,0,0),k){case"0":var N=new Date(L);N.setDate(N.getDate()-1),k=N.toISOString().split("T")[0];break;case"1":var V=new Date(L),Z=6-V.getDay();Z<0&&(Z=0),V.setDate(V.getDate()+Z),k=V.toISOString().split("T")[0];break;case"2":var $=new Date(L),ke=6-$.getDay()+7;$.setDate($.getDate()+ke),k=$.toISOString().split("T")[0];break;case"3":var ee=new Date(L);ee.setDate(ee.getDate()+21),k=ee.toISOString().split("T")[0];break;case"4":k="";break}}if(Q&&C){var z=jQuery("#ticket_"+C);if(F==="milestoneid"){var W=jQuery("#swimlane-row-"+k+" .swimlane-header-label"),Te=W.text()||leantime.i18n.__("label.no_milestone"),oe=z.find(".milestoneDropdown .dropdown-toggle .text");oe.length&&oe.text(Te);var te=z.find('.milestoneDropdown .dropdown-menu a[data-value^="'+C+"_"+k+'_"]'),q="#b0b0b0";if(te.length&&k!=="0"&&k!==""){var le=te.attr("data-value");if(le){var se=le.split("_");se.length>=3&&(q=se.slice(2).join("_"))}if(!q||q==="#b0b0b0"){var ue=te.attr("style");if(ue){var de=ue.match(/background-color:\s*([^;]+)/i);de&&(q=de[1].trim())}}}z.find(".milestoneDropdown .dropdown-toggle").css("background-color",q)}else if(F==="priority"){z.removeClass(function(U,ie){return(ie.match(/(^|\s)priority-border-\S+/g)||[]).join(" ")}).addClass("priority-border-"+k);var Ce={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"},K=jQuery("#priorityDropdownMenuLink"+C);K.length&&(K.find("span.text").text(Ce[k]||k),K.removeClass("priority-bg-1 priority-bg-2 priority-bg-3 priority-bg-4 priority-bg-5"),K.addClass("priority-bg-"+k))}else if(F==="editorId"){var ae=jQuery("#userDropdownMenuLink"+C);if(ae.length){ae.find("span.text span img").attr("src",leantime.appUrl+"/api/users?profileImage="+k);var W=jQuery("#swimlane-row-"+k+" .swimlane-header-label"),De=W.text()||leantime.i18n.__("label.not_assigned");ae.find("span.text span#user"+C).text(De)}}else if(F==="storypoints"){var Se={"0.5":"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"},ce=jQuery("#effortDropdownMenuLink"+C);ce.length&&ce.find("span.text").text(Se[k]||k)}else if(F==="sprint"){var me=jQuery("#sprintDropdownMenuLink"+C);if(me.length){var W=jQuery("#swimlane-row-"+k+" .swimlane-header-label"),Me=W.text()||leantime.i18n.__("label.backlog");me.find("span.text").text(Me)}}else if(F==="dueDate"){var G=z.find(".dues .fa-calendar").parent();if(G.length&&k){var ne=k.split("-"),Le=ne[1]+"/"+ne[2]+"/"+ne[0];G.contents().filter(function(){return this.nodeType===3}).first().replaceWith(" "+Le)}else G.length&&!k&&G.contents().filter(function(){return this.nodeType===3}).first().replaceWith(" No due date")}jQuery.growl({message:"To-Do Updated",style:"success"});var pe={id:C};pe[Q]=k,jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:pe}).fail(function(){jQuery.growl({message:leantime.i18n.__("short_notifications.not_saved")||"Error updating ticket",style:"error"}),location.reload()})}}c.item.removeData("originalSwimlaneId");for(var fe=c.item.closest(".sortableTicketList"),ge={action:"kanbanSort",payload:{},handler:c.item[0].id},X=0;X<p.length;X++)fe.find(".contentInner.status_"+p[X]).length&&(ge.payload[p[X]]=fe.find(".contentInner.status_"+p[X]).sortable("serialize"));jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/tickets",data:ge}).done(function(U){leantime.handleAsyncResponse(U)})}})});function n(s){var b=s.position().left,c=function(f){f.pageX+5>b?(s.addClass("right"),s.removeClass("left")):f.pageX<b+5?(s.addClass("left"),s.removeClass("right")):(s.removeClass("left"),s.removeClass("right")),b=f.pageX};jQuery("html").bind("mousemove",c),s.data("move_handler",c)}jQuery(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>"),jQuery(".portlet-toggle").click(function(){var s=jQuery(this);s.toggleClass("ui-icon-minusthick ui-icon-plusthick"),s.closest(".portlet").find(".portlet-content").toggle()})},be=function(m){function p(n){return!isNaN(parseFloat(n))&&isFinite(n)}jQuery(document).ready(function(){var n=[],s=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom">p<"clear">',searching:!1,stateSave:!0,displayLength:100,order:n,columnDefs:[{visible:!1,targets:10},{visible:!1,targets:11},{target:"no-sort",orderable:!1}],footerCallback:function(b,c,f,w,D){var C=this.api(),k=C.column(10).data().reduce(function(Q,L){return p(Q)===!1&&(Q=jQuery(Q).val()),p(L)===!1&&(L=jQuery(L).val()),isNaN(Q)&&(Q=0),isNaN(L)&&(L=0),parseFloat(Q)+parseFloat(L)},0),S=C.column(11).data().reduce(function(Q,L){return p(Q)===!1&&(Q=jQuery(Q).val()),p(L)===!1&&(L=jQuery(L).val()),isNaN(Q)&&(Q=0),isNaN(L)&&(L=0),parseFloat(Q)+parseFloat(L)},0),F=C.column(12).data().reduce(function(Q,L){return parseFloat(Q)+parseFloat(L)},0);jQuery(C.column(9).footer()).html("Total"),jQuery(C.column(10).footer()).html(k),jQuery(C.column(11).footer()).html(S),jQuery(C.column(12).footer()).html(F)}});new jQuery.fn.dataTable.Buttons(s.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(b,c,f,w){return typeof jQuery(w).data("order")<"u"&&(b=jQuery(w).data("order")),b}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(jQuery("#tableButtons")),s.table(0).on("column-visibility",function(b,c,f,w){for(var D=1;D<s.tables().context.length;D++)s.tables(D).column(f).visible(w);s.draw()}),jQuery(".ticketTable input").on("change",function(b,c,f,w){jQuery(this).parent().attr("data-order",jQuery(this).val()),s.draw()})})},_e=function(m){jQuery(document).ready(function(){var p=[];jQuery(".listStyleTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"<"center"p>><"clear">',searching:!1,stateSave:!0,displayLength:25,order:p,fnDrawCallback:function(n){n._iDisplayLength>n.fnRecordsDisplay()?jQuery(n.nTableWrapper).find(".dataTables_paginate").hide():jQuery(n.nTableWrapper).find(".dataTables_paginate").show()}})})},je=function(m){jQuery(document).ready(function(){var p=[],n=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"><"clear">',searching:!1,stateSave:!0,displayLength:100,order:p,columnDefs:[{visible:!1,targets:7},{visible:!1,targets:8},{target:"no-sort",orderable:!1}]});new jQuery.fn.dataTable.Buttons(n.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(s,b,c,f){return typeof jQuery(f).data("order")<"u"&&(s=jQuery(f).data("order")),s}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(jQuery("#tableButtons")),n.table(0).on("column-visibility",function(s,b,c,f){for(var w=1;w<n.tables().context.length;w++)n.tables(w).column(c).visible(f);n.draw()}),jQuery(".ticketTable input").on("change",function(s,b,c,f){jQuery(this).parent().attr("data-order",jQuery(this).val()),n.draw()})})},we=function(m,p){jQuery("textarea.complexEditor").length>0&&jQuery("textarea.complexEditor").tinymce()!==null&&(jQuery("textarea.complexEditor").tinymce().save(),jQuery("textarea.complexEditor").tinymce().remove()),jQuery(".ticketRows").removeClass("active"),jQuery("#row-"+m).addClass("active"),jQuery(p).html("<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px' /></div>");function n(s){jQuery(s).find("form").each(function(){jQuery(this).on("submit",function(b){b.preventDefault(),jQuery("textarea.complexEditor").length>0&&jQuery("textarea.complexEditor").tinymce()!==null&&(jQuery("textarea.complexEditor").tinymce().save(),jQuery("textarea.complexEditor").tinymce().remove()),jQuery(s).html("<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px'/></div>");var c=jQuery(this).serialize();jQuery.ajax({url:jQuery(this).attr("action"),data:c,type:"post",success:function(f){jQuery(s).html(f),n(s)},error:function(){}})})})}jQuery.get(leantime.appUrl+"/tickets/showTicket/"+m,function(s){jQuery(p).html(s),n(p)})},xe=function(){jQuery("#tags").tagsInput({autocomplete_url:leantime.appUrl+"/api/tags"}),jQuery("#tags_tag").on("focusout",function(){let m=jQuery(this).val();m!=""&&jQuery("#tags").addTag(m)})},Qe=function(m,p){var n="Discussion on To-Do #"+p+`:
\r`+jQuery("#commentText-"+m).text();jQuery('li a[href*="timesheet"]').click(),jQuery("#timesheet #description").val(n)};return{toggleFilterBar:y,initGanttChart:u,updateRemainingHours:h,updatePlannedHours:l,initTimeSheetChart:I,initTicketTabs:O,initTicketSearchSubmit:J,initTicketKanban:ve,initTicketsTable:be,initEffortDropdown:_,initPriorityDropdown:v,initMilestoneDropdown:j,initStatusDropdown:T,initUserDropdown:E,initSprintDropdown:M,initToolTips:o,initTagsInput:xe,initMilestoneDatesAsyncUpdate:a,initAsyncInputChange:x,initDueDateTimePickers:A,setUpKanbanColumns:he,addCommentTimesheetContent:Qe,initMilestoneTable:je,initMilestoneDates:t,initTicketsList:_e,loadTicketToContainer:we,initTicketSearchUrlBuilder:ye,initSprintDates:e,initSimpleColorPicker:P}}();var B=B||{};B.ticketsRepository=function(){var i=function(y,u,e,t){let a=B.dateHelper.getFormatFromSettings("dateformat","luxon"),o=B.dateHelper.getFormatFromSettings("timeformat","luxon"),_=luxon.DateTime.fromSQL(u).toFormat(a),v=luxon.DateTime.fromSQL(u).toFormat(o),j=luxon.DateTime.fromSQL(e).toFormat(a),T=luxon.DateTime.fromSQL(e).toFormat(o);jQuery.ajax({type:"PATCH",url:B.appUrl+"/api/tickets",data:{id:y,editFrom:_,editTo:j,timeFrom:v,timeTo:T,sortIndex:t}}).done(function(){})},r=function(y,u,e){jQuery.ajax({type:"PATCH",url:B.appUrl+"/api/tickets",data:{id:y,hourRemaining:u}}).done(function(){e()})},d=function(y,u,e){jQuery.ajax({type:"PATCH",url:B.appUrl+"/api/tickets",data:{id:y,planHours:u}}).done(function(){e()})},g=function(y,u,e){jQuery.ajax({type:"PATCH",url:B.appUrl+"/api/tickets",data:{id:y,dateToFinish:u}}).done(function(){e()})},h=function(y,u,e){jQuery.ajax({type:"PATCH",url:B.appUrl+"/api/tickets",data:{id:y,editFrom:u}}).done(function(){e()})},l=function(y,u,e){jQuery.ajax({type:"PATCH",url:B.appUrl+"/api/tickets",data:{id:y,editTo:u}}).done(function(){e()})};return{updateMilestoneDates:i,updateRemainingHours:r,updatePlannedHours:d,updateDueDates:g,updateEditFromDates:h,updateEditToDates:l}}();leantime.dashboardController=function(){var i={};leantime.theme=="dark"?i={red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(56, 56, 56)"}:i={red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"};var r=function(){var e=moment().startOf("week").add(5,"days");jQuery("#dateToFinish").val(e.format("YYYY-MM-DD"))},d=function(e,t,a){var o={type:"doughnut",data:{datasets:[{data:[t,a],backgroundColor:[leantime.dashboardController.chartColors.green,leantime.dashboardController.chartColors.grey],label:leantime.i18n.__("label.project_done")}],labels:[t+"% Done",a+"% Open"]},options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:""}},animation:{animateScale:!0,animateRotate:!0}}},_=document.getElementById(e).getContext("2d");new Chart(_,o)},g=function(e,t,a){moment.locale(leantime.i18n.__("language.code"));var o={type:"line",data:{labels:e,datasets:[{label:leantime.i18n.__("label.ideal"),backgroundColor:leantime.dashboardController.chartColors.blue,borderColor:leantime.dashboardController.chartColors.blue,data:t,fill:!1,lineTension:0},{label:"Actual",backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:a,fill:!1,lineTension:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},plugins:{legend:{position:"bottom"},title:{display:!1,text:"Line Chart"},tooltips:{mode:"index",intersect:!1}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0}}}}},_=document.getElementById("sprintBurndown").getContext("2d");return _burndownChart=new Chart(_,o),_burndownChart},h=function(e,t,a,o,_){jQuery("#"+e).click(function(v){_.data.datasets[0].data=a,_.data.datasets[1].data=o,_.options.scales.y.title.text=t,jQuery(".chartButtons").removeClass("active"),jQuery(this).addClass("active"),_.update()})},l=function(e,t){moment.locale(leantime.i18n.__("language.code"));var a={type:"line",data:{labels:e,datasets:[{label:leantime.i18n.__("label.done_todos"),backgroundColor:leantime.dashboardController.chartColors.green,borderColor:leantime.dashboardController.chartColors.green,data:t.done.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.progress_todos"),backgroundColor:leantime.dashboardController.chartColors.yellow,borderColor:leantime.dashboardController.chartColors.yellow,data:t.progress.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.new_todos"),backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:t.open.data,fill:!0,lineTension:0,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},elements:{point:{pointStyle:"line",radius:"0"}},plugins:{tooltips:{mode:"index",intersect:!1},legend:{position:"bottom"},title:{display:!1,text:"Line Chart"}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0},stacked:!0}}}},o=document.getElementById("backlogBurndown").getContext("2d");return _burndownChart=new Chart(o,a),_burndownChart},y=function(e,t,a,o){jQuery("#"+e).click(function(_){o.data.datasets[0].data=t.done.data,o.data.datasets[1].data=t.progress.data,o.data.datasets[2].data=t.open.data,o.options.scales.y.title.text=a,jQuery(".backlogChartButtons").removeClass("active"),jQuery(this).addClass("active"),o.update()})},u=function(){jQuery(document).ready(function(){jQuery(".duedates").datepicker({dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),onClose:function(e){var t="";e==""&&jQuery(this).val(leantime.i18n.__("text.anytime"));var a=moment(e,leantime.i18n.__("language.momentJSDate")).format("YYYY-MM-DD HH:mm:ss"),o=jQuery(this).attr("data-id");t=a,leantime.ticketsRepository.updateDueDates(o,t,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated")})})}})})};return{chartColors:i,initBurndown:g,initChartButtonClick:h,initBacklogBurndown:l,initBacklogChartButtonClick:y,initProgressChart:d,prepareHiddenDueDate:r,initDueDateTimePickers:u}}();leantime.usersController=function(){var i=function(u){if(r(),u.files&&u.files[0]){var e=new FileReader,t=jQuery("#profileImg");e.onload=function(a){_uploadResult=t.croppie({enableExif:!0,viewport:{width:175,height:175,type:"circle"},boundary:{width:200,height:200}}),_uploadResult.croppie("bind",{url:a.currentTarget.result}),jQuery("#previousImage").hide()},e.readAsDataURL(u.files[0])}},r=function(){jQuery("#profileImg").croppie("destroy"),jQuery("#previousImage").show()},d=function(){jQuery("#save-picture").addClass("running"),jQuery("#profileImg").attr("src",leantime.appUrl+"/images/loaders/loader28.gif"),_uploadResult.croppie("result",{type:"blob",circle:!0}).then(function(u){leantime.usersService.saveUserPhoto(u)})},g=function(){jQuery(document).ready(function(){jQuery("#allUsersTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})})},h=function(){var u={sizes:{minW:400,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".showDialogOnLoad").show(),jQuery(".userImportModal").nyroModal(u)}}};jQuery(".userImportModal").nyroModal(u)},l=function(){var u={sizes:{minW:900,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".showDialogOnLoad").show(),jQuery(".userEditModal").nyroModal(u)},beforeClose:function(){location.reload()}}};jQuery(".userEditModal").nyroModal(u)},y=function(u){let e,t=document.getElementById(u),a=document.getElementById("pwStrength"),o=new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})"),_=new RegExp("((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))");function v(j){o.test(j)?(a.style.backgroundColor="#107530",a.textContent=leantime.i18n.__("label.strong")):_.test(j)?(a.style.backgroundColor="#C5850D",a.textContent=leantime.i18n.__("label.medium")):(a.style.backgroundColor="#CC6B6B",a.textContent=leantime.i18n.__("label.weak"))}t.addEventListener("input",()=>{a.style.display="block",clearTimeout(e),e=setTimeout(()=>v(t.value),500),t.value.length!==0?a.style.display!="block":a.style.display="none"})};return{readURL:i,clearCroppie:r,saveCroppie:d,initUserTable:g,_initModals:h,checkPWStrength:y,initUserEditModal:l}}();leantime.usersRepository=function(){var i=function(d){var g=new FormData;g.append("file",d),jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/users",data:g,processData:!1,contentType:!1,success:function(h){jQuery("#save-picture").removeClass("running"),location.reload()},error:function(h){console.log(h)}})},r=function(d,g){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/users",data:{patchViewSettings:d,value:g}}).done(function(){})};return{saveUserPhoto:i,updateUserViewSettings:r}}();leantime.usersService=function(){var i=function(r){leantime.usersRepository.saveUserPhoto(r)};return{saveUserPhoto:i}}();leantime.canvasController=function(){var i="",r=function(v){i=v},d=function(){jQuery(window).bind("load",function(){jQuery(".loading").fadeOut(),jQuery(".filterBar .row-fluid").css("opacity","1")})},g=function(){jQuery(".addCanvasLink").nyroModal(),jQuery(".editCanvasLink").click(function(){jQuery("#editCanvas").modal("show")}),jQuery(".cloneCanvasLink").click(function(){jQuery("#cloneCanvas").modal("show")}),jQuery(".mergeCanvasLink").click(function(){jQuery("#mergeCanvas").modal("show")}),jQuery(".importCanvasLink").click(function(){jQuery("#importCanvas").modal("show")})},h=!1,l={sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),h==!0&&(h=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+i+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+i+"CanvasMilestone .deleteMilestone").nyroModal(l)},beforeClose:function(){location.reload()}},titleFromIframe:!0},y=function(){jQuery("."+i+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+i+"CanvasMilestone .deleteMilestone").nyroModal(l)},u=function(v){jQuery.nmManual(v,l)},e=function(v){v=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),y()),v=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),y()),v=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},t=function(){h=!0},a=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var v=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),v.length==3){var j=v[0],T=v[1];v[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+i+"canvas",data:{id:j,author:T}}).done(function(){jQuery("#userDropdownMenuLink"+j+" span.text span#userImage"+j+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+T),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},o=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var v=jQuery(this).attr("data-value").split("/"),j=jQuery(this).attr("data-label");if(v.length==2){var T=v[0],E=v[1],x=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+i+"canvas",data:{id:T,status:E}}).done(function(){jQuery("#statusDropdownMenuLink"+T+" span.text").text(j),jQuery("#statusDropdownMenuLink"+T).removeClass().addClass(x+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},_=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var v=jQuery(this).attr("data-value").split("/"),j=jQuery(this).attr("data-label");if(v.length==2){var T=v[0],E=v[1],x=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+i+"canvas",data:{id:T,relates:E}}).done(function(){jQuery("#relatesDropdownMenuLink"+T+" span.text").text(j),jQuery("#relatesDropdownMenuLink"+T).removeClass().addClass(x+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCanvasName:r,initFilterBar:d,initCanvasLinks:g,initUserDropdown:a,initStatusDropdown:o,initRelatesDropdown:_,setCloseModal:t,toggleMilestoneSelectors:e,openModalManually:u}}();leantime.reactionsController=function(){return{addReactions:function(d,g,h,l){jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/reactions",data:{action:"add",module:d,moduleId:g,reaction:h}}).done(function(){l()})},removeReaction:function(d,g,h,l){jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/reactions",data:{action:"remove",module:d,moduleId:g,reaction:h}}).done(function(){l()})}}}();leantime.helperController=function(){var i=function(a,o){o?leantime.helperRepository.updateUserModalSettings(a,!0):leantime.helperRepository.updateUserModalSettings(a,!1)},r=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.tourFactory.startTour("myWorkDashboard")},d=function(){leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal()},g=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("projectDashboard"),leantime.tourFactory.startTour("projectDashboard")},h=function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("kanbanBoard"),leantime.tourFactory.startTour("kanbanBoard")},l=function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("milestoneView"),leantime.tourFactory.startTour("milestoneView")},y=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("goals"),leantime.tourFactory.startTour("goalsView")},u=function(){jQuery(document).ready(function(){var a={sizes:{minW:700,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".showDialogOnLoad").show(),jQuery(".onboardingModal").nyroModal(a)},beforeClose:function(){location.reload()}}};jQuery(".onboardingModal").nyroModal(a),jQuery.nmManual(leantime.appUrl+"/help/firstLogin",a)})},e=function(a,o,_){jQuery(document).ready(function(){jQuery.nmManual(leantime.appUrl+"/help/showOnboardingDialog?module="+a,{sizes:{minW:o||200,minH:_||500},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){leantime.replaceSVGColors()},afterShowCont:function(){htmx.process("#global-modal-content")}}})})},t=function(a){leantime.helperRepository.updateUserModalSettings(a),leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal()};return{showHelperModal:e,hideAndKeepHidden:t,setDontShowAgain:i,closeModal:d,startMyWorkDashboardTour:r,startProjectDashboardTour:g,startKanbanTour:h,startMilestoneTour:l,startGoalTour:y,firstLoginModal:u}}();var Y=Y||{};Y.helperRepository=function(){var i=function(g,h=!1){jQuery.ajax({type:"PATCH",url:Y.appUrl+"/api/users",data:{settings:g,permanent:h?1:0,patchModalSettings:1}}).done(function(){})},r=function(){jQuery.ajax({type:"PATCH",url:Y.appUrl+"/api/sessions",data:{tourActive:1}}).done(function(){})},d=function(){jQuery.ajax({type:"PATCH",url:Y.appUrl+"/api/sessions",data:{tourActive:0}}).done(function(){})};return{updateUserModalSettings:i,startingTour:r,stopTour:d}}();leantime.tourFactory=function(){var i=function(l){return new Shepherd.Tour({useModalOverlay:!0,defaultStepOptions:{classes:"shepherd-theme-arrows",scrollTo:!1,cancelIcon:{enabled:!0}},tourName:l})},r=function(l){leantime.helperRepository.updateUserModalSettings(l),typeof _paq<"u"&&_paq.push(["trackEvent","Tour","Completed",l])},d=function(l){return{myWorkDashboard:[{id:"welcome-step",title:"👋 Welcome to the Dashboard Tour",text:"Let's start with a few basics to get you up to speed on the navigation and different elements inside Leantime."},{id:"top-nav-step",title:"Work Modes",text:"The top navigation shows you the current 'work mode' you're in. You can be inside a project, your personal work area, or in the company mode.",attachTo:{element:".work-modes",on:"bottom"}},{id:"menu-step",title:"Left Navigation",text:"The left navigation breaks down the current work mode and gives you access to different areas. Everything presented here is part of the currently selected work mode above.",attachTo:{element:".leftpanel",on:"right"}},{id:"my-menu",title:"My Profile Bar",text:"Here you'll find links to your account as well as notifications and latest news about Leantime.",attachTo:{element:".headmenu.pull-right",on:"bottom"}},{id:"dashboard-widgets",title:"Your Dashboard Widgets",text:"Your dashboard is broken up into various widgets showing you focused information about your work.",attachTo:{element:".primaryContent",on:"top"}},{id:"dashboard-widgets-dandd",title:"Customize Your Dashboard",text:"Widgets can be resized and moved around using the drag and drop functionality.",attachTo:{element:"#widget_wrapper_todos .grid-handler-top",on:"bottom"}},{id:"my-todo-widget",title:"My To-Dos",text:"The My To-Do widget shows you all the tasks that are currently assigned to you.",attachTo:{element:"#widget_wrapper_todos",on:"top"}},{id:"my-todo-widget2",title:"Group To-Dos",text:"You can use the dropdowns here to filter your tasks by project or group them by priority, status, project, or dates.",attachTo:{element:"#yourToDoContainer > .clear",on:"bottom"}},{id:"my-todo-widget4",title:"Sort To-Dos",text:"Each To-Do can be dragged and dropped to change its order. You can also drag and drop a task to the calendar to schedule it.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child",on:"bottom"}},{id:"my-todo-widget-timer",title:"Start the Timer",text:"When you're ready to start working on a task, just click the start timer button.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .timerContainer",on:"bottom"}},{id:"my-todo-widget-complete",title:"Complete a Task",text:"Once a task is complete, you can mark it as done by clicking the status dropdown.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .statusDropdown",on:"bottom"}},{id:"my-todo-widget-add",title:"Add More Tasks",text:"You can add more tasks by clicking the plus button in each section, or by using the 3-dot menu next to each task.",attachTo:{element:"#yourToDoContainer .fa-circle-plus",on:"bottom"}},{id:"finish",title:"Congratulations!",text:"You've completed the My Work dashboard tour. Head to <a href='"+leantime.appUrl+"/dashboard/show'>your project</a> to learn more about project management in Leantime."}],projectDashboard:[{id:"left-nav",title:"Project Menu",text:"The project menu organizes your project into different sections: <strong>Data Room</strong> - to host all your files and information, <strong>Think</strong> - to strategize, ideate and define, <strong>Make</strong> - to manage goals, milestones and tasks.",attachTo:{element:".leftmenu ul",on:"left"}},{id:"project-selector",title:"Project Selector",text:"Use the project selector to jump between projects. The left menu shows everything related to your current project.",attachTo:{element:".bigProjectSelector",on:"bottom"}},{id:"project-checklist",title:"Checklist",text:"The project checklist is a quick reference to see if your project contains all the necessary information for successful execution.",attachTo:{element:"#progressForm",on:"bottom"}},{id:"project-status",title:"Quick Status Updates",text:"You can use status updates to quickly share the progress of your project with your team using red, yellow and green colors. The status will be visible across the application.",attachTo:{element:".project-updates",on:"left"}},{id:"project-progress",title:"Progress",text:"The project progress indicator shows you how much work you have completed. It accounts for various task sizes, team velocity, and project milestones.",attachTo:{element:".project-progress",on:"left"}},{id:"latest-tasks",title:"Latest Tasks",text:"The list of latest tasks shows you the most recent tasks added to your project and can be used as a project inbox.",attachTo:{element:".latest-todos",on:"left"}},{id:"teams",title:"Team",text:"The team box shows you the members of this project.",attachTo:{element:".team-container",on:"top"}},{id:"finished",title:"Congratulations!",text:"You've completed the project dashboard tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>To-Dos</a> to learn more about the various ways to manage your tasks in Leantime."}],kanbanBoard:[{id:"kanban-overview",title:"Your Kanban Board",text:"This is your Kanban board. It helps you visualize your work and limit work-in-progress.",attachTo:{element:".kanban-board-wrapper",on:"top"}},{id:"kanban-columns",title:"Work Flow",text:"Tasks move from left to right as they progress. Drag and drop cards to update their status.",attachTo:{element:".column",on:"right"}},{id:"kanban-columns2",title:"Flexible Columns",text:"Using the 3-dot menu, you can add or remove columns and rename them.",attachTo:{element:".column .widgettitle .inlineDropDownContainer",on:"right"}},{id:"kanban-filter",title:"Filter Tasks",text:"You can filter your tasks by various fields like priority, status, project, or dates.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"kanban-group",title:"Swimlanes",text:"Additionally, you can group your tasks to create Kanban swimlanes. This helps you visualize your work by team members, priority, or milestones.",attachTo:{element:".filterWrapper > .btn-group",on:"bottom"}},{id:"kanban-sprints",title:"Sprints",text:"If you manage your work in sprints, you can use the dropdown here to select, create, and update sprints.",attachTo:{element:".pageheader .dropdown",on:"bottom"}},{id:"kanban-congrats",title:"Congratulations!",text:"This concludes the Kanban tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Milestones</a> to learn how to create and manage milestones in Leantime."}],milestoneView:[{id:"milestone-overview",title:"Milestones",text:"Milestones help you track major outcomes and project phases.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-drag",title:"Drag & Sort",text:"Each bar represents one milestone. You can drag them along the timeline, reorder, and resize them. Everything you do on this screen updates the timing of your milestones.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-filter",title:"Filter",text:"You can filter your milestones and also view tasks that are part of them.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"milestone-timeframes",title:"Timeframes",text:"You can change the timeframe of the timeline view to see more of the year or dive deep into a daily breakdown.",attachTo:{element:".col-md-4 .pull-right",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the milestone tour. Head to the <a href='"+leantime.appUrl+"/goalcanvas/dashboard'>Goals</a> to learn how to create and manage goals in Leantime."}],goalsView:[{id:"goals-overview",title:"Goals",text:"Goals help you track measurable impact on your projects."},{id:"goal-parts",title:"Objectives & Metrics",text:"Each goal is made up of an Objective (what you're trying to accomplish) and a Metric (how you'll measure it).",attachTo:{element:".ticketBox",on:"top"}},{id:"goal-progress",title:"Goal Progress",text:"As you update your goal metrics, the progress bar will show you how far along you are.",attachTo:{element:".ticketBox > .row > .col-md-12 .progress",on:"bottom"}},{id:"milestone-connection",title:"Milestones & Goals",text:"You can connect goals to milestones to track the task-level progress of your goals. This helps identify gaps in your project plan.",attachTo:{element:".ticketBox.fixed",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the goals tour. Milestones, Goals, and To-Dos are the basic building blocks in Leantime. Use them to break down your work into manageable chunks. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Kanban Board</a> to review your tasks."}]}[l]||[]},g=function(l){const y=i(l),u=d(l);return u.forEach((e,t)=>{const a=t===0,o=t===u.length-1,_=[];a||_.push({text:leantime.i18n.__("tour.back"),classes:"shepherd-button-secondary",action:y.back}),o?_.push({text:leantime.i18n.__("tour.finish"),action:function(){r(l),confetti(),y.complete()}}):_.push({text:leantime.i18n.__("tour.next"),action:y.next}),o||_.unshift({text:leantime.i18n.__("tour.cancel"),classes:"shepherd-button-secondary",action:y.cancel}),y.addStep({...e,buttons:_})}),y.on("complete",function(){r(l)}),y},h=function(l){const y=g(l);return y.start(),y};return{createTour:i,buildTour:g,startTour:h,getTourDefinition:d}}();leantime.confettiHelper=function(){var i=function(d){const h={...{particleCount:100,spread:70,origin:{y:.6},disableForReducedMotion:!0},...d};typeof confetti=="function"?confetti(h):console.error("Confetti library not loaded")},r=function(){i({particleCount:150,spread:90,origin:{y:.8},colors:["#26a69a","#00bcd4","#4caf50","#8bc34a","#cddc39"]}),setTimeout(function(){i({particleCount:80,spread:120,origin:{y:.7},colors:["#ff9800","#ff5722","#f44336","#e91e63","#9c27b0"]})},500)};return{triggerConfetti:i,celebrateSuccess:r}}();leantime.firstTaskController=function(){var i=function(){jQuery(document).ready(function(){const r=jQuery("#firstTaskOnboarding");r.length>0&&(r.on("submit",function(d){d.preventDefault();const g=jQuery("#firstTask");if(g.val().trim()==="")return g.addClass("error"),!1;g.removeClass("error"),leantime.confettiHelper.celebrateSuccess(),setTimeout(function(){r[0].submit()},1500)}),jQuery("#firstTask").on("input",function(){jQuery(this).removeClass("error")}))})};return{initFirstTaskForm:i}}();jQuery(document).ready(function(){leantime.firstTaskController.initFirstTaskForm()});leantime.menuController=function(){var i=function(l){if(l!==""){var y=jQuery("#submenu-"+l).css("display"),u="";y=="none"?(jQuery("#submenu-"+l).css("display","block"),jQuery("#submenu-icon-"+l).removeClass("fa-angle-right"),jQuery("#submenu-icon-"+l).addClass("fa-angle-down"),u="open"):(jQuery("#submenu-"+l).css("display","none"),jQuery("#submenu-icon-"+l).removeClass("fa-angle-down"),jQuery("#submenu-icon-"+l).addClass("fa-angle-right"),u="closed"),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/submenu",data:{submenu:l,state:u}})}},r=function(){jQuery(".project-select").chosen(),jQuery(document).on("click",".projectselector.dropdown-menu",function(y){y.stopPropagation()});let l=localStorage.getItem("currentMenuTab");typeof l>"u"?activeTabIndex=0:activeTabIndex=jQuery(".projectSelectorTabs").find('a[href="#'+l+'"]').parent().index(),jQuery(".projectSelectorTabs").tabs({create:function(y,u){},activate:function(y,u){localStorage.setItem("currentMenuTab",u.newPanel[0].id)},load:function(){},enable:function(){},active:activeTabIndex})},d=function(){window.innerWidth<576&&(jQuery(".mainwrapper").removeClass("menuopen"),jQuery(".mainwrapper").addClass("menuclosed")),jQuery(".barmenu").click(function(){jQuery(".mainwrapper").hasClass("menuopen")?(jQuery(".mainwrapper").removeClass("menuopen"),jQuery(".mainwrapper").addClass("menuclosed"),leantime.menuRepository.updateUserMenuSettings("closed")):(jQuery(".mainwrapper").removeClass("menuclosed"),jQuery(".mainwrapper").addClass("menuopen"),leantime.menuRepository.updateUserMenuSettings("open"))})},g=function(l,y="",u){y==="closed"?(jQuery("#"+u+"-toggler-"+l).removeClass("closed"),jQuery("#"+u+"-toggler-"+l).removeClass("open"),jQuery("#"+u+"-toggler-"+l).addClass("open")):y==="open"&&(jQuery("#"+u+"-toggler-"+l).removeClass("open"),jQuery("#"+u+"-toggler-"+l).removeClass("closed"),jQuery("#"+u+"-toggler-"+l).addClass("closed")),jQuery("#"+u+"-toggler-"+l).hasClass("open")?(jQuery("#"+u+"-toggler-"+l).removeClass("open"),jQuery("#"+u+"-toggler-"+l).addClass("closed"),jQuery("#"+u+"-toggler-"+l).find("i").removeClass("fa-angle-down"),jQuery("#"+u+"-toggler-"+l).find("i").addClass("fa-angle-right"),jQuery("#"+u+"-projectSelectorlist-group-"+l).addClass("closed"),jQuery("#"+u+"-projectSelectorlist-group-"+l).removeClass("open"),h(l,"closed",u)):(jQuery("#"+u+"-toggler-"+l).removeClass("closed"),jQuery("#"+u+"-toggler-"+l).addClass("open"),jQuery("#"+u+"-toggler-"+l).find("i").removeClass("fa-angle-right"),jQuery("#"+u+"-toggler-"+l).find("i").addClass("fa-angle-down"),jQuery("#"+u+"-projectSelectorlist-group-"+l).addClass("open"),jQuery("#"+u+"-projectSelectorlist-group-"+l).removeClass("closed"),h(l,"open",u))};let h=function(l,y,u){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/submenu",data:{submenu:u+"-projectSelectorlist-group-"+l,state:y}})};return{toggleSubmenu:i,initProjectSelector:r,initLeftMenuHamburgerButton:d,updateGroupDropdownSetting:h,toggleProjectDropDownList:g}}();var re=re||{};re.menuRepository=function(){var i=function(r){jQuery.ajax({type:"PATCH",url:re.appUrl+"/api/sessions",data:{menuState:r}}).done(function(){})};return{updateUserMenuSettings:i}}();leantime.settingController=function(){var i,r=function(h){if(d(),h.files&&h.files[0]){var l=new FileReader,y=jQuery("#logoImg");l.onload=function(u){i=y.croppie({enableExif:!0,enforceBoundary:!1,viewport:{width:220,height:40,type:"square"},boundary:{width:400,height:200}}),i.croppie("bind",{url:u.currentTarget.result}),jQuery("#previousImage").hide()},l.readAsDataURL(h.files[0])}},d=function(){jQuery("#logoImg").croppie("destroy"),jQuery("#previousImage").show()},g=function(){jQuery("#save-logo").addClass("running"),jQuery("#logoImg").attr("src",leantime.appUrl+"/images/loaders/loader28.gif"),i.croppie("result",{type:"blob",circle:!1,size:"original",quality:1}).then(function(h){leantime.settingService.saveLogo(h)})};return{readURL:r,clearCroppie:d,saveCroppie:g}}();leantime.settingRepository=function(){var i=function(r){var d=new FormData;d.append("file",r),jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/setting",data:d,processData:!1,contentType:!1,success:function(g){jQuery("#save-logo").removeClass("running"),location.reload()},error:function(g){console.log(g)}})};return{saveLogo:i}}();leantime.settingService=function(){var i=function(r){leantime.settingRepository.saveLogo(r)};return{saveLogo:i}}();leantime.widgetController=function(){var i=[],r=function(e,t){let a=e.gridX||0,o=e.gridY||0,_=e.gridWidth||2,v=e.gridHeight||2;if(t.willItFit({x:a,y:o,width:_,height:v}))return{x:a,y:o};let j=Math.max(...t.engine.nodes.map(T=>T.y+T.h),0);for(let T=0;T<=j+1;T++)for(let E=0;E<=12-_;E++)if(t.willItFit({newX:E,newY:T,width:_,height:v}))return{x:E,y:T};return{x:0,y:j+1}};GridStack.renderCB=function(e,t){t.content&&typeof DOMPurify<"u"&&(e.innerHTML=DOMPurify.sanitize(t.content))};var d=function(){i=GridStack.init({margin:"0px 15px 15px 0px",handle:".grid-handler-top",minRow:2,cellHeight:"30px",float:!0,draggable:{handle:".grid-handler-top",appendTo:"body"},lazyLoad:!1,columnOpts:{breakpointForWindow:!0,breakpoints:[{w:700,c:1},{w:950,c:6}]}}),i.on("dragstop",function(e,t){g()}),i.on("resizestop",function(e,t){g()}),jQuery(".grid-stack-item").each(function(){jQuery(this).find(".removeWidget").click(function(){h(jQuery(this).closest(".grid-stack-item")[0])}),jQuery(this).find(".fitContent").click(function(){l(jQuery(this).closest(".grid-stack-item")[0])})}),jQuery(document).ready(function(){jQuery("#gridBoard").css("opacity",1)})},g=function(){let e=i.save();e.sort((a,o)=>a.y===o.y?a.x-o.x:a.y-o.y);let t=null;arguments.length>0&&arguments[0].action==="toggleWidget"&&(t={widgetId:arguments[0].widgetId,visible:arguments[0].visible}),e.forEach(function(a){let o=jQuery(a.content).find("[hx-get]").first();a.id=o.attr("id"),a.widgetUrl=o.attr("hx-get"),a.widgetTrigger=o.attr("hx-trigger"),a.x==null&&(a.x=0),a.gridX=a.x,a.y==null&&(a.y=0),a.gridY=a.y,a.w==null&&(a.w=1),a.gridWidth=a.w,a.h==null&&(a.h=1),a.gridHeight=a.h,a.content=""}),jQuery.post(leantime.appUrl+"/widgets/widgetManager",{action:"saveGrid",data:e,visibilityData:t},function(a,o){})},h=function(e){e.remove(),i.removeWidget(e,!0),g()},l=function(e){document.querySelector(".grid-stack").gridstack.resizeToContent(e,!1),g()},y=function(e,t,a){let o=document.querySelector(".grid-stack").gridstack,_=jQuery(t).is(":checked");if(r(a,o),!_)h(jQuery("#"+e).closest(".grid-stack-item")[0]);else{const v=document.createElement("div");v.className="grid-stack-item";const j=document.createElement("div");j.className=`grid-stack-item-content tw:p-none ${a.widgetBackground=="default"?"maincontentinner":a.background}`,j.innerHTML=u(a),v.appendChild(j),o.el.appendChild(v),o.makeWidget(v,{x:a.gridX||0,y:a.gridY||50,w:a.gridWidth||2,h:a.gridHeight||2}),htmx.process(v),g({action:"toggleWidget",widgetId:e,visible:_})}},u=function(e){return'<div class="widgetInner">        <div class="'+(e.widgetBackground=="default"?"tw:pb-l":"")+`">
            <div class="stickyHeader" style="padding:15px; height:50px;  width:100%;">
               <div class="grid-handler-top tw:h-[40px] tw:cursor-grab tw:float-left tw:mr-sm">
                    <i class="fa-solid fa-grip-vertical"></i>
                </div>
           `+(e.name!=""?'<h5 class="subtitle tw:pb-m tw:float-left tw:mr-sm">'+e.name+"</h5>":"")+`
            <div class="inlineDropDownContainer tw:float-right">
                <a href="javascript:void(0);" class="dropdown-toggle ticketDropDown editHeadline" data-toggle="dropdown">
                    <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="javascript:void(0)" class="fitContent"><i class="fa-solid fa-up-right-and-down-left-from-center"></i> Resize to fit content</a></li>
                        <li><a href="javascript:void(0)" class="removeWidget"><i class="fa fa-eye-slash"></i> Hide</a></li>
                </ul>
            </div>

        </div>
 <div class="widgetContent tw:px-l">
             <div hx-get="`+e.widgetUrl+'" hx-trigger="'+e.widgetTrigger+'" id="'+e.id+`"></div>
        </div>
       </div>
        <div class="clear"></div>
    </div>
`};return{resizeWidget:l,removeWidget:h,saveGrid:g,initGrid:d,toggleWidgetVisibility:y}}();const Ae=Object.assign({"../../app/Domain/Calendar/Js/calendarController.js":()=>R(()=>import("./calendarController-E5HXdItH.js"),[]),"../../app/Domain/Clients/Js/clientsController.js":()=>R(()=>import("./clientsController-MCuqIKJ7.js"),[]),"../../app/Domain/Cpcanvas/Js/cpCanvasController.js":()=>R(()=>import("./cpCanvasController-DJQzQ9fQ.js"),[]),"../../app/Domain/Dbmcanvas/Js/dbmCanvasController.js":()=>R(()=>import("./dbmCanvasController-CqRPt29c.js"),[]),"../../app/Domain/Eacanvas/Js/eaCanvasController.js":()=>R(()=>import("./eaCanvasController-COzstm7f.js"),[]),"../../app/Domain/Emcanvas/Js/emCanvasController.js":()=>R(()=>import("./emCanvasController-BoKph0PA.js"),[]),"../../app/Domain/Gamecenter/Js/game-snake.js":()=>R(()=>import("./game-snake-CiPrYQqj.js"),[]),"../../app/Domain/Goalcanvas/Js/goalCanvasController.js":()=>R(()=>import("./goalCanvasController-BmeAlIq9.js"),[]),"../../app/Domain/Ideas/Js/ideasController.js":()=>R(()=>import("./ideasController-DT5mCTG2.js"),[]),"../../app/Domain/Insightscanvas/Js/insightsCanvasController.js":()=>R(()=>import("./insightsCanvasController-DssNPVuV.js"),[]),"../../app/Domain/Lbmcanvas/Js/lbmCanvasController.js":()=>R(()=>import("./lbmCanvasController-CKjsT7-D.js"),[]),"../../app/Domain/Leancanvas/Js/leanCanvasController.js":()=>R(()=>import("./leanCanvasController-C2fN4AYB.js"),[]),"../../app/Domain/Minempathycanvas/Js/risksCanvasController.js":()=>R(()=>import("./risksCanvasController-CXQ1t1o7.js"),[]),"../../app/Domain/Obmcanvas/Js/obmCanvasController.js":()=>R(()=>import("./obmCanvasController-siCmdQxs.js"),[]),"../../app/Domain/Projects/Js/projectsController.js":()=>R(()=>import("./projectsController-Buynt-Ss.js"),[]),"../../app/Domain/Retroscanvas/Js/retroCanvasController.js":()=>R(()=>import("./retroCanvasController-DBgpL-Kg.js"),[]),"../../app/Domain/Riskscanvas/Js/risksCanvasController.js":()=>R(()=>import("./risksCanvasController-yx4WYmp_.js"),[]),"../../app/Domain/Sbcanvas/Js/sbCanvasController.js":()=>R(()=>import("./sbCanvasController-BI536v8H.js"),[]),"../../app/Domain/Smcanvas/Js/smCanvasController.js":()=>R(()=>import("./smCanvasController-BzV7Mw8-.js"),[]),"../../app/Domain/Sqcanvas/Js/sqCanvasController.js":()=>R(()=>import("./sqCanvasController-DFHUtgeg.js"),[]),"../../app/Domain/Swotcanvas/Js/swotCanvasController.js":()=>R(()=>import("./swotCanvasController-CkRNeiQp.js"),[]),"../../app/Domain/Tickets/Js/kanbanController.js":()=>R(()=>import("./kanbanController-xlrzy-v2.js"),[]),"../../app/Domain/Timesheets/Js/timesheetsController.js":()=>R(()=>import("./timesheetsController-ByU1nNnF.js"),[]),"../../app/Domain/Valuecanvas/Js/valueCanvasController.js":()=>R(()=>import("./valueCanvasController-EAhrWSmn.js"),[]),"../../app/Domain/Wiki/Js/wikiController.js":()=>R(()=>import("./wikiController-BEslrRep.js"),[])});(function(){var d,g,h;const r=(h=(g=(d=document.body)==null?void 0:d.dataset)==null?void 0:g.module)==null?void 0:h.toLowerCase();if(r){const l=[];for(const[y,u]of Object.entries(Ae)){const e=y.match(/Domain\/([^/]+)\//);e&&e[1].toLowerCase()===r&&l.push(u())}Promise.all(l)}})();
