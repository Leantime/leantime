(function(t){function G(e){var o=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(this).ajaxSubmit(o))}function K(e){var o=e.target,s=t(o);if(!s.is("[type=submit],[type=image]")){var i=s.closest("[type=submit]");if(i.length===0)return;o=i[0]}var l=this;if(l.clk=o,o.type=="image")if(e.offsetX!==void 0)l.clk_x=e.offsetX,l.clk_y=e.offsetY;else if(typeof t.fn.offset=="function"){var c=s.offset();l.clk_x=e.pageX-c.left,l.clk_y=e.pageY-c.top}else l.clk_x=e.pageX-o.offsetLeft,l.clk_y=e.pageY-o.offsetTop;setTimeout(function(){l.clk=l.clk_x=l.clk_y=null},100)}function x(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var W={};W.fileapi=t("<input type='file'/>").get(0).files!==void 0,W.formdata=window.FormData!==void 0;var ee=!!t.fn.prop;t.fn.attr2=function(){if(!ee)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||typeof e=="string"?e:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e){function o(k){var h,p,v=t.param(k,e.traditional).split("&"),D=v.length,L=[];for(h=0;D>h;h++)v[h]=v[h].replace(/\+/g," "),p=v[h].split("="),L.push([decodeURIComponent(p[0]),decodeURIComponent(p[1])]);return L}function s(k){for(var h=new FormData,p=0;k.length>p;p++)h.append(k[p].name,k[p].value);if(e.extraData){var v=o(e.extraData);for(p=0;v.length>p;p++)v[p]&&h.append(v[p][0],v[p][1])}e.data=null;var D=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});e.uploadProgress&&(D.xhr=function(){var a=t.ajaxSettings.xhr();return a.upload&&a.upload.addEventListener("progress",function(y){var P=0,M=y.loaded||y.position,A=y.total;y.lengthComputable&&(P=Math.ceil(100*(M/A))),e.uploadProgress(y,M,A,P)},!1),a}),D.data=null;var L=D.beforeSend;return D.beforeSend=function(a,y){y.data=h,L&&L.call(this,a,y)},t.ajax(D)}function i(k){function h(f){var n=null;try{f.contentWindow&&(n=f.contentWindow.document)}catch(d){x("cannot get iframe.contentWindow document: "+d)}if(n)return n;try{n=f.contentDocument?f.contentDocument:f.document}catch(d){x("cannot get iframe.contentDocument: "+d),n=f.document}return n}function p(){function f(){try{var z=h(A).readyState;x("state = "+z),z&&z.toLowerCase()=="uninitialized"&&setTimeout(f,50)}catch(I){x("Server abort: ",I," (",I.name,")"),v(Z),U&&clearTimeout(U),U=void 0}}var n=u.attr2("target"),d=u.attr2("action");F.setAttribute("target",P),l||F.setAttribute("method","POST"),d!=a.url&&F.setAttribute("action",a.url),a.skipEncodingOverride||l&&!/post/i.test(l)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),a.timeout&&(U=setTimeout(function(){$=!0,v(ne)},a.timeout));var X=[];try{if(a.extraData)for(var j in a.extraData)a.extraData.hasOwnProperty(j)&&(t.isPlainObject(a.extraData[j])&&a.extraData[j].hasOwnProperty("name")&&a.extraData[j].hasOwnProperty("value")?X.push(t('<input type="hidden" name="'+a.extraData[j].name+'">').val(a.extraData[j].value).appendTo(F)[0]):X.push(t('<input type="hidden" name="'+j+'">').val(a.extraData[j]).appendTo(F)[0]));a.iframeTarget||(M.appendTo("body"),A.attachEvent?A.attachEvent("onload",v):A.addEventListener("load",v,!1)),setTimeout(f,15);try{F.submit()}catch{var E=document.createElement("form").submit;E.apply(F)}}finally{F.setAttribute("action",d),n?F.setAttribute("target",n):u.removeAttr("target"),t(X).remove()}}function v(f){if(!r.aborted&&!ue){if(T=h(A),T||(x("cannot access response document"),f=Z),f===ne&&r)return r.abort("timeout"),_.reject(r,"timeout"),void 0;if(f==Z&&r)return r.abort("server abort"),_.reject(r,"error","server abort"),void 0;if(T&&T.location.href!=a.iframeSrc||$){A.detachEvent?A.detachEvent("onload",v):A.removeEventListener("load",v,!1);var n,d="success";try{if($)throw"timeout";var X=a.dataType=="xml"||T.XMLDocument||t.isXMLDoc(T);if(x("isXml="+X),!X&&window.opera&&(T.body===null||!T.body.innerHTML)&&--de)return x("requeing onLoad callback, DOM not available"),setTimeout(v,250),void 0;var j=T.body?T.body:T.documentElement;r.responseText=j?j.innerHTML:null,r.responseXML=T.XMLDocument?T.XMLDocument:T,X&&(a.dataType="xml"),r.getResponseHeader=function(H){var xe={"content-type":a.dataType};return xe[H]},j&&(r.status=Number(j.getAttribute("status"))||r.status,r.statusText=j.getAttribute("statusText")||r.statusText);var E=(a.dataType||"").toLowerCase(),z=/(json|script|text)/.test(E);if(z||a.textarea){var I=T.getElementsByTagName("textarea")[0];if(I)r.responseText=I.value,r.status=Number(I.getAttribute("status"))||r.status,r.statusText=I.getAttribute("statusText")||r.statusText;else if(z){var B=T.getElementsByTagName("pre")[0],Y=T.getElementsByTagName("body")[0];B?r.responseText=B.textContent?B.textContent:B.innerText:Y&&(r.responseText=Y.textContent?Y.textContent:Y.innerText)}}else E=="xml"&&!r.responseXML&&r.responseText&&(r.responseXML=he(r.responseText));try{se=ge(r,E,a)}catch(H){d="parsererror",r.error=n=H||d}}catch(H){x("error caught: ",H),d="error",r.error=n=H||d}r.aborted&&(x("upload aborted"),d=null),r.status&&(d=r.status>=200&&300>r.status||r.status===304?"success":"error"),d==="success"?(a.success&&a.success.call(a.context,se,"success",r),_.resolve(r.responseText,"success",r),y&&t.event.trigger("ajaxSuccess",[r,a])):d&&(n===void 0&&(n=r.statusText),a.error&&a.error.call(a.context,r,d,n),_.reject(r,"error",n),y&&t.event.trigger("ajaxError",[r,a,n])),y&&t.event.trigger("ajaxComplete",[r,a]),y&&!--t.active&&t.event.trigger("ajaxStop"),a.complete&&a.complete.call(a.context,r,d),ue=!0,a.timeout&&clearTimeout(U),setTimeout(function(){a.iframeTarget||M.remove(),r.responseXML=null},100)}}}var D,L,a,y,P,M,A,r,R,q,$,U,F=u[0],_=t.Deferred();if(k)for(L=0;w.length>L;L++)D=t(w[L]),ee?D.prop("disabled",!1):D.removeAttr("disabled");if(a=t.extend(!0,{},t.ajaxSettings,e),a.context=a.context||a,P="jqFormIO"+new Date().getTime(),a.iframeTarget?(M=t(a.iframeTarget),q=M.attr2("name"),q?P=q:M.attr2("name",P)):(M=t('<iframe name="'+P+'" src="'+a.iframeSrc+'" />'),M.css({position:"absolute",top:"-1000px",left:"-1000px"})),A=M[0],r={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(f){var n=f==="timeout"?"timeout":"aborted";x("aborting upload... "+n),this.aborted=1;try{A.contentWindow.document.execCommand&&A.contentWindow.document.execCommand("Stop")}catch{}M.attr("src",a.iframeSrc),r.error=n,a.error&&a.error.call(a.context,r,n,f),y&&t.event.trigger("ajaxError",[r,a,n]),a.complete&&a.complete.call(a.context,r,n)}},y=a.global,y&&t.active++===0&&t.event.trigger("ajaxStart"),y&&t.event.trigger("ajaxSend",[r,a]),a.beforeSend&&a.beforeSend.call(a.context,r,a)===!1)return a.global&&t.active--,_.reject(),_;if(r.aborted)return _.reject(),_;R=F.clk,R&&(q=R.name,q&&!R.disabled&&(a.extraData=a.extraData||{},a.extraData[q]=R.value,R.type=="image"&&(a.extraData[q+".x"]=F.clk_x,a.extraData[q+".y"]=F.clk_y)));var ne=1,Z=2,oe=t("meta[name=csrf-token]").attr("content"),ie=t("meta[name=csrf-param]").attr("content");ie&&oe&&(a.extraData=a.extraData||{},a.extraData[ie]=oe),a.forceSync?p():setTimeout(p,10);var se,T,ue,de=50,he=t.parseXML||function(f,n){return window.ActiveXObject?(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(f)):n=new DOMParser().parseFromString(f,"text/xml"),n&&n.documentElement&&n.documentElement.nodeName!="parsererror"?n:null},ve=t.parseJSON||function(f){return window.eval("("+f+")")},ge=function(f,n,d){var X=f.getResponseHeader("content-type")||"",j=n==="xml"||!n&&X.indexOf("xml")>=0,E=j?f.responseXML:f.responseText;return j&&E.documentElement.nodeName==="parsererror"&&t.error&&t.error("parsererror"),d&&d.dataFilter&&(E=d.dataFilter(E,n)),typeof E=="string"&&(n==="json"||!n&&X.indexOf("json")>=0?E=ve(E):(n==="script"||!n&&X.indexOf("javascript")>=0)&&t.globalEval(E)),E};return _}if(!this.length)return x("ajaxSubmit: skipping submit process - no element selected"),this;var l,c,g,u=this;typeof e=="function"&&(e={success:e}),l=e.type||this.attr2("method"),c=e.url||this.attr2("action"),g=typeof c=="string"?t.trim(c):"",g=g||window.location.href||"",g&&(g=(g.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:g,success:t.ajaxSettings.success,type:l||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var b={};if(this.trigger("form-pre-serialize",[this,e,b]),b.veto)return x("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&e.beforeSerialize(this,e)===!1)return x("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var m=e.traditional;m===void 0&&(m=t.ajaxSettings.traditional);var O,w=[],S=this.formToArray(e.semantic,w);if(e.data&&(e.extraData=e.data,O=t.param(e.data,m)),e.beforeSubmit&&e.beforeSubmit(S,this,e)===!1)return x("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[S,this,e,b]),b.veto)return x("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var N=t.param(S,m);O&&(N=N?N+"&"+O:O),e.type.toUpperCase()=="GET"?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+N,e.data=null):e.data=N;var C=[];if(e.resetForm&&C.push(function(){u.resetForm()}),e.clearForm&&C.push(function(){u.clearForm(e.includeHidden)}),!e.dataType&&e.target){var le=e.success||function(){};C.push(function(k){var h=e.replaceTarget?"replaceWith":"html";t(e.target)[h](k).each(le,arguments)})}else e.success&&C.push(e.success);if(e.success=function(k,h,p){for(var v=e.context||this,D=0,L=C.length;L>D;D++)C[D].apply(v,[k,h,p||u,u])},e.error){var ce=e.error;e.error=function(k,h,p){var v=e.context||this;ce.apply(v,[k,h,p,u])}}if(e.complete){var fe=e.complete;e.complete=function(k,h){var p=e.context||this;fe.apply(p,[k,h,u])}}var me=t('input[type=file]:enabled[value!=""]',this),te=me.length>0,ae="multipart/form-data",re=u.attr("enctype")==ae||u.attr("encoding")==ae,J=W.fileapi&&W.formdata;x("fileAPI :"+J);var V,pe=(te||re)&&!J;e.iframe!==!1&&(e.iframe||pe)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){V=i(S)}):V=i(S):V=(te||re)&&J?s(S):t.ajax(e),u.removeData("jqxhr").data("jqxhr",V);for(var Q=0;w.length>Q;Q++)w[Q]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(e){if(e=e||{},e.delegation=e.delegation&&t.isFunction(t.fn.on),!e.delegation&&this.length===0){var o={s:this.selector,c:this.context};return!t.isReady&&o.s?(x("DOM not ready, queuing ajaxForm"),t(function(){t(o.s,o.c).ajaxForm(e)}),this):(x("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return e.delegation?(t(document).off("submit.form-plugin",this.selector,G).off("click.form-plugin",this.selector,K).on("submit.form-plugin",this.selector,e,G).on("click.form-plugin",this.selector,e,K),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,G).bind("click.form-plugin",e,K)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,o){var s=[];if(this.length===0)return s;var i=this[0],l=e?i.getElementsByTagName("*"):i.elements;if(!l)return s;var c,g,u,b,m,O,w;for(c=0,O=l.length;O>c;c++)if(m=l[c],u=m.name,u&&!m.disabled)if(e&&i.clk&&m.type=="image")i.clk==m&&(s.push({name:u,value:t(m).val(),type:m.type}),s.push({name:u+".x",value:i.clk_x},{name:u+".y",value:i.clk_y}));else if(b=t.fieldValue(m,!0),b&&b.constructor==Array)for(o&&o.push(m),g=0,w=b.length;w>g;g++)s.push({name:u,value:b[g]});else if(W.fileapi&&m.type=="file"){o&&o.push(m);var S=m.files;if(S.length)for(g=0;S.length>g;g++)s.push({name:u,value:S[g],type:m.type});else s.push({name:u,value:"",type:m.type})}else b!=null&&(o&&o.push(m),s.push({name:u,value:b,type:m.type,required:m.required}));if(!e&&i.clk){var N=t(i.clk),C=N[0];u=C.name,u&&!C.disabled&&C.type=="image"&&(s.push({name:u,value:N.val()}),s.push({name:u+".x",value:i.clk_x},{name:u+".y",value:i.clk_y}))}return s},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var o=[];return this.each(function(){var s=this.name;if(s){var i=t.fieldValue(this,e);if(i&&i.constructor==Array)for(var l=0,c=i.length;c>l;l++)o.push({name:s,value:i[l]});else i!=null&&o.push({name:this.name,value:i})}}),t.param(o)},t.fn.fieldValue=function(e){for(var o=[],s=0,i=this.length;i>s;s++){var l=this[s],c=t.fieldValue(l,e);c==null||c.constructor==Array&&!c.length||(c.constructor==Array?t.merge(o,c):o.push(c))}return o},t.fieldValue=function(e,o){var s=e.name,i=e.type,l=e.tagName.toLowerCase();if(o===void 0&&(o=!0),o&&(!s||e.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!e.checked||(i=="submit"||i=="image")&&e.form&&e.form.clk!=e||l=="select"&&e.selectedIndex==-1))return null;if(l=="select"){var c=e.selectedIndex;if(0>c)return null;for(var g=[],u=e.options,b=i=="select-one",m=b?c+1:u.length,O=b?c:0;m>O;O++){var w=u[O];if(w.selected){var S=w.value;if(S||(S=w.attributes&&w.attributes.value&&!w.attributes.value.specified?w.text:w.value),b)return S;g.push(S)}}return g}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var o=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var s=this.type,i=this.tagName.toLowerCase();o.test(s)||i=="textarea"?this.value="":s=="checkbox"||s=="radio"?this.checked=!1:i=="select"?this.selectedIndex=-1:s=="file"?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(e===!0&&/hidden/.test(s)||typeof e=="string"&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(e){return e===void 0&&(e=!0),this.each(function(){this.disabled=!e})},t.fn.selected=function(e){return e===void 0&&(e=!0),this.each(function(){var o=this.type;if(o=="checkbox"||o=="radio")this.checked=e;else if(this.tagName.toLowerCase()=="option"){var s=t(this).parent("select");e&&s[0]&&s[0].type=="select-one"&&s.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1})(jQuery);
