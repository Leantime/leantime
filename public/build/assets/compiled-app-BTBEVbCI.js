leantime.authController=function(){var n=function(f){typeof f===void 0&&(f="body"),jQuery(f).find("input").not(".filterBar input").prop("readonly",!0),jQuery(f).find("input").not(".filterBar input").prop("disabled",!0),jQuery(f).find("select").not(".filterBar select, .mainSprintSelector").prop("readonly",!0),jQuery(f).find("select").not(".filterBar select, .mainSprintSelector").prop("disabled",!0),jQuery(f).find("textarea").not(".filterBar textarea").prop("disabled",!0),jQuery(f).find("a.delete").remove(),jQuery(f).find(".quickAddLink").hide(),jQuery(f).find(".complexEditor").length&&jQuery(f).find(".complexEditor").each(function(c){jQuery(this).tinymce()&&jQuery(this).tinymce().getBody().setAttribute("contenteditable","false")}),jQuery(f).find(".tinymceSimple").length&&jQuery(f).find(".tinymceSimple").each(function(c){jQuery(this).tinymce()&&jQuery(this).tinymce().getBody().setAttribute("contenteditable","false")}),jQuery(f).find(".tox-editor-header").hide(),jQuery(f).find(".tox-statusbar").hide(),jQuery(f).find(".ticketDropdown a").removeAttr("data-toggle"),jQuery("#mainToggler").hide(),jQuery(".commentBox").hide(),jQuery(".deleteComment, .replyButton").hide(),jQuery(f).find(".dropdown i").removeClass("fa-caret-down")};return{makeInputReadonly:n}}();leantime.calendarController=function(){var n=function(o){var i=new Date;i.getDate(),i.getMonth(),i.getFullYear();var y=jQuery("body").height()-260,d=jQuery("#calendar").fullCalendar({timeZone:leantime.i18n.__("usersettings.timezone"),height:y,header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay,listDay"},titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:leantime.i18n.__("language.columnFormatMonth"),week:leantime.i18n.__("language.columnFormatWeek"),day:leantime.i18n.__("language.columnFormatday")},timeFormat:{"":leantime.dateHelper.getFormatFromSettings("timeformat","luxon")},isRTL:leantime.i18n.__("language.isRTL")=="false"?0:1,firstDay:leantime.i18n.__("language.firstDayOfWeek"),monthNames:leantime.i18n.__("language.monthNames").split(","),monthNamesShort:leantime.i18n.__("language.monthNamesShort").split(","),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),buttonText:{prev:"&laquo;",next:"&raquo;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:leantime.i18n.__("buttons.today"),month:leantime.i18n.__("buttons.month"),week:leantime.i18n.__("buttons.week"),day:leantime.i18n.__("buttons.day")},select:function(l,u,m){var e=prompt(leantime.i18n.__("label.event_title"));e&&d.fullCalendar("renderEvent",{title:e,start:l,end:u,allDay:m},!0),d.fullCalendar("unselect")},events:o,eventColor:"#0866c6"})},f=function(){jQuery(document).ready(function(){Date.prototype.addDays=function(y){return this.setDate(this.getDate()+y),this},jQuery.datepicker.setDefaults({beforeShow:function(y){if(jQuery(y).attr("readonly"))return!1}});var o=leantime.dateHelper.getFormatFromSettings("dateformat","jquery");from=jQuery("#event_date_from").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(y){to.datepicker("option","minDate",i(this)),jQuery("#event_date_to").val()==""&&jQuery("#event_date_to").val(jQuery("#event_date_from").val())}),to=jQuery("#event_date_to").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){from.datepicker("option","maxDate",i(this))});function i(y){var d;try{d=jQuery.datepicker.parseDate(o,y.value)}catch(l){d=null,console.log(l)}return d}})},c=function(){var o={sizes:{minW:400,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".formModal").nyroModal(o)},beforeClose:function(){location.reload()}},titleFromIframe:!0};jQuery(".exportModal").nyroModal(o)},p=function(o,i){let y=document.querySelector(o),d=leantime.dateHelper.getFormatFromSettings("dateformat","luxon"),l=leantime.dateHelper.getFormatFromSettings("timeformat","luxon");const u=new FullCalendar.Calendar(y,{timeZone:leantime.i18n.__("usersettings.timezone"),height:"calc(100% - 65px)",stickyHeaderDates:!0,initialView:i,eventStartEditable:!0,dayHeaderFormat:d,eventTimeFormat:l,slotLabelFormat:l,views:{multiMonthOneMonth:{type:"multiMonth",duration:{months:1},multiMonthTitleFormat:{month:"long",year:"numeric"},dayHeaderFormat:{weekday:"short"}},timeGridDay:{dayHeaders:!1},listWeek:{listDayFormat:{weekday:"long"},listDaySideFormat:leantime.dateHelper.getFormatFromSettings("dateformat","luxon")}},droppable:!0,eventSources,editable:!0,headerToolbar:!1,nowIndicator:!0,bootstrapFontAwesome:{close:"fa-times",prev:"fa-chevron-left",next:"fa-chevron-right",prevYear:"fa-angle-double-left",nextYear:"fa-angle-double-right"},eventDrop:function(a){a.event.extendedProps.enitityType=="ticket"?jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:a.event.extendedProps.enitityId,editFrom:luxon.DateTime.fromJSDate(a.event.start).toFormat(d),timeFrom:luxon.DateTime.fromJSDate(a.event.start).toFormat(l),editTo:luxon.DateTime.fromJSDate(a.event.end).toFormat(d),timeTo:luxon.DateTime.fromJSDate(a.event.end).toFormat(l)}}):a.event.extendedProps.enitityType=="event"&&jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/calendar",data:{id:a.event.extendedProps.enitityId,dateFrom:a.event.startStr,dateTo:a.event.endStr}})},eventResize:function(a){a.event.extendedProps.enitityType=="ticket"?jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:a.event.extendedProps.enitityId,editFrom:luxon.DateTime.fromJSDate(a.event.start).toFormat(d),timeFrom:luxon.DateTime.fromJSDate(a.event.start).toFormat(l),editTo:luxon.DateTime.fromJSDate(a.event.end).toFormat(d),timeTo:luxon.DateTime.fromJSDate(a.event.end).toFormat(l)}}):a.event.extendedProps.enitityType=="event"&&jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/calendar",data:{id:a.event.extendedProps.enitityId,dateFrom:a.event.startStr,dateTo:a.event.endStr}})},eventReceive:function(a){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:a.event.id,editFrom:luxon.DateTime.fromJSDate(a.event.start).toFormat(d),timeFrom:luxon.DateTime.fromJSDate(a.event.start).toFormat(l),editTo:luxon.DateTime.fromJSDate(a.event.end).toFormat(d),timeTo:luxon.DateTime.fromJSDate(a.event.end).toFormat(l)}})},eventDragStart:function(a){},eventDidMount:function(a){a.isDraggable===!1&&jQuery(a.el).addClass("locked"),a.event.extendedProps.location!=null&&a.event.extendedProps.location!=""&&a.event.extendedProps.location.indexOf("http")==0&&(jQuery(a.el).attr("href",a.event.extendedProps.location),jQuery(a.el).attr("target","_blank"))}});jQuery(document).ready(function(){jQuery("#yourToDoContainer").length>0&&m(jQuery("#yourToDoContainer")[0]),e(),u.scrollToTime(Date.now())});function m(a){var t=a;t&&new FullCalendar.ThirdPartyDraggable(t,{itemSelector:".draggable-todo",mirrorClass:"dragging-mirror",eventDragMinDistance:10,mirrorSelector:function(r){return r.closest(".ticketBox")},eventData:function(r){let s=jQuery(r).data("event");return{id:s.id,title:s.title,color:s.color,enitityType:"ticket",duration:"01:00",url:s.url}}}),u.scrollToTime(Date.now())}function e(){u.setOption("locale",leantime.i18n.__("language.code")),u.render(),u.scrollToTime(Date.now()),jQuery(".minCalendar .fc-prev-button").click(function(){u.prev(),u.getCurrentData()}),jQuery(".minCalendar .fc-next-button").click(function(){u.next()}),jQuery(".minCalendar .fc-today-button").click(function(){u.today()}),jQuery(".minCalendar .calendarViewSelect").on("click",function(a){console.log(jQuery(this).data("value")),u.changeView(jQuery(this).data("value")),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/submenu",data:{submenu:"dashboardCalendarView",state:jQuery(this).data("value")}})}),jQuery(".day-button").on("click",function(){const a=jQuery(this).data("date");u.gotoDate(a),jQuery(".day-button").removeClass("active"),jQuery(this).addClass("active")})}htmx.onLoad(function(a){return a.id=="yourToDoContainer"&&m(a),y})};return{initCalendar:n,initEventDatepickers:f,initExportModal:c,initWidgetCalendar:p}}();leantime.canvasController=function(){var n="",f=function(t){n=t},c=function(){jQuery(window).bind("load",function(){jQuery(".loading").fadeOut(),jQuery(".filterBar .row-fluid").css("opacity","1")})},p=function(){jQuery(".addCanvasLink").nyroModal(),jQuery(".editCanvasLink").click(function(){jQuery("#editCanvas").modal("show")}),jQuery(".cloneCanvasLink").click(function(){jQuery("#cloneCanvas").modal("show")}),jQuery(".mergeCanvasLink").click(function(){jQuery("#mergeCanvas").modal("show")}),jQuery(".importCanvasLink").click(function(){jQuery("#importCanvas").modal("show")})},o=!1,i={sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),o==!0&&(o=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(i)},beforeClose:function(){location.reload()}},titleFromIframe:!0},y=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(i)},d=function(t){jQuery.nmManual(t,i)},l=function(t){t=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),y()),t=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),y()),t=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){o=!0},m=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var t=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),t.length==3){var r=t[0],s=t[1];t[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:r,author:s}}).done(function(){jQuery("#userDropdownMenuLink"+r+" span.text span#userImage"+r+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+s),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},e=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var t=jQuery(this).attr("data-value").split("/"),r=jQuery(this).attr("data-label");if(t.length==2){var s=t[0],w=t[1],g=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:s,status:w}}).done(function(){jQuery("#statusDropdownMenuLink"+s+" span.text").text(r),jQuery("#statusDropdownMenuLink"+s).removeClass().addClass(g+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},a=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var t=jQuery(this).attr("data-value").split("/"),r=jQuery(this).attr("data-label");if(t.length==2){var s=t[0],w=t[1],g=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:s,relates:w}}).done(function(){jQuery("#relatesDropdownMenuLink"+s+" span.text").text(r),jQuery("#relatesDropdownMenuLink"+s).removeClass().addClass(g+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCanvasName:f,initFilterBar:c,initCanvasLinks:p,initUserDropdown:m,initStatusDropdown:e,initRelatesDropdown:a,setCloseModal:u,toggleMilestoneSelectors:l,openModalManually:d}}();leantime.clientsController=function(){var n=function(){jQuery(".projectDateFrom, .projectDateTo").datepicker({dateFormat:leantime.i18n.__("language.dateformat"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader")})},f=function(){jQuery(".clientTabs").tabs()},c=function(){jQuery(document).ready(function(){jQuery("#allClientsTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})})};return{initDates:n,initClientTabs:f,initClientTable:c}}();leantime.commentsController=function(){var n=function(){jQuery(".commentBox").show(),jQuery("#comments .replies .commentBox").hide(),jQuery(".deleteComment, .replyButton").show(),jQuery(".commentReply .tinymceSimple").tinymce().getBody().setAttribute("contenteditable","true"),jQuery(".commentReply .tox-editor-header").show(),jQuery(".commenterFields input").prop("readonly",!1),jQuery(".commenterFields input").prop("disabled",!1),jQuery(".commenterFields textarea").prop("readonly",!1),jQuery(".commenterFields textarea").prop("disabled",!1)},f=function(c){c==0?jQuery("#mainToggler").hide():jQuery("#mainToggler").show(),jQuery(".commentBox textarea").remove(),jQuery(".commentBox").hide("fast",function(){}),jQuery("#comment"+c+" .commentReply").prepend('<textarea rows="5" cols="75" name="text" class="tinymceSimple"></textarea>'),leantime.editorController.initSimpleEditor(),jQuery("#comment"+c).show("fast"),jQuery("#father").val(c)};return{enableCommenterForms:n,toggleCommentBoxes:f}}();leantime.cpCanvasController=function(){var n="cp",f=function(){var e=4,a=jQuery("html").height()-320-20*e-5*25,t=a/e;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var r=a/e;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>r&&(r=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",r);var s=a/e;jQuery("#thirdRow div.contentInner").each(function(){jQuery(this).height()>s&&(s=jQuery(this).height()+50)}),jQuery("#thirdRow .column .contentInner").css("height",s);var w=a/e;jQuery("#fourthRow div.contentInner").each(function(){jQuery(this).height()>w&&(w=jQuery(this).height()+50)}),jQuery("#fourthRow .column .contentInner").css("height",w)},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(anvasoptions())},i=function(e){jQuery.nmManual(e,p)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,status:r}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,relates:r}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f}}();leantime.dashboardController=function(){var n={};leantime.theme=="dark"?n={red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(56, 56, 56)"}:n={red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"};var f=function(){var l=moment().startOf("week").add(5,"days");jQuery("#dateToFinish").val(l.format("YYYY-MM-DD"))},c=function(l,u,m){var e={type:"doughnut",data:{datasets:[{data:[u,m],backgroundColor:[leantime.dashboardController.chartColors.green,leantime.dashboardController.chartColors.grey],label:leantime.i18n.__("label.project_done")}],labels:[u+"% Done",m+"% Open"]},options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:""}},animation:{animateScale:!0,animateRotate:!0}}},a=document.getElementById(l).getContext("2d");new Chart(a,e)},p=function(l,u,m){moment.locale(leantime.i18n.__("language.code"));var e={type:"line",data:{labels:l,datasets:[{label:leantime.i18n.__("label.ideal"),backgroundColor:leantime.dashboardController.chartColors.blue,borderColor:leantime.dashboardController.chartColors.blue,data:u,fill:!1,lineTension:0},{label:"Actual",backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:m,fill:!1,lineTension:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},plugins:{legend:{position:"bottom"},title:{display:!1,text:"Line Chart"},tooltips:{mode:"index",intersect:!1}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0}}}}},a=document.getElementById("sprintBurndown").getContext("2d");return _burndownChart=new Chart(a,e),_burndownChart},o=function(l,u,m,e,a){jQuery("#"+l).click(function(t){a.data.datasets[0].data=m,a.data.datasets[1].data=e,a.options.scales.y.title.text=u,jQuery(".chartButtons").removeClass("active"),jQuery(this).addClass("active"),a.update()})},i=function(l,u){moment.locale(leantime.i18n.__("language.code"));var m={type:"line",data:{labels:l,datasets:[{label:leantime.i18n.__("label.done_todos"),backgroundColor:leantime.dashboardController.chartColors.green,borderColor:leantime.dashboardController.chartColors.green,data:u.done.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.progress_todos"),backgroundColor:leantime.dashboardController.chartColors.yellow,borderColor:leantime.dashboardController.chartColors.yellow,data:u.progress.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.new_todos"),backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:u.open.data,fill:!0,lineTension:0,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},elements:{point:{pointStyle:"line",radius:"0"}},plugins:{tooltips:{mode:"index",intersect:!1},legend:{position:"bottom"},title:{display:!1,text:"Line Chart"}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0},stacked:!0}}}},e=document.getElementById("backlogBurndown").getContext("2d");return _burndownChart=new Chart(e,m),_burndownChart},y=function(l,u,m,e){jQuery("#"+l).click(function(a){e.data.datasets[0].data=u.done.data,e.data.datasets[1].data=u.progress.data,e.data.datasets[2].data=u.open.data,e.options.scales.y.title.text=m,jQuery(".backlogChartButtons").removeClass("active"),jQuery(this).addClass("active"),e.update()})},d=function(){jQuery(document).ready(function(){jQuery(".duedates").datepicker({dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),onClose:function(l){var u="";l==""&&jQuery(this).val(leantime.i18n.__("text.anytime"));var m=moment(l,leantime.i18n.__("language.momentJSDate")).format("YYYY-MM-DD HH:mm:ss"),e=jQuery(this).attr("data-id");u=m,leantime.ticketsRepository.updateDueDates(e,u,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated")})})}})})};return{chartColors:n,initBurndown:p,initChartButtonClick:o,initBacklogBurndown:i,initBacklogChartButtonClick:y,initProgressChart:c,prepareHiddenDueDate:f,initDueDateTimePickers:d}}();leantime.dbmCanvasController=function(){var n="dbm",f=function(){var e=3,a=jQuery("html").height()-320-20*e,t=a*.375;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)});var r=a*.375;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>r&&(r=jQuery(this).height()+50)});var s=r*.5;jQuery("#secondRowTop div.contentInner").each(function(){jQuery(this).height()>s&&(s=jQuery(this).height()+50)});var w=r*.5;jQuery("#secondRowBottom div.contentInner").each(function(){jQuery(this).height()>w&&(w=jQuery(this).height()+50)}),s+w+25>r&&(r=s+w+50);var g=a*.25;jQuery("#thirdRow div.contentInner").each(function(){jQuery(this).height()>g&&(g=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t),jQuery("#secondRow .column .contentInner").css("height",r),jQuery("#secondRowTop .column .contentInner").css("height",s),jQuery("#secondRowBottom .column .contentInner").css("height",w),jQuery("#thirdRow .column .contentInner").css("height",g)},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},i=function(e){jQuery.nmManual(e,p)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,status:r}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,relates:r}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f}}();leantime.eaCanvasController=function(){var n="ea",f=function(){var e=2,a=jQuery("html").height()-320-20*e,t=a/e;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var r=a/e;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>r&&(r=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",r)},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},i=function(e){jQuery.nmManual(e,p)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,status:r}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,relates:r}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f}}();leantime.emCanvasController=function(){var n="em",f=function(){var e=4,a=jQuery("html").height()-320-20*e-3*50,t=a/e;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var r=a/e;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>r&&(r=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",r);var s=a/e;jQuery("#thirdRow div.contentInner").each(function(){jQuery(this).height()>s&&(s=jQuery(this).height()+50)}),jQuery("#thirdRow .column .contentInner").css("height",s);var w=a/e;jQuery("#fourthRow div.contentInner").each(function(){jQuery(this).height()>w&&(w=jQuery(this).height()+50)}),jQuery("#fourthRow .column .contentInner").css("height",w)},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},i=function(e){jQuery.nmManual(e,p)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,status:r}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,relates:r}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f}}();var W=W||{};window.SNAKE=W;W.addEventListener=function(){if(window.addEventListener)return function(n,f,c,p){n.addEventListener(f,c,p)};if(window.attachEvent)return function(n,f,c){n.attachEvent("on"+f,c)}}();W.removeEventListener=function(){if(window.removeEventListener)return function(n,f,c,p){n.removeEventListener(f,c,p)};if(window.detachEvent)return function(n,f,c){n.detachEvent("on"+f,c)}}();W.Snake=W.Snake||function(){var n=[],f=function(){this.elm=null,this.elmStyle=null,this.row=-1,this.col=-1,this.xPos=-1e3,this.yPos=-1e3,this.next=null,this.prev=null};function c(p){var o=0,i=0,y;for(y in p)p[y].elm.currentStyle?i=parseFloat(p[y].elm.style["z-index"],10):window.getComputedStyle&&(i=parseFloat(document.defaultView.getComputedStyle(p[y].elm,null).getPropertyValue("z-index"),10)),!isNaN(i)&&i>o&&(o=i);return o+1}return function(p){if(!p||!p.playingBoard)return;localStorage.jsSnakeHighScore===void 0&&localStorage.setItem("jsSnakeHighScore",0);var o=this,i=p.playingBoard,y=5,d=1,l=-1,u=!0,m=!0,e=-1,a=[0,1,0,-1],t=[-1,0,1,0],r=[],s=[],w=80,g=!1,j=!1,C=document.getElementById("selectMode");C&&C.addEventListener("change",function(T){T=T||{};var x=T.target?parseInt(T.target.value):75;(isNaN(x)||x<25)&&(x=75),w=x,setTimeout(function(){document.getElementById("game-area").focus()},10)}),o.snakeBody={},o.snakeBody.b0=new f,o.snakeBody.b0.row=p.startRow||1,o.snakeBody.b0.col=p.startCol||1,o.snakeBody.b0.xPos=o.snakeBody.b0.row*i.getBlockWidth(),o.snakeBody.b0.yPos=o.snakeBody.b0.col*i.getBlockHeight(),o.snakeBody.b0.elm=H(),o.snakeBody.b0.elmStyle=o.snakeBody.b0.elm.style,i.getBoardContainer().appendChild(o.snakeBody.b0.elm),o.snakeBody.b0.elm.style.left=o.snakeBody.b0.xPos+"px",o.snakeBody.b0.elm.style.top=o.snakeBody.b0.yPos+"px",o.snakeBody.b0.next=o.snakeBody.b0,o.snakeBody.b0.prev=o.snakeBody.b0,o.snakeLength=1,o.snakeHead=o.snakeBody.b0,o.snakeTail=o.snakeBody.b0,o.snakeHead.elm.className=o.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),o.snakeHead.elm.id="snake-snakehead-alive",o.snakeHead.elm.className+=" snake-snakebody-alive";function H(){var T=document.createElement("div");return T.className="snake-snakebody-block",T.style.left="-1000px",T.style.top="-1000px",T.style.width=i.getBlockWidth()+"px",T.style.height=i.getBlockHeight()+"px",T}function U(T){for(var x,B=H(),O=1;O<T;O++)x=new f,x.elm=B.cloneNode(!0),x.elmStyle=x.elm.style,i.getBoardContainer().appendChild(x.elm),n[n.length]=x;x=new f,x.elm=B,i.getBoardContainer().appendChild(x.elm),n[n.length]=x}function S(){var T=localStorage.jsSnakeHighScore;o.snakeLength>T&&(alert("Congratulations! You have beaten your previous high score, which was "+T+"."),localStorage.setItem("jsSnakeHighScore",o.snakeLength))}function A(T){S(),o.snakeHead.elm.style.zIndex=c(o.snakeBody),o.snakeHead.elm.className=o.snakeHead.elm.className.replace(/\bsnake-snakebody-alive\b/,""),o.snakeHead.elm.className+=" snake-snakebody-dead",g=!0,T()}o.setPaused=function(T){j=T},o.getPaused=function(){return j},o.handleArrowKeys=function(T){if(g||j&&!p.premoveOnPause)return;o.snakeLength;let x=-1;switch(T){case 37:case 65:x=3;break;case 38:case 87:x=0;break;case 39:case 68:x=1;break;case 40:case 83:x=2;break}e!==d&&(l=x),(Math.abs(x-d)!==2&&(u||j)||m)&&(e=x,u=!1,m=!1)},o.go=function(){var T=o.snakeHead,x=o.snakeTail,B=i.grid;if(j===!0){setTimeout(function(){o.go()},w);return}if(o.snakeTail=x.prev,o.snakeHead=x,B[x.row]&&B[x.row][x.col]&&(B[x.row][x.col]=0),e!==-1&&(d=e,l!==-1&&(e=l,l=-1)),u=!0,x.col=T.col+a[d],x.row=T.row+t[d],x.xPos=T.xPos+r[d],x.yPos=T.yPos+s[d],x.elmStyle||(x.elmStyle=x.elm.style),x.elmStyle.left=x.xPos+"px",x.elmStyle.top=x.yPos+"px",o.snakeLength>1&&(x.elm.id="snake-snakehead-alive",T.elm.id=""),B[x.row][x.col]===0)B[x.row][x.col]=1,setTimeout(function(){o.go()},w);else if(B[x.row][x.col]>0)o.handleDeath();else if(B[x.row][x.col]===i.getGridFoodValue()){if(B[x.row][x.col]=1,!o.eatFood()){o.handleWin();return}setTimeout(function(){o.go()},w)}},o.eatFood=function(){n.length<=y&&U(y*2);for(var T=n.splice(0,y),x=T.length,B,O=o.snakeTail;x--;)B="b"+o.snakeLength++,o.snakeBody[B]=T[x],o.snakeBody[B].prev=O,o.snakeBody[B].elm.className=o.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),o.snakeBody[B].elm.className+=" snake-snakebody-alive",O.next=o.snakeBody[B],O=o.snakeBody[B];if(o.snakeTail=o.snakeBody[B],o.snakeTail.next=o.snakeHead,o.snakeHead.prev=o.snakeTail,!i.foodEaten())return!1;var J=document.getElementById("selectMode"),Z=J.options[J.selectedIndex];return Z.text.localeCompare("Rush")==0&&(w>30?w-=5:w=30),!0},o.handleDeath=function(){var T=document.getElementById("selectMode").value;w=parseInt(T),A(i.handleDeath)},o.handleWin=function(){A(i.handleWin)},o.rebirth=function(){g=!1,u=!0,m=!0,l=-1},o.reset=function(){if(g!==!1){for(var T=[],x=o.snakeHead.next,B;x!==o.snakeHead;)B=x.next,x.prev=null,x.next=null,T.push(x),x=B;o.snakeHead.next=o.snakeHead,o.snakeHead.prev=o.snakeHead,o.snakeTail=o.snakeHead,o.snakeLength=1;for(var O=0;O<T.length;O++)T[O].elm.style.left="-1000px",T[O].elm.style.top="-1000px",T[O].elm.className=o.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),T[O].elm.className+=" snake-snakebody-alive";n.concat(T),o.snakeHead.elm.className=o.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),o.snakeHead.elm.className+=" snake-snakebody-alive",o.snakeHead.elm.id="snake-snakehead-alive",o.snakeHead.row=p.startRow||1,o.snakeHead.col=p.startCol||1,o.snakeHead.xPos=o.snakeHead.row*i.getBlockWidth(),o.snakeHead.yPos=o.snakeHead.col*i.getBlockHeight(),o.snakeHead.elm.style.left=o.snakeHead.xPos+"px",o.snakeHead.elm.style.top=o.snakeHead.yPos+"px"}},U(y*2),r[0]=0,r[1]=i.getBlockWidth(),r[2]=0,r[3]=-1*i.getBlockWidth(),s[0]=-1*i.getBlockHeight(),s[1]=0,s[2]=i.getBlockHeight(),s[3]=0}}();W.Food=W.Food||function(){var n=0;function f(c,p){return Math.floor(Math.random()*(p+1-c))+c}return function(c){if(!(!c||!c.playingBoard)){var p=this,o=c.playingBoard,i,y,d=n++,l=document.createElement("div");l.setAttribute("id","snake-food-"+d),l.className="snake-food-block",l.style.width=o.getBlockWidth()+"px",l.style.height=o.getBlockHeight()+"px",l.style.left="-1000px",l.style.top="-1000px",o.getBoardContainer().appendChild(l),p.getFoodElement=function(){return l},p.randomlyPlaceFood=function(){o.grid[i]&&o.grid[i][y]===o.getGridFoodValue()&&(o.grid[i][y]=0);for(var u=0,m=0,e=0,a=o.grid.length-1,t=o.grid[0].length-1;o.grid[u][m]!==0;)if(u=f(1,a),m=f(1,t),e++,e>2e4)return!1;return o.grid[u][m]=o.getGridFoodValue(),i=u,y=m,l.style.top=u*o.getBlockHeight()+"px",l.style.left=m*o.getBlockWidth()+"px",!0}}}}();W.Board=W.Board||function(){var n=0;function f(o){var i=0,y=0,d;for(d in o)o[d].elm.currentStyle?y=parseFloat(o[d].elm.style["z-index"],10):window.getComputedStyle&&(y=parseFloat(document.defaultView.getComputedStyle(o[d].elm,null).getPropertyValue("z-index"),10)),!isNaN(y)&&y>i&&(i=y);return i+1}function c(){var o=0;return typeof window.innerWidth=="number"?o=window.innerWidth:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?o=document.documentElement.clientWidth:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(o=document.body.clientWidth),o}function p(){var o=0;return typeof window.innerHeight=="number"?o=window.innerHeight:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?o=document.documentElement.clientHeight:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(o=document.body.clientHeight),o}return function(o){var i=this,y=n++,d=o||{},l=250,u=250,m=20,e=20,a=-1,t,r,s=1,w,g=!1,j,C,H,U,S,A,T,x,B;i.grid=[];function O(){C=document.createElement("div"),C.setAttribute("id","playingField"),C.className="snake-playing-field",W.addEventListener(C,"click",function(){j.focus()},!1),B=document.createElement("div"),B.className="snake-pause-screen",B.innerHTML="<div style='padding:10px;'>[Paused]<p/>Press [space] to unpause.</div>",H=document.createElement("div"),H.className="snake-panel-component",H.innerHTML="<a href='http://patorjk.com/blog/software/' class='snake-link'>more patorjk.com apps</a> - <a href='https://github.com/patorjk/JavaScript-Snake' class='snake-link'>source code</a> - <a href='https://www.youtube.com/channel/UCpcCLm9y6CsjHUrCvJHYHUA' class='snake-link'>pat's youtube</a>",U=document.createElement("div"),U.className="snake-panel-component",U.innerHTML="Length: 1",S=document.createElement("div"),S.className="snake-panel-component",S.innerHTML="Highscore: "+(localStorage.jsSnakeHighScore||0),A=se(),T=ue(),x=Q(),W.addEventListener(j,"keyup",function(v){if(!v)var v=window.event;return v.cancelBubble=!0,v.stopPropagation&&v.stopPropagation(),v.preventDefault&&v.preventDefault(),!1},!1),j.className="snake-game-container",B.style.zIndex=1e4,j.appendChild(B),j.appendChild(C),j.appendChild(H),j.appendChild(U),j.appendChild(S),j.appendChild(A),j.appendChild(T),j.appendChild(x),r=new W.Snake({playingBoard:i,startRow:2,startCol:2,premoveOnPause:d.premoveOnPause}),t=new W.Food({playingBoard:i}),A.style.zIndex=1e3}function J(){return l*i.getBlockWidth()}function Z(){return u*i.getBlockHeight()}function se(){var h=document.createElement("div");h.id="sbWelcome"+y,h.className="snake-welcome-dialog";var v=document.createElement("div"),M="";d.fullScreen&&(M="On Windows, press F11 to play in Full Screen mode."),v.innerHTML="JavaScript Snake<p></p>Use the <strong>arrow keys</strong> on your keyboard to play the game. "+M+"<p></p>";var b=document.createElement("button");b.appendChild(document.createTextNode("Play Game"));var k=function(){W.removeEventListener(window,"keyup",D,!1),h.style.display="none",i.setBoardState(1),i.getBoardContainer().focus()},D=function(L){if(!L)var L=window.event;var R=L.which?L.which:L.keyCode;(R===32||R===13)&&k()};return W.addEventListener(window,"keyup",D,!1),W.addEventListener(b,"click",k,!1),h.appendChild(v),h.appendChild(b),h}function oe(h,v,M){var b=document.createElement("div");b.id=v+y,b.className=M;var k=document.createElement("div");k.innerHTML="JavaScript Snake<p></p>"+h+"<p></p>";var D=document.createElement("button");D.appendChild(document.createTextNode("Play Again?"));var E=function(){b.style.display="none",i.resetBoard(),i.setBoardState(1),i.getBoardContainer().focus()},L=function(P){if(!(s!==0||b.style.display!=="block")){if(!P)var P=window.event;var z=P.which?P.which:P.keyCode;(z===32||z===13)&&E()}};return W.addEventListener(window,"keyup",L,!0),W.addEventListener(D,"click",E,!1),b.appendChild(k),b.appendChild(D),b}function ue(){return oe("You died :(","sbTryAgain","snake-try-again-dialog")}function Q(){return oe("You win! :D","sbWin","snake-win-dialog")}function _(h){var v=Math.max(f(r.snakeBody),f({tmp:{elm:t.getFoodElement()}}));j.removeChild(h),j.appendChild(h),h.style.zIndex=v,h.style.display="block",i.setBoardState(0)}i.setPaused=function(h){g=h,r.setPaused(h),g?B.style.display="block":B.style.display="none"},i.getPaused=function(){return g},i.resetBoard=function(){W.removeEventListener(j,"keydown",w,!1),r.reset(),U.innerHTML="Length: 1",i.setupPlayingField()},i.getBoardState=function(){return s},i.setBoardState=function(h){s=h},i.getGridFoodValue=function(){return a},i.getPlayingFieldElement=function(){return C},i.setBoardContainer=function(h){typeof h=="string"&&(h=document.getElementById(h)),h!==j&&(j=h,C=null,i.setupPlayingField())},i.getBoardContainer=function(){return j},i.getBlockWidth=function(){return m},i.getBlockHeight=function(){return e},i.setupPlayingField=function(){C||O();var h,v,M,b;d.fullScreen===!0?(M=0,b=0,h=c()-20,v=p()-20):(M=d.top,b=d.left,h=d.width,v=d.height);var k=i.getBlockWidth()*2+h%i.getBlockWidth(),D=Math.min(J()-k,h-k),E=i.getBlockHeight()*3+v%i.getBlockHeight(),L=Math.min(Z()-E,v-E);j.style.left=b+"px",j.style.top=M+"px",j.style.width=h+"px",j.style.height=v+"px",C.style.left=i.getBlockWidth()+"px",C.style.top=i.getBlockHeight()+"px",C.style.width=D+"px",C.style.height=L+"px";var R=E-i.getBlockHeight(),P=i.getBlockHeight()+L+Math.round((R-30)/2)+"px";H.style.top=P,H.style.width="450px",H.style.left=Math.round(h/2)-Math.round(450/2)+"px",U.style.top=P,U.style.left="30px",S.style.top=P,S.style.left=h-140+"px",h<700?H.style.display="none":H.style.display="block",i.grid=[];for(var z=D/i.getBlockWidth()+2,F=L/i.getBlockHeight()+2,N=0;N<F;N++){i.grid[N]=[];for(var K=0;K<z;K++)K===0||N===0||K===z-1||N===F-1?i.grid[N][K]=1:i.grid[N][K]=0}t.randomlyPlaceFood(),w=function(q){if(!q)var q=window.event;var X=q.which?q.which:q.keyCode;if(i.getBoardState()===1){if(!(X>=37&&X<=40)&&!(X===87||X===65||X===83||X===68))return;W.removeEventListener(j,"keydown",w,!1),w=function(I){if(!I)var I=window.event;var $=I.which?I.which:I.keyCode;return $===32&&i.getBoardState()!=0&&i.setPaused(!i.getPaused()),r.handleArrowKeys($),I.cancelBubble=!0,I.stopPropagation&&I.stopPropagation(),I.preventDefault&&I.preventDefault(),!1},W.addEventListener(j,"keydown",w,!1),r.rebirth(),r.handleArrowKeys(X),i.setBoardState(2),r.go()}return q.cancelBubble=!0,q.stopPropagation&&q.stopPropagation(),q.preventDefault&&q.preventDefault(),!1},W.addEventListener(j,"keydown",w,!1)},i.foodEaten=function(){return U.innerHTML="Length: "+r.snakeLength,r.snakeLength>localStorage.jsSnakeHighScore&&(localStorage.setItem("jsSnakeHighScore",r.snakeLength),S.innerHTML="Highscore: "+localStorage.jsSnakeHighScore),!!t.randomlyPlaceFood()},i.handleDeath=function(){_(T)},i.handleWin=function(){_(x)},d.fullScreen=typeof d.fullScreen>"u"?!1:d.fullScreen,d.top=typeof d.top>"u"?0:d.top,d.left=typeof d.left>"u"?0:d.left,d.width=typeof d.width>"u"?400:d.width,d.height=typeof d.height>"u"?400:d.height,d.premoveOnPause=typeof d.premoveOnPause>"u"?!1:d.premoveOnPause,d.fullScreen&&W.addEventListener(window,"resize",function(){i.setupPlayingField()},!1),i.setBoardState(0),d.boardContainer&&i.setBoardContainer(d.boardContainer)}}();leantime.goalCanvasController=function(){var n="goal",f=function(){var a=2;jQuery("html").height()-320-20*a-25},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},i=function(a){jQuery.nmManual(a,p)},y=function(a){a=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),a=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),a=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var a=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),a.length==3){var t=a[0],r=a[1];a[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,author:r}}).done(function(){jQuery("#userDropdownMenuLink"+t+" span.text span#userImage"+t+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+r),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var a=jQuery(this).attr("data-value").split("/"),t=jQuery(this).attr("data-label");if(a.length==2){var r=a[0],s=a[1],w=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:r,status:s}}).done(function(){jQuery("#statusDropdownMenuLink"+r+" span.text").text(t),jQuery("#statusDropdownMenuLink"+r).removeClass().addClass(w+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var a=jQuery(this).attr("data-value").split("/"),t=jQuery(this).attr("data-label");if(a.length==2){var r=a[0],s=a[1],w=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:r,relates:s}}).done(function(){jQuery("#relatesDropdownMenuLink"+r+" span.text").text(t),jQuery("#relatesDropdownMenuLink"+r).removeClass().addClass(w+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})},e=function(a,t,r){var s={type:"doughnut",data:{datasets:[{data:[t,r],backgroundColor:[leantime.dashboardController.chartColors.green,leantime.dashboardController.chartColors.grey],label:leantime.i18n.__("label.project_done")}],labels:[t+"%"]},options:{maintainAspectRatio:!0,responsive:!0,plugins:{legend:{position:"none"},title:{display:!1,text:"Complete"}},animation:{animateScale:!0,animateRotate:!0}}},w=document.getElementById(a).getContext("2d");_progressChart=new Chart(w,s)};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f,initProgressChart:e}}();leantime.confettiHelper=function(){var n=function(c){const o={...{particleCount:100,spread:70,origin:{y:.6},disableForReducedMotion:!0},...c};typeof confetti=="function"?confetti(o):console.error("Confetti library not loaded")},f=function(){n({particleCount:150,spread:90,origin:{y:.8},colors:["#26a69a","#00bcd4","#4caf50","#8bc34a","#cddc39"]}),setTimeout(function(){n({particleCount:80,spread:120,origin:{y:.7},colors:["#ff9800","#ff5722","#f44336","#e91e63","#9c27b0"]})},500)};return{triggerConfetti:n,celebrateSuccess:f}}();leantime.firstTaskController=function(){var n=function(){jQuery(document).ready(function(){const f=jQuery("#firstTaskOnboarding");f.length>0&&(f.on("submit",function(c){c.preventDefault();const p=jQuery("#firstTask");if(p.val().trim()==="")return p.addClass("error"),!1;p.removeClass("error"),leantime.confettiHelper.celebrateSuccess(),setTimeout(function(){f[0].submit()},1500)}),jQuery("#firstTask").on("input",function(){jQuery(this).removeClass("error")}))})};return{initFirstTaskForm:n}}();jQuery(document).ready(function(){leantime.firstTaskController.initFirstTaskForm()});leantime.helperController=function(){var n=function(m,e){e?leantime.helperRepository.updateUserModalSettings(m,!0):leantime.helperRepository.updateUserModalSettings(m,!1)},f=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.tourFactory.startTour("myWorkDashboard")},c=function(){leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal()},p=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("projectDashboard"),leantime.tourFactory.startTour("projectDashboard")},o=function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("kanbanBoard"),leantime.tourFactory.startTour("kanbanBoard")},i=function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("milestoneView"),leantime.tourFactory.startTour("milestoneView")},y=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("goals"),leantime.tourFactory.startTour("goalsView")},d=function(){jQuery(document).ready(function(){var m={sizes:{minW:700,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".showDialogOnLoad").show(),jQuery(".onboardingModal").nyroModal(m)},beforeClose:function(){location.reload()}}};jQuery(".onboardingModal").nyroModal(m),jQuery.nmManual(leantime.appUrl+"/help/firstLogin",m)})},l=function(m,e,a){jQuery(document).ready(function(){jQuery.nmManual(leantime.appUrl+"/help/showOnboardingDialog?module="+m,{sizes:{minW:e||200,minH:a||500},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){leantime.replaceSVGColors()},afterShowCont:function(){htmx.process("#global-modal-content")}}})})},u=function(m){leantime.helperRepository.updateUserModalSettings(m),leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal()};return{showHelperModal:l,hideAndKeepHidden:u,setDontShowAgain:n,closeModal:c,startMyWorkDashboardTour:f,startProjectDashboardTour:p,startKanbanTour:o,startMilestoneTour:i,startGoalTour:y,firstLoginModal:d}}();var ne=ne||{};ne.helperRepository=function(){var n=function(p,o=!1){jQuery.ajax({type:"PATCH",url:ne.appUrl+"/api/users",data:{settings:p,permanent:o?1:0,patchModalSettings:1}}).done(function(){})},f=function(){jQuery.ajax({type:"PATCH",url:ne.appUrl+"/api/sessions",data:{tourActive:1}}).done(function(){})},c=function(){jQuery.ajax({type:"PATCH",url:ne.appUrl+"/api/sessions",data:{tourActive:0}}).done(function(){})};return{updateUserModalSettings:n,startingTour:f,stopTour:c}}();leantime.tourFactory=function(){var n=function(i){return new Shepherd.Tour({useModalOverlay:!0,defaultStepOptions:{classes:"shepherd-theme-arrows",scrollTo:!1,cancelIcon:{enabled:!0}},tourName:i})},f=function(i){leantime.helperRepository.updateUserModalSettings(i),typeof _paq<"u"&&_paq.push(["trackEvent","Tour","Completed",i])},c=function(i){return{myWorkDashboard:[{id:"welcome-step",title:" Welcome to the Dashboard Tour",text:"Let's start with a few basics to get you up to speed on the navigation and different elements inside Leantime."},{id:"top-nav-step",title:"Work Modes",text:"The top navigation shows you the current 'work mode' you're in. You can be inside a project, your personal work area, or in the company mode.",attachTo:{element:".work-modes",on:"bottom"}},{id:"menu-step",title:"Left Navigation",text:"The left navigation breaks down the current work mode and gives you access to different areas. Everything presented here is part of the currently selected work mode above.",attachTo:{element:".leftpanel",on:"right"}},{id:"my-menu",title:"My Profile Bar",text:"Here you'll find links to your account as well as notifications and latest news about Leantime.",attachTo:{element:".headmenu.pull-right",on:"bottom"}},{id:"dashboard-widgets",title:"Your Dashboard Widgets",text:"Your dashboard is broken up into various widgets showing you focused information about your work.",attachTo:{element:".primaryContent",on:"top"}},{id:"dashboard-widgets-dandd",title:"Customize Your Dashboard",text:"Widgets can be resized and moved around using the drag and drop functionality.",attachTo:{element:"#widget_wrapper_todos .grid-handler-top",on:"bottom"}},{id:"my-todo-widget",title:"My To-Dos",text:"The My To-Do widget shows you all the tasks that are currently assigned to you.",attachTo:{element:"#widget_wrapper_todos",on:"top"}},{id:"my-todo-widget2",title:"Group To-Dos",text:"You can use the dropdowns here to filter your tasks by project or group them by priority, status, project, or dates.",attachTo:{element:"#yourToDoContainer > .clear",on:"bottom"}},{id:"my-todo-widget4",title:"Sort To-Dos",text:"Each To-Do can be dragged and dropped to change its order. You can also drag and drop a task to the calendar to schedule it.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child",on:"bottom"}},{id:"my-todo-widget-timer",title:"Start the Timer",text:"When you're ready to start working on a task, just click the start timer button.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .timerContainer",on:"bottom"}},{id:"my-todo-widget-complete",title:"Complete a Task",text:"Once a task is complete, you can mark it as done by clicking the status dropdown.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .statusDropdown",on:"bottom"}},{id:"my-todo-widget-add",title:"Add More Tasks",text:"You can add more tasks by clicking the plus button in each section, or by using the 3-dot menu next to each task.",attachTo:{element:"#yourToDoContainer .fa-circle-plus",on:"bottom"}},{id:"finish",title:"Congratulations!",text:"You've completed the My Work dashboard tour. Head to <a href='"+leantime.appUrl+"/dashboard/show'>your project</a> to learn more about project management in Leantime."}],projectDashboard:[{id:"left-nav",title:"Project Menu",text:"The project menu organizes your project into different sections: <strong>Data Room</strong> - to host all your files and information, <strong>Think</strong> - to strategize, ideate and define, <strong>Make</strong> - to manage goals, milestones and tasks.",attachTo:{element:".leftmenu ul",on:"left"}},{id:"project-selector",title:"Project Selector",text:"Use the project selector to jump between projects. The left menu shows everything related to your current project.",attachTo:{element:".bigProjectSelector",on:"bottom"}},{id:"project-checklist",title:"Checklist",text:"The project checklist is a quick reference to see if your project contains all the necessary information for successful execution.",attachTo:{element:"#progressForm",on:"bottom"}},{id:"project-status",title:"Quick Status Updates",text:"You can use status updates to quickly share the progress of your project with your team using red, yellow and green colors. The status will be visible across the application.",attachTo:{element:".project-updates",on:"left"}},{id:"project-progress",title:"Progress",text:"The project progress indicator shows you how much work you have completed. It accounts for various task sizes, team velocity, and project milestones.",attachTo:{element:".project-progress",on:"left"}},{id:"latest-tasks",title:"Latest Tasks",text:"The list of latest tasks shows you the most recent tasks added to your project and can be used as a project inbox.",attachTo:{element:".latest-todos",on:"left"}},{id:"teams",title:"Team",text:"The team box shows you the members of this project.",attachTo:{element:".team-container",on:"top"}},{id:"finished",title:"Congratulations!",text:"You've completed the project dashboard tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>To-Dos</a> to learn more about the various ways to manage your tasks in Leantime."}],kanbanBoard:[{id:"kanban-overview",title:"Your Kanban Board",text:"This is your Kanban board. It helps you visualize your work and limit work-in-progress.",attachTo:{element:".kanban-board-wrapper",on:"top"}},{id:"kanban-columns",title:"Work Flow",text:"Tasks move from left to right as they progress. Drag and drop cards to update their status.",attachTo:{element:".column",on:"right"}},{id:"kanban-columns2",title:"Flexible Columns",text:"Using the 3-dot menu, you can add or remove columns and rename them.",attachTo:{element:".column .widgettitle .inlineDropDownContainer",on:"right"}},{id:"kanban-filter",title:"Filter Tasks",text:"You can filter your tasks by various fields like priority, status, project, or dates.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"kanban-group",title:"Swimlanes",text:"Additionally, you can group your tasks to create Kanban swimlanes. This helps you visualize your work by team members, priority, or milestones.",attachTo:{element:".filterWrapper > .btn-group",on:"bottom"}},{id:"kanban-sprints",title:"Sprints",text:"If you manage your work in sprints, you can use the dropdown here to select, create, and update sprints.",attachTo:{element:".pageheader .dropdown",on:"bottom"}},{id:"kanban-congrats",title:"Congratulations!",text:"This concludes the Kanban tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Milestones</a> to learn how to create and manage milestones in Leantime."}],milestoneView:[{id:"milestone-overview",title:"Milestones",text:"Milestones help you track major outcomes and project phases.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-drag",title:"Drag & Sort",text:"Each bar represents one milestone. You can drag them along the timeline, reorder, and resize them. Everything you do on this screen updates the timing of your milestones.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-filter",title:"Filter",text:"You can filter your milestones and also view tasks that are part of them.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"milestone-timeframes",title:"Timeframes",text:"You can change the timeframe of the timeline view to see more of the year or dive deep into a daily breakdown.",attachTo:{element:".col-md-4 .pull-right",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the milestone tour. Head to the <a href='"+leantime.appUrl+"/goalcanvas/dashboard'>Goals</a> to learn how to create and manage goals in Leantime."}],goalsView:[{id:"goals-overview",title:"Goals",text:"Goals help you track measurable impact on your projects."},{id:"goal-parts",title:"Objectives & Metrics",text:"Each goal is made up of an Objective (what you're trying to accomplish) and a Metric (how you'll measure it).",attachTo:{element:".ticketBox",on:"top"}},{id:"goal-progress",title:"Goal Progress",text:"As you update your goal metrics, the progress bar will show you how far along you are.",attachTo:{element:".ticketBox > .row > .col-md-12 .progress",on:"bottom"}},{id:"milestone-connection",title:"Milestones & Goals",text:"You can connect goals to milestones to track the task-level progress of your goals. This helps identify gaps in your project plan.",attachTo:{element:".ticketBox.fixed",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the goals tour. Milestones, Goals, and To-Dos are the basic building blocks in Leantime. Use them to break down your work into manageable chunks. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Kanban Board</a> to review your tasks."}]}[i]||[]},p=function(i){const y=n(i),d=c(i);return d.forEach((l,u)=>{const m=u===0,e=u===d.length-1,a=[];m||a.push({text:leantime.i18n.__("tour.back"),classes:"shepherd-button-secondary",action:y.back}),e?a.push({text:leantime.i18n.__("tour.finish"),action:function(){f(i),confetti(),y.complete()}}):a.push({text:leantime.i18n.__("tour.next"),action:y.next}),e||a.unshift({text:leantime.i18n.__("tour.cancel"),classes:"shepherd-button-secondary",action:y.cancel}),y.addStep({...l,buttons:a})}),y.on("complete",function(){f(i)}),y},o=function(i){const y=p(i);return y.start(),y};return{createTour:n,buildTour:p,startTour:o,getTourDefinition:c}}();leantime.ideasController=function(){var n=!1,f=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),n==!0&&(n=!1,location.reload())},afterShowCont:function(){jQuery(".ideaModal, #commentForm, #commentForm .deleteComment, .leanCanvasMilestone .deleteMilestone").nyroModal(f())}}}},c=function(){jQuery(".ideaModal, #commentForm, #commentForm .deleteComment, .leanCanvasMilestone .deleteMilestone").nyroModal(f())},p=function(t){jQuery.nmManual(t,f)},o=function(){var t=jQuery("#ideaMason").packery({itemSelector:".ticketBox",columnWidth:260,isResizable:!0});t.imagesLoaded().progress(function(){t.packery("layout")});var r=t.find(".ticketBox").draggable({start:function(g,j){j.helper.addClass("tilt"),s(j.helper)},stop:function(g,j){j.helper.removeClass("tilt"),jQuery("html").unbind("mousemove",j.helper.data("move_handler")),j.helper.removeData("move_handler")}});function s(g){var j=g.position().left,C=function(H){H.pageX>=j?(g.addClass("right"),g.removeClass("left")):(g.addClass("left"),g.removeClass("right")),j=H.pageX};jQuery("html").bind("mousemove",C),g.data("move_handler",C)}t.packery("bindUIDraggableEvents",r);function w(){var g=[],j=t.packery("getItemElements");jQuery(j).each(function(C,H){var U=C+1,S=jQuery(H).attr("data-value");g.push({id:S,sortIndex:U})}),jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/ideas",data:{action:"ideaSort",payload:g}})}t.on("dragItemPositioned",w)},i=function(){},y=function(){jQuery(".mainIdeaContent img").each(function(){jQuery(this).wrap("<a href='"+jQuery(this).attr("src")+"' class='imageModal'></a>")}),jQuery(".imageModal").nyroModal()},d=function(t){t=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),c()),t=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),c()),t=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},l=function(){n=!0},u=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var t=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),t.length==3){var r=t[0],s=t[1];t[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/ideas",data:{id:r,author:s}}).done(function(){jQuery("#userDropdownMenuLink"+r+" span.text span#userImage"+r+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+s),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated")})})}})},m=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var t=jQuery(this).attr("data-value").split("_"),r=jQuery(this).attr("data-label");if(t.length==3){var s=t[0],w=t[1],g=t[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/ideas",data:{id:s,box:w}}).done(function(){jQuery("#statusDropdownMenuLink"+s+" span.text").text(r),jQuery("#statusDropdownMenuLink"+s).removeClass().addClass(""+g+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},e=function(){var t=jQuery("html").height()-320;jQuery("#sortableIdeaKanban .column .contentInner").css("height",t)},a=function(t){jQuery("#sortableIdeaKanban").disableSelection(),jQuery("#sortableIdeaKanban .ticketBox").hover(function(){jQuery(this).css("background","var(--kanban-card-hover)")},function(){jQuery(this).css("background","var(--kanban-card-bg)")}),jQuery("#sortableIdeaKanban .contentInner").sortable({connectWith:".contentInner",items:"> .moveable",tolerance:"pointer",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,cancel:".portlet-toggle",start:function(s,w){w.item.addClass("tilt"),r(w.item)},stop:function(s,w){w.item.removeClass("tilt"),jQuery("html").unbind("mousemove",w.item.data("move_handler")),w.item.removeData("move_handler")},update:function(s,w){for(var g={action:"statusUpdate",payload:{}},j=0;j<t.length;j++)jQuery(".contentInner.status_"+t[j]).length&&(g.payload[t[j]]=jQuery(".contentInner.status_"+t[j]).sortable("serialize"));jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/ideas",data:g})}});function r(s){var w=s.position().left,g=function(j){j.pageX>=w?(s.addClass("right"),s.removeClass("left")):(s.addClass("left"),s.removeClass("right")),w=j.pageX};jQuery("html").bind("mousemove",g),s.data("move_handler",g)}jQuery(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>"),jQuery(".portlet-toggle").click(function(){var s=jQuery(this);s.toggleClass("ui-icon-minusthick ui-icon-plusthick"),s.closest(".portlet").find(".portlet-content").toggle()})};return{setCloseModal:l,toggleMilestoneSelectors:d,openModalManually:p,initMasonryWall:o,initBoardControlModal:i,initWallImageModals:y,initUserDropdown:u,initStatusDropdown:m,setKanbanHeights:e,initIdeaKanban:a}}();leantime.insightsCanvasController=function(){var n="insights",f=function(){var e=1,a=jQuery("html").height()-320-20*e,t=a/e;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t)},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},i=function(e){jQuery.nmManual(e,p)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,status:r}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,relates:r}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f}}();leantime.lbmCanvasController=function(){var n="lbm",f=function(){var e=2,a=jQuery("html").height()-320-20*e,t=a*.666;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var r=a*.333;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>r&&(r=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",r)},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},i=function(e){jQuery.nmManual(e,p)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,status:r}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,relates:r}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f}}();leantime.leanCanvasController=function(){var n="lean",f=function(){var e=3,a=jQuery("html").height()-320-20*e,t=a*.333;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var r=a*.333;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>r&&(r=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",r);var s=a*.333;jQuery("#thirdRow div.contentInner").each(function(){jQuery(this).height()>s&&(s=jQuery(this).height()+50)}),jQuery("#thirdRow .column .contentInner").css("height",s)},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},i=function(e){jQuery.nmManual(e,p)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,status:r}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,relates:r}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f}}();leantime.menuController=function(){var n=function(i){if(i!==""){var y=jQuery("#submenu-"+i).css("display"),d="";y=="none"?(jQuery("#submenu-"+i).css("display","block"),jQuery("#submenu-icon-"+i).removeClass("fa-angle-right"),jQuery("#submenu-icon-"+i).addClass("fa-angle-down"),d="open"):(jQuery("#submenu-"+i).css("display","none"),jQuery("#submenu-icon-"+i).removeClass("fa-angle-down"),jQuery("#submenu-icon-"+i).addClass("fa-angle-right"),d="closed"),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/submenu",data:{submenu:i,state:d}})}},f=function(){jQuery(".project-select").chosen(),jQuery(document).on("click",".projectselector.dropdown-menu",function(y){y.stopPropagation()});let i=localStorage.getItem("currentMenuTab");typeof i>"u"?activeTabIndex=0:activeTabIndex=jQuery(".projectSelectorTabs").find('a[href="#'+i+'"]').parent().index(),jQuery(".projectSelectorTabs").tabs({create:function(y,d){},activate:function(y,d){localStorage.setItem("currentMenuTab",d.newPanel[0].id)},load:function(){},enable:function(){},active:activeTabIndex})},c=function(){window.innerWidth<576&&(jQuery(".mainwrapper").removeClass("menuopen"),jQuery(".mainwrapper").addClass("menuclosed")),jQuery(".barmenu").click(function(){jQuery(".mainwrapper").hasClass("menuopen")?(jQuery(".mainwrapper").removeClass("menuopen"),jQuery(".mainwrapper").addClass("menuclosed"),leantime.menuRepository.updateUserMenuSettings("closed")):(jQuery(".mainwrapper").removeClass("menuclosed"),jQuery(".mainwrapper").addClass("menuopen"),leantime.menuRepository.updateUserMenuSettings("open"))})},p=function(i,y="",d){y==="closed"?(jQuery("#"+d+"-toggler-"+i).removeClass("closed"),jQuery("#"+d+"-toggler-"+i).removeClass("open"),jQuery("#"+d+"-toggler-"+i).addClass("open")):y==="open"&&(jQuery("#"+d+"-toggler-"+i).removeClass("open"),jQuery("#"+d+"-toggler-"+i).removeClass("closed"),jQuery("#"+d+"-toggler-"+i).addClass("closed")),jQuery("#"+d+"-toggler-"+i).hasClass("open")?(jQuery("#"+d+"-toggler-"+i).removeClass("open"),jQuery("#"+d+"-toggler-"+i).addClass("closed"),jQuery("#"+d+"-toggler-"+i).find("i").removeClass("fa-angle-down"),jQuery("#"+d+"-toggler-"+i).find("i").addClass("fa-angle-right"),jQuery("#"+d+"-projectSelectorlist-group-"+i).addClass("closed"),jQuery("#"+d+"-projectSelectorlist-group-"+i).removeClass("open"),o(i,"closed",d)):(jQuery("#"+d+"-toggler-"+i).removeClass("closed"),jQuery("#"+d+"-toggler-"+i).addClass("open"),jQuery("#"+d+"-toggler-"+i).find("i").removeClass("fa-angle-right"),jQuery("#"+d+"-toggler-"+i).find("i").addClass("fa-angle-down"),jQuery("#"+d+"-projectSelectorlist-group-"+i).addClass("open"),jQuery("#"+d+"-projectSelectorlist-group-"+i).removeClass("closed"),o(i,"open",d))};let o=function(i,y,d){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/submenu",data:{submenu:d+"-projectSelectorlist-group-"+i,state:y}})};return{toggleSubmenu:n,initProjectSelector:f,initLeftMenuHamburgerButton:c,updateGroupDropdownSetting:o,toggleProjectDropDownList:p}}();var fe=fe||{};fe.menuRepository=function(){var n=function(f){jQuery.ajax({type:"PATCH",url:fe.appUrl+"/api/sessions",data:{menuState:f}}).done(function(){})};return{updateUserMenuSettings:n}}();leantime.minempathyCanvasController=function(){var n="minempathy",f=function(){var e=3,a=jQuery("html").height()-320-20*e,t=a/e;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var r=a/e;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>r&&(r=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",r);var s=a/e;jQuery("#thirdRow div.contentInner").each(function(){jQuery(this).height()>s&&(s=jQuery(this).height()+50)}),jQuery("#thirdRow .column .contentInner").css("height",s)},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},i=function(e){jQuery.nmManual(e,p)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,status:r}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,relates:r}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f}}();leantime.obmCanvasController=function(){var n="obm",f=function(){var e=3,a=jQuery("html").height()-320-20*e,t=a*.6666;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)});var r=t*.5;jQuery("#firstRowTop div.contentInner").each(function(){jQuery(this).height()>r&&(r=jQuery(this).height()+50)});var s=t*.5;jQuery("#firstRowBottom div.contentInner").each(function(){jQuery(this).height()>s&&(s=jQuery(this).height()+50)}),r+s+25>t&&(t=r+s+50);var w=a*.333;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>w&&(w=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t),jQuery("#firstRowTop div.contentInner").css("height",r),jQuery("#firstRowBottom div.contentInner").css("height",s),jQuery("#secondRow .column .contentInner").css("height",w)},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},i=function(e){jQuery.nmManual(e,p)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,status:r}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,relates:r}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f}}();leantime.projectsController=function(){function n(){jQuery("#sortableTicketKanban .column").each(function(){var g=jQuery(this).find(".moveable").length;jQuery(this).find(" .count").text(g)})}var f=function(){jQuery(".projectDateFrom, .projectDateTo").datepicker({dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader")})},c=function(){jQuery(".projectTabs").tabs()},p=function(){var g={sizes:{minW:450,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".showDialogOnLoad").show(),f(),jQuery(".duplicateProjectModal, .formModal").nyroModal(g)},beforeClose:function(){location.reload()}}};jQuery(".duplicateProjectModal").nyroModal(g)},o=function(g){jQuery("#progressbar").progressbar({value:g})},i=function(){jQuery(document).ready(function(){jQuery("#allProjectsTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})})},y=function(g){var j=1;jQuery(g).find("input.sorter").each(function(C){jQuery(this).val(j),j++}),jQuery(g).sortable({stop:function(C,H){j=1,jQuery(g).find("input.sorter").each(function(U){jQuery(this).val(j),j++})}})},d=function(){jQuery(document).ready(function(){jQuery("#todosettings select.colorChosen").on("chosen:ready",function(g,j){var C=jQuery(this).attr("id").replace("-","_");jQuery("#"+C+"_chosen a span").removeClass(),jQuery("#"+C+"_chosen a span").addClass(j.selected)}).chosen({disable_search_threshold:10}),jQuery("#todosettings select.colorChosen").on("change",function(g,j){var C=jQuery(this).attr("id").replace("-","_");jQuery("#"+C+"_chosen a span").removeClass(),jQuery("#"+C+"_chosen a span").addClass(j.selected)})})},l=function(g){jQuery("#todostatus-"+g).parent().remove()},u=function(g){var j=-1;jQuery("#todosettings ul .statusList").each(function(){var U=jQuery(this).find(".labelKey").val();parseInt(U)>=parseInt(j)&&(j=U)});var C=parseInt(j)+1,H=jQuery(".newStatusTpl").clone();H.html(function(U,S){return updatedContent=S.replaceAll("XXNEWKEYXX",C)}),jQuery("#todoStatusList").append("<li>"+H.html()+"</li>"),jQuery("#todosettings select.colorChosen").chosen("destroy"),leantime.projectsController.initSelectFields(),jQuery("#todoStatusList").sortable("destroy"),leantime.projectsController.initTodoStatusSortable("#todoStatusList")},m=function(g){if(e(),g.files&&g.files[0]){var j=new FileReader,C=jQuery("#projectAvatar");j.onload=function(H){_uploadResult=C.croppie({enableExif:!0,viewport:{width:200,height:200,type:"rectangle"},boundary:{width:250,height:250}}),_uploadResult.croppie("bind",{url:H.currentTarget.result}),jQuery("#previousImage").hide()},j.readAsDataURL(g.files[0])}},e=function(){jQuery("#profileImg").croppie("destroy"),jQuery("#previousImage").show()},a=function(){jQuery("#save-picture").addClass("running"),jQuery("#profileImg").attr("src",leantime.appUrl+"/images/loaders/loader28.gif"),_uploadResult.croppie("result",{type:"blob",circle:!1}).then(function(g){var j=new FormData;j.append("file",g),jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/projects",data:j,processData:!1,contentType:!1,success:function(C){jQuery("#save-picture").removeClass("running"),location.reload()},error:function(C){console.log(C)}})})},t=function(g,j,C){function H(U){return String(U).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}jQuery(document).ready(function(){if(C===!1)var U=new Gantt("#gantt",g,{header_height:55,column_width:20,step:24,view_modes:["Day","Week","Month"],bar_height:40,static_progress_indicator:!0,bar_corner_radius:10,arrow_curve:10,padding:20,view_mode:"Month",date_format:leantime.i18n.__("language.momentJSDate"),language:"en",additional_rows:5,custom_popup_html:function(S){S._end;var A='<div class="details-container" style="min-width:600px;"> ';return S.projectName!==void 0&&(A+="<h3><b>"+S.name+"</b></h3>"),A+="<h4>"+H(S.name)+"</a></h4><br /> ",A+="</div>",A},on_click:function(S){},on_date_change:function(S,A,T){var x=S.id.split("-");let B=0,O="";x.length>1?x[0]=="ticket"?(B=x[1],O="ticket"):x[0]=="pgm"&&(B=x[1],O="project"):B=x,O=="ticket"?leantime.ticketsRepository.updateMilestoneDates(B,A,T,S._index+1):jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/projects",data:{id:B,start:A,end:T,sortIndex:S._index+1}}).done(function(){})},on_sort_change:function(S){for(var A={action:"ganttSort",payload:{}},T=0;T<S.length;T++)A.payload[S[T].id]=S[T]._index+1;jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/projects",data:A})},on_progress_change:function(S,A){},on_view_change:function(S){leantime.usersRepository.updateUserViewSettings("projectGantt",S)},on_popup_show:function(S){}});else var U=new Gantt("#gantt",g,{readonlyGantt:!0,resizing:!1,progress:!1,is_draggable:!1,custom_popup_html:function(A){task._end;var T='<div class="details-container" style="min-width:600px;"> ';return task.projectName!==void 0&&(T+="<h3><b>"+A.name+"</b></h3>"),T+="<h4>"+H(A.name)+"</a></h4><br /> ",T+="</div>",T},on_click:function(A){},on_date_change:function(A,T,x){},on_progress_change:function(A,T){},on_view_change:function(A){leantime.usersRepository.updateUserViewSettings("projectGantt",A)}});jQuery("#ganttTimeControl").on("click","a",function(){var S=jQuery(this),A=S.attr("data-value");U.change_view_mode(A),S.parent().parent().find("a").removeClass("active"),S.addClass("active");var T=S.text();jQuery(".viewText").text(T)}),U.change_view_mode(j)})},r=function(){jQuery(document).ready(function(){n(),jQuery(".filterBar .row-fluid").css("opacity","1");var g=jQuery("html").height()-250;jQuery("#sortableProjectKanban .column .contentInner").each(function(){jQuery(this).height()>g&&(g=jQuery(this).height())}),g=g+50,jQuery("#sortableProjectKanban .column .contentInner").css("min-height",g)})},s=function(g){jQuery("#sortableProjectKanban .projectBox").hover(function(){jQuery(this).css("background","var(--kanban-card-hover)")},function(){jQuery(this).css("background","var(--kanban-card-bg)")}),jQuery("#sortableProjectKanban .contentInner").sortable({connectWith:".contentInner",items:"> .moveable",tolerance:"intersect",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,cancel:".portlet-toggle,:input,a,input",distance:25,start:function(C,H){H.item.addClass("tilt"),j(H.item)},stop:function(C,H){H.item.removeClass("tilt"),jQuery("html").unbind("mousemove",H.item.data("move_handler")),H.item.removeData("move_handler"),n();for(var U={action:"sortIndex",payload:{},handler:H.item[0].id},S=0;S<g.length;S++)jQuery(".contentInner.status_"+g[S]).length&&(U.payload[g[S]]=jQuery(".contentInner.status_"+g[S]).sortable("serialize"));jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/projects",data:U})}});function j(C){var H=C.position().left,U=function(S){S.pageX>=H?(C.addClass("right"),C.removeClass("left")):(C.addClass("left"),C.removeClass("right")),H=S.pageX};jQuery("html").bind("mousemove",U),C.data("move_handler",U)}jQuery(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>"),jQuery(".portlet-toggle").click(function(){var C=jQuery(this);C.toggleClass("ui-icon-minusthick ui-icon-plusthick"),C.closest(".portlet").find(".portlet-content").toggle()})},w=function(g,j){jQuery(j).addClass("go"),jQuery(j).hasClass("isFavorite")?leantime.reactionsController.removeReaction("project",g,"favorite",function(){jQuery(j).find("i").removeClass("fa-solid").addClass("fa-regular"),jQuery(j).removeClass("isFavorite")}):leantime.reactionsController.addReactions("project",g,"favorite",function(){jQuery(j).find("i").removeClass("fa-regular").addClass("fa-solid"),jQuery(j).addClass("isFavorite")})};return{initDates:f,initProjectTabs:c,initProgressBar:o,initProjectTable:i,initDuplicateProjectModal:p,initTodoStatusSortable:y,initSelectFields:d,removeStatus:l,addToDoStatus:u,saveCroppie:a,clearCroppie:e,readURL:m,initGanttChart:t,setUpKanbanColumns:r,initProjectsKanban:s,favoriteProject:w}}();leantime.reactionsController=function(){return{addReactions:function(c,p,o,i){jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/reactions",data:{action:"add",module:c,moduleId:p,reaction:o}}).done(function(){i()})},removeReaction:function(c,p,o,i){jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/reactions",data:{action:"remove",module:c,moduleId:p,reaction:o}}).done(function(){i()})}}}();leantime.retrosCanvasController=function(){var n="retros",f=function(){var e=1,a=jQuery("html").height()-320-20*e,t=a/e;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t)},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},i=function(e){jQuery.nmManual(e,p)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,status:r}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,relates:r}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f}}();leantime.risksCanvasController=function(){var n="risks",f=function(){var e=2,a=jQuery("html").height()-320-20*e,t=a/e;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var r=a/e;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>r&&(r=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",r)},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},i=function(e){jQuery.nmManual(e,p)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,status:r}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,relates:r}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f}}();leantime.sbCanvasController=function(){var n="sb",f=function(){var e=0;jQuery("#stakeholderRow div.contentInner").each(function(){jQuery(this).height()>e&&(e=jQuery(this).height()+35)});var a=0;jQuery("#financialsRow div.contentInner").each(function(){jQuery(this).height()>a&&(a=jQuery(this).height()+35)});var t=0;jQuery("#culturechangeRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+35)}),jQuery("#stakeholderRow .column .contentInner").css("height",e),jQuery("#financialsRow .column .contentInner").css("height",a),jQuery("#culturechangeRow .column .contentInner").css("height",t)},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},i=function(e){jQuery.nmManual(e,p)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,status:r}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,relates:r}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f}}();leantime.settingController=function(){var n,f=function(o){if(c(),o.files&&o.files[0]){var i=new FileReader,y=jQuery("#logoImg");i.onload=function(d){n=y.croppie({enableExif:!0,enforceBoundary:!1,viewport:{width:220,height:40,type:"square"},boundary:{width:400,height:200}}),n.croppie("bind",{url:d.currentTarget.result}),jQuery("#previousImage").hide()},i.readAsDataURL(o.files[0])}},c=function(){jQuery("#logoImg").croppie("destroy"),jQuery("#previousImage").show()},p=function(){jQuery("#save-logo").addClass("running"),jQuery("#logoImg").attr("src",leantime.appUrl+"/images/loaders/loader28.gif"),n.croppie("result",{type:"blob",circle:!1,size:"original",quality:1}).then(function(o){leantime.settingService.saveLogo(o)})};return{readURL:f,clearCroppie:c,saveCroppie:p}}();leantime.settingRepository=function(){var n=function(f){var c=new FormData;c.append("file",f),jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/setting",data:c,processData:!1,contentType:!1,success:function(p){jQuery("#save-logo").removeClass("running"),location.reload()},error:function(p){console.log(p)}})};return{saveLogo:n}}();leantime.settingService=function(){var n=function(f){leantime.settingRepository.saveLogo(f)};return{saveLogo:n}}();leantime.smCanvasController=function(){var n="sm",f=function(){},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},i=function(e){jQuery.nmManual(e,p)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,status:r}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,relates:r}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f}}();leantime.sqCanvasController=function(){var n="sq",f=function(){},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},i=function(e){jQuery.nmManual(e,p)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,status:r}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,relates:r}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f}}();leantime.swotCanvasController=function(){var n="swot",f=function(){var e=2,a=jQuery("html").height()-320-20*e-25,t=a/e;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var r=a/e;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>r&&(r=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",r)},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},i=function(e){jQuery.nmManual(e,p)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,status:r}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,relates:r}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f}}();leantime.kanbanController=function(){var n=function(a){var t=a.closest(".quickaddContainer"),r=t.querySelector("[data-quickadd-form]"),s=r.querySelector("[data-quickadd-input]"),w=t.querySelector(".quickAddLink"),g=r.classList.contains("active");g?(r.classList.remove("active"),r.style.display="none",r.dataset.submitting="false",w.style.display="",w.setAttribute("aria-expanded","false")):(r.classList.add("active"),r.style.display="block",r.dataset.submitting="false",w.style.display="none",w.setAttribute("aria-expanded","true"),s.focus())},f=function(){document.addEventListener("keydown",function(a){var t=a.target;if(t.matches("[data-quickadd-input]")){var r=t.closest("[data-quickadd-form]");if(r.dataset.submitting==="true"){a.preventDefault();return}var s=r.querySelector("[data-stay-open-input]");if(a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),r.dataset.submitting="true",s.value="0",r.submit()),a.key==="Enter"&&a.shiftKey&&(a.preventDefault(),r.dataset.submitting="true",s.value="1",r.submit()),a.key==="Escape"){a.preventDefault();var w=r.closest(".quickaddContainer"),g=w.querySelector(".quickAddLink");n(g),t.value=""}}})},c=function(){document.addEventListener("click",function(a){var t=document.querySelectorAll("[data-quickadd-form].active");t.forEach(function(r){var s=r.closest(".quickaddContainer"),w=s.querySelector(".quickAddLink"),g=r.querySelector("[data-quickadd-input]"),j=r.contains(a.target)||w.contains(a.target);if(r.dataset.submitting!=="true")if(!j&&g.value.trim()!==""){var C=r.querySelector("[data-stay-open-input]");C.value="0",r.dataset.submitting="true",r.submit()}else j||n(w)})})},p=function(a){var t=a.querySelectorAll(".column .contentInner");if(t.length!==0){t.forEach(function(s){s.style.minHeight="",s.style.height=""});var r=0;t.forEach(function(s){var w=s.offsetHeight;w>r&&(r=w)}),r>0&&t.forEach(function(s){s.style.minHeight=r+"px"})}},o=function(a){var t=a.querySelectorAll(".column .contentInner");t.forEach(function(r){r.style.minHeight="",r.style.height=""})},i=function(){requestAnimationFrame(function(){requestAnimationFrame(function(){var a=document.querySelectorAll(".kanban-swimlane-content:not(.collapsed)");a.forEach(function(t){p(t)})})})},y=function(a){var t=document.getElementById("swimlane-row-"+a),r=document.querySelector('.kanban-swimlane-sidebar[data-swimlane-id="'+a+'"]'),s=document.getElementById("swimlane-content-"+a);if(!t||!r||!s){console.error("Swimlane elements not found for ID:",a);return}var w=r.getAttribute("aria-expanded")==="true",g=!w;r.setAttribute("aria-expanded",g.toString());var j=r.querySelector(".kanban-lane-chevron i");j&&(j.className=g?"fa fa-chevron-down":"fa fa-chevron-right"),t.setAttribute("data-expanded",g.toString()),g?(s.classList.remove("collapsed"),p(s)):(s.classList.add("collapsed"),p(s)),jQuery.ajax({url:leantime.appUrl+"/api/submenu",type:"POST",data:{submenu:"swimlane_"+a,state:g?"open":"closed"}})},d=function(){document.addEventListener("keydown",function(a){var t=a.target.closest("[data-swimlane-id]");if(t){var r=t.getAttribute("data-swimlane-id");if((a.key==="Enter"||a.key===" ")&&(a.preventDefault(),y(r)),a.key==="ArrowDown"||a.key==="ArrowUp"){a.preventDefault();var s=Array.from(document.querySelectorAll("[data-swimlane-id]")),w=s.indexOf(t);a.key==="ArrowDown"&&w<s.length-1?s[w+1].focus():a.key==="ArrowUp"&&w>0&&s[w-1].focus()}}})},l=function(){if(!(typeof tippy>"u")){var a={allowHTML:!0,placement:"top",arrow:!0,theme:"light-border",trigger:"mouseenter focus",delay:[500,0]},t=[".status-segment[data-tippy-content]",".time-indicator[data-tippy-content]",".kanban-lane-count[data-tippy-content]",".tshirt-icon[data-tippy-content]",".thermometer-icon[data-tippy-content]",".user-avatar[data-tippy-content]",".type-icon[data-tippy-content]",".sprint-icon[data-tippy-content]",".milestone-icon[data-tippy-content]",".swimlane-header-label[data-tippy-content]"];t.forEach(function(r){var s=document.querySelectorAll(r);s.length>0&&tippy(s,a)})}},u=function(){"ontouchstart"in window&&document.querySelectorAll(".widgettitle").forEach(function(a){a.addEventListener("click",function(t){t.target.closest(".dropdown-toggle, .dropdown-menu")||this.classList.toggle("count-visible")})})},m=function(){var a=document.querySelectorAll(".kanban-swimlane-content.collapsed");a.forEach(function(t){p(t)})},e=function(){var a=document.querySelectorAll(".kanban-swimlane-row");if(a.length!==0&&!(window.innerWidth<=768)){var t=120,r=function(){a.forEach(function(s){var w=s.querySelector(".kanban-swimlane-sidebar"),g=s.querySelector(".kanban-swimlane-sidebar-inner"),j=s.querySelector(".kanban-swimlane-sentinel");if(!(!w||!g||!j)){var C=j.getBoundingClientRect(),H=w.getBoundingClientRect(),U=C.top<t&&H.bottom>t+100;if(U){var S=t-H.top,A=H.height-g.offsetHeight-12;S=Math.min(S,Math.max(0,A)),w.classList.add("is-sticky"),g.style.transform="translateY("+S+"px)"}else w.classList.remove("is-sticky"),g.style.transform=""}})};window.addEventListener("scroll",r,{passive:!0}),r()}};return document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){f(),c(),d(),l(),e(),u(),m(),i()}):(f(),c(),d(),l(),e(),u(),m(),i()),{toggleQuickAdd:n,initQuickAddKeyboard:f,initClickOutsideSave:c,toggleSwimlane:y,initSwimlaneKeyboard:d,initProgressBarTooltips:l,equalizeColumnHeights:p,resetColumnHeights:o,initCollapsedColumnHeights:m,initExpandedColumnHeights:i,initStickySwimlaneSidebars:e,initMobileColumnCountToggle:u}}();leantime.ticketsController=function(){function n(){let Q=[];jQuery(".sortableTicketList").each(function(_){jQuery(this).find(".column").each(function(h){Q[h]===void 0&&(Q[h]=0);var v=jQuery(this).find(".moveable").length;Q[h]+=v})}),jQuery(".widgettitle .count").each(function(_){jQuery(this).text(Q[_])})}function f(){jQuery(".kanban-swimlane-row").each(function(){var Q=jQuery(this),_=Q.attr("id");if(_){_.replace("swimlane-row-","");var h=Q.find(".kanban-swimlane-content"),v=h.find(".moveable").length,M=Q.find(".kanban-swimlane-sidebar");M.find(".kanban-lane-count").text(v);var b=M.attr("aria-label")||"",k=b.replace(/\d+ tasks/,v+" tasks");M.attr("aria-label",k)}}),c()}function c(){jQuery(".kanban-swimlane-row").each(function(){var Q=jQuery(this),_=Q.find(".kanban-swimlane-content"),h=Q.find(".micro-progress-bar .progress-segments");if(h.length){var v={},M=0;_.find(".contentInner").each(function(){var k=jQuery(this),D=k.attr("class")||"",E=D.match(/status_(-?\d+)/);if(E){var L=E[1],R=k.find(".moveable").length;R>0&&(v[L]=R,M+=R)}});var b=h.find(".status-segment");if(M===0){b.css("flex","0 1 0%").find(".segment-count").text(""),b.attr("data-tippy-content","");return}b.each(function(){var k=jQuery(this),D=k.attr("class");if(D){var E=D.match(/status-(-?\d+)/);if(E){var L=E[1],R=v[L]||0,P=R/M*100;k.css("flex",P+" 1 0%");var z=k.find(".segment-count");z.length&&z.text(R>0?R:"");var F=k.attr("data-tippy-content")||"",N=F.match(/^([^:]+):/),K=N?N[1]:"Status "+L;k.attr("data-tippy-content",R>0?K+": "+R:"")}}})}})}var p=function(Q,_){var h=jQuery("#ticket_"+Q);if(!h.length){console.warn("Card not found for ticket ID:",Q);return}var v=h.closest(".contentInner"),M=v.attr("class")||"",b=M.match(/status_(\d+)/);if(!b){console.warn("Could not determine status for ticket:",Q),location.reload();return}var k=b[1],D=jQuery("#kanboard-"+_+" .contentInner.status_"+k);if(!D.length){console.warn("Target swimlane not found:",_,k),location.reload();return}v[0]!==D[0]&&(h.addClass("card-moving-out"),setTimeout(function(){h.detach().appendTo(D),h.removeClass("card-moving-out").addClass("card-moving-in"),n(),f(),D.sortable&&D.sortable("refresh"),setTimeout(function(){h.removeClass("card-moving-in")},300)},200))},o=function(Q,_){var h=jQuery(Q).val();leantime.ticketsRepository.updateRemainingHours(_,h,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.remaining_hours_updated"),style:"success"})})},i=function(Q,_){var h=jQuery(Q).val();leantime.ticketsRepository.updatePlannedHours(_,h,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.planned_hours_updated"),style:"success"})})},y=function(){jQuery(".filterBar").toggle()},d=function(Q,_,h){function v(M){return String(M).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}jQuery(document).ready(function(){if(h===!1)var M=new Gantt("#gantt",Q,{header_height:55,column_width:20,step:24,view_modes:["Day","Week","Month"],bar_height:40,static_progress_indicator:!0,bar_corner_radius:10,arrow_curve:10,padding:20,view_mode:"Month",date_format:leantime.i18n.__("language.momentJSDate"),language:leantime.i18n.__("language.code").slice(0,2),additional_rows:5,custom_popup_html:function(b){var k=b._end,D=jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),new Date(k)),E='<div class="details-container" style="min-width:600px;"> ';return b.projectName!==void 0&&(E+="<h3><b>"+b.projectName+"</b></h3>"),E+="<small>"+b.type+" #"+b.id+" </small>",b.type==="milestone"?E+='<h4><a href="#/tickets/editMilestone/'+b.id+'" >'+v(b.name)+"</a></h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+D+"</strong><br /> "+Math.round(b.progress)+'%</p> <a href="#/tickets/editMilestone/'+b.id+'" ><span class="fa fa-map"></span> '+leantime.i18n.__("links.edit_milestone")+'</a> | <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+b.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":E+='<h4><a href="#/tickets/showTicket/'+b.id+'">'+v(b.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+b.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",E+="</div>",E},on_click:function(b){},on_date_change:function(b,k,D){leantime.ticketsRepository.updateMilestoneDates(b.id,k,D,b._index+1)},on_sort_change:function(b){for(var k={action:"ganttSort",payload:{}},D=0;D<b.length;D++)k.payload[b[D].id]=b[D]._index+1;jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/tickets",data:k})},on_progress_change:function(b,k){},on_view_change:function(b){leantime.usersRepository.updateUserViewSettings("roadmap",b)},on_popup_show:function(b){}});else var M=new Gantt("#gantt",Q,{readonlyGantt:!0,resizing:!1,progress:!1,is_draggable:!1,custom_popup_html:function(k){var D=k._end,E=jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),new Date(D)),L='<div class="details-container" style="min-width:600px;"> ';return k.projectName!==void 0&&(L+="<h3><b>"+k.projectName+"</b></h3>"),L+="<small>"+k.type+" #"+k.id+" </small>",k.type==="milestone"?L+="<h4>"+v(k.name)+"</h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+E+"</strong><br /> "+Math.round(k.progress)+'%</p> <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+k.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":L+='<h4><a href="#/tickets/showTicket/'+k.id+'">'+v(k.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+k.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",L+="</div>",L},on_click:function(k){},on_date_change:function(k,D,E){},on_progress_change:function(k,D){},on_view_change:function(k){leantime.usersRepository.updateUserViewSettings("roadmap",k)}});jQuery("#ganttTimeControl").on("click","a",function(){var b=jQuery(this),k=b.attr("data-value");M.change_view_mode(k),b.parent().parent().find("a").removeClass("active"),b.addClass("active");var D=b.text();jQuery(".viewText").text(D)}),M.change_view_mode(_)})},l=function(){Date.prototype.addDays=function(M){return this.setDate(this.getDate()+M),this},jQuery.datepicker.setDefaults({beforeShow:function(M){if(jQuery(M).attr("readonly"))return!1}});var Q=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),_=jQuery("#sprintStart").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){h.datepicker("option","minDate",v(this));var M=v(this).addDays(13);h.datepicker("setDate",M)}),h=jQuery("#sprintEnd").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){_.datepicker("option","maxDate",v(this))});function v(M){var b;try{b=jQuery.datepicker.parseDate(Q,M.value)}catch(k){b=null,console.log(k)}return b}},u=function(){var Q=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),_=jQuery("#milestoneEditFrom").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){h.datepicker("option","minDate",v(this))}),h=jQuery("#milestoneEditTo").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){_.datepicker("option","maxDate",v(this))});function v(M){var b;try{b=jQuery.datepicker.parseDate(Q,M.value)}catch(k){b=null,console.log(k)}return b}},m=function(){var Q=leantime.dateHelper.getFormatFromSettings("dateformat","jquery");jQuery(".milestoneEditFromAsync").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){var h=jQuery(this).val(),v=jQuery(this).attr("data-id"),M=jQuery(".toDateTicket-"+v);M.datepicker("option","minDate",_(this)),jQuery(".toDateTicket-"+v).val(),leantime.ticketsRepository.updateEditFromDates(v,h,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})})}),jQuery(".milestoneEditToAsync").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){var h=jQuery(this).attr("data-id"),v=jQuery(".fromDateTicket-"+h);v.datepicker("option","maxDate",_(this));var M=jQuery(this).val();jQuery(".fromDateTicket-"+h).val(),leantime.ticketsRepository.updateEditToDates(h,M,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})})});function _(h){var v;try{v=jQuery.datepicker.parseDate(Q,h.value)}catch(M){v=null,console.log(M)}return v}},e=function(){jQuery('[data-toggle="tooltip"]').tooltip()},a=function(){var Q={"0.5":"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"};jQuery(".effortDropdown .dropdown-menu a").unbind().on("click",function(){var _=jQuery(this).attr("data-value").split("_");if(_.length===2){var h=_[0],v=_[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:h,storypoints:v}}).done(function(){jQuery("#effortDropdownMenuLink"+h+" span.text").text(Q[v]),jQuery.growl({message:leantime.i18n.__("short_notifications.effort_updated"),style:"success"}),leantime.kanbanGroupBy==="storypoints"&&p(h,v)})}else console.log("Ticket Controller: Effort data value not set correctly")})},t=function(){var Q={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"};jQuery(".priorityDropdown .dropdown-menu a").unbind().on("click",function(){var _=jQuery(this).attr("data-value").split("_");if(_.length===2){var h=_[0],v=_[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:h,priority:v}}).done(function(){jQuery("#priorityDropdownMenuLink"+h+" span.text").text(Q[v]),jQuery("#priorityDropdownMenuLink"+h).removeClass("priority-bg-1 priority-bg-2 priority-bg-3 priority-bg-4 priority-bg-5"),jQuery("#priorityDropdownMenuLink"+h).addClass("priority-bg-"+v),jQuery("#priorityDropdownMenuLink"+h).parents(".ticketBox").removeClass("priority-border-1 priority-border-2 priority-border-3 priority-border-4 priority-border-5"),jQuery("#priorityDropdownMenuLink"+h).parents(".ticketBox").addClass("priority-border-"+v),jQuery.growl({message:leantime.i18n.__("short_notifications.priority_updated"),style:"success"}),leantime.kanbanGroupBy==="priority"&&p(h,v)})}else console.log("Ticket Controller: Priority data value not set correctly")})},r=function(){jQuery(".milestoneDropdown .dropdown-menu a").unbind().on("click",function(){var Q=jQuery(this).attr("data-value").split("_"),_=jQuery(this).attr("data-label");if(Q.length===3){var h=Q[0],v=Q[1],M=Q[2];jQuery("#milestoneDropdownMenuLink"+h+" span.text").append(" ..."),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:h,milestoneid:v}}).done(function(){jQuery("#milestoneDropdownMenuLink"+h+" span.text").text(_),jQuery("#milestoneDropdownMenuLink"+h).css("backgroundColor",M),jQuery.growl({message:leantime.i18n.__("short_notifications.milestone_updated"),style:"success"}),leantime.kanbanGroupBy==="milestoneid"&&p(h,v)})}})},s=function(){jQuery(".statusDropdown .dropdown-menu a").unbind().on("click",function(){var Q=jQuery(this).attr("data-value").split("_"),_=jQuery(this).attr("data-label");if(Q.length==3){var h=Q[0],v=Q[1],M=Q[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:h,status:v}}).done(function(b){jQuery("#statusDropdownMenuLink"+h+" span.text").text(_),jQuery("#statusDropdownMenuLink"+h).removeClass().addClass(M+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated"),style:"success"}),leantime.handleAsyncResponse(b)})}})},w=function(){jQuery(".userDropdown .dropdown-menu a").unbind().on("click",function(){var Q=jQuery(this).attr("data-value").split("_"),_=jQuery(this).attr("data-label");if(Q.length===3){var h=Q[0],v=Q[1];Q[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:h,editorId:v}}).done(function(){jQuery("#userDropdownMenuLink"+h+" span.text span#userImage"+h+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+v),jQuery("#userDropdownMenuLink"+h+" span.text span#user"+h).text(_),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"}),leantime.kanbanGroupBy==="editorId"&&p(h,v)})}})},g=function(){jQuery(".asyncInputUpdate").on("change",function(){var Q=jQuery(this).attr("data-label").split("-");if(Q.length==2){var _=Q[0],h=Q[1],v=jQuery(this).val();jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:h,[_]:v}}).done(function(){jQuery.growl({message:leantime.i18n.__("notifications.subtask_saved"),style:"success"})})}})},j=function(){jQuery(".sprintDropdown .dropdown-menu a").unbind().on("click",function(){var Q=jQuery(this).attr("data-value").split("_"),_=jQuery(this).attr("data-label");if(Q.length==2){var h=Q[0],v=Q[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:h,sprint:v}}).done(function(){jQuery("#sprintDropdownMenuLink"+h+" span.text").text(_),jQuery.growl({message:leantime.i18n.__("short_notifications.sprint_updated"),style:"success"}),leantime.kanbanGroupBy==="sprint"&&p(h,v)})}})},C=function(){var Q=["#821219","#BB1B25","#75BB1B","#4B7811","#fdab3d","#1bbbb1","#006d9f","#124F7D","#082236","#5F0F40","#bb1b75","#F26CA7","#BB611B","#aaaaaa","#4c4c4c"];jQuery("input.simpleColorPicker").simpleColorPicker({colors:Q,onChangeColor:function(h){jQuery(this).css("background",h),jQuery(this).css("color","#fff")}});var _=jQuery("input.simpleColorPicker").val();_!=""&&jQuery("input.simpleColorPicker").css("background",_)},H=function(){jQuery(".date-picker-form-control .reset-button").on("click",function(){const Q=jQuery(this).attr("data-id");jQuery("#due-date-picker-"+Q).val(leantime.i18n.__("text.anytime")),leantime.ticketsRepository.updateDueDates(Q,null,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})})}),leantime.dateController.initDatePicker(".quickDueDates, .duedates",function(Q,_){var h=_.currentDay,v=_.currentMonth,M=_.currentYear,b=new Date(M,v,h),k=jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),b),D=jQuery(this).attr("data-id");leantime.ticketsRepository.updateDueDates(D,k,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})})})},U=function(Q,_,h,v){var M=document.getElementById(v).getContext("2d");new Chart(M,{type:"line",data:{labels:Q,datasets:[{label:leantime.i18n.__("label.booked_hours"),backgroundColor:"rgba(201,48,44, 0.5)",borderColor:"rgb(201,48,44)",data:_},{label:leantime.i18n.__("label.planned_hours"),backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgb(54, 162, 235)",data:h}]},options:{scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.booked_hours")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.planned_hours")},ticks:{beginAtZero:!0}}}}})},S=function(){jQuery(document).ready(function(){let Q=new URL(window.location.href),_=Q.searchParams.get("tab"),h=0;_&&(h=jQuery(".ticketTabs").find('a[href="#'+_+'"]').parent().index()),jQuery(".ticketTabs").tabs({create:function(v,M){jQuery(".ticketTabs").css("visibility","visible")},activate:function(v,M){Q=new URL(window.location.href),Q.searchParams.set("tab",M.newPanel[0].id),window.history.replaceState(null,null,Q)},load:function(){},enable:function(){},active:h})})},A=function(Q){jQuery("#ticketSearch").on("submit",function(_){_.preventDefault();var h=jQuery("#projectIdInput").val(),v=jQuery("#userSelect").val(),M=jQuery("#milestoneSelect").val(),b=jQuery("#termInput").val(),k=jQuery("#sprintSelect").val(),D=jQuery("#typeSelect").val(),E=jQuery("#prioritySelect").val(),L=jQuery("#statusSelect").val(),R=jQuery("#sortBySelect").val(),P=jQuery("input[name='groupBy']:checked").val(),z=jQuery("input[name='showTasks']:checked").val(),F="?search=true";h!=""&&h!=null&&(F=F+"&projectId="+h),v!=""&&v!=null&&(F=F+"&users="+v),M!=""&&M!=null&&(F=F+"&milestone="+M),b!=""&&b!=null&&(F=F+"&term="+b),k!=""&&k!=null&&(F=F+"&sprint="+k),D!=""&&D!=null&&(F=F+"&type="+D),E!=""&&E!=null&&(F=F+"&priority="+E),L!=""&&L!=null&&(F=F+"&status="+L),R!=""&&R!=null&&(F=F+"&sort="+R),P!=""&&P!=null&&(F=F+"&groupBy="+P),z!=""&&z!=null&&(F=F+"&showTasks="+z);var N=Q+F;window.location.href=N})},T=function(Q){var _=jQuery("#projectIdInput").val(),h=jQuery("#userSelect").val(),v=jQuery("#milestoneSelect").val(),M=jQuery("#termInput").val(),b=jQuery("#sprintSelect").val(),k=jQuery("#typeSelect").val(),D=jQuery("#prioritySelect").val(),E=jQuery("#statusSelect").val(),L=jQuery("#sortBySelect").val(),R=jQuery("input[name='groupBy']:checked").val(),P="?search=true";_!=""&&_!=null&&(P=P+"&projectId="+_),h!=""&&h!=null&&(P=P+"&users="+h),v!=""&&v!=null&&(P=P+"&milestone="+v),M!=""&&M!=null&&(P=P+"&term="+M),b!=""&&b!=null&&(P=P+"&sprint="+b),k!=""&&k!=null&&(P=P+"&type="+k),D!=""&&D!=null&&(P=P+"&priority="+D),E!=""&&E!=null&&(P=P+"&status="+E),L!=""&&L!=null&&(P=P+"&sort="+L),R!=""&&R!=null&&(P=P+"&groupBy="+R);var z=Q+P;window.location.href=z},x=function(){jQuery(document).ready(function(){n(),f(),jQuery(".filterBar .row-fluid").css("opacity","1"),jQuery(".sortableTicketList").each(function(){let Q=jQuery(this).attr("id");var _=jQuery(this).closest(".kanban-swimlane-row");if(_.length&&_.attr("data-expanded")==="false")return;let h=250;jQuery(this).find(".column .contentInner").each(function(){jQuery(this).height()>h&&(h=jQuery(this).height())}),jQuery("#"+Q+" .column .contentInner").css("height",h)})})},B=function(Q){var _=Q;jQuery(".sortableTicketList.kanbanBoard .ticketBox").hover(function(){jQuery(this).css("background","var(--kanban-card-hover)")},function(){jQuery(this).css("background","var(--kanban-card-bg)")}),jQuery(".sortableTicketList").each(function(){var v=this;jQuery(v).find(".contentInner").sortable({connectWith:".contentInner",items:"> .moveable",tolerance:"intersect",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,cancel:".portlet-toggle,:input,a,input",distance:10,start:function(M,b){b.item.addClass("tilt"),h(b.item);var k=b.item.closest(".sortableTicketList.kanbanBoard");b.item.data("originalSwimlaneId",k.attr("id"))},stop:function(M,b){b.item.removeClass("tilt"),jQuery("html").unbind("mousemove",b.item.data("move_handler")),b.item.removeData("move_handler"),n(),f(),jQuery(".sortableTicketList").find(".contentInner").each(function(){var Y=jQuery(this),pe=Y.find(".moveable").length>0;if(pe){Y.removeClass("empty-column"),Y.attr("data-empty-text","");var Le=Y.attr("aria-label")||"";Y.attr("aria-label",Le.replace("Empty column","")+" column items")}else Y.addClass("empty-column"),Y.attr("data-empty-text","Empty"),Y.attr("aria-label","Empty column")});var k=b.item.closest(".sortableTicketList.kanbanBoard"),D=k.attr("id"),E=b.item.data("originalSwimlaneId");if(E&&D&&E!==D){var L=b.item[0].id.replace("ticket_",""),R=D.replace("kanboard-",""),P={milestoneid:"milestoneid",editorId:"editorId",priority:"priority",storypoints:"storypoints",sprint:"sprint",dueDate:"dateToFinish"},z=leantime.kanbanGroupBy,F=P[z];if(z==="dueDate"){var N=new Date;switch(N.setHours(12,0,0,0),R){case"0":var K=new Date(N);K.setDate(K.getDate()-1),R=K.toISOString().split("T")[0];break;case"1":var re=new Date(N),q=6-re.getDay();q<0&&(q=0),re.setDate(re.getDate()+q),R=re.toISOString().split("T")[0];break;case"2":var X=new Date(N),xe=6-X.getDay()+7;X.setDate(X.getDate()+xe),R=X.toISOString().split("T")[0];break;case"3":var I=new Date(N);I.setDate(I.getDate()+21),R=I.toISOString().split("T")[0];break;case"4":R="";break}}if(F&&L){var $=jQuery("#ticket_"+L);if(z==="milestoneid"){var ee=jQuery("#swimlane-row-"+R+" .swimlane-header-label"),Ce=ee.text()||leantime.i18n.__("label.no_milestone"),ye=$.find(".milestoneDropdown .dropdown-toggle .text");ye.length&&ye.text(Ce);var de=$.find('.milestoneDropdown .dropdown-menu a[data-value^="'+L+"_"+R+'_"]'),te="#b0b0b0";if(de.length&&R!=="0"&&R!==""){var he=de.attr("data-value");if(he){var ge=he.split("_");ge.length>=3&&(te=ge.slice(2).join("_"))}if(!te||te==="#b0b0b0"){var ve=de.attr("style");if(ve){var je=ve.match(/background-color:\s*([^;]+)/i);je&&(te=je[1].trim())}}}$.find(".milestoneDropdown .dropdown-toggle").css("background-color",te)}else if(z==="priority"){$.removeClass(function(Y,pe){return(pe.match(/(^|\s)priority-border-\S+/g)||[]).join(" ")}).addClass("priority-border-"+R);var Me={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"},ie=jQuery("#priorityDropdownMenuLink"+L);ie.length&&(ie.find("span.text").text(Me[R]||R),ie.removeClass("priority-bg-1 priority-bg-2 priority-bg-3 priority-bg-4 priority-bg-5"),ie.addClass("priority-bg-"+R))}else if(z==="editorId"){var ce=jQuery("#userDropdownMenuLink"+L);if(ce.length){ce.find("span.text span img").attr("src",leantime.appUrl+"/api/users?profileImage="+R);var ee=jQuery("#swimlane-row-"+R+" .swimlane-header-label"),Te=ee.text()||leantime.i18n.__("label.not_assigned");ce.find("span.text span#user"+L).text(Te)}}else if(z==="storypoints"){var De={"0.5":"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"},we=jQuery("#effortDropdownMenuLink"+L);we.length&&we.find("span.text").text(De[R]||R)}else if(z==="sprint"){var be=jQuery("#sprintDropdownMenuLink"+L);if(be.length){var ee=jQuery("#swimlane-row-"+R+" .swimlane-header-label"),Se=ee.text()||leantime.i18n.__("label.backlog");be.find("span.text").text(Se)}}else if(z==="dueDate"){var le=$.find(".dues .fa-calendar").parent();if(le.length&&R){var me=R.split("-"),He=me[1]+"/"+me[2]+"/"+me[0];le.contents().filter(function(){return this.nodeType===3}).first().replaceWith(" "+He)}else le.length&&!R&&le.contents().filter(function(){return this.nodeType===3}).first().replaceWith(" No due date")}jQuery.growl({message:"To-Do Updated",style:"success"});var Qe={id:L};Qe[F]=R,jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:Qe}).fail(function(){jQuery.growl({message:leantime.i18n.__("short_notifications.not_saved")||"Error updating ticket",style:"error"}),location.reload()})}}b.item.removeData("originalSwimlaneId");for(var _e=b.item.closest(".sortableTicketList"),ke={action:"kanbanSort",payload:{},handler:b.item[0].id},ae=0;ae<_.length;ae++)_e.find(".contentInner.status_"+_[ae]).length&&(ke.payload[_[ae]]=_e.find(".contentInner.status_"+_[ae]).sortable("serialize"));jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/tickets",data:ke}).done(function(Y){leantime.handleAsyncResponse(Y)})}})});function h(v){var M=v.position().left,b=function(k){k.pageX+5>M?(v.addClass("right"),v.removeClass("left")):k.pageX<M+5?(v.addClass("left"),v.removeClass("right")):(v.removeClass("left"),v.removeClass("right")),M=k.pageX};jQuery("html").bind("mousemove",b),v.data("move_handler",b)}jQuery(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>"),jQuery(".portlet-toggle").click(function(){var v=jQuery(this);v.toggleClass("ui-icon-minusthick ui-icon-plusthick"),v.closest(".portlet").find(".portlet-content").toggle()})},O=function(Q){function _(h){return!isNaN(parseFloat(h))&&isFinite(h)}jQuery(document).ready(function(){var h=[],v=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom">p<"clear">',searching:!1,stateSave:!0,displayLength:100,order:h,columnDefs:[{visible:!1,targets:10},{visible:!1,targets:11},{target:"no-sort",orderable:!1}],footerCallback:function(M,b,k,D,E){var L=this.api(),R=L.column(10).data().reduce(function(F,N){return _(F)===!1&&(F=jQuery(F).val()),_(N)===!1&&(N=jQuery(N).val()),isNaN(F)&&(F=0),isNaN(N)&&(N=0),parseFloat(F)+parseFloat(N)},0),P=L.column(11).data().reduce(function(F,N){return _(F)===!1&&(F=jQuery(F).val()),_(N)===!1&&(N=jQuery(N).val()),isNaN(F)&&(F=0),isNaN(N)&&(N=0),parseFloat(F)+parseFloat(N)},0),z=L.column(12).data().reduce(function(F,N){return parseFloat(F)+parseFloat(N)},0);jQuery(L.column(9).footer()).html("Total"),jQuery(L.column(10).footer()).html(R),jQuery(L.column(11).footer()).html(P),jQuery(L.column(12).footer()).html(z)}});new jQuery.fn.dataTable.Buttons(v.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(M,b,k,D){return typeof jQuery(D).data("order")<"u"&&(M=jQuery(D).data("order")),M}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(jQuery("#tableButtons")),v.table(0).on("column-visibility",function(M,b,k,D){for(var E=1;E<v.tables().context.length;E++)v.tables(E).column(k).visible(D);v.draw()}),jQuery(".ticketTable input").on("change",function(M,b,k,D){jQuery(this).parent().attr("data-order",jQuery(this).val()),v.draw()})})},J=function(Q){jQuery(document).ready(function(){var _=[];jQuery(".listStyleTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"<"center"p>><"clear">',searching:!1,stateSave:!0,displayLength:25,order:_,fnDrawCallback:function(h){h._iDisplayLength>h.fnRecordsDisplay()?jQuery(h.nTableWrapper).find(".dataTables_paginate").hide():jQuery(h.nTableWrapper).find(".dataTables_paginate").show()}})})},Z=function(Q){jQuery(document).ready(function(){var _=[],h=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"><"clear">',searching:!1,stateSave:!0,displayLength:100,order:_,columnDefs:[{visible:!1,targets:7},{visible:!1,targets:8},{target:"no-sort",orderable:!1}]});new jQuery.fn.dataTable.Buttons(h.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(v,M,b,k){return typeof jQuery(k).data("order")<"u"&&(v=jQuery(k).data("order")),v}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(jQuery("#tableButtons")),h.table(0).on("column-visibility",function(v,M,b,k){for(var D=1;D<h.tables().context.length;D++)h.tables(D).column(b).visible(k);h.draw()}),jQuery(".ticketTable input").on("change",function(v,M,b,k){jQuery(this).parent().attr("data-order",jQuery(this).val()),h.draw()})})},se=function(Q,_){jQuery("textarea.complexEditor").length>0&&jQuery("textarea.complexEditor").tinymce()!==null&&(jQuery("textarea.complexEditor").tinymce().save(),jQuery("textarea.complexEditor").tinymce().remove()),jQuery(".ticketRows").removeClass("active"),jQuery("#row-"+Q).addClass("active"),jQuery(_).html("<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px' /></div>");function h(v){jQuery(v).find("form").each(function(){jQuery(this).on("submit",function(M){M.preventDefault(),jQuery("textarea.complexEditor").length>0&&jQuery("textarea.complexEditor").tinymce()!==null&&(jQuery("textarea.complexEditor").tinymce().save(),jQuery("textarea.complexEditor").tinymce().remove()),jQuery(v).html("<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px'/></div>");var b=jQuery(this).serialize();jQuery.ajax({url:jQuery(this).attr("action"),data:b,type:"post",success:function(k){jQuery(v).html(k),h(v)},error:function(){}})})})}jQuery.get(leantime.appUrl+"/tickets/showTicket/"+Q,function(v){jQuery(_).html(v),h(_)})},oe=function(){jQuery("#tags").tagsInput({autocomplete_url:leantime.appUrl+"/api/tags"}),jQuery("#tags_tag").on("focusout",function(){let Q=jQuery(this).val();Q!=""&&jQuery("#tags").addTag(Q)})},ue=function(Q,_){var h="Discussion on To-Do #"+_+`:
\r`+jQuery("#commentText-"+Q).text();jQuery('li a[href*="timesheet"]').click(),jQuery("#timesheet #description").val(h)};return{toggleFilterBar:y,initGanttChart:d,updateRemainingHours:o,updatePlannedHours:i,initTimeSheetChart:U,initTicketTabs:S,initTicketSearchSubmit:A,initTicketKanban:B,initTicketsTable:O,initEffortDropdown:a,initPriorityDropdown:t,initMilestoneDropdown:r,initStatusDropdown:s,initUserDropdown:w,initSprintDropdown:j,initToolTips:e,initTagsInput:oe,initMilestoneDatesAsyncUpdate:m,initAsyncInputChange:g,initDueDateTimePickers:H,setUpKanbanColumns:x,addCommentTimesheetContent:ue,initMilestoneTable:Z,initMilestoneDates:u,initTicketsList:J,loadTicketToContainer:se,initTicketSearchUrlBuilder:T,initSprintDates:l,initSimpleColorPicker:C}}();var G=G||{};G.ticketsRepository=function(){var n=function(y,d,l,u){let m=G.dateHelper.getFormatFromSettings("dateformat","luxon"),e=G.dateHelper.getFormatFromSettings("timeformat","luxon"),a=luxon.DateTime.fromSQL(d).toFormat(m),t=luxon.DateTime.fromSQL(d).toFormat(e),r=luxon.DateTime.fromSQL(l).toFormat(m),s=luxon.DateTime.fromSQL(l).toFormat(e);jQuery.ajax({type:"PATCH",url:G.appUrl+"/api/tickets",data:{id:y,editFrom:a,editTo:r,timeFrom:t,timeTo:s,sortIndex:u}}).done(function(){})},f=function(y,d,l){jQuery.ajax({type:"PATCH",url:G.appUrl+"/api/tickets",data:{id:y,hourRemaining:d}}).done(function(){l()})},c=function(y,d,l){jQuery.ajax({type:"PATCH",url:G.appUrl+"/api/tickets",data:{id:y,planHours:d}}).done(function(){l()})},p=function(y,d,l){jQuery.ajax({type:"PATCH",url:G.appUrl+"/api/tickets",data:{id:y,dateToFinish:d}}).done(function(){l()})},o=function(y,d,l){jQuery.ajax({type:"PATCH",url:G.appUrl+"/api/tickets",data:{id:y,editFrom:d}}).done(function(){l()})},i=function(y,d,l){jQuery.ajax({type:"PATCH",url:G.appUrl+"/api/tickets",data:{id:y,editTo:d}}).done(function(){l()})};return{updateMilestoneDates:n,updateRemainingHours:f,updatePlannedHours:c,updateDueDates:p,updateEditFromDates:o,updateEditToDates:i}}();leantime.timesheetsController=function(){var n=function(c){jQuery(document).ready(function(){var p=jQuery("#allTimesheetsTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,stateSave:!0,displayLength:100});new jQuery.fn.dataTable.Buttons(p,{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(o,i,y,d){return typeof jQuery(d).data("order")<"u"&&(o=jQuery(d).data("order")),o}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(jQuery("#tableButtons")),jQuery("#allTimesheetsTable").on("column-visibility.dt",function(o,i,y,d){p.draw(!1)})})},f=function(){var c={sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show()},afterShowCont:function(){jQuery(".editTimeModal").nyroModal(c)},beforeClose:function(){location.reload()}},titleFromIframe:!0};jQuery(".editTimeModal").nyroModal(c)};return{initTimesheetsTable:n,initEditTimeModal:f}}();leantime.usersController=function(){var n=function(d){if(f(),d.files&&d.files[0]){var l=new FileReader,u=jQuery("#profileImg");l.onload=function(m){_uploadResult=u.croppie({enableExif:!0,viewport:{width:175,height:175,type:"circle"},boundary:{width:200,height:200}}),_uploadResult.croppie("bind",{url:m.currentTarget.result}),jQuery("#previousImage").hide()},l.readAsDataURL(d.files[0])}},f=function(){jQuery("#profileImg").croppie("destroy"),jQuery("#previousImage").show()},c=function(){jQuery("#save-picture").addClass("running"),jQuery("#profileImg").attr("src",leantime.appUrl+"/images/loaders/loader28.gif"),_uploadResult.croppie("result",{type:"blob",circle:!0}).then(function(d){leantime.usersService.saveUserPhoto(d)})},p=function(){jQuery(document).ready(function(){jQuery("#allUsersTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})})},o=function(){var d={sizes:{minW:400,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".showDialogOnLoad").show(),jQuery(".userImportModal").nyroModal(d)}}};jQuery(".userImportModal").nyroModal(d)},i=function(){var d={sizes:{minW:900,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".showDialogOnLoad").show(),jQuery(".userEditModal").nyroModal(d)},beforeClose:function(){location.reload()}}};jQuery(".userEditModal").nyroModal(d)},y=function(d){let l,u=document.getElementById(d),m=document.getElementById("pwStrength"),e=new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})"),a=new RegExp("((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))");function t(r){e.test(r)?(m.style.backgroundColor="#107530",m.textContent=leantime.i18n.__("label.strong")):a.test(r)?(m.style.backgroundColor="#C5850D",m.textContent=leantime.i18n.__("label.medium")):(m.style.backgroundColor="#CC6B6B",m.textContent=leantime.i18n.__("label.weak"))}u.addEventListener("input",()=>{m.style.display="block",clearTimeout(l),l=setTimeout(()=>t(u.value),500),u.value.length!==0?m.style.display!="block":m.style.display="none"})};return{readURL:n,clearCroppie:f,saveCroppie:c,initUserTable:p,_initModals:o,checkPWStrength:y,initUserEditModal:i}}();leantime.usersRepository=function(){var n=function(c){var p=new FormData;p.append("file",c),jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/users",data:p,processData:!1,contentType:!1,success:function(o){jQuery("#save-picture").removeClass("running"),location.reload()},error:function(o){console.log(o)}})},f=function(c,p){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/users",data:{patchViewSettings:c,value:p}}).done(function(){})};return{saveUserPhoto:n,updateUserViewSettings:f}}();leantime.usersService=function(){var n=function(f){leantime.usersRepository.saveUserPhoto(f)};return{saveUserPhoto:n}}();leantime.valueCanvasController=function(){var n="value",f=function(){var e=3,a=jQuery("html").height()-320-20*e,t=a*.333;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var r=a*.333;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>r&&(r=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",r);var s=a*.333;jQuery("#thirdRow div.contentInner").each(function(){jQuery(this).height()>s&&(s=jQuery(this).height()+50)}),jQuery("#thirdRow .column .contentInner").css("height",s)},c=!1,p=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),c==!0&&(c=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},o=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(p())},i=function(e){jQuery.nmManual(e,p)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),o()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),o()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){c=!0},l=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},u=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,status:r}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],r=e[1],s=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+n+"canvas",data:{id:t,relates:r}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(s+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:d,toggleMilestoneSelectors:y,openModalManually:i,initUserDropdown:l,initStatusDropdown:u,initRelatesDropdown:m,setRowHeights:f}}();leantime.widgetController=function(){var n=[],f=function(l,u){let m=l.gridX||0,e=l.gridY||0,a=l.gridWidth||2,t=l.gridHeight||2;if(u.willItFit({x:m,y:e,width:a,height:t}))return{x:m,y:e};let r=Math.max(...u.engine.nodes.map(s=>s.y+s.h),0);for(let s=0;s<=r+1;s++)for(let w=0;w<=12-a;w++)if(u.willItFit({newX:w,newY:s,width:a,height:t}))return{x:w,y:s};return{x:0,y:r+1}};GridStack.renderCB=function(l,u){u.content&&typeof DOMPurify<"u"&&(l.innerHTML=DOMPurify.sanitize(u.content))};var c=function(){n=GridStack.init({margin:"0px 15px 15px 0px",handle:".grid-handler-top",minRow:2,cellHeight:"30px",float:!0,draggable:{handle:".grid-handler-top",appendTo:"body"},lazyLoad:!1,columnOpts:{breakpointForWindow:!0,breakpoints:[{w:700,c:1},{w:950,c:6}]}}),n.on("dragstop",function(l,u){p()}),n.on("resizestop",function(l,u){p()}),jQuery(".grid-stack-item").each(function(){jQuery(this).find(".removeWidget").click(function(){o(jQuery(this).closest(".grid-stack-item")[0])}),jQuery(this).find(".fitContent").click(function(){i(jQuery(this).closest(".grid-stack-item")[0])})}),jQuery(document).ready(function(){jQuery("#gridBoard").css("opacity",1)})},p=function(){let l=n.save();l.sort((m,e)=>m.y===e.y?m.x-e.x:m.y-e.y);let u=null;arguments.length>0&&arguments[0].action==="toggleWidget"&&(u={widgetId:arguments[0].widgetId,visible:arguments[0].visible}),l.forEach(function(m){let e=jQuery(m.content).find("[hx-get]").first();m.id=e.attr("id"),m.widgetUrl=e.attr("hx-get"),m.widgetTrigger=e.attr("hx-trigger"),m.x==null&&(m.x=0),m.gridX=m.x,m.y==null&&(m.y=0),m.gridY=m.y,m.w==null&&(m.w=1),m.gridWidth=m.w,m.h==null&&(m.h=1),m.gridHeight=m.h,m.content=""}),jQuery.post(leantime.appUrl+"/widgets/widgetManager",{action:"saveGrid",data:l,visibilityData:u},function(m,e){})},o=function(l){l.remove(),n.removeWidget(l,!0),p()},i=function(l){document.querySelector(".grid-stack").gridstack.resizeToContent(l,!1),p()},y=function(l,u,m){let e=document.querySelector(".grid-stack").gridstack,a=jQuery(u).is(":checked");if(f(m,e),!a)o(jQuery("#"+l).closest(".grid-stack-item")[0]);else{const t=document.createElement("div");t.className="grid-stack-item";const r=document.createElement("div");r.className=`grid-stack-item-content tw:p-none ${m.widgetBackground=="default"?"maincontentinner":m.background}`,r.innerHTML=d(m),t.appendChild(r),e.el.appendChild(t),e.makeWidget(t,{x:m.gridX||0,y:m.gridY||50,w:m.gridWidth||2,h:m.gridHeight||2}),htmx.process(t),p({action:"toggleWidget",widgetId:l,visible:a})}},d=function(l){return'<div class="widgetInner">        <div class="'+(l.widgetBackground=="default"?"tw:pb-l":"")+`">
            <div class="stickyHeader" style="padding:15px; height:50px;  width:100%;">
               <div class="grid-handler-top tw:h-[40px] tw:cursor-grab tw:float-left tw:mr-sm">
                    <i class="fa-solid fa-grip-vertical"></i>
                </div>
           `+(l.name!=""?'<h5 class="subtitle tw:pb-m tw:float-left tw:mr-sm">'+l.name+"</h5>":"")+`
            <div class="inlineDropDownContainer tw:float-right">
                <a href="javascript:void(0);" class="dropdown-toggle ticketDropDown editHeadline" data-toggle="dropdown">
                    <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="javascript:void(0)" class="fitContent"><i class="fa-solid fa-up-right-and-down-left-from-center"></i> Resize to fit content</a></li>
                        <li><a href="javascript:void(0)" class="removeWidget"><i class="fa fa-eye-slash"></i> Hide</a></li>
                </ul>
            </div>

        </div>
 <div class="widgetContent tw:px-l">
             <div hx-get="`+l.widgetUrl+'" hx-trigger="'+l.widgetTrigger+'" id="'+l.id+`"></div>
        </div>
       </div>
        <div class="clear"></div>
    </div>
`};return{resizeWidget:i,removeWidget:o,saveGrid:p,initGrid:c,toggleWidgetVisibility:y}}();leantime.wikiController=function(){var n=function(f,c){jQuery(f).jstree({core:{expand_selected_onload:!0,themes:{dots:!1}},state:{key:"tree_state"},types:{default:{icon:"far fa-file-alt"}},plugins:["wholerow","types","state"]}),jQuery(f).on("ready.jstree",function(p,o){jQuery(this).jstree("deselect_all"),jQuery(this).jstree("select_node","treenode_"+c,!0),jQuery(this).jstree("save_state")}),jQuery(f).on("activate_node.jstree",function(p,o){jQuery(this).jstree("save_state"),!(o==null||o.node==null||o.node.id==null)&&(window.location.href=o.node.a_attr.href)})};return{initTree:n}}();var V=V||{},Re=jQuery("meta[name=theme-color]").attr("content");V.companyColor=Re;var Fe=jQuery("meta[name=color-scheme]").attr("content");V.colorScheme=Fe;var Pe=jQuery("meta[name=theme]").attr("content");V.theme=Pe;var Ue=jQuery("meta[name=identifier-URL]").attr("content");V.appUrl=Ue;var Be=jQuery("meta[name=leantime-version]").attr("content");V.version=Be;V.replaceSVGColors=function(){jQuery(document).ready(function(){V.companyColor!="#1b75bb"&&jQuery("svg").children().each(function(){jQuery(this).attr("fill")=="#1b75bb"&&jQuery(this).attr("fill",V.companyColor)})})};V.handleAsyncResponse=function(n){if(n!==void 0&&n.result!==void 0&&n.result.html!==void 0){var f=jQuery(n.result.html);jQuery("body").append(f)}};jQuery.noConflict();jQuery(document).ready(function(){V.replaceSVGColors(),jQuery(".confetti").click(function(){confetti.start()}),tippy("[data-tippy-content]"),jQuery(".login-alert .alert").text()!==""&&jQuery(".login-alert").fadeIn(),document.addEventListener("scroll",()=>{document.documentElement.dataset.scroll=window.scrollY})});htmx.onLoad(function(n){tippy("[data-tippy-content]"),V.replaceSVGColors()});window.addEventListener("HTMX.ShowNotification",function(n){jQuery.get(V.appUrl+"/notifications/getLatestGrowl",function(f){let c=JSON.parse(f);c.notification&&c.notification!=="undefined"&&jQuery.growl({message:c.notification,style:c.notificationType})})});leantime.editorController=function(){var n=[{start:"*",end:"*",format:"italic"},{start:"_",end:"_",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"__",end:"__",format:"bold"},{start:"~~",end:"~~",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"},{start:"1. ",cmd:"InsertOrderedList",value:{"list-style-type":"decimal"}},{start:"1) ",cmd:"InsertOrderedList",value:{"list-style-type":"decimal"}},{start:"a. ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-alpha"}},{start:"a) ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-alpha"}},{start:"i. ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-roman"}},{start:"i) ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-roman"}},{start:"[ ] ",cmd:"InsertChecklist"},{start:">",format:"blockquote"},{start:"`",end:"`",format:"code"},{start:"```",end:"```",format:"pre"},{start:"~",end:"~",cmd:"createLink"},{start:"---",replacement:"<hr/>"},{start:"--",replacement:""},{start:"-",replacement:""},{start:"(c)",replacement:""}],f={delimiter:"@",delay:20,source:function(e,a,t){t==="@"&&jQuery.getJSON(leantime.appUrl+"/api/users",{projectUsersAccess:"current",query:e},function(r){let s=[];for(let w=0;w<r.length;w++)s[w]={name:r[w].firstname+" "+r[w].lastname,id:r[w].id,email:r[w].username};a(s)})},highlighter:function(e){return e.replace(new RegExp("("+this.query+")","ig"),function(a,t){return"<strong>"+t+"</strong>"})},insert:function(e){return'<a class="userMention" data-tagged-user-id="'+e.id+'" href="javascript:void(0)"><img src="'+leantime.appUrl+"/api/users?profileImage="+e.id+'" alt="'+e.name+' Image"/>'+e.name.trim()+"</a>&nbsp;"},items:10},c=function(e,a,t){var r,s;r=new XMLHttpRequest,r.withCredentials=!1,r.open("POST",leantime.appUrl+"/api/files"),r.onload=function(){if(r.status<200||r.status>=300){t("HTTP Error: "+r.status);return}a(r.responseText)},s=new FormData,s.append("file",e.blob()),r.send(s)},p=function(e,a,t){window.filePickerCallback=e;var r={afterShowCont:function(){jQuery(".fileModal").nyroModal({callbacks:r})}};jQuery.nmManual(leantime.appUrl+"/files/showAll?modalPopUp=true",{stack:!0,callbacks:r,sizes:{minW:500,minH:500}}),jQuery.nmTop().elts.cont.css("zIndex","1000010"),jQuery.nmTop().elts.bg.css("zIndex","1000010"),jQuery.nmTop().elts.load.css("zIndex","1000010"),jQuery.nmTop().elts.all.find(".nyroModalCloseButton").css("zIndex","1000010")},o=function(e,a){e.on("change",function(){}),e.on("init",function(t){var r=e.getDoc().getElementsByClassName("confetti");r&&r.length>0&&r[0].addEventListener("click",function(){confetti.start()})}),e.on("focus",function(){var t=e.getDoc().getElementsByClassName("tinyPlaceholder");if(t.length>0)for(;t[0];)t[0].parentNode.removeChild(t[0])}),e.on("submit",function(){var t=e.getDoc().getElementsByClassName("tinyPlaceholder");if(t.length>0){for(;t[0];)t[0].remove();e.save()}})},i=leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",y=leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",d=function(e){jQuery("textarea.tinymceSimple").tinymce({iframe_aria_text:"",width:"100%",skin_url:i,content_css:y,content_style:"body.mce-content-body{ font-size:14px; } img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,shortlink,checklist,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advlist,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | link unlink image | checklist bullist numlist | emoticons",browser_spellcheck:!0,toolbar_location:"bottom",branding:!1,statusbar:!1,convert_urls:!0,paste_data_images:!0,menubar:!1,relative_urls:!0,document_base_url:leantime.appUrl+"/",default_link_target:"_blank",table_appearance_options:!1,mentions:f,textpattern_patterns:n,images_upload_handler:c,file_picker_callback:p,setup:o})},l=function(){var e=jQuery("input[name=id]").val();e||(e="new");let a="none";window.leantime.currentProject&&(a=window.leantime.currentProject);var t=window.innerHeight-50-205;jQuery("textarea.complexEditor").tinymce({iframe_aria_text:"",width:"100%",skin_url:leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",content_css:leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",content_style:"html {text-align:center;} body.mce-content-body{ font-size:14px; } img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,embed,autoresize,shortlink,checklist,bettertable,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advancedTemplate,advlist,codesample,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | formatselect forecolor | alignleft aligncenter alignright | link unlink image media embed emoticons | checklist bullist numlist | table  | codesample | advancedTemplate | restoredraft",autosave_prefix:"leantime-complexEditor-autosave-{path}{query}-{id}-"+a+"-"+e+"-",autosave_restore_when_empty:e!=="new",autosave_retention:"10m",browser_spellcheck:!0,contextmenu:!1,autosave_retention:"120m",autosave_interval:"10s",autosave_ask_before_unload:!1,branding:!1,statusbar:!1,convert_urls:!0,menubar:!1,resizable:!0,templates:leantime.appUrl+"/wiki/templates",body_class:"mce-content-body",paste_data_images:!0,relative_urls:!0,document_base_url:leantime.appUrl+"/",table_appearance_options:!1,min_height:400,max_height:t,default_link_target:"_blank",codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Rust",value:"rust"},{text:"SQL",value:"sql"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"Swift",value:"swift"},{text:"Objective C",value:"objectivec"},{text:"Go",value:"go"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],mentions:f,textpattern_patterns:n,images_upload_handler:c,file_picker_callback:p,setup:o})},u=function(e){var a=jQuery("input[name=id]").val();a==null&&(a="new");let t="none";window.leantime.currentProject&&(t=window.leantime.currentProject),jQuery("textarea.notesEditor").tinymce({iframe_aria_text:"",width:"100%",skin_url:leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",content_css:leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",content_style:"html {text-align:center;} body.mce-content-body{ font-size:14px; color:var(--secondary-font-color); max-width:none;} img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,embed,autoresize,shortlink,checklist,bettertable,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advancedTemplate,advlist,codesample,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | formatselect forecolor | alignleft aligncenter alignright | link image table emoticons | checklist bullist | advancedTemplate | restoredraft",toolbar_location:"bottom",browser_spellcheck:!0,contextmenu:!1,autosave_prefix:"leantime-complexEditor-autosave-{path}{query}-{id}-"+t+"-"+a+"-",autosave_restore_when_empty:!0,autosave_retention:"120m",autosave_interval:"10s",autosave_ask_before_unload:!1,branding:!1,statusbar:!1,convert_urls:!0,menubar:!1,resizable:!0,templates:leantime.appUrl+"/wiki/templates",body_class:"mce-content-body",paste_data_images:!0,relative_urls:!0,document_base_url:leantime.appUrl+"/",table_appearance_options:!1,min_height:400,default_link_target:"_blank",codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Rust",value:"rust"},{text:"SQL",value:"sql"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"Swift",value:"swift"},{text:"Objective C",value:"objectivec"},{text:"Go",value:"go"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],textpattern_patterns:n,mentions:f,textpattern_patterns:n,images_upload_handler:c,file_picker_callback:p,setup:function(r){o(r),r.on("blur",function(){r.save(),e()})}})},m=function(e){jQuery(e).tinymce({iframe_aria_text:"",width:"100%",skin_url:i,inline:!0,plugins:"autosave,imagetools,shortlink,checklist,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advlist,mention,slashcommands,textpattern",toolbar:"",toolbar_location:"bottom",browser_spellcheck:!0,contextmenu:!1,branding:!1,statusbar:!1,convert_urls:!0,paste_data_images:!0,menubar:!1,relative_urls:!0,document_base_url:leantime.appUrl+"/",default_link_target:"_blank",table_appearance_options:!1,mentions:f,textpattern_patterns:n,images_upload_handler:c,file_picker_callback:p,setup:o})};return{initSimpleEditor:d,initComplexEditor:l,initNotesEditor:u,initContentEditable:m}}();leantime.snippets=function(){var n=function(l){var u=document.getElementById(l);u.select(),u.setSelectionRange(0,99999),navigator.clipboard.writeText(u.value),jQuery.growl({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},f=function(l){navigator.clipboard.writeText(l),jQuery.growl({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},c=function(){jQuery(".confetti").click(function(){confetti.start()})},p=function(l){var u=jQuery("#accordion_toggle_"+l).find("i.fa").first(),m="accordion_content-"+l,e="closed";u.hasClass("fa-angle-right")?(u.removeClass("fa-angle-right"),u.addClass("fa-angle-down"),jQuery("#accordion_content-"+l).slideDown("fast"),e="open"):(u.removeClass("fa-angle-down"),u.addClass("fa-angle-right"),jQuery("#accordion_content-"+l).slideUp("fast"),e="closed"),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/submenu",data:{submenu:m,state:e}})},o=function(l){var u=jQuery("#themeStyleSheet").attr("href");l=="light"?(u=u.replace("dark.css","light.css"),jQuery("#themeStyleSheet").attr("href",u)):l=="dark"&&(u=u.replace("light.css","dark.css"),jQuery("#themeStyleSheet").attr("href",u))},i=function(l){var u=jQuery("#themeStyleSheet").attr("href");l=="minimal"?(u=u.replace("default","minimal"),jQuery("#themeStyleSheet").attr("href",u)):l=="default"&&(u=u.replace("minimal","default"),jQuery("#themeStyleSheet").attr("href",u))},y=function(l){jQuery("#fontStyleSetter").html(":root { --primary-font-family: '"+l+"', 'Helvetica Neue', Helvetica, sans-serif; }")},d=function(l,u){jQuery("#colorSchemeSetter").html(":root { --accent1: "+l+"; --accent2: "+u+"}")};return{copyUrl:n,copyToClipboard:f,initConfettiClick:c,accordionToggle:p,toggleTheme:o,toggleFont:y,toggleColors:d,toggleBg:i}}();leantime.modals=function(){var n=!1;function f(){return document.getElementById("global-modal")}function c(){return document.getElementById("global-modal-content")}function p(){return document.getElementById("global-modal-box")}function o(g){return/showTicket|ideaDialog|articleDialog/.test(g)}function i(){var g=c();g&&(g.innerHTML='<div style="display:flex;justify-content:center;align-items:center;padding:60px 40px;"><span class="tw:loading tw:loading-spinner tw:loading-lg"></span></div>')}function y(g){for(var j=g.querySelectorAll("script"),C=0;C<j.length;C++){for(var H=j[C],U=document.createElement("script"),S=0;S<H.attributes.length;S++)U.setAttribute(H.attributes[S].name,H.attributes[S].value);U.textContent=H.textContent,H.parentNode.replaceChild(U,H)}}function d(g){if(/<html[\s>]/i.test(g)||/<!DOCTYPE/i.test(g)){var j=new DOMParser().parseFromString(g,"text/html"),C=j.querySelector(".primaryContent");return C?C.innerHTML:j.body?j.body.innerHTML:g}return g}function l(g){jQuery(".showDialogOnLoad",g).show(),window.htmx&&window.htmx.process(g),window.tippy&&tippy(g.querySelectorAll("[data-tippy-content]"))}function u(g){var j=g.headers.get("HX-Trigger");if(j&&j.indexOf("HTMX.closemodal")!==-1)return j.indexOf("HTMX.ShowNotification")!==-1&&window.dispatchEvent(new CustomEvent("HTMX.ShowNotification")),a(),Promise.resolve(null);var C=g.headers.get("HX-Redirect");return C?(a(),window.location.href=C,Promise.resolve(null)):g.text()}function m(g){if(g!==null){var j=c();j&&(j.innerHTML=d(g),y(j),l(j))}}function e(g){var j=f(),C=p();if(j){C.className=C.className.replace(/tw:max-w-\S+/g,"").trim(),C.style.minHeight="",o(g)?(C.classList.add("tw:max-w-5xl"),C.style.minHeight="80vh"):C.classList.add("tw:max-w-3xl"),i(),j.open||j.showModal(),n=!0;var H=leantime.appUrl.replace(/\/$/,""),U=g.indexOf("http")===0?g:H+g;fetch(U,{credentials:"include",headers:{"is-modal":"true","X-Requested-With":"XMLHttpRequest"}}).then(u).then(m).catch(function(S){console.error("modalManager: load error",S);var A=c();A&&(A.innerHTML='<div style="padding:24px;text-align:center;"><p>Could not load content.</p></div>')})}}function a(){var g=f();if(g&&n){n=!1;try{history.pushState("",document.title,window.location.pathname+window.location.search)}catch{}if(g.open&&g.close(),typeof window.globalModalCallback=="function"){var j=window.globalModalCallback;window.globalModalCallback=null,j()}else location.reload()}}var t=function(){var g=window.location.hash.substring(1);if(g){var j=g.split("/");j.length>2&&j[1]!=="tab"&&e(g)}},r=function(){a()},s=function(g){typeof g=="function"&&(window.globalModalCallback=g)},w=function(g){var j=leantime.appUrl.replace(/\/$/,""),C=g;g.indexOf(j)===0&&(C=g.substring(j.length)),e(C)};return{openModal:t,setCustomModalCallback:s,closeModal:r,openByUrl:w}}();jQuery(document).ready(function(){leantime.modals.openModal();var n=document.getElementById("global-modal");n&&(n.addEventListener("cancel",function(f){f.preventDefault(),leantime.modals.closeModal()}),n.addEventListener("close",function(){leantime.modals.closeModal()})),document.addEventListener("submit",function(f){var c=f.target;if(!(!c||!c.closest||!c.closest("#global-modal-content"))&&c.getAttribute("method")!=="dialog"&&!(c.hasAttribute("hx-post")||c.hasAttribute("hx-get")||c.hasAttribute("hx-put")||c.hasAttribute("hx-delete"))){f.preventDefault();var p=(c.getAttribute("method")||"GET").toUpperCase(),o=c.getAttribute("action")||window.location.href,i=document.getElementById("global-modal-content"),y={method:p,credentials:"include",headers:{"is-modal":"true","X-Requested-With":"XMLHttpRequest"}};if(p==="POST")y.body=new FormData(c);else{var d=new URLSearchParams(new FormData(c));o+=(o.indexOf("?")===-1?"?":"&")+d.toString()}fetch(o,y).then(function(l){var u=l.headers.get("HX-Trigger");if(u&&u.indexOf("HTMX.closemodal")!==-1)return u.indexOf("HTMX.ShowNotification")!==-1&&window.dispatchEvent(new CustomEvent("HTMX.ShowNotification")),leantime.modals.closeModal(),null;var m=l.headers.get("HX-Redirect");return m?(leantime.modals.closeModal(),window.location.href=m,null):l.text()}).then(function(l){if(l!==null){var u=l;if(/<html[\s>]/i.test(l)||/<!DOCTYPE/i.test(l)){var m=new DOMParser().parseFromString(l,"text/html"),e=m.querySelector(".primaryContent");u=e?e.innerHTML:m.body?m.body.innerHTML:l}i.innerHTML=u;for(var a=i.querySelectorAll("script"),t=0;t<a.length;t++){for(var r=a[t],s=document.createElement("script"),w=0;w<r.attributes.length;w++)s.setAttribute(r.attributes[w].name,r.attributes[w].value);s.textContent=r.textContent,r.parentNode.replaceChild(s,r)}jQuery(".showDialogOnLoad",i).show(),window.htmx&&window.htmx.process(i),window.tippy&&tippy(i.querySelectorAll("[data-tippy-content]"))}}).catch(function(l){console.error("modalManager: form submit error",l)})}},!0)});window.addEventListener("hashchange",function(){leantime.modals.openModal()});window.addEventListener("closeModal",function(){leantime.modals.closeModal()});document.addEventListener("HTMX.closemodal",function(){leantime.modals.closeModal()});jQuery.nmManual=function(n,f){typeof f=="function"&&(f=f()),f&&f.callbacks&&typeof f.callbacks.beforeClose=="function"&&(window.globalModalCallback=f.callbacks.beforeClose),leantime.modals.openByUrl(n)};jQuery.nmTop=function(){return{close:function(){leantime.modals.closeModal()},elts:{cont:jQuery("#global-modal-box"),bg:jQuery("#global-modal .tw\\:modal-backdrop"),load:jQuery("#global-modal .tw\\:loading"),all:jQuery("#global-modal")}}};jQuery.fn.nyroModal=function(n){return this.each(function(){var f=jQuery(this);if(!f.data("modalManager-init")){f.data("modalManager-init",!0),n&&n.callbacks&&f.data("modalManager-opts",n);var c=f.attr("href");c&&c.indexOf("#")===0||c&&f.on("click.modalManager",function(p){p.preventDefault(),n&&n.callbacks&&typeof n.callbacks.beforeClose=="function"&&(window.globalModalCallback=n.callbacks.beforeClose),leantime.modals.openByUrl(c)})}})};leantime.dateController=function(){function n(o){return{numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),monthNamesShort:leantime.i18n.__("language.monthNamesShort").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek"),onSelect:o}}function f(o){var i=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),y;try{y=jQuery.datepicker.parseDate(i,o.value)}catch(d){y=null,console.log(d)}return y}var c=function(o,i,y){Date.prototype.addDays=function(u){return this.setDate(this.getDate()+u),this},jQuery.datepicker.setDefaults({beforeShow:function(u){if(jQuery(u).attr("readonly"))return!1}});var d=jQuery(o).datepicker(n()).on("change",function(u){l.datepicker("option","minDate",f(this)),jQuery(i).val()==""&&jQuery(i).val(jQuery(o).val())}),l=jQuery(i).datepicker(n()).on("change",function(){d.datepicker("option","maxDate",f(this))})},p=function(o,i){jQuery(o).datepicker(n(i))};return{initDateRangePicker:c,initDatePicker:p}}();leantime.dateHelper=function(){var n={jquery:{},luxon:{}};n.jquery={d:"dd",D:"D",j:"d",l:"DD",N:"",S:"",w:"",z:"o",W:"",F:"MM",m:"mm",M:"M",n:"m",t:"",L:"",o:"yy",Y:"yy",y:"y",a:"",A:"",B:"",g:"",G:"",h:"",H:"",i:"",s:"",u:"",e:"",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"@"},n.luxon={d:"dd",D:"ccc",j:"d",l:"cccc",N:"c",S:"",w:"c",z:"o",W:"WW",F:"MMMM",m:"LL",M:"LLL",n:"L",t:"",L:"",o:"kk",Y:"yyyy",y:"yy",a:"a",A:"a",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",v:"SSS",e:"z",I:"",O:"ZZ",P:"ZZ",T:"ZZZ",Z:"",c:"",r:"",U:"X"};var f=function(p,o){let i=n[o],y="";return p.split("").forEach(function(d){i[d]!==void 0?y=y+""+i[d]:y=y+""+d}),y},c=function(p,o){let i=leantime.i18n.__("language."+p);return f(i,o)};return{mapFormat:f,getFormatFromSettings:c}}();leantime.accessibilityController=function(){var n=function(){jQuery(".chosen-container").each(function(){var l=jQuery(this);if(!l.data("a11y-enhanced")){var u=null,m=l.attr("id");if(m&&m.indexOf("_chosen")>-1){var a=m.replace("_chosen","");u=jQuery("#"+a)}if((!u||!u.length)&&(u=l.prev("select[data-placeholder]")),(!u||!u.length)&&(u=l.siblings("select").first()),!(!u||!u.length)){var e="",a=u.attr("id");if(a){var t=jQuery('label[for="'+a+'"]');t.length&&(e=t.text().trim())}var r=l.find(".chosen-single"),s=l.find(".chosen-choices");r.length&&r.attr({role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-label":e||u.attr("data-placeholder")||"Select option",tabindex:"0"}),s.length&&s.attr({role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-label":e||u.attr("data-placeholder")||"Select options","aria-multiselectable":"true",tabindex:"0"}),l.on("chosen:showing_dropdown",function(){r.add(s).attr("aria-expanded","true")}),l.on("chosen:hiding_dropdown",function(){r.add(s).attr("aria-expanded","false")}),l.find(".chosen-drop").attr("role","listbox"),l.find(".chosen-results li").attr("role","option"),l.data("a11y-enhanced",!0)}}})},f=function(){jQuery(".ss-main").each(function(){var l=jQuery(this),u=l.prev("select");if(u.length){var m=jQuery('label[for="'+u.attr("id")+'"]'),e=m.length?m.text().trim():"";l.attr({role:"combobox","aria-haspopup":"listbox","aria-label":e||u.attr("data-placeholder")||"Select option","aria-multiselectable":u.attr("multiple")?"true":"false"})}})},c=function(){jQuery("div.tagsinput").each(function(){var l=jQuery(this),u=l.next('input[type="text"]');if(u.length){var m=u.attr("id"),e=jQuery('label[for="'+m+'"]'),a=e.length?e.text().trim():"Enter tags";l.attr({role:"list","aria-label":a}),l.find("span.tag").each(function(){jQuery(this).attr("role","listitem")});var t=l.find("input");t.attr({"aria-label":"Add new tag","aria-describedby":m+"-help"}),m&&!jQuery("#"+m+"-help").length&&l.after('<span id="'+m+'-help" class="sr-only">Type and press enter to add tags. Press backspace to remove the last tag.</span>')}})},p=function(){jQuery("input.hasDatepicker").each(function(){var l=jQuery(this),u=l.attr("id"),m=jQuery('label[for="'+u+'"]'),e=m.length?m.text().trim():"";l.attr({role:"textbox","aria-label":e||"Select date","aria-describedby":u+"-help"}),u&&!jQuery("#"+u+"-help").length&&l.after('<span id="'+u+'-help" class="sr-only">Date input. Use arrow keys to navigate calendar. Press enter to select date.</span>')}),jQuery(document).on("focus","input.hasDatepicker",function(){setTimeout(function(){var l=jQuery("#ui-datepicker-div");l.is(":visible")&&l.attr({role:"dialog","aria-label":"Choose date","aria-modal":"true"})},100)})},o=function(){typeof tinymce<"u"&&tinymce.on("AddEditor",function(l){var u=l.editor;jQuery("#"+u.id);var m=jQuery('label[for="'+u.id+'"]'),e=m.length?m.text().trim():"Rich text editor";u.on("init",function(){var a=jQuery("#"+u.id+"_ifr");a.attr("aria-label",e),jQuery("#"+u.id+"-help").length||a.after('<span id="'+u.id+'-help" class="sr-only">Rich text editor. Press ALT+F10 to access toolbar. Press ESC to return to editing area.</span>')})})},i=function(){jQuery('input[type="time"]').each(function(){var l=jQuery(this),u=l.attr("id");if(u&&!jQuery('label[for="'+u+'"]').length){var m="Time",e=l.closest(".form-group").find("label").first();e.length&&(m=e.text().trim()+" time"),l.attr("aria-label",m)}})},y=function(){jQuery(".ticketBox").each(function(){var l=jQuery(this);l.attr("tabindex")||l.attr("tabindex","0");var u=l.find(".ticketHeadline").text().trim();u&&l.attr({role:"article","aria-label":"Task: "+u}),l.data("keyboard-bound")||(l.on("keydown",function(m){var e=jQuery(m.target),a=e.is('a, button, input, select, textarea, [role="button"], [tabindex]')||e.closest(".dropdown-toggle, .ticketDropdown, .inlineDropDownContainer").length>0;if((m.key==="Enter"||m.key===" ")&&!a&&m.target===this){m.preventDefault();var t=l.find("a").first();t.length&&t[0].click()}}),l.data("keyboard-bound",!0))})},d=function(){n(),f(),c(),p(),o(),i(),y(),jQuery(document).on("htmx:afterSwap shown.bs.modal",function(){setTimeout(function(){n(),f(),c(),p(),i(),y()},100)}),jQuery(document).on("chosen:ready",function(){setTimeout(n,100)}),setTimeout(n,1e3)};return{init:d,enhanceChosenAccessibility:n,enhanceSlimSelectAccessibility:f,enhanceTagsInputAccessibility:c,enhanceDatepickerAccessibility:p,enhanceTinyMCEAccessibility:o,fixTimepickerLabels:i,enhanceKanbanCardAccessibility:y}}();jQuery(document).ready(function(){leantime.accessibilityController.init()});
