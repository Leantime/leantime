leantime.authController=function(){var o=function(f){typeof f===void 0&&(f="body"),jQuery(f).find("input").not(".filterBar input").prop("readonly",!0),jQuery(f).find("input").not(".filterBar input").prop("disabled",!0),jQuery(f).find("select").not(".filterBar select, .mainSprintSelector").prop("readonly",!0),jQuery(f).find("select").not(".filterBar select, .mainSprintSelector").prop("disabled",!0),jQuery(f).find("textarea").not(".filterBar textarea").prop("disabled",!0),jQuery(f).find("a.delete").remove(),jQuery(f).find(".quickAddLink").hide(),jQuery(f).find(".complexEditor").length&&jQuery(f).find(".complexEditor").each(function(p){jQuery(this).tinymce()&&jQuery(this).tinymce().getBody().setAttribute("contenteditable","false")}),jQuery(f).find(".tinymceSimple").length&&jQuery(f).find(".tinymceSimple").each(function(p){jQuery(this).tinymce()&&jQuery(this).tinymce().getBody().setAttribute("contenteditable","false")}),jQuery(f).find(".tox-editor-header").hide(),jQuery(f).find(".tox-statusbar").hide(),jQuery(f).find(".ticketDropdown a").removeAttr("data-toggle"),jQuery("#mainToggler").hide(),jQuery(".commentBox").hide(),jQuery(".deleteComment, .replyButton").hide(),jQuery(f).find(".dropdown i").removeClass("fa-caret-down")};return{makeInputReadonly:o}}();leantime.calendarController=function(){var o=function(n){var r=new Date;r.getDate(),r.getMonth(),r.getFullYear();var y=jQuery("body").height()-260,u=jQuery("#calendar").fullCalendar({timeZone:leantime.i18n.__("usersettings.timezone"),height:y,header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay,listDay"},titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:leantime.i18n.__("language.columnFormatMonth"),week:leantime.i18n.__("language.columnFormatWeek"),day:leantime.i18n.__("language.columnFormatday")},timeFormat:{"":leantime.dateHelper.getFormatFromSettings("timeformat","luxon")},isRTL:leantime.i18n.__("language.isRTL")=="false"?0:1,firstDay:leantime.i18n.__("language.firstDayOfWeek"),monthNames:leantime.i18n.__("language.monthNames").split(","),monthNamesShort:leantime.i18n.__("language.monthNamesShort").split(","),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),buttonText:{prev:"&laquo;",next:"&raquo;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:leantime.i18n.__("buttons.today"),month:leantime.i18n.__("buttons.month"),week:leantime.i18n.__("buttons.week"),day:leantime.i18n.__("buttons.day")},select:function(s,d,m){var e=prompt(leantime.i18n.__("label.event_title"));e&&u.fullCalendar("renderEvent",{title:e,start:s,end:d,allDay:m},!0),u.fullCalendar("unselect")},events:n,eventColor:"#0866c6"})},f=function(){jQuery(document).ready(function(){Date.prototype.addDays=function(y){return this.setDate(this.getDate()+y),this},jQuery.datepicker.setDefaults({beforeShow:function(y){if(jQuery(y).attr("readonly"))return!1}});var n=leantime.dateHelper.getFormatFromSettings("dateformat","jquery");from=jQuery("#event_date_from").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(y){to.datepicker("option","minDate",r(this)),jQuery("#event_date_to").val()==""&&jQuery("#event_date_to").val(jQuery("#event_date_from").val())}),to=jQuery("#event_date_to").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){from.datepicker("option","maxDate",r(this))});function r(y){var u;try{u=jQuery.datepicker.parseDate(n,y.value)}catch(s){u=null,console.log(s)}return u}})},p=function(){var n={sizes:{minW:400,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".formModal").nyroModal(n)},beforeClose:function(){location.reload()}},titleFromIframe:!0};jQuery(".exportModal").nyroModal(n)},c=function(n,r){let y=document.querySelector(n),u=leantime.dateHelper.getFormatFromSettings("dateformat","luxon"),s=leantime.dateHelper.getFormatFromSettings("timeformat","luxon");const d=new FullCalendar.Calendar(y,{timeZone:leantime.i18n.__("usersettings.timezone"),height:"calc(100% - 65px)",stickyHeaderDates:!0,initialView:r,eventStartEditable:!0,dayHeaderFormat:u,eventTimeFormat:s,slotLabelFormat:s,views:{multiMonthOneMonth:{type:"multiMonth",duration:{months:1},multiMonthTitleFormat:{month:"long",year:"numeric"},dayHeaderFormat:{weekday:"short"}},timeGridDay:{dayHeaders:!1},listWeek:{listDayFormat:{weekday:"long"},listDaySideFormat:leantime.dateHelper.getFormatFromSettings("dateformat","luxon")}},droppable:!0,eventSources,editable:!0,headerToolbar:!1,nowIndicator:!0,bootstrapFontAwesome:{close:"fa-times",prev:"fa-chevron-left",next:"fa-chevron-right",prevYear:"fa-angle-double-left",nextYear:"fa-angle-double-right"},eventDrop:function(a){a.event.extendedProps.enitityType=="ticket"?jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:a.event.extendedProps.enitityId,editFrom:luxon.DateTime.fromJSDate(a.event.start).toFormat(u),timeFrom:luxon.DateTime.fromJSDate(a.event.start).toFormat(s),editTo:luxon.DateTime.fromJSDate(a.event.end).toFormat(u),timeTo:luxon.DateTime.fromJSDate(a.event.end).toFormat(s)}}):a.event.extendedProps.enitityType=="event"&&jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/calendar",data:{id:a.event.extendedProps.enitityId,dateFrom:a.event.startStr,dateTo:a.event.endStr}})},eventResize:function(a){a.event.extendedProps.enitityType=="ticket"?jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:a.event.extendedProps.enitityId,editFrom:luxon.DateTime.fromJSDate(a.event.start).toFormat(u),timeFrom:luxon.DateTime.fromJSDate(a.event.start).toFormat(s),editTo:luxon.DateTime.fromJSDate(a.event.end).toFormat(u),timeTo:luxon.DateTime.fromJSDate(a.event.end).toFormat(s)}}):a.event.extendedProps.enitityType=="event"&&jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/calendar",data:{id:a.event.extendedProps.enitityId,dateFrom:a.event.startStr,dateTo:a.event.endStr}})},eventReceive:function(a){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:a.event.id,editFrom:luxon.DateTime.fromJSDate(a.event.start).toFormat(u),timeFrom:luxon.DateTime.fromJSDate(a.event.start).toFormat(s),editTo:luxon.DateTime.fromJSDate(a.event.end).toFormat(u),timeTo:luxon.DateTime.fromJSDate(a.event.end).toFormat(s)}})},eventDragStart:function(a){},eventDidMount:function(a){a.isDraggable===!1&&jQuery(a.el).addClass("locked"),a.event.extendedProps.location!=null&&a.event.extendedProps.location!=""&&a.event.extendedProps.location.indexOf("http")==0&&(jQuery(a.el).attr("href",a.event.extendedProps.location),jQuery(a.el).attr("target","_blank"))}});jQuery(document).ready(function(){jQuery("#yourToDoContainer").length>0&&m(jQuery("#yourToDoContainer")[0]),e(),d.scrollToTime(Date.now())});function m(a){var t=a;t&&new FullCalendar.ThirdPartyDraggable(t,{itemSelector:".draggable-todo",mirrorClass:"dragging-mirror",eventDragMinDistance:10,mirrorSelector:function(i){return i.closest(".ticketBox")},eventData:function(i){let l=jQuery(i).data("event");return{id:l.id,title:l.title,color:l.color,enitityType:"ticket",duration:"01:00",url:l.url}}}),d.scrollToTime(Date.now())}function e(){d.setOption("locale",leantime.i18n.__("language.code")),d.render(),d.scrollToTime(Date.now()),jQuery(".minCalendar .fc-prev-button").click(function(){d.prev(),d.getCurrentData()}),jQuery(".minCalendar .fc-next-button").click(function(){d.next()}),jQuery(".minCalendar .fc-today-button").click(function(){d.today()}),jQuery(".minCalendar .calendarViewSelect").on("click",function(a){console.log(jQuery(this).data("value")),d.changeView(jQuery(this).data("value")),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/submenu",data:{submenu:"dashboardCalendarView",state:jQuery(this).data("value")}})}),jQuery(".day-button").on("click",function(){const a=jQuery(this).data("date");d.gotoDate(a),jQuery(".day-button").removeClass("active"),jQuery(this).addClass("active")})}htmx.onLoad(function(a){return a.id=="yourToDoContainer"&&m(a),y})};return{initCalendar:o,initEventDatepickers:f,initExportModal:p,initWidgetCalendar:c}}();leantime.canvasController=function(){var o="",f=function(t){o=t},p=function(){jQuery(window).bind("load",function(){jQuery(".loading").fadeOut(),jQuery(".filterBar .row-fluid").css("opacity","1")})},c=function(){jQuery(".addCanvasLink").nyroModal(),jQuery(".editCanvasLink").click(function(){jQuery("#editCanvas").modal("show")}),jQuery(".cloneCanvasLink").click(function(){jQuery("#cloneCanvas").modal("show")}),jQuery(".mergeCanvasLink").click(function(){jQuery("#mergeCanvas").modal("show")}),jQuery(".importCanvasLink").click(function(){jQuery("#importCanvas").modal("show")})},n=!1,r={sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),n==!0&&(n=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(r)},beforeClose:function(){location.reload()}},titleFromIframe:!0},y=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(r)},u=function(t){jQuery.nmManual(t,r)},s=function(t){t=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),y()),t=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),y()),t=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},d=function(){n=!0},m=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var t=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),t.length==3){var i=t[0],l=t[1];t[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:i,author:l}}).done(function(){jQuery("#userDropdownMenuLink"+i+" span.text span#userImage"+i+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+l),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},e=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var t=jQuery(this).attr("data-value").split("/"),i=jQuery(this).attr("data-label");if(t.length==2){var l=t[0],j=t[1],w=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:l,status:j}}).done(function(){jQuery("#statusDropdownMenuLink"+l+" span.text").text(i),jQuery("#statusDropdownMenuLink"+l).removeClass().addClass(w+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},a=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var t=jQuery(this).attr("data-value").split("/"),i=jQuery(this).attr("data-label");if(t.length==2){var l=t[0],j=t[1],w=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:l,relates:j}}).done(function(){jQuery("#relatesDropdownMenuLink"+l+" span.text").text(i),jQuery("#relatesDropdownMenuLink"+l).removeClass().addClass(w+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCanvasName:f,initFilterBar:p,initCanvasLinks:c,initUserDropdown:m,initStatusDropdown:e,initRelatesDropdown:a,setCloseModal:d,toggleMilestoneSelectors:s,openModalManually:u}}();leantime.clientsController=function(){var o=function(){jQuery(".projectDateFrom, .projectDateTo").datepicker({dateFormat:leantime.i18n.__("language.dateformat"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader")})},f=function(){jQuery(".clientTabs").tabs()},p=function(){jQuery(document).ready(function(){jQuery("#allClientsTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})})};return{initDates:o,initClientTabs:f,initClientTable:p}}();leantime.commentsController=function(){var o=function(){jQuery(".commentBox").show(),jQuery("#comments .replies .commentBox").hide(),jQuery(".deleteComment, .replyButton").show(),jQuery(".commentReply .tinymceSimple").tinymce().getBody().setAttribute("contenteditable","true"),jQuery(".commentReply .tox-editor-header").show(),jQuery(".commenterFields input").prop("readonly",!1),jQuery(".commenterFields input").prop("disabled",!1),jQuery(".commenterFields textarea").prop("readonly",!1),jQuery(".commenterFields textarea").prop("disabled",!1)},f=function(p){p==0?jQuery("#mainToggler").hide():jQuery("#mainToggler").show(),jQuery(".commentBox textarea").remove(),jQuery(".commentBox").hide("fast",function(){}),jQuery("#comment"+p+" .commentReply").prepend('<textarea rows="5" cols="75" name="text" class="tinymceSimple"></textarea>'),leantime.editorController.initSimpleEditor(),jQuery("#comment"+p).show("fast"),jQuery("#father").val(p)};return{enableCommenterForms:o,toggleCommentBoxes:f}}();leantime.cpCanvasController=function(){var o="cp",f=function(){var e=4,a=jQuery("html").height()-320-20*e-5*25,t=a/e;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var i=a/e;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>i&&(i=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",i);var l=a/e;jQuery("#thirdRow div.contentInner").each(function(){jQuery(this).height()>l&&(l=jQuery(this).height()+50)}),jQuery("#thirdRow .column .contentInner").css("height",l);var j=a/e;jQuery("#fourthRow div.contentInner").each(function(){jQuery(this).height()>j&&(j=jQuery(this).height()+50)}),jQuery("#fourthRow .column .contentInner").css("height",j)},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(anvasoptions())},r=function(e){jQuery.nmManual(e,c)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,status:i}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,relates:i}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f}}();leantime.dashboardController=function(){var o={};leantime.theme=="dark"?o={red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(56, 56, 56)"}:o={red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"};var f=function(){var s=moment().startOf("week").add(5,"days");jQuery("#dateToFinish").val(s.format("YYYY-MM-DD"))},p=function(s,d,m){var e={type:"doughnut",data:{datasets:[{data:[d,m],backgroundColor:[leantime.dashboardController.chartColors.green,leantime.dashboardController.chartColors.grey],label:leantime.i18n.__("label.project_done")}],labels:[d+"% Done",m+"% Open"]},options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:""}},animation:{animateScale:!0,animateRotate:!0}}},a=document.getElementById(s).getContext("2d");new Chart(a,e)},c=function(s,d,m){moment.locale(leantime.i18n.__("language.code"));var e={type:"line",data:{labels:s,datasets:[{label:leantime.i18n.__("label.ideal"),backgroundColor:leantime.dashboardController.chartColors.blue,borderColor:leantime.dashboardController.chartColors.blue,data:d,fill:!1,lineTension:0},{label:"Actual",backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:m,fill:!1,lineTension:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},plugins:{legend:{position:"bottom"},title:{display:!1,text:"Line Chart"},tooltips:{mode:"index",intersect:!1}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0}}}}},a=document.getElementById("sprintBurndown").getContext("2d");return _burndownChart=new Chart(a,e),_burndownChart},n=function(s,d,m,e,a){jQuery("#"+s).click(function(t){a.data.datasets[0].data=m,a.data.datasets[1].data=e,a.options.scales.y.title.text=d,jQuery(".chartButtons").removeClass("active"),jQuery(this).addClass("active"),a.update()})},r=function(s,d){moment.locale(leantime.i18n.__("language.code"));var m={type:"line",data:{labels:s,datasets:[{label:leantime.i18n.__("label.done_todos"),backgroundColor:leantime.dashboardController.chartColors.green,borderColor:leantime.dashboardController.chartColors.green,data:d.done.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.progress_todos"),backgroundColor:leantime.dashboardController.chartColors.yellow,borderColor:leantime.dashboardController.chartColors.yellow,data:d.progress.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.new_todos"),backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:d.open.data,fill:!0,lineTension:0,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},elements:{point:{pointStyle:"line",radius:"0"}},plugins:{tooltips:{mode:"index",intersect:!1},legend:{position:"bottom"},title:{display:!1,text:"Line Chart"}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0},stacked:!0}}}},e=document.getElementById("backlogBurndown").getContext("2d");return _burndownChart=new Chart(e,m),_burndownChart},y=function(s,d,m,e){jQuery("#"+s).click(function(a){e.data.datasets[0].data=d.done.data,e.data.datasets[1].data=d.progress.data,e.data.datasets[2].data=d.open.data,e.options.scales.y.title.text=m,jQuery(".backlogChartButtons").removeClass("active"),jQuery(this).addClass("active"),e.update()})},u=function(){jQuery(document).ready(function(){jQuery(".duedates").datepicker({dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),onClose:function(s){var d="";s==""&&jQuery(this).val(leantime.i18n.__("text.anytime"));var m=moment(s,leantime.i18n.__("language.momentJSDate")).format("YYYY-MM-DD HH:mm:ss"),e=jQuery(this).attr("data-id");d=m,leantime.ticketsRepository.updateDueDates(e,d,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated")})})}})})};return{chartColors:o,initBurndown:c,initChartButtonClick:n,initBacklogBurndown:r,initBacklogChartButtonClick:y,initProgressChart:p,prepareHiddenDueDate:f,initDueDateTimePickers:u}}();leantime.dbmCanvasController=function(){var o="dbm",f=function(){var e=3,a=jQuery("html").height()-320-20*e,t=a*.375;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)});var i=a*.375;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>i&&(i=jQuery(this).height()+50)});var l=i*.5;jQuery("#secondRowTop div.contentInner").each(function(){jQuery(this).height()>l&&(l=jQuery(this).height()+50)});var j=i*.5;jQuery("#secondRowBottom div.contentInner").each(function(){jQuery(this).height()>j&&(j=jQuery(this).height()+50)}),l+j+25>i&&(i=l+j+50);var w=a*.25;jQuery("#thirdRow div.contentInner").each(function(){jQuery(this).height()>w&&(w=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t),jQuery("#secondRow .column .contentInner").css("height",i),jQuery("#secondRowTop .column .contentInner").css("height",l),jQuery("#secondRowBottom .column .contentInner").css("height",j),jQuery("#thirdRow .column .contentInner").css("height",w)},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},r=function(e){jQuery.nmManual(e,c)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,status:i}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,relates:i}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f}}();leantime.eaCanvasController=function(){var o="ea",f=function(){var e=2,a=jQuery("html").height()-320-20*e,t=a/e;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var i=a/e;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>i&&(i=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",i)},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},r=function(e){jQuery.nmManual(e,c)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,status:i}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,relates:i}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f}}();leantime.emCanvasController=function(){var o="em",f=function(){var e=4,a=jQuery("html").height()-320-20*e-3*50,t=a/e;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var i=a/e;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>i&&(i=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",i);var l=a/e;jQuery("#thirdRow div.contentInner").each(function(){jQuery(this).height()>l&&(l=jQuery(this).height()+50)}),jQuery("#thirdRow .column .contentInner").css("height",l);var j=a/e;jQuery("#fourthRow div.contentInner").each(function(){jQuery(this).height()>j&&(j=jQuery(this).height()+50)}),jQuery("#fourthRow .column .contentInner").css("height",j)},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},r=function(e){jQuery.nmManual(e,c)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,status:i}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,relates:i}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f}}();var W=W||{};window.SNAKE=W;W.addEventListener=function(){if(window.addEventListener)return function(o,f,p,c){o.addEventListener(f,p,c)};if(window.attachEvent)return function(o,f,p){o.attachEvent("on"+f,p)}}();W.removeEventListener=function(){if(window.removeEventListener)return function(o,f,p,c){o.removeEventListener(f,p,c)};if(window.detachEvent)return function(o,f,p){o.detachEvent("on"+f,p)}}();W.Snake=W.Snake||function(){var o=[],f=function(){this.elm=null,this.elmStyle=null,this.row=-1,this.col=-1,this.xPos=-1e3,this.yPos=-1e3,this.next=null,this.prev=null};function p(c){var n=0,r=0,y;for(y in c)c[y].elm.currentStyle?r=parseFloat(c[y].elm.style["z-index"],10):window.getComputedStyle&&(r=parseFloat(document.defaultView.getComputedStyle(c[y].elm,null).getPropertyValue("z-index"),10)),!isNaN(r)&&r>n&&(n=r);return n+1}return function(c){if(!c||!c.playingBoard)return;localStorage.jsSnakeHighScore===void 0&&localStorage.setItem("jsSnakeHighScore",0);var n=this,r=c.playingBoard,y=5,u=1,s=-1,d=!0,m=!0,e=-1,a=[0,1,0,-1],t=[-1,0,1,0],i=[],l=[],j=80,w=!1,b=!1,D=document.getElementById("selectMode");D&&D.addEventListener("change",function(M){M=M||{};var C=M.target?parseInt(M.target.value):75;(isNaN(C)||C<25)&&(C=75),j=C,setTimeout(function(){document.getElementById("game-area").focus()},10)}),n.snakeBody={},n.snakeBody.b0=new f,n.snakeBody.b0.row=c.startRow||1,n.snakeBody.b0.col=c.startCol||1,n.snakeBody.b0.xPos=n.snakeBody.b0.row*r.getBlockWidth(),n.snakeBody.b0.yPos=n.snakeBody.b0.col*r.getBlockHeight(),n.snakeBody.b0.elm=F(),n.snakeBody.b0.elmStyle=n.snakeBody.b0.elm.style,r.getBoardContainer().appendChild(n.snakeBody.b0.elm),n.snakeBody.b0.elm.style.left=n.snakeBody.b0.xPos+"px",n.snakeBody.b0.elm.style.top=n.snakeBody.b0.yPos+"px",n.snakeBody.b0.next=n.snakeBody.b0,n.snakeBody.b0.prev=n.snakeBody.b0,n.snakeLength=1,n.snakeHead=n.snakeBody.b0,n.snakeTail=n.snakeBody.b0,n.snakeHead.elm.className=n.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),n.snakeHead.elm.id="snake-snakehead-alive",n.snakeHead.elm.className+=" snake-snakebody-alive";function F(){var M=document.createElement("div");return M.className="snake-snakebody-block",M.style.left="-1000px",M.style.top="-1000px",M.style.width=r.getBlockWidth()+"px",M.style.height=r.getBlockHeight()+"px",M}function E(M){for(var C,U=F(),O=1;O<M;O++)C=new f,C.elm=U.cloneNode(!0),C.elmStyle=C.elm.style,r.getBoardContainer().appendChild(C.elm),o[o.length]=C;C=new f,C.elm=U,r.getBoardContainer().appendChild(C.elm),o[o.length]=C}function S(){var M=localStorage.jsSnakeHighScore;n.snakeLength>M&&(alert("Congratulations! You have beaten your previous high score, which was "+M+"."),localStorage.setItem("jsSnakeHighScore",n.snakeLength))}function N(M){S(),n.snakeHead.elm.style.zIndex=p(n.snakeBody),n.snakeHead.elm.className=n.snakeHead.elm.className.replace(/\bsnake-snakebody-alive\b/,""),n.snakeHead.elm.className+=" snake-snakebody-dead",w=!0,M()}n.setPaused=function(M){b=M},n.getPaused=function(){return b},n.handleArrowKeys=function(M){if(w||b&&!c.premoveOnPause)return;n.snakeLength;let C=-1;switch(M){case 37:case 65:C=3;break;case 38:case 87:C=0;break;case 39:case 68:C=1;break;case 40:case 83:C=2;break}e!==u&&(s=C),(Math.abs(C-u)!==2&&(d||b)||m)&&(e=C,d=!1,m=!1)},n.go=function(){var M=n.snakeHead,C=n.snakeTail,U=r.grid;if(b===!0){setTimeout(function(){n.go()},j);return}if(n.snakeTail=C.prev,n.snakeHead=C,U[C.row]&&U[C.row][C.col]&&(U[C.row][C.col]=0),e!==-1&&(u=e,s!==-1&&(e=s,s=-1)),d=!0,C.col=M.col+a[u],C.row=M.row+t[u],C.xPos=M.xPos+i[u],C.yPos=M.yPos+l[u],C.elmStyle||(C.elmStyle=C.elm.style),C.elmStyle.left=C.xPos+"px",C.elmStyle.top=C.yPos+"px",n.snakeLength>1&&(C.elm.id="snake-snakehead-alive",M.elm.id=""),U[C.row][C.col]===0)U[C.row][C.col]=1,setTimeout(function(){n.go()},j);else if(U[C.row][C.col]>0)n.handleDeath();else if(U[C.row][C.col]===r.getGridFoodValue()){if(U[C.row][C.col]=1,!n.eatFood()){n.handleWin();return}setTimeout(function(){n.go()},j)}},n.eatFood=function(){o.length<=y&&E(y*2);for(var M=o.splice(0,y),C=M.length,U,O=n.snakeTail;C--;)U="b"+n.snakeLength++,n.snakeBody[U]=M[C],n.snakeBody[U].prev=O,n.snakeBody[U].elm.className=n.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),n.snakeBody[U].elm.className+=" snake-snakebody-alive",O.next=n.snakeBody[U],O=n.snakeBody[U];if(n.snakeTail=n.snakeBody[U],n.snakeTail.next=n.snakeHead,n.snakeHead.prev=n.snakeTail,!r.foodEaten())return!1;var J=document.getElementById("selectMode"),Z=J.options[J.selectedIndex];return Z.text.localeCompare("Rush")==0&&(j>30?j-=5:j=30),!0},n.handleDeath=function(){var M=document.getElementById("selectMode").value;j=parseInt(M),N(r.handleDeath)},n.handleWin=function(){N(r.handleWin)},n.rebirth=function(){w=!1,d=!0,m=!0,s=-1},n.reset=function(){if(w!==!1){for(var M=[],C=n.snakeHead.next,U;C!==n.snakeHead;)U=C.next,C.prev=null,C.next=null,M.push(C),C=U;n.snakeHead.next=n.snakeHead,n.snakeHead.prev=n.snakeHead,n.snakeTail=n.snakeHead,n.snakeLength=1;for(var O=0;O<M.length;O++)M[O].elm.style.left="-1000px",M[O].elm.style.top="-1000px",M[O].elm.className=n.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),M[O].elm.className+=" snake-snakebody-alive";o.concat(M),n.snakeHead.elm.className=n.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),n.snakeHead.elm.className+=" snake-snakebody-alive",n.snakeHead.elm.id="snake-snakehead-alive",n.snakeHead.row=c.startRow||1,n.snakeHead.col=c.startCol||1,n.snakeHead.xPos=n.snakeHead.row*r.getBlockWidth(),n.snakeHead.yPos=n.snakeHead.col*r.getBlockHeight(),n.snakeHead.elm.style.left=n.snakeHead.xPos+"px",n.snakeHead.elm.style.top=n.snakeHead.yPos+"px"}},E(y*2),i[0]=0,i[1]=r.getBlockWidth(),i[2]=0,i[3]=-1*r.getBlockWidth(),l[0]=-1*r.getBlockHeight(),l[1]=0,l[2]=r.getBlockHeight(),l[3]=0}}();W.Food=W.Food||function(){var o=0;function f(p,c){return Math.floor(Math.random()*(c+1-p))+p}return function(p){if(!(!p||!p.playingBoard)){var c=this,n=p.playingBoard,r,y,u=o++,s=document.createElement("div");s.setAttribute("id","snake-food-"+u),s.className="snake-food-block",s.style.width=n.getBlockWidth()+"px",s.style.height=n.getBlockHeight()+"px",s.style.left="-1000px",s.style.top="-1000px",n.getBoardContainer().appendChild(s),c.getFoodElement=function(){return s},c.randomlyPlaceFood=function(){n.grid[r]&&n.grid[r][y]===n.getGridFoodValue()&&(n.grid[r][y]=0);for(var d=0,m=0,e=0,a=n.grid.length-1,t=n.grid[0].length-1;n.grid[d][m]!==0;)if(d=f(1,a),m=f(1,t),e++,e>2e4)return!1;return n.grid[d][m]=n.getGridFoodValue(),r=d,y=m,s.style.top=d*n.getBlockHeight()+"px",s.style.left=m*n.getBlockWidth()+"px",!0}}}}();W.Board=W.Board||function(){var o=0;function f(n){var r=0,y=0,u;for(u in n)n[u].elm.currentStyle?y=parseFloat(n[u].elm.style["z-index"],10):window.getComputedStyle&&(y=parseFloat(document.defaultView.getComputedStyle(n[u].elm,null).getPropertyValue("z-index"),10)),!isNaN(y)&&y>r&&(r=y);return r+1}function p(){var n=0;return typeof window.innerWidth=="number"?n=window.innerWidth:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?n=document.documentElement.clientWidth:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(n=document.body.clientWidth),n}function c(){var n=0;return typeof window.innerHeight=="number"?n=window.innerHeight:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?n=document.documentElement.clientHeight:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(n=document.body.clientHeight),n}return function(n){var r=this,y=o++,u=n||{},s=250,d=250,m=20,e=20,a=-1,t,i,l=1,j,w=!1,b,D,F,E,S,N,M,C,U;r.grid=[];function O(){D=document.createElement("div"),D.setAttribute("id","playingField"),D.className="snake-playing-field",W.addEventListener(D,"click",function(){b.focus()},!1),U=document.createElement("div"),U.className="snake-pause-screen",U.innerHTML="<div style='padding:10px;'>[Paused]<p/>Press [space] to unpause.</div>",F=document.createElement("div"),F.className="snake-panel-component",F.innerHTML="<a href='http://patorjk.com/blog/software/' class='snake-link'>more patorjk.com apps</a> - <a href='https://github.com/patorjk/JavaScript-Snake' class='snake-link'>source code</a> - <a href='https://www.youtube.com/channel/UCpcCLm9y6CsjHUrCvJHYHUA' class='snake-link'>pat's youtube</a>",E=document.createElement("div"),E.className="snake-panel-component",E.innerHTML="Length: 1",S=document.createElement("div"),S.className="snake-panel-component",S.innerHTML="Highscore: "+(localStorage.jsSnakeHighScore||0),N=le(),M=ue(),C=Q(),W.addEventListener(b,"keyup",function(g){if(!g)var g=window.event;return g.cancelBubble=!0,g.stopPropagation&&g.stopPropagation(),g.preventDefault&&g.preventDefault(),!1},!1),b.className="snake-game-container",U.style.zIndex=1e4,b.appendChild(U),b.appendChild(D),b.appendChild(F),b.appendChild(E),b.appendChild(S),b.appendChild(N),b.appendChild(M),b.appendChild(C),i=new W.Snake({playingBoard:r,startRow:2,startCol:2,premoveOnPause:u.premoveOnPause}),t=new W.Food({playingBoard:r}),N.style.zIndex=1e3}function J(){return s*r.getBlockWidth()}function Z(){return d*r.getBlockHeight()}function le(){var h=document.createElement("div");h.id="sbWelcome"+y,h.className="snake-welcome-dialog";var g=document.createElement("div"),x="";u.fullScreen&&(x="On Windows, press F11 to play in Full Screen mode."),g.innerHTML="JavaScript Snake<p></p>Use the <strong>arrow keys</strong> on your keyboard to play the game. "+x+"<p></p>";var v=document.createElement("button");v.appendChild(document.createTextNode("Play Game"));var k=function(){W.removeEventListener(window,"keyup",T,!1),h.style.display="none",r.setBoardState(1),r.getBoardContainer().focus()},T=function(H){if(!H)var H=window.event;var L=H.which?H.which:H.keyCode;(L===32||L===13)&&k()};return W.addEventListener(window,"keyup",T,!1),W.addEventListener(v,"click",k,!1),h.appendChild(g),h.appendChild(v),h}function oe(h,g,x){var v=document.createElement("div");v.id=g+y,v.className=x;var k=document.createElement("div");k.innerHTML="JavaScript Snake<p></p>"+h+"<p></p>";var T=document.createElement("button");T.appendChild(document.createTextNode("Play Again?"));var B=function(){v.style.display="none",r.resetBoard(),r.setBoardState(1),r.getBoardContainer().focus()},H=function(P){if(!(l!==0||v.style.display!=="block")){if(!P)var P=window.event;var z=P.which?P.which:P.keyCode;(z===32||z===13)&&B()}};return W.addEventListener(window,"keyup",H,!0),W.addEventListener(T,"click",B,!1),v.appendChild(k),v.appendChild(T),v}function ue(){return oe("You died :(","sbTryAgain","snake-try-again-dialog")}function Q(){return oe("You win! :D","sbWin","snake-win-dialog")}function _(h){var g=Math.max(f(i.snakeBody),f({tmp:{elm:t.getFoodElement()}}));b.removeChild(h),b.appendChild(h),h.style.zIndex=g,h.style.display="block",r.setBoardState(0)}r.setPaused=function(h){w=h,i.setPaused(h),w?U.style.display="block":U.style.display="none"},r.getPaused=function(){return w},r.resetBoard=function(){W.removeEventListener(b,"keydown",j,!1),i.reset(),E.innerHTML="Length: 1",r.setupPlayingField()},r.getBoardState=function(){return l},r.setBoardState=function(h){l=h},r.getGridFoodValue=function(){return a},r.getPlayingFieldElement=function(){return D},r.setBoardContainer=function(h){typeof h=="string"&&(h=document.getElementById(h)),h!==b&&(b=h,D=null,r.setupPlayingField())},r.getBoardContainer=function(){return b},r.getBlockWidth=function(){return m},r.getBlockHeight=function(){return e},r.setupPlayingField=function(){D||O();var h,g,x,v;u.fullScreen===!0?(x=0,v=0,h=p()-20,g=c()-20):(x=u.top,v=u.left,h=u.width,g=u.height);var k=r.getBlockWidth()*2+h%r.getBlockWidth(),T=Math.min(J()-k,h-k),B=r.getBlockHeight()*3+g%r.getBlockHeight(),H=Math.min(Z()-B,g-B);b.style.left=v+"px",b.style.top=x+"px",b.style.width=h+"px",b.style.height=g+"px",D.style.left=r.getBlockWidth()+"px",D.style.top=r.getBlockHeight()+"px",D.style.width=T+"px",D.style.height=H+"px";var L=B-r.getBlockHeight(),P=r.getBlockHeight()+H+Math.round((L-30)/2)+"px";F.style.top=P,F.style.width="450px",F.style.left=Math.round(h/2)-Math.round(450/2)+"px",E.style.top=P,E.style.left="30px",S.style.top=P,S.style.left=h-140+"px",h<700?F.style.display="none":F.style.display="block",r.grid=[];for(var z=T/r.getBlockWidth()+2,R=H/r.getBlockHeight()+2,A=0;A<R;A++){r.grid[A]=[];for(var V=0;V<z;V++)V===0||A===0||V===z-1||A===R-1?r.grid[A][V]=1:r.grid[A][V]=0}t.randomlyPlaceFood(),j=function(q){if(!q)var q=window.event;var K=q.which?q.which:q.keyCode;if(r.getBoardState()===1){if(!(K>=37&&K<=40)&&!(K===87||K===65||K===83||K===68))return;W.removeEventListener(b,"keydown",j,!1),j=function(I){if(!I)var I=window.event;var $=I.which?I.which:I.keyCode;return $===32&&r.getBoardState()!=0&&r.setPaused(!r.getPaused()),i.handleArrowKeys($),I.cancelBubble=!0,I.stopPropagation&&I.stopPropagation(),I.preventDefault&&I.preventDefault(),!1},W.addEventListener(b,"keydown",j,!1),i.rebirth(),i.handleArrowKeys(K),r.setBoardState(2),i.go()}return q.cancelBubble=!0,q.stopPropagation&&q.stopPropagation(),q.preventDefault&&q.preventDefault(),!1},W.addEventListener(b,"keydown",j,!1)},r.foodEaten=function(){return E.innerHTML="Length: "+i.snakeLength,i.snakeLength>localStorage.jsSnakeHighScore&&(localStorage.setItem("jsSnakeHighScore",i.snakeLength),S.innerHTML="Highscore: "+localStorage.jsSnakeHighScore),!!t.randomlyPlaceFood()},r.handleDeath=function(){_(M)},r.handleWin=function(){_(C)},u.fullScreen=typeof u.fullScreen>"u"?!1:u.fullScreen,u.top=typeof u.top>"u"?0:u.top,u.left=typeof u.left>"u"?0:u.left,u.width=typeof u.width>"u"?400:u.width,u.height=typeof u.height>"u"?400:u.height,u.premoveOnPause=typeof u.premoveOnPause>"u"?!1:u.premoveOnPause,u.fullScreen&&W.addEventListener(window,"resize",function(){r.setupPlayingField()},!1),r.setBoardState(0),u.boardContainer&&r.setBoardContainer(u.boardContainer)}}();leantime.goalCanvasController=function(){var o="goal",f=function(){var a=2;jQuery("html").height()-320-20*a-25},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},r=function(a){jQuery.nmManual(a,c)},y=function(a){a=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),a=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),a=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var a=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),a.length==3){var t=a[0],i=a[1];a[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,author:i}}).done(function(){jQuery("#userDropdownMenuLink"+t+" span.text span#userImage"+t+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+i),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var a=jQuery(this).attr("data-value").split("/"),t=jQuery(this).attr("data-label");if(a.length==2){var i=a[0],l=a[1],j=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:i,status:l}}).done(function(){jQuery("#statusDropdownMenuLink"+i+" span.text").text(t),jQuery("#statusDropdownMenuLink"+i).removeClass().addClass(j+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var a=jQuery(this).attr("data-value").split("/"),t=jQuery(this).attr("data-label");if(a.length==2){var i=a[0],l=a[1],j=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:i,relates:l}}).done(function(){jQuery("#relatesDropdownMenuLink"+i+" span.text").text(t),jQuery("#relatesDropdownMenuLink"+i).removeClass().addClass(j+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})},e=function(a,t,i){var l={type:"doughnut",data:{datasets:[{data:[t,i],backgroundColor:[leantime.dashboardController.chartColors.green,leantime.dashboardController.chartColors.grey],label:leantime.i18n.__("label.project_done")}],labels:[t+"%"]},options:{maintainAspectRatio:!0,responsive:!0,plugins:{legend:{position:"none"},title:{display:!1,text:"Complete"}},animation:{animateScale:!0,animateRotate:!0}}},j=document.getElementById(a).getContext("2d");_progressChart=new Chart(j,l)};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f,initProgressChart:e}}();leantime.confettiHelper=function(){var o=function(p){const n={...{particleCount:100,spread:70,origin:{y:.6},disableForReducedMotion:!0},...p};typeof confetti=="function"?confetti(n):console.error("Confetti library not loaded")},f=function(){o({particleCount:150,spread:90,origin:{y:.8},colors:["#26a69a","#00bcd4","#4caf50","#8bc34a","#cddc39"]}),setTimeout(function(){o({particleCount:80,spread:120,origin:{y:.7},colors:["#ff9800","#ff5722","#f44336","#e91e63","#9c27b0"]})},500)};return{triggerConfetti:o,celebrateSuccess:f}}();leantime.firstTaskController=function(){var o=function(){jQuery(document).ready(function(){const f=jQuery("#firstTaskOnboarding");f.length>0&&(f.on("submit",function(p){p.preventDefault();const c=jQuery("#firstTask");if(c.val().trim()==="")return c.addClass("error"),!1;c.removeClass("error"),leantime.confettiHelper.celebrateSuccess(),setTimeout(function(){f[0].submit()},1500)}),jQuery("#firstTask").on("input",function(){jQuery(this).removeClass("error")}))})};return{initFirstTaskForm:o}}();jQuery(document).ready(function(){leantime.firstTaskController.initFirstTaskForm()});leantime.helperController=function(){var o=function(m,e){e?leantime.helperRepository.updateUserModalSettings(m,!0):leantime.helperRepository.updateUserModalSettings(m,!1)},f=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.tourFactory.startTour("myWorkDashboard")},p=function(){leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal()},c=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("projectDashboard"),leantime.tourFactory.startTour("projectDashboard")},n=function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("kanbanBoard"),leantime.tourFactory.startTour("kanbanBoard")},r=function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("milestoneView"),leantime.tourFactory.startTour("milestoneView")},y=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("goals"),leantime.tourFactory.startTour("goalsView")},u=function(){jQuery(document).ready(function(){var m={sizes:{minW:700,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".showDialogOnLoad").show(),jQuery(".onboardingModal").nyroModal(m)},beforeClose:function(){location.reload()}}};jQuery(".onboardingModal").nyroModal(m),jQuery.nmManual(leantime.appUrl+"/help/firstLogin",m)})},s=function(m,e,a){jQuery(document).ready(function(){jQuery.nmManual(leantime.appUrl+"/help/showOnboardingDialog?module="+m,{sizes:{minW:e||200,minH:a||500},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){leantime.replaceSVGColors()},afterShowCont:function(){htmx.process(".nyroModalCont")}}})})},d=function(m){leantime.helperRepository.updateUserModalSettings(m),leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal()};return{showHelperModal:s,hideAndKeepHidden:d,setDontShowAgain:o,closeModal:p,startMyWorkDashboardTour:f,startProjectDashboardTour:c,startKanbanTour:n,startMilestoneTour:r,startGoalTour:y,firstLoginModal:u}}();var ne=ne||{};ne.helperRepository=function(){var o=function(c,n=!1){jQuery.ajax({type:"PATCH",url:ne.appUrl+"/api/users",data:{settings:c,permanent:n?1:0,patchModalSettings:1}}).done(function(){})},f=function(){jQuery.ajax({type:"PATCH",url:ne.appUrl+"/api/sessions",data:{tourActive:1}}).done(function(){})},p=function(){jQuery.ajax({type:"PATCH",url:ne.appUrl+"/api/sessions",data:{tourActive:0}}).done(function(){})};return{updateUserModalSettings:o,startingTour:f,stopTour:p}}();leantime.tourFactory=function(){var o=function(r){return new Shepherd.Tour({useModalOverlay:!0,defaultStepOptions:{classes:"shepherd-theme-arrows",scrollTo:!1,cancelIcon:{enabled:!0}},tourName:r})},f=function(r){leantime.helperRepository.updateUserModalSettings(r),typeof _paq<"u"&&_paq.push(["trackEvent","Tour","Completed",r])},p=function(r){return{myWorkDashboard:[{id:"welcome-step",title:" Welcome to the Dashboard Tour",text:"Let's start with a few basics to get you up to speed on the navigation and different elements inside Leantime."},{id:"top-nav-step",title:"Work Modes",text:"The top navigation shows you the current 'work mode' you're in. You can be inside a project, your personal work area, or in the company mode.",attachTo:{element:".work-modes",on:"bottom"}},{id:"menu-step",title:"Left Navigation",text:"The left navigation breaks down the current work mode and gives you access to different areas. Everything presented here is part of the currently selected work mode above.",attachTo:{element:".leftpanel",on:"right"}},{id:"my-menu",title:"My Profile Bar",text:"Here you'll find links to your account as well as notifications and latest news about Leantime.",attachTo:{element:".headmenu.pull-right",on:"bottom"}},{id:"dashboard-widgets",title:"Your Dashboard Widgets",text:"Your dashboard is broken up into various widgets showing you focused information about your work.",attachTo:{element:".primaryContent",on:"top"}},{id:"dashboard-widgets-dandd",title:"Customize Your Dashboard",text:"Widgets can be resized and moved around using the drag and drop functionality.",attachTo:{element:"#widget_wrapper_todos .grid-handler-top",on:"bottom"}},{id:"my-todo-widget",title:"My To-Dos",text:"The My To-Do widget shows you all the tasks that are currently assigned to you.",attachTo:{element:"#widget_wrapper_todos",on:"top"}},{id:"my-todo-widget2",title:"Group To-Dos",text:"You can use the dropdowns here to filter your tasks by project or group them by priority, status, project, or dates.",attachTo:{element:"#yourToDoContainer > .clear",on:"bottom"}},{id:"my-todo-widget4",title:"Sort To-Dos",text:"Each To-Do can be dragged and dropped to change its order. You can also drag and drop a task to the calendar to schedule it.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child",on:"bottom"}},{id:"my-todo-widget-timer",title:"Start the Timer",text:"When you're ready to start working on a task, just click the start timer button.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .timerContainer",on:"bottom"}},{id:"my-todo-widget-complete",title:"Complete a Task",text:"Once a task is complete, you can mark it as done by clicking the status dropdown.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .statusDropdown",on:"bottom"}},{id:"my-todo-widget-add",title:"Add More Tasks",text:"You can add more tasks by clicking the plus button in each section, or by using the 3-dot menu next to each task.",attachTo:{element:"#yourToDoContainer .fa-circle-plus",on:"bottom"}},{id:"finish",title:"Congratulations!",text:"You've completed the My Work dashboard tour. Head to <a href='"+leantime.appUrl+"/dashboard/show'>your project</a> to learn more about project management in Leantime."}],projectDashboard:[{id:"left-nav",title:"Project Menu",text:"The project menu organizes your project into different sections: <strong>Data Room</strong> - to host all your files and information, <strong>Think</strong> - to strategize, ideate and define, <strong>Make</strong> - to manage goals, milestones and tasks.",attachTo:{element:".leftmenu ul",on:"left"}},{id:"project-selector",title:"Project Selector",text:"Use the project selector to jump between projects. The left menu shows everything related to your current project.",attachTo:{element:".bigProjectSelector",on:"bottom"}},{id:"project-checklist",title:"Checklist",text:"The project checklist is a quick reference to see if your project contains all the necessary information for successful execution.",attachTo:{element:"#progressForm",on:"bottom"}},{id:"project-status",title:"Quick Status Updates",text:"You can use status updates to quickly share the progress of your project with your team using red, yellow and green colors. The status will be visible across the application.",attachTo:{element:".project-updates",on:"left"}},{id:"project-progress",title:"Progress",text:"The project progress indicator shows you how much work you have completed. It accounts for various task sizes, team velocity, and project milestones.",attachTo:{element:".project-progress",on:"left"}},{id:"latest-tasks",title:"Latest Tasks",text:"The list of latest tasks shows you the most recent tasks added to your project and can be used as a project inbox.",attachTo:{element:".latest-todos",on:"left"}},{id:"teams",title:"Team",text:"The team box shows you the members of this project.",attachTo:{element:".team-container",on:"top"}},{id:"finished",title:"Congratulations!",text:"You've completed the project dashboard tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>To-Dos</a> to learn more about the various ways to manage your tasks in Leantime."}],kanbanBoard:[{id:"kanban-overview",title:"Your Kanban Board",text:"This is your Kanban board. It helps you visualize your work and limit work-in-progress.",attachTo:{element:".kanban-board-wrapper",on:"top"}},{id:"kanban-columns",title:"Work Flow",text:"Tasks move from left to right as they progress. Drag and drop cards to update their status.",attachTo:{element:".column",on:"right"}},{id:"kanban-columns2",title:"Flexible Columns",text:"Using the 3-dot menu, you can add or remove columns and rename them.",attachTo:{element:".column .widgettitle .inlineDropDownContainer",on:"right"}},{id:"kanban-filter",title:"Filter Tasks",text:"You can filter your tasks by various fields like priority, status, project, or dates.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"kanban-group",title:"Swimlanes",text:"Additionally, you can group your tasks to create Kanban swimlanes. This helps you visualize your work by team members, priority, or milestones.",attachTo:{element:".filterWrapper > .btn-group",on:"bottom"}},{id:"kanban-sprints",title:"Sprints",text:"If you manage your work in sprints, you can use the dropdown here to select, create, and update sprints.",attachTo:{element:".pageheader .dropdown",on:"bottom"}},{id:"kanban-congrats",title:"Congratulations!",text:"This concludes the Kanban tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Milestones</a> to learn how to create and manage milestones in Leantime."}],milestoneView:[{id:"milestone-overview",title:"Milestones",text:"Milestones help you track major outcomes and project phases.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-drag",title:"Drag & Sort",text:"Each bar represents one milestone. You can drag them along the timeline, reorder, and resize them. Everything you do on this screen updates the timing of your milestones.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-filter",title:"Filter",text:"You can filter your milestones and also view tasks that are part of them.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"milestone-timeframes",title:"Timeframes",text:"You can change the timeframe of the timeline view to see more of the year or dive deep into a daily breakdown.",attachTo:{element:".col-md-4 .pull-right",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the milestone tour. Head to the <a href='"+leantime.appUrl+"/goalcanvas/dashboard'>Goals</a> to learn how to create and manage goals in Leantime."}],goalsView:[{id:"goals-overview",title:"Goals",text:"Goals help you track measurable impact on your projects."},{id:"goal-parts",title:"Objectives & Metrics",text:"Each goal is made up of an Objective (what you're trying to accomplish) and a Metric (how you'll measure it).",attachTo:{element:".ticketBox",on:"top"}},{id:"goal-progress",title:"Goal Progress",text:"As you update your goal metrics, the progress bar will show you how far along you are.",attachTo:{element:".ticketBox > .row > .col-md-12 .progress",on:"bottom"}},{id:"milestone-connection",title:"Milestones & Goals",text:"You can connect goals to milestones to track the task-level progress of your goals. This helps identify gaps in your project plan.",attachTo:{element:".ticketBox.fixed",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the goals tour. Milestones, Goals, and To-Dos are the basic building blocks in Leantime. Use them to break down your work into manageable chunks. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Kanban Board</a> to review your tasks."}]}[r]||[]},c=function(r){const y=o(r),u=p(r);return u.forEach((s,d)=>{const m=d===0,e=d===u.length-1,a=[];m||a.push({text:leantime.i18n.__("tour.back"),classes:"shepherd-button-secondary",action:y.back}),e?a.push({text:leantime.i18n.__("tour.finish"),action:function(){f(r),confetti(),y.complete()}}):a.push({text:leantime.i18n.__("tour.next"),action:y.next}),e||a.unshift({text:leantime.i18n.__("tour.cancel"),classes:"shepherd-button-secondary",action:y.cancel}),y.addStep({...s,buttons:a})}),y.on("complete",function(){f(r)}),y},n=function(r){const y=c(r);return y.start(),y};return{createTour:o,buildTour:c,startTour:n,getTourDefinition:p}}();leantime.ideasController=function(){var o=!1,f=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),o==!0&&(o=!1,location.reload())},afterShowCont:function(){jQuery(".ideaModal, #commentForm, #commentForm .deleteComment, .leanCanvasMilestone .deleteMilestone").nyroModal(f())}}}},p=function(){jQuery(".ideaModal, #commentForm, #commentForm .deleteComment, .leanCanvasMilestone .deleteMilestone").nyroModal(f())},c=function(t){jQuery.nmManual(t,f)},n=function(){var t=jQuery("#ideaMason").packery({itemSelector:".ticketBox",columnWidth:260,isResizable:!0});t.imagesLoaded().progress(function(){t.packery("layout")});var i=t.find(".ticketBox").draggable({start:function(w,b){b.helper.addClass("tilt"),l(b.helper)},stop:function(w,b){b.helper.removeClass("tilt"),jQuery("html").unbind("mousemove",b.helper.data("move_handler")),b.helper.removeData("move_handler")}});function l(w){var b=w.position().left,D=function(F){F.pageX>=b?(w.addClass("right"),w.removeClass("left")):(w.addClass("left"),w.removeClass("right")),b=F.pageX};jQuery("html").bind("mousemove",D),w.data("move_handler",D)}t.packery("bindUIDraggableEvents",i);function j(){var w=[],b=t.packery("getItemElements");jQuery(b).each(function(D,F){var E=D+1,S=jQuery(F).attr("data-value");w.push({id:S,sortIndex:E})}),jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/ideas",data:{action:"ideaSort",payload:w}})}t.on("dragItemPositioned",j)},r=function(){},y=function(){jQuery(".mainIdeaContent img").each(function(){jQuery(this).wrap("<a href='"+jQuery(this).attr("src")+"' class='imageModal'></a>")}),jQuery(".imageModal").nyroModal()},u=function(t){t=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),p()),t=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),p()),t=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},s=function(){o=!0},d=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var t=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),t.length==3){var i=t[0],l=t[1];t[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/ideas",data:{id:i,author:l}}).done(function(){jQuery("#userDropdownMenuLink"+i+" span.text span#userImage"+i+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+l),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated")})})}})},m=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var t=jQuery(this).attr("data-value").split("_"),i=jQuery(this).attr("data-label");if(t.length==3){var l=t[0],j=t[1],w=t[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/ideas",data:{id:l,box:j}}).done(function(){jQuery("#statusDropdownMenuLink"+l+" span.text").text(i),jQuery("#statusDropdownMenuLink"+l).removeClass().addClass(""+w+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},e=function(){var t=jQuery("html").height()-320;jQuery("#sortableIdeaKanban .column .contentInner").css("height",t)},a=function(t){jQuery("#sortableIdeaKanban").disableSelection(),jQuery("#sortableIdeaKanban .ticketBox").hover(function(){jQuery(this).css("background","var(--kanban-card-hover)")},function(){jQuery(this).css("background","var(--kanban-card-bg)")}),jQuery("#sortableIdeaKanban .contentInner").sortable({connectWith:".contentInner",items:"> .moveable",tolerance:"pointer",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,cancel:".portlet-toggle",start:function(l,j){j.item.addClass("tilt"),i(j.item)},stop:function(l,j){j.item.removeClass("tilt"),jQuery("html").unbind("mousemove",j.item.data("move_handler")),j.item.removeData("move_handler")},update:function(l,j){for(var w={action:"statusUpdate",payload:{}},b=0;b<t.length;b++)jQuery(".contentInner.status_"+t[b]).length&&(w.payload[t[b]]=jQuery(".contentInner.status_"+t[b]).sortable("serialize"));jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/ideas",data:w})}});function i(l){var j=l.position().left,w=function(b){b.pageX>=j?(l.addClass("right"),l.removeClass("left")):(l.addClass("left"),l.removeClass("right")),j=b.pageX};jQuery("html").bind("mousemove",w),l.data("move_handler",w)}jQuery(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>"),jQuery(".portlet-toggle").click(function(){var l=jQuery(this);l.toggleClass("ui-icon-minusthick ui-icon-plusthick"),l.closest(".portlet").find(".portlet-content").toggle()})};return{setCloseModal:s,toggleMilestoneSelectors:u,openModalManually:c,initMasonryWall:n,initBoardControlModal:r,initWallImageModals:y,initUserDropdown:d,initStatusDropdown:m,setKanbanHeights:e,initIdeaKanban:a}}();leantime.insightsCanvasController=function(){var o="insights",f=function(){var e=1,a=jQuery("html").height()-320-20*e,t=a/e;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t)},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},r=function(e){jQuery.nmManual(e,c)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,status:i}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,relates:i}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f}}();leantime.lbmCanvasController=function(){var o="lbm",f=function(){var e=2,a=jQuery("html").height()-320-20*e,t=a*.666;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var i=a*.333;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>i&&(i=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",i)},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},r=function(e){jQuery.nmManual(e,c)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,status:i}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,relates:i}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f}}();leantime.leanCanvasController=function(){var o="lean",f=function(){var e=3,a=jQuery("html").height()-320-20*e,t=a*.333;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var i=a*.333;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>i&&(i=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",i);var l=a*.333;jQuery("#thirdRow div.contentInner").each(function(){jQuery(this).height()>l&&(l=jQuery(this).height()+50)}),jQuery("#thirdRow .column .contentInner").css("height",l)},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},r=function(e){jQuery.nmManual(e,c)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,status:i}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,relates:i}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f}}();leantime.menuController=function(){var o=function(r){if(r!==""){var y=jQuery("#submenu-"+r).css("display"),u="";y=="none"?(jQuery("#submenu-"+r).css("display","block"),jQuery("#submenu-icon-"+r).removeClass("fa-angle-right"),jQuery("#submenu-icon-"+r).addClass("fa-angle-down"),u="open"):(jQuery("#submenu-"+r).css("display","none"),jQuery("#submenu-icon-"+r).removeClass("fa-angle-down"),jQuery("#submenu-icon-"+r).addClass("fa-angle-right"),u="closed"),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/submenu",data:{submenu:r,state:u}})}},f=function(){jQuery(".project-select").chosen(),jQuery(document).on("click",".projectselector.dropdown-menu",function(y){y.stopPropagation()});let r=localStorage.getItem("currentMenuTab");typeof r>"u"?activeTabIndex=0:activeTabIndex=jQuery(".projectSelectorTabs").find('a[href="#'+r+'"]').parent().index(),jQuery(".projectSelectorTabs").tabs({create:function(y,u){},activate:function(y,u){localStorage.setItem("currentMenuTab",u.newPanel[0].id)},load:function(){},enable:function(){},active:activeTabIndex})},p=function(){window.innerWidth<576&&(jQuery(".mainwrapper").removeClass("menuopen"),jQuery(".mainwrapper").addClass("menuclosed")),jQuery(".barmenu").click(function(){jQuery(".mainwrapper").hasClass("menuopen")?(jQuery(".mainwrapper").removeClass("menuopen"),jQuery(".mainwrapper").addClass("menuclosed"),leantime.menuRepository.updateUserMenuSettings("closed")):(jQuery(".mainwrapper").removeClass("menuclosed"),jQuery(".mainwrapper").addClass("menuopen"),leantime.menuRepository.updateUserMenuSettings("open"))})},c=function(r,y="",u){y==="closed"?(jQuery("#"+u+"-toggler-"+r).removeClass("closed"),jQuery("#"+u+"-toggler-"+r).removeClass("open"),jQuery("#"+u+"-toggler-"+r).addClass("open")):y==="open"&&(jQuery("#"+u+"-toggler-"+r).removeClass("open"),jQuery("#"+u+"-toggler-"+r).removeClass("closed"),jQuery("#"+u+"-toggler-"+r).addClass("closed")),jQuery("#"+u+"-toggler-"+r).hasClass("open")?(jQuery("#"+u+"-toggler-"+r).removeClass("open"),jQuery("#"+u+"-toggler-"+r).addClass("closed"),jQuery("#"+u+"-toggler-"+r).find("i").removeClass("fa-angle-down"),jQuery("#"+u+"-toggler-"+r).find("i").addClass("fa-angle-right"),jQuery("#"+u+"-projectSelectorlist-group-"+r).addClass("closed"),jQuery("#"+u+"-projectSelectorlist-group-"+r).removeClass("open"),n(r,"closed",u)):(jQuery("#"+u+"-toggler-"+r).removeClass("closed"),jQuery("#"+u+"-toggler-"+r).addClass("open"),jQuery("#"+u+"-toggler-"+r).find("i").removeClass("fa-angle-right"),jQuery("#"+u+"-toggler-"+r).find("i").addClass("fa-angle-down"),jQuery("#"+u+"-projectSelectorlist-group-"+r).addClass("open"),jQuery("#"+u+"-projectSelectorlist-group-"+r).removeClass("closed"),n(r,"open",u))};let n=function(r,y,u){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/submenu",data:{submenu:u+"-projectSelectorlist-group-"+r,state:y}})};return{toggleSubmenu:o,initProjectSelector:f,initLeftMenuHamburgerButton:p,updateGroupDropdownSetting:n,toggleProjectDropDownList:c}}();var fe=fe||{};fe.menuRepository=function(){var o=function(f){jQuery.ajax({type:"PATCH",url:fe.appUrl+"/api/sessions",data:{menuState:f}}).done(function(){})};return{updateUserMenuSettings:o}}();leantime.minempathyCanvasController=function(){var o="minempathy",f=function(){var e=3,a=jQuery("html").height()-320-20*e,t=a/e;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var i=a/e;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>i&&(i=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",i);var l=a/e;jQuery("#thirdRow div.contentInner").each(function(){jQuery(this).height()>l&&(l=jQuery(this).height()+50)}),jQuery("#thirdRow .column .contentInner").css("height",l)},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},r=function(e){jQuery.nmManual(e,c)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,status:i}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,relates:i}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f}}();leantime.obmCanvasController=function(){var o="obm",f=function(){var e=3,a=jQuery("html").height()-320-20*e,t=a*.6666;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)});var i=t*.5;jQuery("#firstRowTop div.contentInner").each(function(){jQuery(this).height()>i&&(i=jQuery(this).height()+50)});var l=t*.5;jQuery("#firstRowBottom div.contentInner").each(function(){jQuery(this).height()>l&&(l=jQuery(this).height()+50)}),i+l+25>t&&(t=i+l+50);var j=a*.333;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>j&&(j=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t),jQuery("#firstRowTop div.contentInner").css("height",i),jQuery("#firstRowBottom div.contentInner").css("height",l),jQuery("#secondRow .column .contentInner").css("height",j)},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},r=function(e){jQuery.nmManual(e,c)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,status:i}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,relates:i}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f}}();leantime.projectsController=function(){function o(){jQuery("#sortableTicketKanban .column").each(function(){var w=jQuery(this).find(".moveable").length;jQuery(this).find(" .count").text(w)})}var f=function(){jQuery(".projectDateFrom, .projectDateTo").datepicker({dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader")})},p=function(){jQuery(".projectTabs").tabs()},c=function(){var w={sizes:{minW:450,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".showDialogOnLoad").show(),f(),jQuery(".duplicateProjectModal, .formModal").nyroModal(w)},beforeClose:function(){location.reload()}}};jQuery(".duplicateProjectModal").nyroModal(w)},n=function(w){jQuery("#progressbar").progressbar({value:w})},r=function(){jQuery(document).ready(function(){jQuery("#allProjectsTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})})},y=function(w){var b=1;jQuery(w).find("input.sorter").each(function(D){jQuery(this).val(b),b++}),jQuery(w).sortable({stop:function(D,F){b=1,jQuery(w).find("input.sorter").each(function(E){jQuery(this).val(b),b++})}})},u=function(){jQuery(document).ready(function(){jQuery("#todosettings select.colorChosen").on("chosen:ready",function(w,b){var D=jQuery(this).attr("id").replace("-","_");jQuery("#"+D+"_chosen a span").removeClass(),jQuery("#"+D+"_chosen a span").addClass(b.selected)}).chosen({disable_search_threshold:10}),jQuery("#todosettings select.colorChosen").on("change",function(w,b){var D=jQuery(this).attr("id").replace("-","_");jQuery("#"+D+"_chosen a span").removeClass(),jQuery("#"+D+"_chosen a span").addClass(b.selected)})})},s=function(w){jQuery("#todostatus-"+w).parent().remove()},d=function(w){var b=-1;jQuery("#todosettings ul .statusList").each(function(){var E=jQuery(this).find(".labelKey").val();parseInt(E)>=parseInt(b)&&(b=E)});var D=parseInt(b)+1,F=jQuery(".newStatusTpl").clone();F.html(function(E,S){return updatedContent=S.replaceAll("XXNEWKEYXX",D)}),jQuery("#todoStatusList").append("<li>"+F.html()+"</li>"),jQuery("#todosettings select.colorChosen").chosen("destroy"),leantime.projectsController.initSelectFields(),jQuery("#todoStatusList").sortable("destroy"),leantime.projectsController.initTodoStatusSortable("#todoStatusList")},m=function(w){if(e(),w.files&&w.files[0]){var b=new FileReader,D=jQuery("#projectAvatar");b.onload=function(F){_uploadResult=D.croppie({enableExif:!0,viewport:{width:200,height:200,type:"rectangle"},boundary:{width:250,height:250}}),_uploadResult.croppie("bind",{url:F.currentTarget.result}),jQuery("#previousImage").hide()},b.readAsDataURL(w.files[0])}},e=function(){jQuery("#profileImg").croppie("destroy"),jQuery("#previousImage").show()},a=function(){jQuery("#save-picture").addClass("running"),jQuery("#profileImg").attr("src",leantime.appUrl+"/images/loaders/loader28.gif"),_uploadResult.croppie("result",{type:"blob",circle:!1}).then(function(w){var b=new FormData;b.append("file",w),jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/projects",data:b,processData:!1,contentType:!1,success:function(D){jQuery("#save-picture").removeClass("running"),location.reload()},error:function(D){console.log(D)}})})},t=function(w,b,D){function F(E){return String(E).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}jQuery(document).ready(function(){if(D===!1)var E=new Gantt("#gantt",w,{header_height:55,column_width:20,step:24,view_modes:["Day","Week","Month"],bar_height:40,static_progress_indicator:!0,bar_corner_radius:10,arrow_curve:10,padding:20,view_mode:"Month",date_format:leantime.i18n.__("language.momentJSDate"),language:"en",additional_rows:5,custom_popup_html:function(S){S._end;var N='<div class="details-container" style="min-width:600px;"> ';return S.projectName!==void 0&&(N+="<h3><b>"+S.name+"</b></h3>"),N+="<h4>"+F(S.name)+"</a></h4><br /> ",N+="</div>",N},on_click:function(S){},on_date_change:function(S,N,M){var C=S.id.split("-");let U=0,O="";C.length>1?C[0]=="ticket"?(U=C[1],O="ticket"):C[0]=="pgm"&&(U=C[1],O="project"):U=C,O=="ticket"?leantime.ticketsRepository.updateMilestoneDates(U,N,M,S._index+1):jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/projects",data:{id:U,start:N,end:M,sortIndex:S._index+1}}).done(function(){})},on_sort_change:function(S){for(var N={action:"ganttSort",payload:{}},M=0;M<S.length;M++)N.payload[S[M].id]=S[M]._index+1;jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/projects",data:N})},on_progress_change:function(S,N){},on_view_change:function(S){leantime.usersRepository.updateUserViewSettings("projectGantt",S)},on_popup_show:function(S){}});else var E=new Gantt("#gantt",w,{readonlyGantt:!0,resizing:!1,progress:!1,is_draggable:!1,custom_popup_html:function(N){task._end;var M='<div class="details-container" style="min-width:600px;"> ';return task.projectName!==void 0&&(M+="<h3><b>"+N.name+"</b></h3>"),M+="<h4>"+F(N.name)+"</a></h4><br /> ",M+="</div>",M},on_click:function(N){},on_date_change:function(N,M,C){},on_progress_change:function(N,M){},on_view_change:function(N){leantime.usersRepository.updateUserViewSettings("projectGantt",N)}});jQuery("#ganttTimeControl").on("click","a",function(){var S=jQuery(this),N=S.attr("data-value");E.change_view_mode(N),S.parent().parent().find("a").removeClass("active"),S.addClass("active");var M=S.text();jQuery(".viewText").text(M)}),E.change_view_mode(b)})},i=function(){jQuery(document).ready(function(){o(),jQuery(".filterBar .row-fluid").css("opacity","1");var w=jQuery("html").height()-250;jQuery("#sortableProjectKanban .column .contentInner").each(function(){jQuery(this).height()>w&&(w=jQuery(this).height())}),w=w+50,jQuery("#sortableProjectKanban .column .contentInner").css("min-height",w)})},l=function(w){jQuery("#sortableProjectKanban .projectBox").hover(function(){jQuery(this).css("background","var(--kanban-card-hover)")},function(){jQuery(this).css("background","var(--kanban-card-bg)")}),jQuery("#sortableProjectKanban .contentInner").sortable({connectWith:".contentInner",items:"> .moveable",tolerance:"intersect",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,cancel:".portlet-toggle,:input,a,input",distance:25,start:function(D,F){F.item.addClass("tilt"),b(F.item)},stop:function(D,F){F.item.removeClass("tilt"),jQuery("html").unbind("mousemove",F.item.data("move_handler")),F.item.removeData("move_handler"),o();for(var E={action:"sortIndex",payload:{},handler:F.item[0].id},S=0;S<w.length;S++)jQuery(".contentInner.status_"+w[S]).length&&(E.payload[w[S]]=jQuery(".contentInner.status_"+w[S]).sortable("serialize"));jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/projects",data:E})}});function b(D){var F=D.position().left,E=function(S){S.pageX>=F?(D.addClass("right"),D.removeClass("left")):(D.addClass("left"),D.removeClass("right")),F=S.pageX};jQuery("html").bind("mousemove",E),D.data("move_handler",E)}jQuery(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>"),jQuery(".portlet-toggle").click(function(){var D=jQuery(this);D.toggleClass("ui-icon-minusthick ui-icon-plusthick"),D.closest(".portlet").find(".portlet-content").toggle()})},j=function(w,b){jQuery(b).addClass("go"),jQuery(b).hasClass("isFavorite")?leantime.reactionsController.removeReaction("project",w,"favorite",function(){jQuery(b).find("i").removeClass("fa-solid").addClass("fa-regular"),jQuery(b).removeClass("isFavorite")}):leantime.reactionsController.addReactions("project",w,"favorite",function(){jQuery(b).find("i").removeClass("fa-regular").addClass("fa-solid"),jQuery(b).addClass("isFavorite")})};return{initDates:f,initProjectTabs:p,initProgressBar:n,initProjectTable:r,initDuplicateProjectModal:c,initTodoStatusSortable:y,initSelectFields:u,removeStatus:s,addToDoStatus:d,saveCroppie:a,clearCroppie:e,readURL:m,initGanttChart:t,setUpKanbanColumns:i,initProjectsKanban:l,favoriteProject:j}}();leantime.reactionsController=function(){return{addReactions:function(p,c,n,r){jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/reactions",data:{action:"add",module:p,moduleId:c,reaction:n}}).done(function(){r()})},removeReaction:function(p,c,n,r){jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/reactions",data:{action:"remove",module:p,moduleId:c,reaction:n}}).done(function(){r()})}}}();leantime.retrosCanvasController=function(){var o="retros",f=function(){var e=1,a=jQuery("html").height()-320-20*e,t=a/e;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t)},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},r=function(e){jQuery.nmManual(e,c)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,status:i}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,relates:i}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f}}();leantime.risksCanvasController=function(){var o="risks",f=function(){var e=2,a=jQuery("html").height()-320-20*e,t=a/e;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var i=a/e;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>i&&(i=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",i)},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},r=function(e){jQuery.nmManual(e,c)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,status:i}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,relates:i}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f}}();leantime.sbCanvasController=function(){var o="sb",f=function(){var e=0;jQuery("#stakeholderRow div.contentInner").each(function(){jQuery(this).height()>e&&(e=jQuery(this).height()+35)});var a=0;jQuery("#financialsRow div.contentInner").each(function(){jQuery(this).height()>a&&(a=jQuery(this).height()+35)});var t=0;jQuery("#culturechangeRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+35)}),jQuery("#stakeholderRow .column .contentInner").css("height",e),jQuery("#financialsRow .column .contentInner").css("height",a),jQuery("#culturechangeRow .column .contentInner").css("height",t)},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},r=function(e){jQuery.nmManual(e,c)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,status:i}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,relates:i}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f}}();leantime.settingController=function(){var o,f=function(n){if(p(),n.files&&n.files[0]){var r=new FileReader,y=jQuery("#logoImg");r.onload=function(u){o=y.croppie({enableExif:!0,enforceBoundary:!1,viewport:{width:220,height:40,type:"square"},boundary:{width:400,height:200}}),o.croppie("bind",{url:u.currentTarget.result}),jQuery("#previousImage").hide()},r.readAsDataURL(n.files[0])}},p=function(){jQuery("#logoImg").croppie("destroy"),jQuery("#previousImage").show()},c=function(){jQuery("#save-logo").addClass("running"),jQuery("#logoImg").attr("src",leantime.appUrl+"/images/loaders/loader28.gif"),o.croppie("result",{type:"blob",circle:!1,size:"original",quality:1}).then(function(n){leantime.settingService.saveLogo(n)})};return{readURL:f,clearCroppie:p,saveCroppie:c}}();leantime.settingRepository=function(){var o=function(f){var p=new FormData;p.append("file",f),jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/setting",data:p,processData:!1,contentType:!1,success:function(c){jQuery("#save-logo").removeClass("running"),location.reload()},error:function(c){console.log(c)}})};return{saveLogo:o}}();leantime.settingService=function(){var o=function(f){leantime.settingRepository.saveLogo(f)};return{saveLogo:o}}();leantime.smCanvasController=function(){var o="sm",f=function(){},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},r=function(e){jQuery.nmManual(e,c)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,status:i}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,relates:i}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f}}();leantime.sqCanvasController=function(){var o="sq",f=function(){},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},r=function(e){jQuery.nmManual(e,c)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,status:i}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,relates:i}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f}}();leantime.swotCanvasController=function(){var o="swot",f=function(){var e=2,a=jQuery("html").height()-320-20*e-25,t=a/e;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var i=a/e;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>i&&(i=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",i)},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},r=function(e){jQuery.nmManual(e,c)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,status:i}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,relates:i}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f}}();leantime.kanbanController=function(){var o=function(a){var t=a.closest(".quickaddContainer"),i=t.querySelector("[data-quickadd-form]"),l=i.querySelector("[data-quickadd-input]"),j=t.querySelector(".quickAddLink"),w=i.classList.contains("active");w?(i.classList.remove("active"),i.style.display="none",i.dataset.submitting="false",j.style.display="",j.setAttribute("aria-expanded","false")):(i.classList.add("active"),i.style.display="block",i.dataset.submitting="false",j.style.display="none",j.setAttribute("aria-expanded","true"),l.focus())},f=function(){document.addEventListener("keydown",function(a){var t=a.target;if(t.matches("[data-quickadd-input]")){var i=t.closest("[data-quickadd-form]");if(i.dataset.submitting==="true"){a.preventDefault();return}var l=i.querySelector("[data-stay-open-input]");if(a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),i.dataset.submitting="true",l.value="0",i.submit()),a.key==="Enter"&&a.shiftKey&&(a.preventDefault(),i.dataset.submitting="true",l.value="1",i.submit()),a.key==="Escape"){a.preventDefault();var j=i.closest(".quickaddContainer"),w=j.querySelector(".quickAddLink");o(w),t.value=""}}})},p=function(){document.addEventListener("click",function(a){var t=document.querySelectorAll("[data-quickadd-form].active");t.forEach(function(i){var l=i.closest(".quickaddContainer"),j=l.querySelector(".quickAddLink"),w=i.querySelector("[data-quickadd-input]"),b=i.contains(a.target)||j.contains(a.target);if(i.dataset.submitting!=="true")if(!b&&w.value.trim()!==""){var D=i.querySelector("[data-stay-open-input]");D.value="0",i.dataset.submitting="true",i.submit()}else b||o(j)})})},c=function(a){var t=a.querySelectorAll(".column .contentInner");if(t.length!==0){t.forEach(function(l){l.style.minHeight="",l.style.height=""});var i=0;t.forEach(function(l){var j=l.offsetHeight;j>i&&(i=j)}),i>0&&t.forEach(function(l){l.style.minHeight=i+"px"})}},n=function(a){var t=a.querySelectorAll(".column .contentInner");t.forEach(function(i){i.style.minHeight="",i.style.height=""})},r=function(){requestAnimationFrame(function(){requestAnimationFrame(function(){var a=document.querySelectorAll(".kanban-swimlane-content:not(.collapsed)");a.forEach(function(t){c(t)})})})},y=function(a){var t=document.getElementById("swimlane-row-"+a),i=document.querySelector('.kanban-swimlane-sidebar[data-swimlane-id="'+a+'"]'),l=document.getElementById("swimlane-content-"+a);if(!t||!i||!l){console.error("Swimlane elements not found for ID:",a);return}var j=i.getAttribute("aria-expanded")==="true",w=!j;i.setAttribute("aria-expanded",w.toString());var b=i.querySelector(".kanban-lane-chevron i");b&&(b.className=w?"fa fa-chevron-down":"fa fa-chevron-right"),t.setAttribute("data-expanded",w.toString()),w?(l.classList.remove("collapsed"),c(l)):(l.classList.add("collapsed"),c(l)),jQuery.ajax({url:leantime.appUrl+"/api/submenu",type:"POST",data:{submenu:"swimlane_"+a,state:w?"open":"closed"}})},u=function(){document.addEventListener("keydown",function(a){var t=a.target.closest("[data-swimlane-id]");if(t){var i=t.getAttribute("data-swimlane-id");if((a.key==="Enter"||a.key===" ")&&(a.preventDefault(),y(i)),a.key==="ArrowDown"||a.key==="ArrowUp"){a.preventDefault();var l=Array.from(document.querySelectorAll("[data-swimlane-id]")),j=l.indexOf(t);a.key==="ArrowDown"&&j<l.length-1?l[j+1].focus():a.key==="ArrowUp"&&j>0&&l[j-1].focus()}}})},s=function(){if(!(typeof tippy>"u")){var a={allowHTML:!0,placement:"top",arrow:!0,theme:"light-border",trigger:"mouseenter focus",delay:[500,0]},t=[".status-segment[data-tippy-content]",".time-indicator[data-tippy-content]",".kanban-lane-count[data-tippy-content]",".tshirt-icon[data-tippy-content]",".thermometer-icon[data-tippy-content]",".user-avatar[data-tippy-content]",".type-icon[data-tippy-content]",".sprint-icon[data-tippy-content]",".milestone-icon[data-tippy-content]",".swimlane-header-label[data-tippy-content]"];t.forEach(function(i){var l=document.querySelectorAll(i);l.length>0&&tippy(l,a)})}},d=function(){"ontouchstart"in window&&document.querySelectorAll(".widgettitle").forEach(function(a){a.addEventListener("click",function(t){t.target.closest(".dropdown-toggle, .dropdown-menu")||this.classList.toggle("count-visible")})})},m=function(){var a=document.querySelectorAll(".kanban-swimlane-content.collapsed");a.forEach(function(t){c(t)})},e=function(){var a=document.querySelectorAll(".kanban-swimlane-row");if(a.length!==0&&!(window.innerWidth<=768)){var t=120,i=function(){a.forEach(function(l){var j=l.querySelector(".kanban-swimlane-sidebar"),w=l.querySelector(".kanban-swimlane-sidebar-inner"),b=l.querySelector(".kanban-swimlane-sentinel");if(!(!j||!w||!b)){var D=b.getBoundingClientRect(),F=j.getBoundingClientRect(),E=D.top<t&&F.bottom>t+100;if(E){var S=t-F.top,N=F.height-w.offsetHeight-12;S=Math.min(S,Math.max(0,N)),j.classList.add("is-sticky"),w.style.transform="translateY("+S+"px)"}else j.classList.remove("is-sticky"),w.style.transform=""}})};window.addEventListener("scroll",i,{passive:!0}),i()}};return document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){f(),p(),u(),s(),e(),d(),m(),r()}):(f(),p(),u(),s(),e(),d(),m(),r()),{toggleQuickAdd:o,initQuickAddKeyboard:f,initClickOutsideSave:p,toggleSwimlane:y,initSwimlaneKeyboard:u,initProgressBarTooltips:s,equalizeColumnHeights:c,resetColumnHeights:n,initCollapsedColumnHeights:m,initExpandedColumnHeights:r,initStickySwimlaneSidebars:e,initMobileColumnCountToggle:d}}();leantime.ticketsController=function(){function o(){let Q=[];jQuery(".sortableTicketList").each(function(_){jQuery(this).find(".column").each(function(h){Q[h]===void 0&&(Q[h]=0);var g=jQuery(this).find(".moveable").length;Q[h]+=g})}),jQuery(".widgettitle .count").each(function(_){jQuery(this).text(Q[_])})}function f(){jQuery(".kanban-swimlane-row").each(function(){var Q=jQuery(this),_=Q.attr("id");if(_){_.replace("swimlane-row-","");var h=Q.find(".kanban-swimlane-content"),g=h.find(".moveable").length,x=Q.find(".kanban-swimlane-sidebar");x.find(".kanban-lane-count").text(g);var v=x.attr("aria-label")||"",k=v.replace(/\d+ tasks/,g+" tasks");x.attr("aria-label",k)}}),p()}function p(){jQuery(".kanban-swimlane-row").each(function(){var Q=jQuery(this),_=Q.find(".kanban-swimlane-content"),h=Q.find(".micro-progress-bar .progress-segments");if(h.length){var g={},x=0;_.find(".contentInner").each(function(){var k=jQuery(this),T=k.attr("class")||"",B=T.match(/status_(-?\d+)/);if(B){var H=B[1],L=k.find(".moveable").length;L>0&&(g[H]=L,x+=L)}});var v=h.find(".status-segment");if(x===0){v.css("flex","0 1 0%").find(".segment-count").text(""),v.attr("data-tippy-content","");return}v.each(function(){var k=jQuery(this),T=k.attr("class");if(T){var B=T.match(/status-(-?\d+)/);if(B){var H=B[1],L=g[H]||0,P=L/x*100;k.css("flex",P+" 1 0%");var z=k.find(".segment-count");z.length&&z.text(L>0?L:"");var R=k.attr("data-tippy-content")||"",A=R.match(/^([^:]+):/),V=A?A[1]:"Status "+H;k.attr("data-tippy-content",L>0?V+": "+L:"")}}})}})}var c=function(Q,_){var h=jQuery("#ticket_"+Q);if(!h.length){console.warn("Card not found for ticket ID:",Q);return}var g=h.closest(".contentInner"),x=g.attr("class")||"",v=x.match(/status_(\d+)/);if(!v){console.warn("Could not determine status for ticket:",Q),location.reload();return}var k=v[1],T=jQuery("#kanboard-"+_+" .contentInner.status_"+k);if(!T.length){console.warn("Target swimlane not found:",_,k),location.reload();return}g[0]!==T[0]&&(h.addClass("card-moving-out"),setTimeout(function(){h.detach().appendTo(T),h.removeClass("card-moving-out").addClass("card-moving-in"),o(),f(),T.sortable&&T.sortable("refresh"),setTimeout(function(){h.removeClass("card-moving-in")},300)},200))},n=function(Q,_){var h=jQuery(Q).val();leantime.ticketsRepository.updateRemainingHours(_,h,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.remaining_hours_updated"),style:"success"})})},r=function(Q,_){var h=jQuery(Q).val();leantime.ticketsRepository.updatePlannedHours(_,h,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.planned_hours_updated"),style:"success"})})},y=function(){jQuery(".filterBar").toggle()},u=function(Q,_,h){function g(x){return String(x).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}jQuery(document).ready(function(){if(h===!1)var x=new Gantt("#gantt",Q,{header_height:55,column_width:20,step:24,view_modes:["Day","Week","Month"],bar_height:40,static_progress_indicator:!0,bar_corner_radius:10,arrow_curve:10,padding:20,view_mode:"Month",date_format:leantime.i18n.__("language.momentJSDate"),language:leantime.i18n.__("language.code").slice(0,2),additional_rows:5,custom_popup_html:function(v){var k=v._end,T=jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),new Date(k)),B='<div class="details-container" style="min-width:600px;"> ';return v.projectName!==void 0&&(B+="<h3><b>"+v.projectName+"</b></h3>"),B+="<small>"+v.type+" #"+v.id+" </small>",v.type==="milestone"?B+='<h4><a href="#/tickets/editMilestone/'+v.id+'" >'+g(v.name)+"</a></h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+T+"</strong><br /> "+Math.round(v.progress)+'%</p> <a href="#/tickets/editMilestone/'+v.id+'" ><span class="fa fa-map"></span> '+leantime.i18n.__("links.edit_milestone")+'</a> | <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+v.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":B+='<h4><a href="#/tickets/showTicket/'+v.id+'">'+g(v.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+v.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",B+="</div>",B},on_click:function(v){},on_date_change:function(v,k,T){leantime.ticketsRepository.updateMilestoneDates(v.id,k,T,v._index+1)},on_sort_change:function(v){for(var k={action:"ganttSort",payload:{}},T=0;T<v.length;T++)k.payload[v[T].id]=v[T]._index+1;jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/tickets",data:k})},on_progress_change:function(v,k){},on_view_change:function(v){leantime.usersRepository.updateUserViewSettings("roadmap",v)},on_popup_show:function(v){}});else var x=new Gantt("#gantt",Q,{readonlyGantt:!0,resizing:!1,progress:!1,is_draggable:!1,custom_popup_html:function(k){var T=k._end,B=jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),new Date(T)),H='<div class="details-container" style="min-width:600px;"> ';return k.projectName!==void 0&&(H+="<h3><b>"+k.projectName+"</b></h3>"),H+="<small>"+k.type+" #"+k.id+" </small>",k.type==="milestone"?H+="<h4>"+g(k.name)+"</h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+B+"</strong><br /> "+Math.round(k.progress)+'%</p> <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+k.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":H+='<h4><a href="#/tickets/showTicket/'+k.id+'">'+g(k.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+k.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",H+="</div>",H},on_click:function(k){},on_date_change:function(k,T,B){},on_progress_change:function(k,T){},on_view_change:function(k){leantime.usersRepository.updateUserViewSettings("roadmap",k)}});jQuery("#ganttTimeControl").on("click","a",function(){var v=jQuery(this),k=v.attr("data-value");x.change_view_mode(k),v.parent().parent().find("a").removeClass("active"),v.addClass("active");var T=v.text();jQuery(".viewText").text(T)}),x.change_view_mode(_)})},s=function(){Date.prototype.addDays=function(x){return this.setDate(this.getDate()+x),this},jQuery.datepicker.setDefaults({beforeShow:function(x){if(jQuery(x).attr("readonly"))return!1}});var Q=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),_=jQuery("#sprintStart").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){h.datepicker("option","minDate",g(this));var x=g(this).addDays(13);h.datepicker("setDate",x)}),h=jQuery("#sprintEnd").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){_.datepicker("option","maxDate",g(this))});function g(x){var v;try{v=jQuery.datepicker.parseDate(Q,x.value)}catch(k){v=null,console.log(k)}return v}},d=function(){var Q=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),_=jQuery("#milestoneEditFrom").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){h.datepicker("option","minDate",g(this))}),h=jQuery("#milestoneEditTo").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){_.datepicker("option","maxDate",g(this))});function g(x){var v;try{v=jQuery.datepicker.parseDate(Q,x.value)}catch(k){v=null,console.log(k)}return v}},m=function(){var Q=leantime.dateHelper.getFormatFromSettings("dateformat","jquery");jQuery(".milestoneEditFromAsync").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){var h=jQuery(this).val(),g=jQuery(this).attr("data-id"),x=jQuery(".toDateTicket-"+g);x.datepicker("option","minDate",_(this)),jQuery(".toDateTicket-"+g).val(),leantime.ticketsRepository.updateEditFromDates(g,h,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})})}),jQuery(".milestoneEditToAsync").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){var h=jQuery(this).attr("data-id"),g=jQuery(".fromDateTicket-"+h);g.datepicker("option","maxDate",_(this));var x=jQuery(this).val();jQuery(".fromDateTicket-"+h).val(),leantime.ticketsRepository.updateEditToDates(h,x,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})})});function _(h){var g;try{g=jQuery.datepicker.parseDate(Q,h.value)}catch(x){g=null,console.log(x)}return g}},e=function(){jQuery('[data-toggle="tooltip"]').tooltip()},a=function(){var Q={"0.5":"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"};jQuery(".effortDropdown .dropdown-menu a").unbind().on("click",function(){var _=jQuery(this).attr("data-value").split("_");if(_.length===2){var h=_[0],g=_[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:h,storypoints:g}}).done(function(){jQuery("#effortDropdownMenuLink"+h+" span.text").text(Q[g]),jQuery.growl({message:leantime.i18n.__("short_notifications.effort_updated"),style:"success"}),leantime.kanbanGroupBy==="storypoints"&&c(h,g)})}else console.log("Ticket Controller: Effort data value not set correctly")})},t=function(){var Q={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"};jQuery(".priorityDropdown .dropdown-menu a").unbind().on("click",function(){var _=jQuery(this).attr("data-value").split("_");if(_.length===2){var h=_[0],g=_[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:h,priority:g}}).done(function(){jQuery("#priorityDropdownMenuLink"+h+" span.text").text(Q[g]),jQuery("#priorityDropdownMenuLink"+h).removeClass("priority-bg-1 priority-bg-2 priority-bg-3 priority-bg-4 priority-bg-5"),jQuery("#priorityDropdownMenuLink"+h).addClass("priority-bg-"+g),jQuery("#priorityDropdownMenuLink"+h).parents(".ticketBox").removeClass("priority-border-1 priority-border-2 priority-border-3 priority-border-4 priority-border-5"),jQuery("#priorityDropdownMenuLink"+h).parents(".ticketBox").addClass("priority-border-"+g),jQuery.growl({message:leantime.i18n.__("short_notifications.priority_updated"),style:"success"}),leantime.kanbanGroupBy==="priority"&&c(h,g)})}else console.log("Ticket Controller: Priority data value not set correctly")})},i=function(){jQuery(".milestoneDropdown .dropdown-menu a").unbind().on("click",function(){var Q=jQuery(this).attr("data-value").split("_"),_=jQuery(this).attr("data-label");if(Q.length===3){var h=Q[0],g=Q[1],x=Q[2];jQuery("#milestoneDropdownMenuLink"+h+" span.text").append(" ..."),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:h,milestoneid:g}}).done(function(){jQuery("#milestoneDropdownMenuLink"+h+" span.text").text(_),jQuery("#milestoneDropdownMenuLink"+h).css("backgroundColor",x),jQuery.growl({message:leantime.i18n.__("short_notifications.milestone_updated"),style:"success"}),leantime.kanbanGroupBy==="milestoneid"&&c(h,g)})}})},l=function(){jQuery(".statusDropdown .dropdown-menu a").unbind().on("click",function(){var Q=jQuery(this).attr("data-value").split("_"),_=jQuery(this).attr("data-label");if(Q.length==3){var h=Q[0],g=Q[1],x=Q[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:h,status:g}}).done(function(v){jQuery("#statusDropdownMenuLink"+h+" span.text").text(_),jQuery("#statusDropdownMenuLink"+h).removeClass().addClass(x+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated"),style:"success"}),leantime.handleAsyncResponse(v)})}})},j=function(){jQuery(".userDropdown .dropdown-menu a").unbind().on("click",function(){var Q=jQuery(this).attr("data-value").split("_"),_=jQuery(this).attr("data-label");if(Q.length===3){var h=Q[0],g=Q[1];Q[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:h,editorId:g}}).done(function(){jQuery("#userDropdownMenuLink"+h+" span.text span#userImage"+h+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+g),jQuery("#userDropdownMenuLink"+h+" span.text span#user"+h).text(_),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"}),leantime.kanbanGroupBy==="editorId"&&c(h,g)})}})},w=function(){jQuery(".asyncInputUpdate").on("change",function(){var Q=jQuery(this).attr("data-label").split("-");if(Q.length==2){var _=Q[0],h=Q[1],g=jQuery(this).val();jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:h,[_]:g}}).done(function(){jQuery.growl({message:leantime.i18n.__("notifications.subtask_saved"),style:"success"})})}})},b=function(){jQuery(".sprintDropdown .dropdown-menu a").unbind().on("click",function(){var Q=jQuery(this).attr("data-value").split("_"),_=jQuery(this).attr("data-label");if(Q.length==2){var h=Q[0],g=Q[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:h,sprint:g}}).done(function(){jQuery("#sprintDropdownMenuLink"+h+" span.text").text(_),jQuery.growl({message:leantime.i18n.__("short_notifications.sprint_updated"),style:"success"}),leantime.kanbanGroupBy==="sprint"&&c(h,g)})}})},D=function(){var Q=["#821219","#BB1B25","#75BB1B","#4B7811","#fdab3d","#1bbbb1","#006d9f","#124F7D","#082236","#5F0F40","#bb1b75","#F26CA7","#BB611B","#aaaaaa","#4c4c4c"];jQuery("input.simpleColorPicker").simpleColorPicker({colors:Q,onChangeColor:function(h){jQuery(this).css("background",h),jQuery(this).css("color","#fff")}});var _=jQuery("input.simpleColorPicker").val();_!=""&&jQuery("input.simpleColorPicker").css("background",_)},F=function(){jQuery(".date-picker-form-control .reset-button").on("click",function(){const Q=jQuery(this).attr("data-id");jQuery("#due-date-picker-"+Q).val(leantime.i18n.__("text.anytime")),leantime.ticketsRepository.updateDueDates(Q,null,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})})}),leantime.dateController.initDatePicker(".quickDueDates, .duedates",function(Q,_){var h=_.currentDay,g=_.currentMonth,x=_.currentYear,v=new Date(x,g,h),k=jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),v),T=jQuery(this).attr("data-id");leantime.ticketsRepository.updateDueDates(T,k,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})})})},E=function(Q,_,h,g){var x=document.getElementById(g).getContext("2d");new Chart(x,{type:"line",data:{labels:Q,datasets:[{label:leantime.i18n.__("label.booked_hours"),backgroundColor:"rgba(201,48,44, 0.5)",borderColor:"rgb(201,48,44)",data:_},{label:leantime.i18n.__("label.planned_hours"),backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgb(54, 162, 235)",data:h}]},options:{scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.booked_hours")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.planned_hours")},ticks:{beginAtZero:!0}}}}})},S=function(){jQuery(document).ready(function(){let Q=new URL(window.location.href),_=Q.searchParams.get("tab"),h=0;_&&(h=jQuery(".ticketTabs").find('a[href="#'+_+'"]').parent().index()),jQuery(".ticketTabs").tabs({create:function(g,x){jQuery(".ticketTabs").css("visibility","visible")},activate:function(g,x){Q=new URL(window.location.href),Q.searchParams.set("tab",x.newPanel[0].id),window.history.replaceState(null,null,Q)},load:function(){},enable:function(){},active:h})})},N=function(Q){jQuery("#ticketSearch").on("submit",function(_){_.preventDefault();var h=jQuery("#projectIdInput").val(),g=jQuery("#userSelect").val(),x=jQuery("#milestoneSelect").val(),v=jQuery("#termInput").val(),k=jQuery("#sprintSelect").val(),T=jQuery("#typeSelect").val(),B=jQuery("#prioritySelect").val(),H=jQuery("#statusSelect").val(),L=jQuery("#sortBySelect").val(),P=jQuery("input[name='groupBy']:checked").val(),z=jQuery("input[name='showTasks']:checked").val(),R="?search=true";h!=""&&h!=null&&(R=R+"&projectId="+h),g!=""&&g!=null&&(R=R+"&users="+g),x!=""&&x!=null&&(R=R+"&milestone="+x),v!=""&&v!=null&&(R=R+"&term="+v),k!=""&&k!=null&&(R=R+"&sprint="+k),T!=""&&T!=null&&(R=R+"&type="+T),B!=""&&B!=null&&(R=R+"&priority="+B),H!=""&&H!=null&&(R=R+"&status="+H),L!=""&&L!=null&&(R=R+"&sort="+L),P!=""&&P!=null&&(R=R+"&groupBy="+P),z!=""&&z!=null&&(R=R+"&showTasks="+z);var A=Q+R;window.location.href=A})},M=function(Q){var _=jQuery("#projectIdInput").val(),h=jQuery("#userSelect").val(),g=jQuery("#milestoneSelect").val(),x=jQuery("#termInput").val(),v=jQuery("#sprintSelect").val(),k=jQuery("#typeSelect").val(),T=jQuery("#prioritySelect").val(),B=jQuery("#statusSelect").val(),H=jQuery("#sortBySelect").val(),L=jQuery("input[name='groupBy']:checked").val(),P="?search=true";_!=""&&_!=null&&(P=P+"&projectId="+_),h!=""&&h!=null&&(P=P+"&users="+h),g!=""&&g!=null&&(P=P+"&milestone="+g),x!=""&&x!=null&&(P=P+"&term="+x),v!=""&&v!=null&&(P=P+"&sprint="+v),k!=""&&k!=null&&(P=P+"&type="+k),T!=""&&T!=null&&(P=P+"&priority="+T),B!=""&&B!=null&&(P=P+"&status="+B),H!=""&&H!=null&&(P=P+"&sort="+H),L!=""&&L!=null&&(P=P+"&groupBy="+L);var z=Q+P;window.location.href=z},C=function(){jQuery(document).ready(function(){o(),f(),jQuery(".filterBar .row-fluid").css("opacity","1"),jQuery(".sortableTicketList").each(function(){let Q=jQuery(this).attr("id");var _=jQuery(this).closest(".kanban-swimlane-row");if(_.length&&_.attr("data-expanded")==="false")return;let h=250;jQuery(this).find(".column .contentInner").each(function(){jQuery(this).height()>h&&(h=jQuery(this).height())}),jQuery("#"+Q+" .column .contentInner").css("height",h)})})},U=function(Q){var _=Q;jQuery(".sortableTicketList.kanbanBoard .ticketBox").hover(function(){jQuery(this).css("background","var(--kanban-card-hover)")},function(){jQuery(this).css("background","var(--kanban-card-bg)")}),jQuery(".sortableTicketList").each(function(){var g=this;jQuery(g).find(".contentInner").sortable({connectWith:".contentInner",items:"> .moveable",tolerance:"intersect",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,cancel:".portlet-toggle,:input,a,input",distance:10,start:function(x,v){v.item.addClass("tilt"),h(v.item);var k=v.item.closest(".sortableTicketList.kanbanBoard");v.item.data("originalSwimlaneId",k.attr("id"))},stop:function(x,v){v.item.removeClass("tilt"),jQuery("html").unbind("mousemove",v.item.data("move_handler")),v.item.removeData("move_handler"),o(),f(),jQuery(".sortableTicketList").find(".contentInner").each(function(){var G=jQuery(this),pe=G.find(".moveable").length>0;if(pe){G.removeClass("empty-column"),G.attr("data-empty-text","");var Le=G.attr("aria-label")||"";G.attr("aria-label",Le.replace("Empty column","")+" column items")}else G.addClass("empty-column"),G.attr("data-empty-text","Empty"),G.attr("aria-label","Empty column")});var k=v.item.closest(".sortableTicketList.kanbanBoard"),T=k.attr("id"),B=v.item.data("originalSwimlaneId");if(B&&T&&B!==T){var H=v.item[0].id.replace("ticket_",""),L=T.replace("kanboard-",""),P={milestoneid:"milestoneid",editorId:"editorId",priority:"priority",storypoints:"storypoints",sprint:"sprint",dueDate:"dateToFinish"},z=leantime.kanbanGroupBy,R=P[z];if(z==="dueDate"){var A=new Date;switch(A.setHours(12,0,0,0),L){case"0":var V=new Date(A);V.setDate(V.getDate()-1),L=V.toISOString().split("T")[0];break;case"1":var ie=new Date(A),q=6-ie.getDay();q<0&&(q=0),ie.setDate(ie.getDate()+q),L=ie.toISOString().split("T")[0];break;case"2":var K=new Date(A),Ce=6-K.getDay()+7;K.setDate(K.getDate()+Ce),L=K.toISOString().split("T")[0];break;case"3":var I=new Date(A);I.setDate(I.getDate()+21),L=I.toISOString().split("T")[0];break;case"4":L="";break}}if(R&&H){var $=jQuery("#ticket_"+H);if(z==="milestoneid"){var ee=jQuery("#swimlane-row-"+L+" .swimlane-header-label"),xe=ee.text()||leantime.i18n.__("label.no_milestone"),ye=$.find(".milestoneDropdown .dropdown-toggle .text");ye.length&&ye.text(xe);var de=$.find('.milestoneDropdown .dropdown-menu a[data-value^="'+H+"_"+L+'_"]'),te="#b0b0b0";if(de.length&&L!=="0"&&L!==""){var he=de.attr("data-value");if(he){var ge=he.split("_");ge.length>=3&&(te=ge.slice(2).join("_"))}if(!te||te==="#b0b0b0"){var ve=de.attr("style");if(ve){var je=ve.match(/background-color:\s*([^;]+)/i);je&&(te=je[1].trim())}}}$.find(".milestoneDropdown .dropdown-toggle").css("background-color",te)}else if(z==="priority"){$.removeClass(function(G,pe){return(pe.match(/(^|\s)priority-border-\S+/g)||[]).join(" ")}).addClass("priority-border-"+L);var Me={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"},re=jQuery("#priorityDropdownMenuLink"+H);re.length&&(re.find("span.text").text(Me[L]||L),re.removeClass("priority-bg-1 priority-bg-2 priority-bg-3 priority-bg-4 priority-bg-5"),re.addClass("priority-bg-"+L))}else if(z==="editorId"){var ce=jQuery("#userDropdownMenuLink"+H);if(ce.length){ce.find("span.text span img").attr("src",leantime.appUrl+"/api/users?profileImage="+L);var ee=jQuery("#swimlane-row-"+L+" .swimlane-header-label"),Te=ee.text()||leantime.i18n.__("label.not_assigned");ce.find("span.text span#user"+H).text(Te)}}else if(z==="storypoints"){var De={"0.5":"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"},we=jQuery("#effortDropdownMenuLink"+H);we.length&&we.find("span.text").text(De[L]||L)}else if(z==="sprint"){var be=jQuery("#sprintDropdownMenuLink"+H);if(be.length){var ee=jQuery("#swimlane-row-"+L+" .swimlane-header-label"),Se=ee.text()||leantime.i18n.__("label.backlog");be.find("span.text").text(Se)}}else if(z==="dueDate"){var se=$.find(".dues .fa-calendar").parent();if(se.length&&L){var me=L.split("-"),He=me[1]+"/"+me[2]+"/"+me[0];se.contents().filter(function(){return this.nodeType===3}).first().replaceWith(" "+He)}else se.length&&!L&&se.contents().filter(function(){return this.nodeType===3}).first().replaceWith(" No due date")}jQuery.growl({message:"To-Do Updated",style:"success"});var Qe={id:H};Qe[R]=L,jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:Qe}).fail(function(){jQuery.growl({message:leantime.i18n.__("short_notifications.not_saved")||"Error updating ticket",style:"error"}),location.reload()})}}v.item.removeData("originalSwimlaneId");for(var _e=v.item.closest(".sortableTicketList"),ke={action:"kanbanSort",payload:{},handler:v.item[0].id},ae=0;ae<_.length;ae++)_e.find(".contentInner.status_"+_[ae]).length&&(ke.payload[_[ae]]=_e.find(".contentInner.status_"+_[ae]).sortable("serialize"));jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/tickets",data:ke}).done(function(G){leantime.handleAsyncResponse(G)})}})});function h(g){var x=g.position().left,v=function(k){k.pageX+5>x?(g.addClass("right"),g.removeClass("left")):k.pageX<x+5?(g.addClass("left"),g.removeClass("right")):(g.removeClass("left"),g.removeClass("right")),x=k.pageX};jQuery("html").bind("mousemove",v),g.data("move_handler",v)}jQuery(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>"),jQuery(".portlet-toggle").click(function(){var g=jQuery(this);g.toggleClass("ui-icon-minusthick ui-icon-plusthick"),g.closest(".portlet").find(".portlet-content").toggle()})},O=function(Q){function _(h){return!isNaN(parseFloat(h))&&isFinite(h)}jQuery(document).ready(function(){var h=[],g=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom">p<"clear">',searching:!1,stateSave:!0,displayLength:100,order:h,columnDefs:[{visible:!1,targets:10},{visible:!1,targets:11},{target:"no-sort",orderable:!1}],footerCallback:function(x,v,k,T,B){var H=this.api(),L=H.column(10).data().reduce(function(R,A){return _(R)===!1&&(R=jQuery(R).val()),_(A)===!1&&(A=jQuery(A).val()),isNaN(R)&&(R=0),isNaN(A)&&(A=0),parseFloat(R)+parseFloat(A)},0),P=H.column(11).data().reduce(function(R,A){return _(R)===!1&&(R=jQuery(R).val()),_(A)===!1&&(A=jQuery(A).val()),isNaN(R)&&(R=0),isNaN(A)&&(A=0),parseFloat(R)+parseFloat(A)},0),z=H.column(12).data().reduce(function(R,A){return parseFloat(R)+parseFloat(A)},0);jQuery(H.column(9).footer()).html("Total"),jQuery(H.column(10).footer()).html(L),jQuery(H.column(11).footer()).html(P),jQuery(H.column(12).footer()).html(z)}});new jQuery.fn.dataTable.Buttons(g.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(x,v,k,T){return typeof jQuery(T).data("order")<"u"&&(x=jQuery(T).data("order")),x}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(jQuery("#tableButtons")),g.table(0).on("column-visibility",function(x,v,k,T){for(var B=1;B<g.tables().context.length;B++)g.tables(B).column(k).visible(T);g.draw()}),jQuery(".ticketTable input").on("change",function(x,v,k,T){jQuery(this).parent().attr("data-order",jQuery(this).val()),g.draw()})})},J=function(Q){jQuery(document).ready(function(){var _=[];jQuery(".listStyleTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"<"center"p>><"clear">',searching:!1,stateSave:!0,displayLength:25,order:_,fnDrawCallback:function(h){h._iDisplayLength>h.fnRecordsDisplay()?jQuery(h.nTableWrapper).find(".dataTables_paginate").hide():jQuery(h.nTableWrapper).find(".dataTables_paginate").show()}})})},Z=function(Q){jQuery(document).ready(function(){var _=[],h=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"><"clear">',searching:!1,stateSave:!0,displayLength:100,order:_,columnDefs:[{visible:!1,targets:7},{visible:!1,targets:8},{target:"no-sort",orderable:!1}]});new jQuery.fn.dataTable.Buttons(h.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(g,x,v,k){return typeof jQuery(k).data("order")<"u"&&(g=jQuery(k).data("order")),g}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(jQuery("#tableButtons")),h.table(0).on("column-visibility",function(g,x,v,k){for(var T=1;T<h.tables().context.length;T++)h.tables(T).column(v).visible(k);h.draw()}),jQuery(".ticketTable input").on("change",function(g,x,v,k){jQuery(this).parent().attr("data-order",jQuery(this).val()),h.draw()})})},le=function(Q,_){jQuery("textarea.complexEditor").length>0&&jQuery("textarea.complexEditor").tinymce()!==null&&(jQuery("textarea.complexEditor").tinymce().save(),jQuery("textarea.complexEditor").tinymce().remove()),jQuery(".ticketRows").removeClass("active"),jQuery("#row-"+Q).addClass("active"),jQuery(_).html("<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px' /></div>");function h(g){jQuery(g).find("form").each(function(){jQuery(this).on("submit",function(x){x.preventDefault(),jQuery("textarea.complexEditor").length>0&&jQuery("textarea.complexEditor").tinymce()!==null&&(jQuery("textarea.complexEditor").tinymce().save(),jQuery("textarea.complexEditor").tinymce().remove()),jQuery(g).html("<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px'/></div>");var v=jQuery(this).serialize();jQuery.ajax({url:jQuery(this).attr("action"),data:v,type:"post",success:function(k){jQuery(g).html(k),h(g)},error:function(){}})})})}jQuery.get(leantime.appUrl+"/tickets/showTicket/"+Q,function(g){jQuery(_).html(g),h(_)})},oe=function(){jQuery("#tags").tagsInput({autocomplete_url:leantime.appUrl+"/api/tags"}),jQuery("#tags_tag").on("focusout",function(){let Q=jQuery(this).val();Q!=""&&jQuery("#tags").addTag(Q)})},ue=function(Q,_){var h="Discussion on To-Do #"+_+`:
\r`+jQuery("#commentText-"+Q).text();jQuery('li a[href*="timesheet"]').click(),jQuery("#timesheet #description").val(h)};return{toggleFilterBar:y,initGanttChart:u,updateRemainingHours:n,updatePlannedHours:r,initTimeSheetChart:E,initTicketTabs:S,initTicketSearchSubmit:N,initTicketKanban:U,initTicketsTable:O,initEffortDropdown:a,initPriorityDropdown:t,initMilestoneDropdown:i,initStatusDropdown:l,initUserDropdown:j,initSprintDropdown:b,initToolTips:e,initTagsInput:oe,initMilestoneDatesAsyncUpdate:m,initAsyncInputChange:w,initDueDateTimePickers:F,setUpKanbanColumns:C,addCommentTimesheetContent:ue,initMilestoneTable:Z,initMilestoneDates:d,initTicketsList:J,loadTicketToContainer:le,initTicketSearchUrlBuilder:M,initSprintDates:s,initSimpleColorPicker:D}}();var X=X||{};X.ticketsRepository=function(){var o=function(y,u,s,d){let m=X.dateHelper.getFormatFromSettings("dateformat","luxon"),e=X.dateHelper.getFormatFromSettings("timeformat","luxon"),a=luxon.DateTime.fromSQL(u).toFormat(m),t=luxon.DateTime.fromSQL(u).toFormat(e),i=luxon.DateTime.fromSQL(s).toFormat(m),l=luxon.DateTime.fromSQL(s).toFormat(e);jQuery.ajax({type:"PATCH",url:X.appUrl+"/api/tickets",data:{id:y,editFrom:a,editTo:i,timeFrom:t,timeTo:l,sortIndex:d}}).done(function(){})},f=function(y,u,s){jQuery.ajax({type:"PATCH",url:X.appUrl+"/api/tickets",data:{id:y,hourRemaining:u}}).done(function(){s()})},p=function(y,u,s){jQuery.ajax({type:"PATCH",url:X.appUrl+"/api/tickets",data:{id:y,planHours:u}}).done(function(){s()})},c=function(y,u,s){jQuery.ajax({type:"PATCH",url:X.appUrl+"/api/tickets",data:{id:y,dateToFinish:u}}).done(function(){s()})},n=function(y,u,s){jQuery.ajax({type:"PATCH",url:X.appUrl+"/api/tickets",data:{id:y,editFrom:u}}).done(function(){s()})},r=function(y,u,s){jQuery.ajax({type:"PATCH",url:X.appUrl+"/api/tickets",data:{id:y,editTo:u}}).done(function(){s()})};return{updateMilestoneDates:o,updateRemainingHours:f,updatePlannedHours:p,updateDueDates:c,updateEditFromDates:n,updateEditToDates:r}}();leantime.timesheetsController=function(){var o=function(p){jQuery(document).ready(function(){var c=jQuery("#allTimesheetsTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,stateSave:!0,displayLength:100});new jQuery.fn.dataTable.Buttons(c,{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(n,r,y,u){return typeof jQuery(u).data("order")<"u"&&(n=jQuery(u).data("order")),n}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(jQuery("#tableButtons")),jQuery("#allTimesheetsTable").on("column-visibility.dt",function(n,r,y,u){c.draw(!1)})})},f=function(){var p={sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show()},afterShowCont:function(){jQuery(".editTimeModal").nyroModal(p)},beforeClose:function(){location.reload()}},titleFromIframe:!0};jQuery(".editTimeModal").nyroModal(p)};return{initTimesheetsTable:o,initEditTimeModal:f}}();leantime.usersController=function(){var o=function(u){if(f(),u.files&&u.files[0]){var s=new FileReader,d=jQuery("#profileImg");s.onload=function(m){_uploadResult=d.croppie({enableExif:!0,viewport:{width:175,height:175,type:"circle"},boundary:{width:200,height:200}}),_uploadResult.croppie("bind",{url:m.currentTarget.result}),jQuery("#previousImage").hide()},s.readAsDataURL(u.files[0])}},f=function(){jQuery("#profileImg").croppie("destroy"),jQuery("#previousImage").show()},p=function(){jQuery("#save-picture").addClass("running"),jQuery("#profileImg").attr("src",leantime.appUrl+"/images/loaders/loader28.gif"),_uploadResult.croppie("result",{type:"blob",circle:!0}).then(function(u){leantime.usersService.saveUserPhoto(u)})},c=function(){jQuery(document).ready(function(){jQuery("#allUsersTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})})},n=function(){var u={sizes:{minW:400,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".showDialogOnLoad").show(),jQuery(".userImportModal").nyroModal(u)}}};jQuery(".userImportModal").nyroModal(u)},r=function(){var u={sizes:{minW:900,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".showDialogOnLoad").show(),jQuery(".userEditModal").nyroModal(u)},beforeClose:function(){location.reload()}}};jQuery(".userEditModal").nyroModal(u)},y=function(u){let s,d=document.getElementById(u),m=document.getElementById("pwStrength"),e=new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})"),a=new RegExp("((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))");function t(i){e.test(i)?(m.style.backgroundColor="#107530",m.textContent=leantime.i18n.__("label.strong")):a.test(i)?(m.style.backgroundColor="#C5850D",m.textContent=leantime.i18n.__("label.medium")):(m.style.backgroundColor="#CC6B6B",m.textContent=leantime.i18n.__("label.weak"))}d.addEventListener("input",()=>{m.style.display="block",clearTimeout(s),s=setTimeout(()=>t(d.value),500),d.value.length!==0?m.style.display!="block":m.style.display="none"})};return{readURL:o,clearCroppie:f,saveCroppie:p,initUserTable:c,_initModals:n,checkPWStrength:y,initUserEditModal:r}}();leantime.usersRepository=function(){var o=function(p){var c=new FormData;c.append("file",p),jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/users",data:c,processData:!1,contentType:!1,success:function(n){jQuery("#save-picture").removeClass("running"),location.reload()},error:function(n){console.log(n)}})},f=function(p,c){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/users",data:{patchViewSettings:p,value:c}}).done(function(){})};return{saveUserPhoto:o,updateUserViewSettings:f}}();leantime.usersService=function(){var o=function(f){leantime.usersRepository.saveUserPhoto(f)};return{saveUserPhoto:o}}();leantime.valueCanvasController=function(){var o="value",f=function(){var e=3,a=jQuery("html").height()-320-20*e,t=a*.333;jQuery("#firstRow div.contentInner").each(function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}),jQuery("#firstRow .column .contentInner").css("height",t);var i=a*.333;jQuery("#secondRow div.contentInner").each(function(){jQuery(this).height()>i&&(i=jQuery(this).height()+50)}),jQuery("#secondRow .column .contentInner").css("height",i);var l=a*.333;jQuery("#thirdRow div.contentInner").each(function(){jQuery(this).height()>l&&(l=jQuery(this).height()+50)}),jQuery("#thirdRow .column .contentInner").css("height",l)},p=!1,c=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),p==!0&&(p=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery("."+o+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+o+"CanvasMilestone .deleteMilestone").nyroModal(c())},r=function(e){jQuery.nmManual(e,c)},y=function(e){e=="existing"&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),e=="new"&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),e=="hide"&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},u=function(){p=!0},s=function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("_");if(jQuery(this).attr("data-label"),e.length==3){var a=e[0],t=e[1];e[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:a,author:t}}).done(function(){jQuery("#userDropdownMenuLink"+a+" span.text span#userImage"+a+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}})},d=function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,status:i}}).done(function(){jQuery("#statusDropdownMenuLink"+t+" span.text").text(a),jQuery("#statusDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})})}})},m=function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",function(){var e=jQuery(this).attr("data-value").split("/"),a=jQuery(this).attr("data-label");if(e.length==2){var t=e[0],i=e[1],l=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+o+"canvas",data:{id:t,relates:i}}).done(function(){jQuery("#relatesDropdownMenuLink"+t+" span.text").text(a),jQuery("#relatesDropdownMenuLink"+t).removeClass().addClass(l+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})})}})};return{setCloseModal:u,toggleMilestoneSelectors:y,openModalManually:r,initUserDropdown:s,initStatusDropdown:d,initRelatesDropdown:m,setRowHeights:f}}();leantime.widgetController=function(){var o=[],f=function(s,d){let m=s.gridX||0,e=s.gridY||0,a=s.gridWidth||2,t=s.gridHeight||2;if(d.willItFit({x:m,y:e,width:a,height:t}))return{x:m,y:e};let i=Math.max(...d.engine.nodes.map(l=>l.y+l.h),0);for(let l=0;l<=i+1;l++)for(let j=0;j<=12-a;j++)if(d.willItFit({newX:j,newY:l,width:a,height:t}))return{x:j,y:l};return{x:0,y:i+1}};GridStack.renderCB=function(s,d){d.content&&typeof DOMPurify<"u"&&(s.innerHTML=DOMPurify.sanitize(d.content))};var p=function(){o=GridStack.init({margin:"0px 15px 15px 0px",handle:".grid-handler-top",minRow:2,cellHeight:"30px",float:!0,draggable:{handle:".grid-handler-top",appendTo:"body"},lazyLoad:!1,columnOpts:{breakpointForWindow:!0,breakpoints:[{w:700,c:1},{w:950,c:6}]}}),o.on("dragstop",function(s,d){c()}),o.on("resizestop",function(s,d){c()}),jQuery(".grid-stack-item").each(function(){jQuery(this).find(".removeWidget").click(function(){n(jQuery(this).closest(".grid-stack-item")[0])}),jQuery(this).find(".fitContent").click(function(){r(jQuery(this).closest(".grid-stack-item")[0])})}),jQuery(document).ready(function(){jQuery("#gridBoard").css("opacity",1)})},c=function(){let s=o.save();s.sort((m,e)=>m.y===e.y?m.x-e.x:m.y-e.y);let d=null;arguments.length>0&&arguments[0].action==="toggleWidget"&&(d={widgetId:arguments[0].widgetId,visible:arguments[0].visible}),s.forEach(function(m){let e=jQuery(m.content).find("[hx-get]").first();m.id=e.attr("id"),m.widgetUrl=e.attr("hx-get"),m.widgetTrigger=e.attr("hx-trigger"),m.x==null&&(m.x=0),m.gridX=m.x,m.y==null&&(m.y=0),m.gridY=m.y,m.w==null&&(m.w=1),m.gridWidth=m.w,m.h==null&&(m.h=1),m.gridHeight=m.h,m.content=""}),jQuery.post(leantime.appUrl+"/widgets/widgetManager",{action:"saveGrid",data:s,visibilityData:d},function(m,e){})},n=function(s){s.remove(),o.removeWidget(s,!0),c()},r=function(s){document.querySelector(".grid-stack").gridstack.resizeToContent(s,!1),c()},y=function(s,d,m){let e=document.querySelector(".grid-stack").gridstack,a=jQuery(d).is(":checked");if(f(m,e),!a)n(jQuery("#"+s).closest(".grid-stack-item")[0]);else{const t=document.createElement("div");t.className="grid-stack-item";const i=document.createElement("div");i.className=`grid-stack-item-content tw-p-none ${m.widgetBackground=="default"?"maincontentinner":m.background}`,i.innerHTML=u(m),t.appendChild(i),e.el.appendChild(t),e.makeWidget(t,{x:m.gridX||0,y:m.gridY||50,w:m.gridWidth||2,h:m.gridHeight||2}),htmx.process(t),c({action:"toggleWidget",widgetId:s,visible:a})}},u=function(s){return'<div class="widgetInner">        <div class="'+(s.widgetBackground=="default"?"tw-pb-l":"")+`">
            <div class="stickyHeader" style="padding:15px; height:50px;  width:100%;">
               <div class="grid-handler-top tw-h-[40px] tw-cursor-grab tw-float-left tw-mr-sm">
                    <i class="fa-solid fa-grip-vertical"></i>
                </div>
           `+(s.name!=""?'<h5 class="subtitle tw-pb-m tw-float-left tw-mr-sm">'+s.name+"</h5>":"")+`
            <div class="inlineDropDownContainer tw-float-right">
                <a href="javascript:void(0);" class="dropdown-toggle ticketDropDown editHeadline" data-toggle="dropdown">
                    <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="javascript:void(0)" class="fitContent"><i class="fa-solid fa-up-right-and-down-left-from-center"></i> Resize to fit content</a></li>
                        <li><a href="javascript:void(0)" class="removeWidget"><i class="fa fa-eye-slash"></i> Hide</a></li>
                </ul>
            </div>

        </div>
 <div class="widgetContent tw-px-l">
             <div hx-get="`+s.widgetUrl+'" hx-trigger="'+s.widgetTrigger+'" id="'+s.id+`"></div>
        </div>
       </div>
        <div class="clear"></div>
    </div>
`};return{resizeWidget:r,removeWidget:n,saveGrid:c,initGrid:p,toggleWidgetVisibility:y}}();leantime.wikiController=function(){var o=function(f,p){jQuery(f).jstree({core:{expand_selected_onload:!0,themes:{dots:!1}},state:{key:"tree_state"},types:{default:{icon:"far fa-file-alt"}},plugins:["wholerow","types","state"]}),jQuery(f).on("ready.jstree",function(c,n){jQuery(this).jstree("deselect_all"),jQuery(this).jstree("select_node","treenode_"+p,!0),jQuery(this).jstree("save_state")}),jQuery(f).on("activate_node.jstree",function(c,n){jQuery(this).jstree("save_state"),!(n==null||n.node==null||n.node.id==null)&&(window.location.href=n.node.a_attr.href)})};return{initTree:o}}();var Y=Y||{},Re=jQuery("meta[name=theme-color]").attr("content");Y.companyColor=Re;var Fe=jQuery("meta[name=color-scheme]").attr("content");Y.colorScheme=Fe;var Pe=jQuery("meta[name=theme]").attr("content");Y.theme=Pe;var Ue=jQuery("meta[name=identifier-URL]").attr("content");Y.appUrl=Ue;var Be=jQuery("meta[name=leantime-version]").attr("content");Y.version=Be;Y.replaceSVGColors=function(){jQuery(document).ready(function(){Y.companyColor!="#1b75bb"&&jQuery("svg").children().each(function(){jQuery(this).attr("fill")=="#1b75bb"&&jQuery(this).attr("fill",Y.companyColor)})})};Y.handleAsyncResponse=function(o){if(o!==void 0&&o.result!==void 0&&o.result.html!==void 0){var f=jQuery(o.result.html);jQuery("body").append(f)}};jQuery.noConflict();jQuery(document).ready(function(){Y.replaceSVGColors(),jQuery(".confetti").click(function(){confetti.start()}),tippy("[data-tippy-content]"),jQuery(".login-alert .alert").text()!==""&&jQuery(".login-alert").fadeIn(),document.addEventListener("scroll",()=>{document.documentElement.dataset.scroll=window.scrollY})});htmx.onLoad(function(o){tippy("[data-tippy-content]")});window.addEventListener("HTMX.ShowNotification",function(o){jQuery.get(Y.appUrl+"/notifications/getLatestGrowl",function(f){let p=JSON.parse(f);p.notification&&p.notification!=="undefined"&&jQuery.growl({message:p.notification,style:p.notificationType})})});leantime.editorController=function(){var o=[{start:"*",end:"*",format:"italic"},{start:"_",end:"_",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"__",end:"__",format:"bold"},{start:"~~",end:"~~",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"},{start:"1. ",cmd:"InsertOrderedList",value:{"list-style-type":"decimal"}},{start:"1) ",cmd:"InsertOrderedList",value:{"list-style-type":"decimal"}},{start:"a. ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-alpha"}},{start:"a) ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-alpha"}},{start:"i. ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-roman"}},{start:"i) ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-roman"}},{start:"[ ] ",cmd:"InsertChecklist"},{start:">",format:"blockquote"},{start:"`",end:"`",format:"code"},{start:"```",end:"```",format:"pre"},{start:"~",end:"~",cmd:"createLink"},{start:"---",replacement:"<hr/>"},{start:"--",replacement:""},{start:"-",replacement:""},{start:"(c)",replacement:""}],f={delimiter:"@",delay:20,source:function(e,a,t){t==="@"&&jQuery.getJSON(leantime.appUrl+"/api/users",{projectUsersAccess:"current",query:e},function(i){let l=[];for(let j=0;j<i.length;j++)l[j]={name:i[j].firstname+" "+i[j].lastname,id:i[j].id,email:i[j].username};a(l)})},highlighter:function(e){return e.replace(new RegExp("("+this.query+")","ig"),function(a,t){return"<strong>"+t+"</strong>"})},insert:function(e){return'<a class="userMention" data-tagged-user-id="'+e.id+'" href="javascript:void(0)"><img src="'+leantime.appUrl+"/api/users?profileImage="+e.id+'" alt="'+e.name+' Image"/>'+e.name.trim()+"</a>&nbsp;"},items:10},p=function(e,a,t){var i,l;i=new XMLHttpRequest,i.withCredentials=!1,i.open("POST",leantime.appUrl+"/api/files"),i.onload=function(){if(i.status<200||i.status>=300){t("HTTP Error: "+i.status);return}a(i.responseText)},l=new FormData,l.append("file",e.blob()),i.send(l)},c=function(e,a,t){window.filePickerCallback=e;var i={afterShowCont:function(){jQuery(".fileModal").nyroModal({callbacks:i})}};jQuery.nmManual(leantime.appUrl+"/files/showAll?modalPopUp=true",{stack:!0,callbacks:i,sizes:{minW:500,minH:500}}),jQuery.nmTop().elts.cont.css("zIndex","1000010"),jQuery.nmTop().elts.bg.css("zIndex","1000010"),jQuery.nmTop().elts.load.css("zIndex","1000010"),jQuery.nmTop().elts.all.find(".nyroModalCloseButton").css("zIndex","1000010")},n=function(e,a){e.on("change",function(){}),e.on("init",function(t){var i=e.getDoc().getElementsByClassName("confetti");i&&i.length>0&&i[0].addEventListener("click",function(){confetti.start()})}),e.on("focus",function(){var t=e.getDoc().getElementsByClassName("tinyPlaceholder");if(t.length>0)for(;t[0];)t[0].parentNode.removeChild(t[0])}),e.on("submit",function(){var t=e.getDoc().getElementsByClassName("tinyPlaceholder");if(t.length>0){for(;t[0];)t[0].remove();e.save()}})},r=leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",y=leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",u=function(e){jQuery("textarea.tinymceSimple").tinymce({iframe_aria_text:"",width:"100%",skin_url:r,content_css:y,content_style:"body.mce-content-body{ font-size:14px; } img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,shortlink,checklist,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advlist,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | link unlink image | checklist bullist numlist | emoticons",browser_spellcheck:!0,toolbar_location:"bottom",branding:!1,statusbar:!1,convert_urls:!0,paste_data_images:!0,menubar:!1,relative_urls:!0,document_base_url:leantime.appUrl+"/",default_link_target:"_blank",table_appearance_options:!1,mentions:f,textpattern_patterns:o,images_upload_handler:p,file_picker_callback:c,setup:n})},s=function(){var e=jQuery("input[name=id]").val();e||(e="new");let a="none";window.leantime.currentProject&&(a=window.leantime.currentProject);var t=window.innerHeight-50-205;jQuery("textarea.complexEditor").tinymce({iframe_aria_text:"",width:"100%",skin_url:leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",content_css:leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",content_style:"html {text-align:center;} body.mce-content-body{ font-size:14px; } img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,embed,autoresize,shortlink,checklist,bettertable,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advancedTemplate,advlist,codesample,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | formatselect forecolor | alignleft aligncenter alignright | link unlink image media embed emoticons | checklist bullist numlist | table  | codesample | advancedTemplate | restoredraft",autosave_prefix:"leantime-complexEditor-autosave-{path}{query}-{id}-"+a+"-"+e+"-",autosave_restore_when_empty:e!=="new",autosave_retention:"10m",browser_spellcheck:!0,contextmenu:!1,autosave_retention:"120m",autosave_interval:"10s",autosave_ask_before_unload:!1,branding:!1,statusbar:!1,convert_urls:!0,menubar:!1,resizable:!0,templates:leantime.appUrl+"/wiki/templates",body_class:"mce-content-body",paste_data_images:!0,relative_urls:!0,document_base_url:leantime.appUrl+"/",table_appearance_options:!1,min_height:400,max_height:t,default_link_target:"_blank",codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Rust",value:"rust"},{text:"SQL",value:"sql"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"Swift",value:"swift"},{text:"Objective C",value:"objectivec"},{text:"Go",value:"go"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],mentions:f,textpattern_patterns:o,images_upload_handler:p,file_picker_callback:c,setup:n})},d=function(e){var a=jQuery("input[name=id]").val();a==null&&(a="new");let t="none";window.leantime.currentProject&&(t=window.leantime.currentProject),jQuery("textarea.notesEditor").tinymce({iframe_aria_text:"",width:"100%",skin_url:leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",content_css:leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",content_style:"html {text-align:center;} body.mce-content-body{ font-size:14px; color:var(--secondary-font-color); max-width:none;} img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,embed,autoresize,shortlink,checklist,bettertable,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advancedTemplate,advlist,codesample,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | formatselect forecolor | alignleft aligncenter alignright | link image table emoticons | checklist bullist | advancedTemplate | restoredraft",toolbar_location:"bottom",browser_spellcheck:!0,contextmenu:!1,autosave_prefix:"leantime-complexEditor-autosave-{path}{query}-{id}-"+t+"-"+a+"-",autosave_restore_when_empty:!0,autosave_retention:"120m",autosave_interval:"10s",autosave_ask_before_unload:!1,branding:!1,statusbar:!1,convert_urls:!0,menubar:!1,resizable:!0,templates:leantime.appUrl+"/wiki/templates",body_class:"mce-content-body",paste_data_images:!0,relative_urls:!0,document_base_url:leantime.appUrl+"/",table_appearance_options:!1,min_height:400,default_link_target:"_blank",codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Rust",value:"rust"},{text:"SQL",value:"sql"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"Swift",value:"swift"},{text:"Objective C",value:"objectivec"},{text:"Go",value:"go"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],textpattern_patterns:o,mentions:f,textpattern_patterns:o,images_upload_handler:p,file_picker_callback:c,setup:function(i){n(i),i.on("blur",function(){i.save(),e()})}})},m=function(e){jQuery(e).tinymce({iframe_aria_text:"",width:"100%",skin_url:r,inline:!0,plugins:"autosave,imagetools,shortlink,checklist,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advlist,mention,slashcommands,textpattern",toolbar:"",toolbar_location:"bottom",browser_spellcheck:!0,contextmenu:!1,branding:!1,statusbar:!1,convert_urls:!0,paste_data_images:!0,menubar:!1,relative_urls:!0,document_base_url:leantime.appUrl+"/",default_link_target:"_blank",table_appearance_options:!1,mentions:f,textpattern_patterns:o,images_upload_handler:p,file_picker_callback:c,setup:n})};return{initSimpleEditor:u,initComplexEditor:s,initNotesEditor:d,initContentEditable:m}}();leantime.snippets=function(){var o=function(s){var d=document.getElementById(s);d.select(),d.setSelectionRange(0,99999),navigator.clipboard.writeText(d.value),jQuery.growl({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},f=function(s){navigator.clipboard.writeText(s),jQuery.growl({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},p=function(){jQuery(".confetti").click(function(){confetti.start()})},c=function(s){var d=jQuery("#accordion_toggle_"+s).find("i.fa").first(),m="accordion_content-"+s,e="closed";d.hasClass("fa-angle-right")?(d.removeClass("fa-angle-right"),d.addClass("fa-angle-down"),jQuery("#accordion_content-"+s).slideDown("fast"),e="open"):(d.removeClass("fa-angle-down"),d.addClass("fa-angle-right"),jQuery("#accordion_content-"+s).slideUp("fast"),e="closed"),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/submenu",data:{submenu:m,state:e}})},n=function(s){var d=jQuery("#themeStyleSheet").attr("href");s=="light"?(d=d.replace("dark.css","light.css"),jQuery("#themeStyleSheet").attr("href",d)):s=="dark"&&(d=d.replace("light.css","dark.css"),jQuery("#themeStyleSheet").attr("href",d))},r=function(s){var d=jQuery("#themeStyleSheet").attr("href");s=="minimal"?(d=d.replace("default","minimal"),jQuery("#themeStyleSheet").attr("href",d)):s=="default"&&(d=d.replace("minimal","default"),jQuery("#themeStyleSheet").attr("href",d))},y=function(s){jQuery("#fontStyleSetter").html(":root { --primary-font-family: '"+s+"', 'Helvetica Neue', Helvetica, sans-serif; }")},u=function(s,d){jQuery("#colorSchemeSetter").html(":root { --accent1: "+s+"; --accent2: "+d+"}")};return{copyUrl:o,copyToClipboard:f,initConfettiClick:p,accordionToggle:c,toggleTheme:n,toggleFont:y,toggleColors:u,toggleBg:r}}();leantime.modals=function(){var o=function(c){typeof c=="function"&&(window.globalModalCallback=c)},f=function(){var c={sizes:{minW:500,minH:200},resizable:!0,autoSizable:!0,callbacks:{beforePostSubmit:function(){jQuery(".showDialogOnLoad").show(),console.log(tinymce.editors.length),tinymce.editors.length>0&&(tinymce.editors.forEach(function(u){u.save(),u.destroy(),u.remove()}),tinymce.EditorManager.remove())},beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),tinymce.editors.length>0&&(tinymce.editors.forEach(function(u){u.save(),u.destroy(),u.remove()}),tinymce.EditorManager.remove())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery(".formModal, .modal").nyroModal(c),tippy("[data-tippy-content]")},beforeClose:function(){try{history.pushState("",document.title,window.location.pathname+window.location.search)}catch{console.log("Issue pushing history")}typeof window.globalModalCallback=="function"?window.globalModalCallback():location.reload()}},titleFromIframe:!0},n=window.location.hash.substring(1);(n.includes("showTicket")||n.includes("ideaDialog")||n.includes("articleDialog"))&&(c.sizes.minW=1800,c.sizes.minH=1800);var r=leantime.appUrl.replace(/\/$/,""),y=n.split("/");y.length>2&&y[1]!=="tab"&&jQuery.nmManual(r+""+n,c)},p=function(){jQuery.nmTop()&&jQuery.nmTop().close()};return{openModal:f,setCustomModalCallback:o,closeModal:p}}();jQuery(document).ready(function(){leantime.modals.openModal()});window.addEventListener("hashchange",function(){leantime.modals.openModal()});window.addEventListener("closeModal",function(o){leantime.modals.closeModal()});leantime.dateController=function(){function o(n){return{numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),monthNamesShort:leantime.i18n.__("language.monthNamesShort").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek"),onSelect:n}}function f(n){var r=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),y;try{y=jQuery.datepicker.parseDate(r,n.value)}catch(u){y=null,console.log(u)}return y}var p=function(n,r,y){Date.prototype.addDays=function(d){return this.setDate(this.getDate()+d),this},jQuery.datepicker.setDefaults({beforeShow:function(d){if(jQuery(d).attr("readonly"))return!1}});var u=jQuery(n).datepicker(o()).on("change",function(d){s.datepicker("option","minDate",f(this)),jQuery(r).val()==""&&jQuery(r).val(jQuery(n).val())}),s=jQuery(r).datepicker(o()).on("change",function(){u.datepicker("option","maxDate",f(this))})},c=function(n,r){jQuery(n).datepicker(o(r))};return{initDateRangePicker:p,initDatePicker:c}}();leantime.dateHelper=function(){var o={jquery:{},luxon:{}};o.jquery={d:"dd",D:"D",j:"d",l:"DD",N:"",S:"",w:"",z:"o",W:"",F:"MM",m:"mm",M:"M",n:"m",t:"",L:"",o:"yy",Y:"yy",y:"y",a:"",A:"",B:"",g:"",G:"",h:"",H:"",i:"",s:"",u:"",e:"",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"@"},o.luxon={d:"dd",D:"ccc",j:"d",l:"cccc",N:"c",S:"",w:"c",z:"o",W:"WW",F:"MMMM",m:"LL",M:"LLL",n:"L",t:"",L:"",o:"kk",Y:"yyyy",y:"yy",a:"a",A:"a",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",v:"SSS",e:"z",I:"",O:"ZZ",P:"ZZ",T:"ZZZ",Z:"",c:"",r:"",U:"X"};var f=function(c,n){let r=o[n],y="";return c.split("").forEach(function(u){r[u]!==void 0?y=y+""+r[u]:y=y+""+u}),y},p=function(c,n){let r=leantime.i18n.__("language."+c);return f(r,n)};return{mapFormat:f,getFormatFromSettings:p}}();leantime.accessibilityController=function(){var o=function(){jQuery(".chosen-container").each(function(){var s=jQuery(this);if(!s.data("a11y-enhanced")){var d=null,m=s.attr("id");if(m&&m.indexOf("_chosen")>-1){var a=m.replace("_chosen","");d=jQuery("#"+a)}if((!d||!d.length)&&(d=s.prev("select[data-placeholder]")),(!d||!d.length)&&(d=s.siblings("select").first()),!(!d||!d.length)){var e="",a=d.attr("id");if(a){var t=jQuery('label[for="'+a+'"]');t.length&&(e=t.text().trim())}var i=s.find(".chosen-single"),l=s.find(".chosen-choices");i.length&&i.attr({role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-label":e||d.attr("data-placeholder")||"Select option",tabindex:"0"}),l.length&&l.attr({role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-label":e||d.attr("data-placeholder")||"Select options","aria-multiselectable":"true",tabindex:"0"}),s.on("chosen:showing_dropdown",function(){i.add(l).attr("aria-expanded","true")}),s.on("chosen:hiding_dropdown",function(){i.add(l).attr("aria-expanded","false")}),s.find(".chosen-drop").attr("role","listbox"),s.find(".chosen-results li").attr("role","option"),s.data("a11y-enhanced",!0)}}})},f=function(){jQuery(".ss-main").each(function(){var s=jQuery(this),d=s.prev("select");if(d.length){var m=jQuery('label[for="'+d.attr("id")+'"]'),e=m.length?m.text().trim():"";s.attr({role:"combobox","aria-haspopup":"listbox","aria-label":e||d.attr("data-placeholder")||"Select option","aria-multiselectable":d.attr("multiple")?"true":"false"})}})},p=function(){jQuery("div.tagsinput").each(function(){var s=jQuery(this),d=s.next('input[type="text"]');if(d.length){var m=d.attr("id"),e=jQuery('label[for="'+m+'"]'),a=e.length?e.text().trim():"Enter tags";s.attr({role:"list","aria-label":a}),s.find("span.tag").each(function(){jQuery(this).attr("role","listitem")});var t=s.find("input");t.attr({"aria-label":"Add new tag","aria-describedby":m+"-help"}),m&&!jQuery("#"+m+"-help").length&&s.after('<span id="'+m+'-help" class="sr-only">Type and press enter to add tags. Press backspace to remove the last tag.</span>')}})},c=function(){jQuery("input.hasDatepicker").each(function(){var s=jQuery(this),d=s.attr("id"),m=jQuery('label[for="'+d+'"]'),e=m.length?m.text().trim():"";s.attr({role:"textbox","aria-label":e||"Select date","aria-describedby":d+"-help"}),d&&!jQuery("#"+d+"-help").length&&s.after('<span id="'+d+'-help" class="sr-only">Date input. Use arrow keys to navigate calendar. Press enter to select date.</span>')}),jQuery(document).on("focus","input.hasDatepicker",function(){setTimeout(function(){var s=jQuery("#ui-datepicker-div");s.is(":visible")&&s.attr({role:"dialog","aria-label":"Choose date","aria-modal":"true"})},100)})},n=function(){typeof tinymce<"u"&&tinymce.on("AddEditor",function(s){var d=s.editor;jQuery("#"+d.id);var m=jQuery('label[for="'+d.id+'"]'),e=m.length?m.text().trim():"Rich text editor";d.on("init",function(){var a=jQuery("#"+d.id+"_ifr");a.attr("aria-label",e),jQuery("#"+d.id+"-help").length||a.after('<span id="'+d.id+'-help" class="sr-only">Rich text editor. Press ALT+F10 to access toolbar. Press ESC to return to editing area.</span>')})})},r=function(){jQuery('input[type="time"]').each(function(){var s=jQuery(this),d=s.attr("id");if(d&&!jQuery('label[for="'+d+'"]').length){var m="Time",e=s.closest(".form-group").find("label").first();e.length&&(m=e.text().trim()+" time"),s.attr("aria-label",m)}})},y=function(){jQuery(".ticketBox").each(function(){var s=jQuery(this);s.attr("tabindex")||s.attr("tabindex","0");var d=s.find(".ticketHeadline").text().trim();d&&s.attr({role:"article","aria-label":"Task: "+d}),s.data("keyboard-bound")||(s.on("keydown",function(m){var e=jQuery(m.target),a=e.is('a, button, input, select, textarea, [role="button"], [tabindex]')||e.closest(".dropdown-toggle, .ticketDropdown, .inlineDropDownContainer").length>0;if((m.key==="Enter"||m.key===" ")&&!a&&m.target===this){m.preventDefault();var t=s.find("a").first();t.length&&t[0].click()}}),s.data("keyboard-bound",!0))})},u=function(){o(),f(),p(),c(),n(),r(),y(),jQuery(document).on("htmx:afterSwap shown.bs.modal",function(){setTimeout(function(){o(),f(),p(),c(),r(),y()},100)}),jQuery(document).on("chosen:ready",function(){setTimeout(o,100)}),setTimeout(o,1e3)};return{init:u,enhanceChosenAccessibility:o,enhanceSlimSelectAccessibility:f,enhanceTagsInputAccessibility:p,enhanceDatepickerAccessibility:c,enhanceTinyMCEAccessibility:n,fixTimepickerLabels:r,enhanceKanbanCardAccessibility:y}}();jQuery(document).ready(function(){leantime.accessibilityController.init()});
