import{_ as A}from"./preload-helper-DPi8upcZ.js";(function(){var n={duration:3200,close:"Ã—",location:"default",style:"success",size:"medium"},t={success:{bg:"var(--green)",color:"#fff",border:"var(--green)"},error:{bg:"var(--red)",color:"#fff",border:"var(--red)"},warning:{bg:"var(--yellow)",color:"#333",border:"var(--yellow)"},notice:{bg:"var(--accent1)",color:"#fff",border:"var(--accent1)"},default:{bg:"var(--secondary-background)",color:"var(--primary-font-color)",border:"var(--main-border-color)"}},o=!1;function d(){if(!o){o=!0;var e=document.createElement("style");e.textContent="#growls-default {  position: fixed; top: 70px; right: 20px; z-index: 100060;  display: flex; flex-direction: column; gap: 8px;  pointer-events: none; max-width: 380px;}.lt-toast {  pointer-events: auto; padding: 12px 36px 12px 16px; border-radius: var(--box-radius, 8px);  box-shadow: var(--regular-shadow, 0 2px 8px rgba(0,0,0,.15)); font-size: var(--font-size-s, 13px);  line-height: 1.4; position: relative; overflow: hidden;  opacity: 0; transform: translateX(30px);  transition: opacity .25s ease, transform .25s ease;}.lt-toast.lt-toast-visible {  opacity: 1; transform: translateX(0);}.lt-toast.lt-toast-outgoing {  opacity: 0; transform: translateX(30px);}.lt-toast-close {  position: absolute; top: 8px; right: 10px; cursor: pointer;  font-size: 18px; line-height: 1; opacity: .7;}.lt-toast-close:hover { opacity: 1; }.lt-toast-title {  font-weight: 600; margin-bottom: 2px;}.lt-toast-message { word-break: break-word; }",document.head.appendChild(e)}}function l(e){var a="growls-"+e,i=document.getElementById(a);return i||(i=document.createElement("div"),i.id=a,document.body.appendChild(i)),i}function s(e){d(),e=e||{};var a={};for(var i in n)a[i]=n[i];for(var p in e)a[p]=e[p];var r=t[a.style]||t.default,C=l(a.location),y=document.createElement("div");y.className="lt-toast",y.style.background=r.bg,y.style.color=r.color,y.style.borderLeft="4px solid "+r.border,y.innerHTML='<div class="lt-toast-close">'+a.close+"</div>"+(a.title?'<div class="lt-toast-title">'+a.title+"</div>":"")+'<div class="lt-toast-message">'+(a.message||"")+"</div>",C.appendChild(y);var T=y.querySelector(".lt-toast-close");T.addEventListener("click",function(x){x.stopPropagation(),w(y)}),y.addEventListener("contextmenu",function(x){x.preventDefault(),w(y)});var D=null;y.addEventListener("mouseenter",function(){D&&(clearTimeout(D),D=null)}),y.addEventListener("mouseleave",function(){R()}),y.offsetHeight,y.classList.add("lt-toast-visible");function R(){D=setTimeout(function(){w(y)},a.duration)}function w(x){D&&(clearTimeout(D),D=null),x.classList.remove("lt-toast-visible"),x.classList.add("lt-toast-outgoing"),x.addEventListener("transitionend",function(){x.parentNode&&x.parentNode.removeChild(x)}),setTimeout(function(){x.parentNode&&x.parentNode.removeChild(x)},500)}R()}var u=window.leantime||(window.leantime={});u.toast={show:s};var m=function(e){return s(e)};m.error=function(e){return e=e||{},e.style="error",e.title=e.title||"Error!",s(e)},m.notice=function(e){return e=e||{},e.style="notice",e.title=e.title||"Notice!",s(e)},m.warning=function(e){return e=e||{},e.style="warning",e.title=e.title||"Warning!",s(e)},window._growlShim=m})();window.leantime=window.leantime||{};window.leantime.companyColor=(document.querySelector("meta[name=theme-color]")||{}).content||null;window.leantime.colorScheme=(document.querySelector("meta[name=color-scheme]")||{}).content||null;window.leantime.theme=(document.querySelector("meta[name=theme]")||{}).content||null;window.leantime.appUrl=(document.querySelector("meta[name=identifier-URL]")||{}).content||null;window.leantime.version=(document.querySelector("meta[name=leantime-version]")||{}).content||null;var z=window.leantime;z.replaceSVGColors=function(){z.companyColor!="#1b75bb"&&document.querySelectorAll("svg > *").forEach(function(n){n.getAttribute("fill")=="#1b75bb"&&n.setAttribute("fill",z.companyColor)})};z.handleAsyncResponse=function(n){n!==void 0&&n.result!==void 0&&n.result.html!==void 0&&document.body.insertAdjacentHTML("beforeend",n.result.html)};document.addEventListener("DOMContentLoaded",function(){z.replaceSVGColors(),document.querySelectorAll(".confetti").forEach(function(o){o.addEventListener("click",function(){confetti.start()})}),tippy("[data-tippy-content]");var n=document.querySelector(".login-alert .alert");if(n&&n.textContent!==""){var t=document.querySelector(".login-alert");t&&(t.style.display="")}document.addEventListener("scroll",function(){document.documentElement.dataset.scroll=window.scrollY})});htmx.onLoad(function(n){tippy("[data-tippy-content]"),z.replaceSVGColors()});window.addEventListener("HTMX.ShowNotification",function(n){fetch(z.appUrl+"/notifications/getLatestGrowl",{credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(t){return t.text()}).then(function(t){var o=JSON.parse(t);o.notification&&o.notification!=="undefined"&&z.toast.show({message:o.notification,style:o.notificationType})})});document.addEventListener("click",function(n){var t=n.target.closest('[data-toggle="dropdown"]');if(document.querySelectorAll(".dropdown.open, .btn-group.open").forEach(function(d){(!t||!d.contains(t))&&d.classList.remove("open")}),t){n.preventDefault(),n.stopPropagation();var o=t.closest(".dropdown, .btn-group");o&&o.classList.toggle("open")}});document.addEventListener("keydown",function(n){n.key==="Escape"&&document.querySelectorAll(".dropdown.open, .btn-group.open").forEach(function(t){t.classList.remove("open")})});(function(){var n=document.createElement("style");n.textContent=".modal.in {  display: block !important; position: fixed; top: 0; left: 0; right: 0; bottom: 0;  z-index: 100050; overflow-x: hidden; overflow-y: auto;}.modal .modal-dialog {  position: relative; margin: 60px auto; max-width: 600px;}.modal .modal-dialog.modal-lg { max-width: 900px; }.modal .modal-content {  background: var(--secondary-background, #fff); border-radius: var(--box-radius, 8px);  box-shadow: var(--large-shadow, 0 4px 20px rgba(0,0,0,.2)); padding: 20px;}.modal .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }.modal .modal-header .close { background: none; border: none; font-size: 24px; cursor: pointer; color: var(--primary-font-color); }.modal .modal-body { margin-bottom: 15px; }.modal .modal-footer { display: flex; justify-content: flex-end; gap: 8px; }",document.head.appendChild(n);var t=null;function o(l){l&&(l.style.display="block",l.offsetHeight,l.classList.add("in"),document.body.classList.add("modal-open"),t||(t=document.createElement("div"),t.className="modal-backdrop fade in",t.style.cssText="display:block;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:100049;",document.body.appendChild(t),t.addEventListener("click",function(){var s=document.querySelector(".modal.in");s&&d(s)})))}function d(l){l&&(l.classList.remove("in"),l.style.display="none",document.body.classList.remove("modal-open"),t&&t.parentNode&&(t.parentNode.removeChild(t),t=null))}document.addEventListener("click",function(l){var s=l.target.closest('[data-dismiss="modal"]');if(s){var u=s.closest(".modal");u&&d(u)}}),document.addEventListener("keydown",function(l){if(l.key==="Escape"){var s=document.querySelector(".modal.in");s&&d(s)}}),typeof jQuery<"u"&&(jQuery.fn.modal=function(l){return this.each(function(){l==="show"?o(this):l==="hide"?d(this):l==="toggle"&&(this.classList.contains("in")?d(this):o(this))}),this}),window.leantime=window.leantime||{},leantime.bootstrapModal={show:o,hide:d}})();(function(){function n(t,o){o=o||{};var d=t.querySelectorAll(":scope > ul > li > a"),l=[];if(d.forEach(function(u){var m=u.getAttribute("href");if(m&&m.charAt(0)==="#"){var e=t.querySelector(m);e&&l.push(e)}}),l.length!==0){var s=o.active||0;(typeof s!="number"||s<0||s>=l.length)&&(s=0),l.forEach(function(u,m){u.style.display=m===s?"":"none"}),d.forEach(function(u,m){m===s?u.parentElement.classList.add("ui-tabs-active","ui-state-active","active"):u.parentElement.classList.remove("ui-tabs-active","ui-state-active","active")}),d.forEach(function(u,m){u.addEventListener("click",function(e){e.preventDefault(),l.forEach(function(a){a.style.display="none"}),d.forEach(function(a){a.parentElement.classList.remove("ui-tabs-active","ui-state-active","active")}),l[m]&&(l[m].style.display=""),u.parentElement.classList.add("ui-tabs-active","ui-state-active","active")})}),o.create&&o.create.call(t,{},{tab:d[s],panel:l[s]})}}typeof jQuery<"u"&&(jQuery.fn.tabs=function(t){return this.each(function(){n(this,t)}),this})})();(function(){typeof jQuery>"u"||(jQuery.fn.chosen=function(n){return this.each(function(){var t=this;if(t.tagName==="SELECT"){if(t._slimSelect){try{t._slimSelect.destroy()}catch{}t._slimSelect=null}if(n!=="destroy"&&typeof SlimSelect<"u")try{t._slimSelect=new SlimSelect({select:t,showSearch:t.options&&t.options.length>8,allowDeselect:!t.hasAttribute("required")})}catch{}}}),this})})();leantime.snippets=function(){var n=function(e){var a=document.getElementById(e);a.select(),a.setSelectionRange(0,99999),navigator.clipboard.writeText(a.value),leantime.toast.show({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},t=function(e){navigator.clipboard.writeText(e),leantime.toast.show({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},o=function(){document.querySelectorAll(".confetti").forEach(function(e){e.addEventListener("click",function(){confetti.start()})})},d=function(e){var a=document.getElementById("accordion_toggle_"+e),i=a?a.querySelector("i.fa"):null,p="accordion_content-"+e,r="closed",C=document.getElementById("accordion_content-"+e);i&&i.classList.contains("fa-angle-right")?(i.classList.remove("fa-angle-right"),i.classList.add("fa-angle-down"),C&&(C.style.display=""),r="open"):i&&(i.classList.remove("fa-angle-down"),i.classList.add("fa-angle-right"),C&&(C.style.display="none"),r="closed");var y=new FormData;y.append("submenu",p),y.append("state",r),fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",body:y,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}})},l=function(e){var a=document.getElementById("themeStyleSheet"),i=a.getAttribute("href");e=="light"?(i=i.replace("dark.css","light.css"),a.setAttribute("href",i)):e=="dark"&&(i=i.replace("light.css","dark.css"),a.setAttribute("href",i))},s=function(e){var a=document.getElementById("themeStyleSheet"),i=a.getAttribute("href");e=="minimal"?(i=i.replace("default","minimal"),a.setAttribute("href",i)):e=="default"&&(i=i.replace("minimal","default"),a.setAttribute("href",i))},u=function(e){document.getElementById("fontStyleSetter").innerHTML=":root { --primary-font-family: '"+e+"', 'Helvetica Neue', Helvetica, sans-serif; }"},m=function(e,a){document.getElementById("colorSchemeSetter").innerHTML=":root { --accent1: "+e+"; --accent2: "+a+"}"};return{copyUrl:n,copyToClipboard:t,initConfettiClick:o,accordionToggle:d,toggleTheme:l,toggleFont:u,toggleColors:m,toggleBg:s}}();leantime.modals=function(){var n=!1;function t(){return document.getElementById("global-modal")}function o(){return document.getElementById("global-modal-content")}function d(){return document.getElementById("global-modal-box")}function l(w){return/showTicket|ideaDialog|articleDialog/.test(w)}function s(){var w=o();w&&(w.innerHTML='<div style="display:flex;justify-content:center;align-items:center;padding:60px 40px;"><span class="tw:loading tw:loading-spinner tw:loading-lg"></span></div>')}function u(w){for(var x=w.querySelectorAll("script"),M=0;M<x.length;M++){for(var P=x[M],U=document.createElement("script"),H=0;H<P.attributes.length;H++)U.setAttribute(P.attributes[H].name,P.attributes[H].value);U.textContent=P.textContent,P.parentNode.replaceChild(U,P)}}function m(w){if(/<html[\s>]/i.test(w)||/<!DOCTYPE/i.test(w)){var x=new DOMParser().parseFromString(w,"text/html"),M=x.querySelector(".primaryContent");return M?M.innerHTML:x.body?x.body.innerHTML:w}return w}function e(w){w.querySelectorAll(".showDialogOnLoad").forEach(function(x){x.style.display=""}),window.htmx&&window.htmx.process(w),window.tippy&&tippy(w.querySelectorAll("[data-tippy-content]"))}function a(w){var x=w.headers.get("HX-Trigger");if(x&&x.indexOf("HTMX.closemodal")!==-1)return x.indexOf("HTMX.ShowNotification")!==-1&&window.dispatchEvent(new CustomEvent("HTMX.ShowNotification")),C(),Promise.resolve(null);var M=w.headers.get("HX-Redirect");return M?(C(),window.location.href=M,Promise.resolve(null)):w.text()}function i(){var w=o();if(w&&window.leantime&&window.leantime.tiptapController&&window.leantime.tiptapController.registry)try{window.leantime.tiptapController.registry.destroyWithin(w)}catch{}}function p(w){if(w!==null){var x=o();x&&(i(),x.innerHTML=m(w),u(x),e(x))}}function r(w){var x=t(),M=d();if(x){l(w)?(M.style.maxWidth="1024px",M.style.width="95vw",M.style.minHeight="80vh"):(M.style.maxWidth="48rem",M.style.width="",M.style.minHeight=""),s(),x.open||x.showModal(),n=!0;var P=leantime.appUrl.replace(/\/$/,""),U=w.indexOf("http")===0?w:P+w;fetch(U,{credentials:"include",headers:{"is-modal":"true","X-Requested-With":"XMLHttpRequest"}}).then(a).then(p).catch(function(H){console.error("modalManager: load error",H);var B=o();B&&(B.innerHTML='<div style="padding:24px;text-align:center;"><p>Could not load content.</p></div>')})}}function C(){var w=t();if(w&&n){n=!1,i();try{history.pushState("",document.title,window.location.pathname+window.location.search)}catch{}if(w.open&&w.close(),typeof window.globalModalCallback=="function"){var x=window.globalModalCallback;window.globalModalCallback=null,x()}else location.reload()}}var y=function(){var w=window.location.hash.substring(1);if(w){var x=w.split("/");x.length>2&&x[1]!=="tab"&&r(w)}},T=function(){C()},D=function(w){typeof w=="function"&&(window.globalModalCallback=w)},R=function(w){var x=leantime.appUrl.replace(/\/$/,""),M=w;w.indexOf(x)===0&&(M=w.substring(x.length)),r(M)};return{openModal:y,setCustomModalCallback:D,closeModal:T,openByUrl:R,renderContent:p}}();document.addEventListener("DOMContentLoaded",function(){leantime.modals.openModal(),document.addEventListener("click",function(t){var o=t.target.closest('a[href^="#/"], a.formModal, a.ticketModal');if(o){var d=o.getAttribute("href");if(d){if(d.indexOf("#/")===0){t.preventDefault(),t.stopPropagation(),window.globalModalCallback=function(){location.reload()};var l=d.substring(1);try{history.pushState("",document.title,window.location.pathname+window.location.search+d)}catch{}leantime.modals.openByUrl(l)}else if(o.classList.contains("formModal")||o.classList.contains("ticketModal")){if(d.indexOf("javascript:")===0)return;t.preventDefault(),t.stopPropagation(),window.globalModalCallback=function(){location.reload()},leantime.modals.openByUrl(d)}}}},!0);var n=document.getElementById("global-modal");n&&(n.addEventListener("cancel",function(t){t.preventDefault(),leantime.modals.closeModal()}),n.addEventListener("close",function(){leantime.modals.closeModal()})),document.addEventListener("submit",function(t){var o=t.target;if(!(!o||!o.closest||!o.closest("#global-modal-content"))&&o.getAttribute("method")!=="dialog"&&!(o.hasAttribute("hx-post")||o.hasAttribute("hx-get")||o.hasAttribute("hx-put")||o.hasAttribute("hx-delete"))){t.preventDefault();var d=(o.getAttribute("method")||"GET").toUpperCase(),l=o.getAttribute("action")||window.location.href;document.getElementById("global-modal-content");var s={method:d,credentials:"include",headers:{"is-modal":"true","X-Requested-With":"XMLHttpRequest"}};if(d==="POST")s.body=new FormData(o);else{var u=new URLSearchParams(new FormData(o));l+=(l.indexOf("?")===-1?"?":"&")+u.toString()}fetch(l,s).then(function(m){var e=m.headers.get("HX-Trigger");if(e&&e.indexOf("HTMX.closemodal")!==-1)return e.indexOf("HTMX.ShowNotification")!==-1&&window.dispatchEvent(new CustomEvent("HTMX.ShowNotification")),leantime.modals.closeModal(),null;var a=m.headers.get("HX-Redirect");return a?(leantime.modals.closeModal(),window.location.href=a,null):m.text()}).then(function(m){leantime.modals.renderContent(m)}).catch(function(m){console.error("modalManager: form submit error",m)})}},!0)});window.addEventListener("hashchange",function(){leantime.modals.openModal()});window.addEventListener("closeModal",function(){leantime.modals.closeModal()});document.addEventListener("HTMX.closemodal",function(){leantime.modals.closeModal()});leantime.modals.nmManual=function(n,t){typeof t=="function"&&(t=t()),t&&t.callbacks&&typeof t.callbacks.beforeClose=="function"&&(window.globalModalCallback=t.callbacks.beforeClose),leantime.modals.openByUrl(n)};leantime.modals.nmTop=function(){return{close:function(){leantime.modals.closeModal()},elts:{cont:document.getElementById("global-modal-box"),bg:document.querySelector("#global-modal .tw\\:modal-backdrop"),load:document.querySelector("#global-modal .tw\\:loading"),all:document.getElementById("global-modal")}}};leantime.modals.initNyroModal=function(n,t){n instanceof HTMLElement&&(n=[n]),Array.prototype.forEach.call(n,function(o){if(!o.dataset.modalManagerInit){o.dataset.modalManagerInit="true",t&&t.callbacks&&(o._modalManagerOpts=t);var d=o.getAttribute("href");d&&o.addEventListener("click",function(l){if(l.preventDefault(),l.stopPropagation(),t&&t.callbacks&&typeof t.callbacks.beforeClose=="function"&&(window.globalModalCallback=t.callbacks.beforeClose),d.indexOf("#")===0){var s=d.substring(1);try{history.pushState("",document.title,window.location.pathname+window.location.search+d)}catch{}leantime.modals.openByUrl(s)}else leantime.modals.openByUrl(d)})}})};typeof jQuery<"u"&&(jQuery.nmManual=leantime.modals.nmManual,jQuery.nmTop=leantime.modals.nmTop,jQuery.fn.nyroModal=function(n){return leantime.modals.initNyroModal(this.toArray(),n),this});leantime.dateController=function(){function n(d){var l=leantime.i18n.__("language.dayNames").split(",");leantime.i18n.__("language.dayNamesShort").split(",");var s=leantime.i18n.__("language.dayNamesMin").split(","),u=leantime.i18n.__("language.monthNames").split(","),m=leantime.i18n.__("language.monthNamesShort").split(","),e=parseInt(leantime.i18n.__("language.firstDayOfWeek"),10)||0;return{dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr"),locale:{firstDayOfWeek:e,weekdays:{shorthand:s,longhand:l},months:{shorthand:m,longhand:u}},allowInput:!0,onChange:d?function(a,i,p){d.call(p.input,i,p)}:void 0}}var t=function(d,l,s){var u=typeof d=="string"?document.querySelector(d):d,m=typeof l=="string"?document.querySelector(l):l;if(!(!u||!m)&&!(u.hasAttribute("readonly")||m.hasAttribute("readonly"))){var e=n();e.onChange=function(r){r.length>0&&(p.set("minDate",r[0]),m.value||p.setDate(r[0],!0))};var a=n();a.onChange=function(r){r.length>0&&i.set("maxDate",r[0])};var i=flatpickr(u,e),p=flatpickr(m,a)}},o=function(d,l){var s=typeof d=="string"?document.querySelectorAll(d):d?[d]:[];s.forEach(function(u){if(u&&!u.hasAttribute("readonly")){var m=(u.value||"").trim(),e=m&&!/\d/.test(m);e&&(u.setAttribute("placeholder",m),u.value=""),flatpickr(u,n(l))}})};return{initDateRangePicker:t,initDatePicker:o,getBaseDatePickerConfig:n}}();(function(){if(!(typeof jQuery>"u")){var n=new WeakMap;jQuery.datepicker=jQuery.datepicker||{},jQuery.datepicker.setDefaults=function(){},jQuery.datepicker.parseDate=function(t,o){if(!o)return null;var d=leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr");return flatpickr.parseDate(o,d)},jQuery.datepicker.formatDate=function(t,o){if(!o)return"";var d=leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr");return flatpickr.formatDate(o,d)},jQuery.fn.datepicker,jQuery.fn.datepicker=function(t,o){return this.each(function(){var d=this;if(typeof t=="string"){var l=n.get(d);if(!l)return;if(t==="option"||t==="setDate")if(o==="minDate"||t==="setDate"){var s=arguments.length>2?arguments[2]:o;t==="setDate"?l.setDate(s,!0):l.set("minDate",s)}else o==="maxDate"&&l.set("maxDate",arguments[2]);return}if(!d.hasAttribute("readonly")){var u=leantime.dateController.getBaseDatePickerConfig();t&&t.onSelect&&(u.onChange=function(e,a,i){t.onSelect.call(d,a,i)});var m=flatpickr(d,u);n.set(d,m)}})}}})();leantime.dateHelper=function(){var n={jquery:{},luxon:{},flatpickr:{}};n.jquery={d:"dd",D:"D",j:"d",l:"DD",N:"",S:"",w:"",z:"o",W:"",F:"MM",m:"mm",M:"M",n:"m",t:"",L:"",o:"yy",Y:"yy",y:"y",a:"",A:"",B:"",g:"",G:"",h:"",H:"",i:"",s:"",u:"",e:"",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"@"},n.flatpickr={d:"d",D:"D",j:"j",l:"l",N:"",S:"",w:"w",z:"",W:"W",F:"F",m:"m",M:"M",n:"n",t:"",L:"",o:"Y",Y:"Y",y:"y",a:"K",A:"K",B:"",g:"G",G:"H",h:"h",H:"H",i:"i",s:"S",u:"",e:"",I:"",O:"",P:"",T:"",Z:"Z",c:"",r:"",U:"U"},n.luxon={d:"dd",D:"ccc",j:"d",l:"cccc",N:"c",S:"",w:"c",z:"o",W:"WW",F:"MMMM",m:"LL",M:"LLL",n:"L",t:"",L:"",o:"kk",Y:"yyyy",y:"yy",a:"a",A:"a",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",v:"SSS",e:"z",I:"",O:"ZZ",P:"ZZ",T:"ZZZ",Z:"",c:"",r:"",U:"X"};var t=function(d,l){let s=n[l],u="";return d.split("").forEach(function(m){s[m]!==void 0?u=u+""+s[m]:u=u+""+m}),u},o=function(d,l){let s=leantime.i18n.__("language."+d);return t(s,l)};return{mapFormat:t,getFormatFromSettings:o}}();leantime.authController=function(){var n=function(t){typeof t===void 0&&(t="body"),jQuery(t).find("input").not(".filterBar input").prop("readonly",!0),jQuery(t).find("input").not(".filterBar input").prop("disabled",!0),jQuery(t).find("select").not(".filterBar select, .mainSprintSelector").prop("readonly",!0),jQuery(t).find("select").not(".filterBar select, .mainSprintSelector").prop("disabled",!0),jQuery(t).find("textarea").not(".filterBar textarea").prop("disabled",!0),jQuery(t).find("a.delete").remove(),jQuery(t).find(".quickAddLink").hide(),jQuery(t).find(".tiptap-editor").length&&window.leantime&&window.leantime.tiptapController&&jQuery(t).find(".tiptap-editor").each(function(){var o=leantime.tiptapController.registry.get(this);o&&o.setEditable(!1)}),jQuery(t).find(".tiptap-toolbar").hide(),jQuery(t).find(".ticketDropdown a").removeAttr("data-toggle"),jQuery("#mainToggler").hide(),jQuery(".commentBox").hide(),jQuery(".deleteComment, .replyButton").hide(),jQuery(t).find(".dropdown i").removeClass("fa-caret-down")};return{makeInputReadonly:n}}();leantime.commentsController=function(){var n=function(){jQuery(".commentBox").show(),jQuery("#comments .replies .commentBox").hide(),jQuery(".deleteComment, .replyButton").show(),jQuery(".commentReply .tiptap-wrapper").each(function(){var o=jQuery(this).find(".tiptap-editor")[0];if(o&&window.leantime&&window.leantime.tiptapController){var d=leantime.tiptapController.registry.get(o);d&&d.setEditable(!0)}}),jQuery(".commentReply .tiptap-toolbar").show(),jQuery(".commenterFields input").prop("readonly",!1),jQuery(".commenterFields input").prop("disabled",!1),jQuery(".commenterFields textarea").prop("readonly",!1),jQuery(".commenterFields textarea").prop("disabled",!1)},t=function(o){o==0?jQuery("#mainToggler").hide():jQuery("#mainToggler").show(),window.leantime&&window.leantime.tiptapController&&window.leantime.tiptapController.registry&&jQuery(".commentBox .tiptap-editor").each(function(){leantime.tiptapController.registry.destroy(this)}),jQuery(".commentBox .tiptap-wrapper").remove(),jQuery(".commentBox textarea").remove(),jQuery(".commentBox").hide("fast",function(){}),jQuery("#comment"+o+" .commentReply").prepend('<textarea rows="5" cols="75" name="text" class="tiptapSimple"></textarea>'),window.leantime&&window.leantime.tiptapController&&leantime.tiptapController.initSimpleEditor(),jQuery("#comment"+o).show("fast"),jQuery("#father").val(o)};return{enableCommenterForms:n,toggleCommentBoxes:t}}();leantime.ticketsController=function(){function n(){let h=[];jQuery(".sortableTicketList").each(function(v){jQuery(this).find(".column").each(function(c){h[c]===void 0&&(h[c]=0);var f=jQuery(this).find(".moveable").length;h[c]+=f})}),jQuery(".widgettitle .count").each(function(v){jQuery(this).text(h[v])})}function t(){jQuery(".kanban-swimlane-row").each(function(){var h=jQuery(this),v=h.attr("id");if(v){v.replace("swimlane-row-","");var c=h.find(".kanban-swimlane-content"),f=c.find(".moveable").length,_=h.find(".kanban-swimlane-sidebar");_.find(".kanban-lane-count").text(f);var g=_.attr("aria-label")||"",b=g.replace(/\d+ tasks/,f+" tasks");_.attr("aria-label",b)}}),o()}function o(){jQuery(".kanban-swimlane-row").each(function(){var h=jQuery(this),v=h.find(".kanban-swimlane-content"),c=h.find(".micro-progress-bar .progress-segments");if(c.length){var f={},_=0;v.find(".contentInner").each(function(){var b=jQuery(this),k=b.attr("class")||"",Q=k.match(/status_(-?\d+)/);if(Q){var L=Q[1],j=b.find(".moveable").length;j>0&&(f[L]=j,_+=j)}});var g=c.find(".status-segment");if(_===0){g.css("flex","0 1 0%").find(".segment-count").text(""),g.attr("data-tippy-content","");return}g.each(function(){var b=jQuery(this),k=b.attr("class");if(k){var Q=k.match(/status-(-?\d+)/);if(Q){var L=Q[1],j=f[L]||0,E=j/_*100;b.css("flex",E+" 1 0%");var q=b.find(".segment-count");q.length&&q.text(j>0?j:"");var S=b.attr("data-tippy-content")||"",F=S.match(/^([^:]+):/),V=F?F[1]:"Status "+L;b.attr("data-tippy-content",j>0?V+": "+j:"")}}})}})}var d=function(h,v){var c=jQuery("#ticket_"+h);if(!c.length){console.warn("Card not found for ticket ID:",h);return}var f=c.closest(".contentInner"),_=f.attr("class")||"",g=_.match(/status_(\d+)/);if(!g){console.warn("Could not determine status for ticket:",h),location.reload();return}var b=g[1],k=jQuery("#kanboard-"+v+" .contentInner.status_"+b);if(!k.length){console.warn("Target swimlane not found:",v,b),location.reload();return}f[0]!==k[0]&&(c.addClass("card-moving-out"),setTimeout(function(){c.detach().appendTo(k),c.removeClass("card-moving-out").addClass("card-moving-in"),n(),t(),k.sortable&&k.sortable("refresh"),setTimeout(function(){c.removeClass("card-moving-in")},300)},200))},l=function(h,v){var c=jQuery(h).val();leantime.ticketsRepository.updateRemainingHours(v,c,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.remaining_hours_updated"),style:"success"})})},s=function(h,v){var c=jQuery(h).val();leantime.ticketsRepository.updatePlannedHours(v,c,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.planned_hours_updated"),style:"success"})})},u=function(){jQuery(".filterBar").toggle()},m=function(h,v,c){function f(_){return String(_).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}jQuery(document).ready(function(){if(c===!1)var _=new Gantt("#gantt",h,{header_height:55,column_width:20,step:24,view_modes:["Day","Week","Month"],bar_height:40,static_progress_indicator:!0,bar_corner_radius:10,arrow_curve:10,padding:20,view_mode:"Month",date_format:leantime.i18n.__("language.momentJSDate"),language:leantime.i18n.__("language.code").slice(0,2),additional_rows:5,custom_popup_html:function(g){var b=g._end,k=jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),new Date(b)),Q='<div class="details-container" style="min-width:600px;"> ';return g.projectName!==void 0&&(Q+="<h3><b>"+g.projectName+"</b></h3>"),Q+="<small>"+g.type+" #"+g.id+" </small>",g.type==="milestone"?Q+='<h4><a href="#/tickets/editMilestone/'+g.id+'" >'+f(g.name)+"</a></h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+k+"</strong><br /> "+Math.round(g.progress)+'%</p> <a href="#/tickets/editMilestone/'+g.id+'" ><span class="fa fa-map"></span> '+leantime.i18n.__("links.edit_milestone")+'</a> | <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+g.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":Q+='<h4><a href="#/tickets/showTicket/'+g.id+'">'+f(g.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+g.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",Q+="</div>",Q},on_click:function(g){},on_date_change:function(g,b,k){leantime.ticketsRepository.updateMilestoneDates(g.id,b,k,g._index+1)},on_sort_change:function(g){for(var b={action:"ganttSort",payload:{}},k=0;k<g.length;k++)b.payload[g[k].id]=g[k]._index+1;jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/tickets",data:b})},on_progress_change:function(g,b){},on_view_change:function(g){leantime.usersRepository.updateUserViewSettings("roadmap",g)},on_popup_show:function(g){}});else var _=new Gantt("#gantt",h,{readonlyGantt:!0,resizing:!1,progress:!1,is_draggable:!1,custom_popup_html:function(b){var k=b._end,Q=jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),new Date(k)),L='<div class="details-container" style="min-width:600px;"> ';return b.projectName!==void 0&&(L+="<h3><b>"+b.projectName+"</b></h3>"),L+="<small>"+b.type+" #"+b.id+" </small>",b.type==="milestone"?L+="<h4>"+f(b.name)+"</h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+Q+"</strong><br /> "+Math.round(b.progress)+'%</p> <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+b.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":L+='<h4><a href="#/tickets/showTicket/'+b.id+'">'+f(b.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+b.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",L+="</div>",L},on_click:function(b){},on_date_change:function(b,k,Q){},on_progress_change:function(b,k){},on_view_change:function(b){leantime.usersRepository.updateUserViewSettings("roadmap",b)}});jQuery("#ganttTimeControl").on("click","a",function(){var g=jQuery(this),b=g.attr("data-value");_.change_view_mode(b),g.parent().parent().find("a").removeClass("active"),g.addClass("active");var k=g.text();jQuery(".viewText").text(k)}),_.change_view_mode(v)})},e=function(){Date.prototype.addDays=function(_){return this.setDate(this.getDate()+_),this},jQuery.datepicker.setDefaults({beforeShow:function(_){if(jQuery(_).attr("readonly"))return!1}});var h=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),v=jQuery("#sprintStart").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){c.datepicker("option","minDate",f(this));var _=f(this).addDays(13);c.datepicker("setDate",_)}),c=jQuery("#sprintEnd").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){v.datepicker("option","maxDate",f(this))});function f(_){var g;try{g=jQuery.datepicker.parseDate(h,_.value)}catch(b){g=null,console.log(b)}return g}},a=function(){var h=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),v=jQuery("#milestoneEditFrom").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){c.datepicker("option","minDate",f(this))}),c=jQuery("#milestoneEditTo").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){v.datepicker("option","maxDate",f(this))});function f(_){var g;try{g=jQuery.datepicker.parseDate(h,_.value)}catch(b){g=null,console.log(b)}return g}},i=function(){var h=leantime.dateHelper.getFormatFromSettings("dateformat","jquery");jQuery(".milestoneEditFromAsync").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){var c=jQuery(this).val(),f=jQuery(this).attr("data-id"),_=jQuery(".toDateTicket-"+f);_.datepicker("option","minDate",v(this)),jQuery(".toDateTicket-"+f).val(),leantime.ticketsRepository.updateEditFromDates(f,c,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})})}),jQuery(".milestoneEditToAsync").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){var c=jQuery(this).attr("data-id"),f=jQuery(".fromDateTicket-"+c);f.datepicker("option","maxDate",v(this));var _=jQuery(this).val();jQuery(".fromDateTicket-"+c).val(),leantime.ticketsRepository.updateEditToDates(c,_,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})})});function v(c){var f;try{f=jQuery.datepicker.parseDate(h,c.value)}catch(_){f=null,console.log(_)}return f}},p=function(){jQuery('[data-toggle="tooltip"]').tooltip()},r=function(){var h={"0.5":"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"};jQuery(".effortDropdown .dropdown-menu a").unbind().on("click",function(){var v=jQuery(this).attr("data-value").split("_");if(v.length===2){var c=v[0],f=v[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:c,storypoints:f}}).done(function(){jQuery("#effortDropdownMenuLink"+c+" span.text").text(h[f]),jQuery.growl({message:leantime.i18n.__("short_notifications.effort_updated"),style:"success"}),leantime.kanbanGroupBy==="storypoints"&&d(c,f)})}else console.log("Ticket Controller: Effort data value not set correctly")})},C=function(){var h={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"};jQuery(".priorityDropdown .dropdown-menu a").unbind().on("click",function(){var v=jQuery(this).attr("data-value").split("_");if(v.length===2){var c=v[0],f=v[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:c,priority:f}}).done(function(){jQuery("#priorityDropdownMenuLink"+c+" span.text").text(h[f]),jQuery("#priorityDropdownMenuLink"+c).removeClass("priority-bg-1 priority-bg-2 priority-bg-3 priority-bg-4 priority-bg-5"),jQuery("#priorityDropdownMenuLink"+c).addClass("priority-bg-"+f),jQuery("#priorityDropdownMenuLink"+c).parents(".ticketBox").removeClass("priority-border-1 priority-border-2 priority-border-3 priority-border-4 priority-border-5"),jQuery("#priorityDropdownMenuLink"+c).parents(".ticketBox").addClass("priority-border-"+f),jQuery.growl({message:leantime.i18n.__("short_notifications.priority_updated"),style:"success"}),leantime.kanbanGroupBy==="priority"&&d(c,f)})}else console.log("Ticket Controller: Priority data value not set correctly")})},y=function(){jQuery(".milestoneDropdown .dropdown-menu a").unbind().on("click",function(){var h=jQuery(this).attr("data-value").split("_"),v=jQuery(this).attr("data-label");if(h.length===3){var c=h[0],f=h[1],_=h[2];jQuery("#milestoneDropdownMenuLink"+c+" span.text").append(" ..."),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:c,milestoneid:f}}).done(function(){jQuery("#milestoneDropdownMenuLink"+c+" span.text").text(v),jQuery("#milestoneDropdownMenuLink"+c).css("backgroundColor",_),jQuery.growl({message:leantime.i18n.__("short_notifications.milestone_updated"),style:"success"}),leantime.kanbanGroupBy==="milestoneid"&&d(c,f)})}})},T=function(){jQuery(".statusDropdown .dropdown-menu a").unbind().on("click",function(){var h=jQuery(this).attr("data-value").split("_"),v=jQuery(this).attr("data-label");if(h.length==3){var c=h[0],f=h[1],_=h[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:c,status:f}}).done(function(g){jQuery("#statusDropdownMenuLink"+c+" span.text").text(v),jQuery("#statusDropdownMenuLink"+c).removeClass().addClass(_+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated"),style:"success"}),leantime.handleAsyncResponse(g)})}})},D=function(){jQuery(".userDropdown .dropdown-menu a").unbind().on("click",function(){var h=jQuery(this).attr("data-value").split("_"),v=jQuery(this).attr("data-label");if(h.length===3){var c=h[0],f=h[1];h[2],jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:c,editorId:f}}).done(function(){jQuery("#userDropdownMenuLink"+c+" span.text span#userImage"+c+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+f),jQuery("#userDropdownMenuLink"+c+" span.text span#user"+c).text(v),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"}),leantime.kanbanGroupBy==="editorId"&&d(c,f)})}})},R=function(){jQuery(".asyncInputUpdate").on("change",function(){var h=jQuery(this).attr("data-label").split("-");if(h.length==2){var v=h[0],c=h[1],f=jQuery(this).val();jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:c,[v]:f}}).done(function(){jQuery.growl({message:leantime.i18n.__("notifications.subtask_saved"),style:"success"})})}})},w=function(){jQuery(".sprintDropdown .dropdown-menu a").unbind().on("click",function(){var h=jQuery(this).attr("data-value").split("_"),v=jQuery(this).attr("data-label");if(h.length==2){var c=h[0],f=h[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:c,sprint:f}}).done(function(){jQuery("#sprintDropdownMenuLink"+c+" span.text").text(v),jQuery.growl({message:leantime.i18n.__("short_notifications.sprint_updated"),style:"success"}),leantime.kanbanGroupBy==="sprint"&&d(c,f)})}})},x=function(){var h=["#821219","#BB1B25","#75BB1B","#4B7811","#fdab3d","#1bbbb1","#006d9f","#124F7D","#082236","#5F0F40","#bb1b75","#F26CA7","#BB611B","#aaaaaa","#4c4c4c"];jQuery("input.simpleColorPicker").simpleColorPicker({colors:h,onChangeColor:function(c){jQuery(this).css("background",c),jQuery(this).css("color","#fff")}});var v=jQuery("input.simpleColorPicker").val();v!=""&&jQuery("input.simpleColorPicker").css("background",v)},M=function(){jQuery(".date-picker-form-control .reset-button").on("click",function(){const h=jQuery(this).attr("data-id");jQuery("#due-date-picker-"+h).val(leantime.i18n.__("text.anytime")),leantime.ticketsRepository.updateDueDates(h,null,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})})}),leantime.dateController.initDatePicker(".quickDueDates, .duedates",function(h,v){var c=v.currentDay,f=v.currentMonth,_=v.currentYear,g=new Date(_,f,c),b=jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),g),k=jQuery(this).attr("data-id");leantime.ticketsRepository.updateDueDates(k,b,function(){jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})})})},P=function(h,v,c,f){var _=document.getElementById(f).getContext("2d");new Chart(_,{type:"line",data:{labels:h,datasets:[{label:leantime.i18n.__("label.booked_hours"),backgroundColor:"rgba(201,48,44, 0.5)",borderColor:"rgb(201,48,44)",data:v},{label:leantime.i18n.__("label.planned_hours"),backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgb(54, 162, 235)",data:c}]},options:{scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.booked_hours")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.planned_hours")},ticks:{beginAtZero:!0}}}}})},U=function(){jQuery(document).ready(function(){let h=new URL(window.location.href),v=h.searchParams.get("tab"),c=0;v&&(c=jQuery(".ticketTabs").find('a[href="#'+v+'"]').parent().index()),jQuery(".ticketTabs").tabs({create:function(f,_){jQuery(".ticketTabs").css("visibility","visible")},activate:function(f,_){h=new URL(window.location.href),h.searchParams.set("tab",_.newPanel[0].id),window.history.replaceState(null,null,h)},load:function(){},enable:function(){},active:c})})},H=function(h){jQuery("#ticketSearch").on("submit",function(v){v.preventDefault();var c=jQuery("#projectIdInput").val(),f=jQuery("#userSelect").val(),_=jQuery("#milestoneSelect").val(),g=jQuery("#termInput").val(),b=jQuery("#sprintSelect").val(),k=jQuery("#typeSelect").val(),Q=jQuery("#prioritySelect").val(),L=jQuery("#statusSelect").val(),j=jQuery("#sortBySelect").val(),E=jQuery("input[name='groupBy']:checked").val(),q=jQuery("input[name='showTasks']:checked").val(),S="?search=true";c!=""&&c!=null&&(S=S+"&projectId="+c),f!=""&&f!=null&&(S=S+"&users="+f),_!=""&&_!=null&&(S=S+"&milestone="+_),g!=""&&g!=null&&(S=S+"&term="+g),b!=""&&b!=null&&(S=S+"&sprint="+b),k!=""&&k!=null&&(S=S+"&type="+k),Q!=""&&Q!=null&&(S=S+"&priority="+Q),L!=""&&L!=null&&(S=S+"&status="+L),j!=""&&j!=null&&(S=S+"&sort="+j),E!=""&&E!=null&&(S=S+"&groupBy="+E),q!=""&&q!=null&&(S=S+"&showTasks="+q);var F=h+S;window.location.href=F})},B=function(h){var v=jQuery("#projectIdInput").val(),c=jQuery("#userSelect").val(),f=jQuery("#milestoneSelect").val(),_=jQuery("#termInput").val(),g=jQuery("#sprintSelect").val(),b=jQuery("#typeSelect").val(),k=jQuery("#prioritySelect").val(),Q=jQuery("#statusSelect").val(),L=jQuery("#sortBySelect").val(),j=jQuery("input[name='groupBy']:checked").val(),E="?search=true";v!=""&&v!=null&&(E=E+"&projectId="+v),c!=""&&c!=null&&(E=E+"&users="+c),f!=""&&f!=null&&(E=E+"&milestone="+f),_!=""&&_!=null&&(E=E+"&term="+_),g!=""&&g!=null&&(E=E+"&sprint="+g),b!=""&&b!=null&&(E=E+"&type="+b),k!=""&&k!=null&&(E=E+"&priority="+k),Q!=""&&Q!=null&&(E=E+"&status="+Q),L!=""&&L!=null&&(E=E+"&sort="+L),j!=""&&j!=null&&(E=E+"&groupBy="+j);var q=h+E;window.location.href=q},I=function(){jQuery(document).ready(function(){n(),t(),jQuery(".filterBar .row-fluid").css("opacity","1"),jQuery(".sortableTicketList").each(function(){let h=jQuery(this).attr("id");var v=jQuery(this).closest(".kanban-swimlane-row");if(v.length&&v.attr("data-expanded")==="false")return;let c=250;jQuery(this).find(".column .contentInner").each(function(){jQuery(this).height()>c&&(c=jQuery(this).height())}),jQuery("#"+h+" .column .contentInner").css("height",c)})})},N=function(h){var v=h;jQuery(".sortableTicketList.kanbanBoard .ticketBox").hover(function(){jQuery(this).css("background","var(--kanban-card-hover)")},function(){jQuery(this).css("background","var(--kanban-card-bg)")}),jQuery(".sortableTicketList").each(function(){var f=this;jQuery(f).find(".contentInner").sortable({connectWith:".contentInner",items:"> .moveable",tolerance:"intersect",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,cancel:".portlet-toggle,:input,a,input",distance:10,start:function(_,g){g.item.addClass("tilt"),c(g.item);var b=g.item.closest(".sortableTicketList.kanbanBoard");g.item.data("originalSwimlaneId",b.attr("id"))},stop:function(_,g){g.item.removeClass("tilt"),jQuery("html").unbind("mousemove",g.item.data("move_handler")),g.item.removeData("move_handler"),n(),t(),jQuery(".sortableTicketList").find(".contentInner").each(function(){var O=jQuery(this),ce=O.find(".moveable").length>0;if(ce){O.removeClass("empty-column"),O.attr("data-empty-text","");var qe=O.attr("aria-label")||"";O.attr("aria-label",qe.replace("Empty column","")+" column items")}else O.addClass("empty-column"),O.attr("data-empty-text","Empty"),O.attr("aria-label","Empty column")});var b=g.item.closest(".sortableTicketList.kanbanBoard"),k=b.attr("id"),Q=g.item.data("originalSwimlaneId");if(Q&&k&&Q!==k){var L=g.item[0].id.replace("ticket_",""),j=k.replace("kanboard-",""),E={milestoneid:"milestoneid",editorId:"editorId",priority:"priority",storypoints:"storypoints",sprint:"sprint",dueDate:"dateToFinish"},q=leantime.kanbanGroupBy,S=E[q];if(q==="dueDate"){var F=new Date;switch(F.setHours(12,0,0,0),j){case"0":var V=new Date(F);V.setDate(V.getDate()-1),j=V.toISOString().split("T")[0];break;case"1":var ee=new Date(F),ie=6-ee.getDay();ie<0&&(ie=0),ee.setDate(ee.getDate()+ie),j=ee.toISOString().split("T")[0];break;case"2":var te=new Date(F),Qe=6-te.getDay()+7;te.setDate(te.getDate()+Qe),j=te.toISOString().split("T")[0];break;case"3":var re=new Date(F);re.setDate(re.getDate()+21),j=re.toISOString().split("T")[0];break;case"4":j="";break}}if(S&&L){var G=jQuery("#ticket_"+L);if(q==="milestoneid"){var Z=jQuery("#swimlane-row-"+j+" .swimlane-header-label"),Ee=Z.text()||leantime.i18n.__("label.no_milestone"),pe=G.find(".milestoneDropdown .dropdown-toggle .text");pe.length&&pe.text(Ee);var le=G.find('.milestoneDropdown .dropdown-menu a[data-value^="'+L+"_"+j+'_"]'),K="#b0b0b0";if(le.length&&j!=="0"&&j!==""){var fe=le.attr("data-value");if(fe){var ge=fe.split("_");ge.length>=3&&(K=ge.slice(2).join("_"))}if(!K||K==="#b0b0b0"){var he=le.attr("style");if(he){var ye=he.match(/background-color:\s*([^;]+)/i);ye&&(K=ye[1].trim())}}}G.find(".milestoneDropdown .dropdown-toggle").css("background-color",K)}else if(q==="priority"){G.removeClass(function(O,ce){return(ce.match(/(^|\s)priority-border-\S+/g)||[]).join(" ")}).addClass("priority-border-"+j);var Re={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"},ae=jQuery("#priorityDropdownMenuLink"+L);ae.length&&(ae.find("span.text").text(Re[j]||j),ae.removeClass("priority-bg-1 priority-bg-2 priority-bg-3 priority-bg-4 priority-bg-5"),ae.addClass("priority-bg-"+j))}else if(q==="editorId"){var se=jQuery("#userDropdownMenuLink"+L);if(se.length){se.find("span.text span img").attr("src",leantime.appUrl+"/api/users?profileImage="+j);var Z=jQuery("#swimlane-row-"+j+" .swimlane-header-label"),Fe=Z.text()||leantime.i18n.__("label.not_assigned");se.find("span.text span#user"+L).text(Fe)}}else if(q==="storypoints"){var He={"0.5":"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"},ve=jQuery("#effortDropdownMenuLink"+L);ve.length&&ve.find("span.text").text(He[j]||j)}else if(q==="sprint"){var be=jQuery("#sprintDropdownMenuLink"+L);if(be.length){var Z=jQuery("#swimlane-row-"+j+" .swimlane-header-label"),Ae=Z.text()||leantime.i18n.__("label.backlog");be.find("span.text").text(Ae)}}else if(q==="dueDate"){var ne=G.find(".dues .fa-calendar").parent();if(ne.length&&j){var de=j.split("-"),Pe=de[1]+"/"+de[2]+"/"+de[0];ne.contents().filter(function(){return this.nodeType===3}).first().replaceWith(" "+Pe)}else ne.length&&!j&&ne.contents().filter(function(){return this.nodeType===3}).first().replaceWith(" No due date")}jQuery.growl({message:"To-Do Updated",style:"success"});var we={id:L};we[S]=j,jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:we}).fail(function(){jQuery.growl({message:leantime.i18n.__("short_notifications.not_saved")||"Error updating ticket",style:"error"}),location.reload()})}}g.item.removeData("originalSwimlaneId");for(var _e=g.item.closest(".sortableTicketList"),Te={action:"kanbanSort",payload:{},handler:g.item[0].id},$=0;$<v.length;$++)_e.find(".contentInner.status_"+v[$]).length&&(Te.payload[v[$]]=_e.find(".contentInner.status_"+v[$]).sortable("serialize"));jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/tickets",data:Te}).done(function(O){leantime.handleAsyncResponse(O)})}})});function c(f){var _=f.position().left,g=function(b){b.pageX+5>_?(f.addClass("right"),f.removeClass("left")):b.pageX<_+5?(f.addClass("left"),f.removeClass("right")):(f.removeClass("left"),f.removeClass("right")),_=b.pageX};jQuery("html").bind("mousemove",g),f.data("move_handler",g)}jQuery(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>"),jQuery(".portlet-toggle").click(function(){var f=jQuery(this);f.toggleClass("ui-icon-minusthick ui-icon-plusthick"),f.closest(".portlet").find(".portlet-content").toggle()})},W=function(h){function v(c){return!isNaN(parseFloat(c))&&isFinite(c)}jQuery(document).ready(function(){var c=[],f=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom">p<"clear">',searching:!1,stateSave:!0,displayLength:100,order:c,columnDefs:[{visible:!1,targets:10},{visible:!1,targets:11},{target:"no-sort",orderable:!1}],footerCallback:function(_,g,b,k,Q){var L=this.api(),j=L.column(10).data().reduce(function(S,F){return v(S)===!1&&(S=jQuery(S).val()),v(F)===!1&&(F=jQuery(F).val()),isNaN(S)&&(S=0),isNaN(F)&&(F=0),parseFloat(S)+parseFloat(F)},0),E=L.column(11).data().reduce(function(S,F){return v(S)===!1&&(S=jQuery(S).val()),v(F)===!1&&(F=jQuery(F).val()),isNaN(S)&&(S=0),isNaN(F)&&(F=0),parseFloat(S)+parseFloat(F)},0),q=L.column(12).data().reduce(function(S,F){return parseFloat(S)+parseFloat(F)},0);jQuery(L.column(9).footer()).html("Total"),jQuery(L.column(10).footer()).html(j),jQuery(L.column(11).footer()).html(E),jQuery(L.column(12).footer()).html(q)}});new jQuery.fn.dataTable.Buttons(f.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(_,g,b,k){return typeof jQuery(k).data("order")<"u"&&(_=jQuery(k).data("order")),_}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(jQuery("#tableButtons")),f.table(0).on("column-visibility",function(_,g,b,k){for(var Q=1;Q<f.tables().context.length;Q++)f.tables(Q).column(b).visible(k);f.draw()}),jQuery(".ticketTable input").on("change",function(_,g,b,k){jQuery(this).parent().attr("data-order",jQuery(this).val()),f.draw()})})},J=function(h){jQuery(document).ready(function(){var v=[];jQuery(".listStyleTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"<"center"p>><"clear">',searching:!1,stateSave:!0,displayLength:25,order:v,fnDrawCallback:function(c){c._iDisplayLength>c.fnRecordsDisplay()?jQuery(c.nTableWrapper).find(".dataTables_paginate").hide():jQuery(c.nTableWrapper).find(".dataTables_paginate").show()}})})},Y=function(h){jQuery(document).ready(function(){var v=[],c=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"><"clear">',searching:!1,stateSave:!0,displayLength:100,order:v,columnDefs:[{visible:!1,targets:7},{visible:!1,targets:8},{target:"no-sort",orderable:!1}]});new jQuery.fn.dataTable.Buttons(c.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(f,_,g,b){return typeof jQuery(b).data("order")<"u"&&(f=jQuery(b).data("order")),f}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(jQuery("#tableButtons")),c.table(0).on("column-visibility",function(f,_,g,b){for(var k=1;k<c.tables().context.length;k++)c.tables(k).column(g).visible(b);c.draw()}),jQuery(".ticketTable input").on("change",function(f,_,g,b){jQuery(this).parent().attr("data-order",jQuery(this).val()),c.draw()})})},je=function(h,v){window.leantime&&window.leantime.tiptapController&&window.leantime.tiptapController.registry&&leantime.tiptapController.registry.destroyAll(),jQuery(".ticketRows").removeClass("active"),jQuery("#row-"+h).addClass("active"),jQuery(v).html("<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px' /></div>");function c(f){jQuery(f).find("form").each(function(){jQuery(this).on("submit",function(_){_.preventDefault(),window.leantime&&window.leantime.tiptapController&&window.leantime.tiptapController.registry&&leantime.tiptapController.registry.destroyAll(),jQuery(f).html("<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px'/></div>");var g=jQuery(this).serialize();jQuery.ajax({url:jQuery(this).attr("action"),data:g,type:"post",success:function(b){jQuery(f).html(b),c(f)},error:function(){}})})})}jQuery.get(leantime.appUrl+"/tickets/showTicket/"+h,function(f){jQuery(v).html(f),c(v)})},Le=function(){jQuery("#tags").tagsInput({autocomplete_url:leantime.appUrl+"/api/tags"}),jQuery("#tags_tag").on("focusout",function(){let h=jQuery(this).val();h!=""&&jQuery("#tags").addTag(h)})},Me=function(h,v){var c="Discussion on To-Do #"+v+`:
\r`+jQuery("#commentText-"+h).text();jQuery('li a[href*="timesheet"]').click(),jQuery("#timesheet #description").val(c)};return{toggleFilterBar:u,initGanttChart:m,updateRemainingHours:l,updatePlannedHours:s,initTimeSheetChart:P,initTicketTabs:U,initTicketSearchSubmit:H,initTicketKanban:N,initTicketsTable:W,initEffortDropdown:r,initPriorityDropdown:C,initMilestoneDropdown:y,initStatusDropdown:T,initUserDropdown:D,initSprintDropdown:w,initToolTips:p,initTagsInput:Le,initMilestoneDatesAsyncUpdate:i,initAsyncInputChange:R,initDueDateTimePickers:M,setUpKanbanColumns:I,addCommentTimesheetContent:Me,initMilestoneTable:Y,initMilestoneDates:a,initTicketsList:J,loadTicketToContainer:je,initTicketSearchUrlBuilder:B,initSprintDates:e,initSimpleColorPicker:x}}();var X=window.leantime||(window.leantime={});X.ticketsRepository=function(){var n=function(u,m,e,a){let i=X.dateHelper.getFormatFromSettings("dateformat","luxon"),p=X.dateHelper.getFormatFromSettings("timeformat","luxon"),r=luxon.DateTime.fromSQL(m).toFormat(i),C=luxon.DateTime.fromSQL(m).toFormat(p),y=luxon.DateTime.fromSQL(e).toFormat(i),T=luxon.DateTime.fromSQL(e).toFormat(p);fetch(X.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:u,editFrom:r,editTo:y,timeFrom:C,timeTo:T,sortIndex:a})})},t=function(u,m,e){fetch(X.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:u,hourRemaining:m})}).then(function(){e()})},o=function(u,m,e){fetch(X.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:u,planHours:m})}).then(function(){e()})},d=function(u,m,e){fetch(X.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:u,dateToFinish:m})}).then(function(){e()})},l=function(u,m,e){fetch(X.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:u,editFrom:m})}).then(function(){e()})},s=function(u,m,e){fetch(X.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:u,editTo:m})}).then(function(){e()})};return{updateMilestoneDates:n,updateRemainingHours:t,updatePlannedHours:o,updateDueDates:d,updateEditFromDates:l,updateEditToDates:s}}();leantime.dashboardController=function(){var n={};leantime.theme=="dark"?n={red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(56, 56, 56)"}:n={red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"};var t=function(){var e=moment().startOf("week").add(5,"days"),a=document.querySelector("#dateToFinish");a&&(a.value=e.format("YYYY-MM-DD"))},o=function(e,a,i){var p={type:"doughnut",data:{datasets:[{data:[a,i],backgroundColor:[leantime.dashboardController.chartColors.green,leantime.dashboardController.chartColors.grey],label:leantime.i18n.__("label.project_done")}],labels:[a+"% Done",i+"% Open"]},options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:""}},animation:{animateScale:!0,animateRotate:!0}}},r=document.getElementById(e).getContext("2d");new Chart(r,p)},d=function(e,a,i){moment.locale(leantime.i18n.__("language.code"));var p={type:"line",data:{labels:e,datasets:[{label:leantime.i18n.__("label.ideal"),backgroundColor:leantime.dashboardController.chartColors.blue,borderColor:leantime.dashboardController.chartColors.blue,data:a,fill:!1,lineTension:0},{label:"Actual",backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:i,fill:!1,lineTension:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},plugins:{legend:{position:"bottom"},title:{display:!1,text:"Line Chart"},tooltips:{mode:"index",intersect:!1}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0}}}}},r=document.getElementById("sprintBurndown").getContext("2d");return _burndownChart=new Chart(r,p),_burndownChart},l=function(e,a,i,p,r){var C=document.getElementById(e);C&&C.addEventListener("click",function(y){r.data.datasets[0].data=i,r.data.datasets[1].data=p,r.options.scales.y.title.text=a,document.querySelectorAll(".chartButtons").forEach(function(T){T.classList.remove("active")}),C.classList.add("active"),r.update()})},s=function(e,a){moment.locale(leantime.i18n.__("language.code"));var i={type:"line",data:{labels:e,datasets:[{label:leantime.i18n.__("label.done_todos"),backgroundColor:leantime.dashboardController.chartColors.green,borderColor:leantime.dashboardController.chartColors.green,data:a.done.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.progress_todos"),backgroundColor:leantime.dashboardController.chartColors.yellow,borderColor:leantime.dashboardController.chartColors.yellow,data:a.progress.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.new_todos"),backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:a.open.data,fill:!0,lineTension:0,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},elements:{point:{pointStyle:"line",radius:"0"}},plugins:{tooltips:{mode:"index",intersect:!1},legend:{position:"bottom"},title:{display:!1,text:"Line Chart"}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0},stacked:!0}}}},p=document.getElementById("backlogBurndown").getContext("2d");return _burndownChart=new Chart(p,i),_burndownChart},u=function(e,a,i,p){var r=document.getElementById(e);r&&r.addEventListener("click",function(C){p.data.datasets[0].data=a.done.data,p.data.datasets[1].data=a.progress.data,p.data.datasets[2].data=a.open.data,p.options.scales.y.title.text=i,document.querySelectorAll(".backlogChartButtons").forEach(function(y){y.classList.remove("active")}),r.classList.add("active"),p.update()})},m=function(){document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".duedates").forEach(function(e){leantime.dateController.initDatePicker(e,function(a){var i=a;i==""&&(this.value=leantime.i18n.__("text.anytime"));var p=moment(i,leantime.i18n.__("language.momentJSDate")).format("YYYY-MM-DD HH:mm:ss"),r=this.getAttribute("data-id"),C=p;leantime.ticketsRepository.updateDueDates(r,C,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.duedate_updated")})})})})})};return{chartColors:n,initBurndown:d,initChartButtonClick:l,initBacklogBurndown:s,initBacklogChartButtonClick:u,initProgressChart:o,prepareHiddenDueDate:t,initDueDateTimePickers:m}}();leantime.usersController=function(){var n=null,t=function(e){if(o(),e.files&&e.files[0]){var a=new FileReader,i=document.querySelector("#profileImg");a.onload=function(p){n=new Croppie(i,{enableExif:!0,viewport:{width:175,height:175,type:"circle"},boundary:{width:200,height:200}}),n.bind({url:p.currentTarget.result});var r=document.querySelector("#previousImage");r&&(r.style.display="none")},a.readAsDataURL(e.files[0])}},o=function(){n&&(n.destroy(),n=null);var e=document.querySelector("#previousImage");e&&(e.style.display="")},d=function(){var e=document.querySelector("#save-picture");e&&e.classList.add("running");var a=document.querySelector("#profileImg");a&&a.setAttribute("src",leantime.appUrl+"/images/loaders/loader28.gif"),n&&n.result({type:"blob",circle:!0}).then(function(i){leantime.usersService.saveUserPhoto(i)})},l=function(){document.addEventListener("DOMContentLoaded",function(){jQuery("#allUsersTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})})},s=function(){var e={sizes:{minW:400,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(a){a.style.display=""}),jQuery(".userImportModal").nyroModal(e)}}};jQuery(".userImportModal").nyroModal(e)},u=function(){var e={sizes:{minW:900,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(a){a.style.display=""}),jQuery(".userEditModal").nyroModal(e)},beforeClose:function(){location.reload()}}};jQuery(".userEditModal").nyroModal(e)},m=function(e){let a,i=document.getElementById(e),p=document.getElementById("pwStrength"),r=new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})"),C=new RegExp("((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))");function y(T){r.test(T)?(p.style.backgroundColor="#107530",p.textContent=leantime.i18n.__("label.strong")):C.test(T)?(p.style.backgroundColor="#C5850D",p.textContent=leantime.i18n.__("label.medium")):(p.style.backgroundColor="#CC6B6B",p.textContent=leantime.i18n.__("label.weak"))}i.addEventListener("input",()=>{p.style.display="block",clearTimeout(a),a=setTimeout(()=>y(i.value),500),i.value.length!==0?p.style.display!="block":p.style.display="none"})};return{readURL:t,clearCroppie:o,saveCroppie:d,initUserTable:l,_initModals:s,checkPWStrength:m,initUserEditModal:u}}();leantime.usersRepository=function(){var n=function(o){var d=new FormData;d.append("file",o),fetch(leantime.appUrl+"/api/users",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"},body:d}).then(function(l){var s=document.querySelector("#save-picture");s&&s.classList.remove("running"),location.reload()}).catch(function(l){console.log(l)})},t=function(o,d){fetch(leantime.appUrl+"/api/users",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({patchViewSettings:o,value:d})})};return{saveUserPhoto:n,updateUserViewSettings:t}}();leantime.usersService=function(){var n=function(t){leantime.usersRepository.saveUserPhoto(t)};return{saveUserPhoto:n}}();leantime.canvasController=function(){var n="",t=function(y){n=y},o=function(){window.addEventListener("load",function(){document.querySelectorAll(".loading").forEach(function(y){y.style.display="none"}),document.querySelectorAll(".filterBar .row-fluid").forEach(function(y){y.style.opacity="1"})})},d=function(){jQuery(".addCanvasLink").nyroModal(),document.querySelectorAll(".editCanvasLink").forEach(function(y){y.addEventListener("click",function(){jQuery("#editCanvas").modal("show")})}),document.querySelectorAll(".cloneCanvasLink").forEach(function(y){y.addEventListener("click",function(){jQuery("#cloneCanvas").modal("show")})}),document.querySelectorAll(".mergeCanvasLink").forEach(function(y){y.addEventListener("click",function(){jQuery("#mergeCanvas").modal("show")})}),document.querySelectorAll(".importCanvasLink").forEach(function(y){y.addEventListener("click",function(){jQuery("#importCanvas").modal("show")})})},l=!1,s={sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(y){y.style.display=""}),l==!0&&(l=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(s)},beforeClose:function(){location.reload()}},titleFromIframe:!0},u=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(s)},m=function(y){jQuery.nmManual(y,s)},e=function(y){if(y=="existing"){document.querySelectorAll("#newMilestone, #milestoneSelectors").forEach(function(w){w.style.display="none"});var T=document.getElementById("existingMilestone");T&&(T.style.display=""),u()}if(y=="new"){var D=document.getElementById("newMilestone");D&&(D.style.display=""),document.querySelectorAll("#existingMilestone, #milestoneSelectors").forEach(function(w){w.style.display="none"}),u()}if(y=="hide"){document.querySelectorAll("#newMilestone, #existingMilestone").forEach(function(w){w.style.display="none"});var R=document.getElementById("milestoneSelectors");R&&(R.style.display="")}},a=function(){l=!0},i=function(){document.body.addEventListener("click",function(y){var T=y.target.closest(".userDropdown .dropdown-menu a");if(T){var D=T.getAttribute("data-value").split("_");if(T.getAttribute("data-label"),D.length==3){var R=D[0],w=D[1];D[2],fetch(leantime.appUrl+"/api/"+n+"canvas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:R,author:w})}).then(function(){var x=document.querySelector("#userDropdownMenuLink"+R+" span.text span#userImage"+R+" img");x&&x.setAttribute("src",leantime.appUrl+"/api/users?profileImage="+w),leantime.toast.show({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}}})},p=function(){document.body.addEventListener("click",function(y){var T=y.target.closest(".statusDropdown .dropdown-menu a");if(T){var D=T.getAttribute("data-value").split("/"),R=T.getAttribute("data-label");if(D.length==2){var w=D[0],x=D[1],M=T.getAttribute("class");fetch(leantime.appUrl+"/api/"+n+"canvas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:w,status:x})}).then(function(){var P=document.querySelector("#statusDropdownMenuLink"+w+" span.text");P&&(P.textContent=R);var U=document.getElementById("statusDropdownMenuLink"+w);U&&(U.className=M+" dropdown-toggle f-left status "),leantime.toast.show({message:leantime.i18n.__("short_notifications.status_updated")})})}}})},r=function(){document.body.addEventListener("click",function(y){var T=y.target.closest(".relatesDropdown .dropdown-menu a");if(T){var D=T.getAttribute("data-value").split("/"),R=T.getAttribute("data-label");if(D.length==2){var w=D[0],x=D[1],M=T.getAttribute("class");fetch(leantime.appUrl+"/api/"+n+"canvas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:w,relates:x})}).then(function(){var P=document.querySelector("#relatesDropdownMenuLink"+w+" span.text");P&&(P.textContent=R);var U=document.getElementById("relatesDropdownMenuLink"+w);U&&(U.className=M+" dropdown-toggle f-left relates "),leantime.toast.show({message:leantime.i18n.__("short_notifications.relates_updated")})})}}})},C=function(y,T){T=T||{};var D=y,R=!1,w=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(H){H.style.display=""}),R&&(R=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+D+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+D+"CanvasMilestone .deleteMilestone").nyroModal(w())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},x=function(){jQuery("."+D+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+D+"CanvasMilestone .deleteMilestone").nyroModal(w())},M;T.rowSelectors&&T.rowSelectors.length>0?M=function(){T.rowSelectors.forEach(function(H){var B=0;document.querySelectorAll("#"+H+" div.contentInner").forEach(function(I){I.offsetHeight>B&&(B=I.offsetHeight+35)}),document.querySelectorAll("#"+H+" .column .contentInner").forEach(function(I){I.style.height=B+"px"})})}:T.nbRows&&T.nbRows>0?M=function(){var H=T.nbRows,B=["firstRow","secondRow","thirdRow","fourthRow"],I=document.documentElement.offsetHeight-320-20*H;H===2&&(I-=25);for(var N=0;N<H&&N<B.length;N++){var W="#"+B[N],J=I/H;H>=3&&(J=I*.333),document.querySelectorAll(W+" div.contentInner").forEach(function(Y){Y.offsetHeight>J&&(J=Y.offsetHeight+50)}),document.querySelectorAll(W+" .column .contentInner").forEach(function(Y){Y.style.height=J+"px"})}}:M=function(){};var P={setCloseModal:function(){R=!0},toggleMilestoneSelectors:function(H){if(H=="existing"){document.querySelectorAll("#newMilestone, #milestoneSelectors").forEach(function(W){W.style.display="none"});var B=document.getElementById("existingMilestone");B&&(B.style.display=""),x()}if(H=="new"){var I=document.getElementById("newMilestone");I&&(I.style.display=""),document.querySelectorAll("#existingMilestone, #milestoneSelectors").forEach(function(W){W.style.display="none"}),x()}if(H=="hide"){document.querySelectorAll("#newMilestone, #existingMilestone").forEach(function(W){W.style.display="none"});var N=document.getElementById("milestoneSelectors");N&&(N.style.display="")}},openModalManually:function(H){jQuery.nmManual(H,w)},initUserDropdown:i,initStatusDropdown:p,initRelatesDropdown:r,setRowHeights:M};if(T.extras)for(var U in T.extras)T.extras.hasOwnProperty(U)&&(P[U]=T.extras[U]);return P};return{setCanvasName:t,initFilterBar:o,initCanvasLinks:d,initUserDropdown:i,initStatusDropdown:p,initRelatesDropdown:r,setCloseModal:a,toggleMilestoneSelectors:e,openModalManually:m,createController:C}}();leantime.reactionsController=function(){return{addReactions:function(o,d,l,s){fetch(leantime.appUrl+"/api/reactions",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"add",module:o,moduleId:d,reaction:l})}).then(function(){s()})},removeReaction:function(o,d,l,s){fetch(leantime.appUrl+"/api/reactions",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"remove",module:o,moduleId:d,reaction:l})}).then(function(){s()})}}}();leantime.helperController=function(){var n=function(i,p){p?leantime.helperRepository.updateUserModalSettings(i,!0):leantime.helperRepository.updateUserModalSettings(i,!1)},t=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.tourFactory.startTour("myWorkDashboard")},o=function(){leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal()},d=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("projectDashboard"),leantime.tourFactory.startTour("projectDashboard")},l=function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("kanbanBoard"),leantime.tourFactory.startTour("kanbanBoard")},s=function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("milestoneView"),leantime.tourFactory.startTour("milestoneView")},u=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("goals"),leantime.tourFactory.startTour("goalsView")},m=function(){document.addEventListener("DOMContentLoaded",function(){var i={sizes:{minW:700,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(p){p.style.display=""}),jQuery(".onboardingModal").nyroModal(i)},beforeClose:function(){location.reload()}}};jQuery(".onboardingModal").nyroModal(i),jQuery.nmManual(leantime.appUrl+"/help/firstLogin",i)})},e=function(i,p,r){document.addEventListener("DOMContentLoaded",function(){jQuery.nmManual(leantime.appUrl+"/help/showOnboardingDialog?module="+i,{sizes:{minW:p||200,minH:r||500},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){leantime.replaceSVGColors()},afterShowCont:function(){htmx.process("#global-modal-content")}}})})},a=function(i){leantime.helperRepository.updateUserModalSettings(i),leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal()};return{showHelperModal:e,hideAndKeepHidden:a,setDontShowAgain:n,closeModal:o,startMyWorkDashboardTour:t,startProjectDashboardTour:d,startKanbanTour:l,startMilestoneTour:s,startGoalTour:u,firstLoginModal:m}}();var oe=window.leantime||(window.leantime={});oe.helperRepository=function(){var n=function(d,l=!1){fetch(oe.appUrl+"/api/users",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({settings:d,permanent:l?1:0,patchModalSettings:1})})},t=function(){fetch(oe.appUrl+"/api/sessions",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({tourActive:1})})},o=function(){fetch(oe.appUrl+"/api/sessions",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({tourActive:0})})};return{updateUserModalSettings:n,startingTour:t,stopTour:o}}();leantime.tourFactory=function(){var n=function(s){return new Shepherd.Tour({useModalOverlay:!0,defaultStepOptions:{classes:"shepherd-theme-arrows",scrollTo:!1,cancelIcon:{enabled:!0}},tourName:s})},t=function(s){leantime.helperRepository.updateUserModalSettings(s),typeof _paq<"u"&&_paq.push(["trackEvent","Tour","Completed",s])},o=function(s){return{myWorkDashboard:[{id:"welcome-step",title:"ðŸ‘‹ Welcome to the Dashboard Tour",text:"Let's start with a few basics to get you up to speed on the navigation and different elements inside Leantime."},{id:"top-nav-step",title:"Work Modes",text:"The top navigation shows you the current 'work mode' you're in. You can be inside a project, your personal work area, or in the company mode.",attachTo:{element:".work-modes",on:"bottom"}},{id:"menu-step",title:"Left Navigation",text:"The left navigation breaks down the current work mode and gives you access to different areas. Everything presented here is part of the currently selected work mode above.",attachTo:{element:".leftpanel",on:"right"}},{id:"my-menu",title:"My Profile Bar",text:"Here you'll find links to your account as well as notifications and latest news about Leantime.",attachTo:{element:".headmenu.pull-right",on:"bottom"}},{id:"dashboard-widgets",title:"Your Dashboard Widgets",text:"Your dashboard is broken up into various widgets showing you focused information about your work.",attachTo:{element:".primaryContent",on:"top"}},{id:"dashboard-widgets-dandd",title:"Customize Your Dashboard",text:"Widgets can be resized and moved around using the drag and drop functionality.",attachTo:{element:"#widget_wrapper_todos .grid-handler-top",on:"bottom"}},{id:"my-todo-widget",title:"My To-Dos",text:"The My To-Do widget shows you all the tasks that are currently assigned to you.",attachTo:{element:"#widget_wrapper_todos",on:"top"}},{id:"my-todo-widget2",title:"Group To-Dos",text:"You can use the dropdowns here to filter your tasks by project or group them by priority, status, project, or dates.",attachTo:{element:"#yourToDoContainer > .clear",on:"bottom"}},{id:"my-todo-widget4",title:"Sort To-Dos",text:"Each To-Do can be dragged and dropped to change its order. You can also drag and drop a task to the calendar to schedule it.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child",on:"bottom"}},{id:"my-todo-widget-timer",title:"Start the Timer",text:"When you're ready to start working on a task, just click the start timer button.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .timerContainer",on:"bottom"}},{id:"my-todo-widget-complete",title:"Complete a Task",text:"Once a task is complete, you can mark it as done by clicking the status dropdown.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .statusDropdown",on:"bottom"}},{id:"my-todo-widget-add",title:"Add More Tasks",text:"You can add more tasks by clicking the plus button in each section, or by using the 3-dot menu next to each task.",attachTo:{element:"#yourToDoContainer .fa-circle-plus",on:"bottom"}},{id:"finish",title:"Congratulations!",text:"You've completed the My Work dashboard tour. Head to <a href='"+leantime.appUrl+"/dashboard/show'>your project</a> to learn more about project management in Leantime."}],projectDashboard:[{id:"left-nav",title:"Project Menu",text:"The project menu organizes your project into different sections: <strong>Data Room</strong> - to host all your files and information, <strong>Think</strong> - to strategize, ideate and define, <strong>Make</strong> - to manage goals, milestones and tasks.",attachTo:{element:".leftmenu ul",on:"left"}},{id:"project-selector",title:"Project Selector",text:"Use the project selector to jump between projects. The left menu shows everything related to your current project.",attachTo:{element:".bigProjectSelector",on:"bottom"}},{id:"project-checklist",title:"Checklist",text:"The project checklist is a quick reference to see if your project contains all the necessary information for successful execution.",attachTo:{element:"#progressForm",on:"bottom"}},{id:"project-status",title:"Quick Status Updates",text:"You can use status updates to quickly share the progress of your project with your team using red, yellow and green colors. The status will be visible across the application.",attachTo:{element:".project-updates",on:"left"}},{id:"project-progress",title:"Progress",text:"The project progress indicator shows you how much work you have completed. It accounts for various task sizes, team velocity, and project milestones.",attachTo:{element:".project-progress",on:"left"}},{id:"latest-tasks",title:"Latest Tasks",text:"The list of latest tasks shows you the most recent tasks added to your project and can be used as a project inbox.",attachTo:{element:".latest-todos",on:"left"}},{id:"teams",title:"Team",text:"The team box shows you the members of this project.",attachTo:{element:".team-container",on:"top"}},{id:"finished",title:"Congratulations!",text:"You've completed the project dashboard tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>To-Dos</a> to learn more about the various ways to manage your tasks in Leantime."}],kanbanBoard:[{id:"kanban-overview",title:"Your Kanban Board",text:"This is your Kanban board. It helps you visualize your work and limit work-in-progress.",attachTo:{element:".kanban-board-wrapper",on:"top"}},{id:"kanban-columns",title:"Work Flow",text:"Tasks move from left to right as they progress. Drag and drop cards to update their status.",attachTo:{element:".column",on:"right"}},{id:"kanban-columns2",title:"Flexible Columns",text:"Using the 3-dot menu, you can add or remove columns and rename them.",attachTo:{element:".column .widgettitle .inlineDropDownContainer",on:"right"}},{id:"kanban-filter",title:"Filter Tasks",text:"You can filter your tasks by various fields like priority, status, project, or dates.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"kanban-group",title:"Swimlanes",text:"Additionally, you can group your tasks to create Kanban swimlanes. This helps you visualize your work by team members, priority, or milestones.",attachTo:{element:".filterWrapper > .btn-group",on:"bottom"}},{id:"kanban-sprints",title:"Sprints",text:"If you manage your work in sprints, you can use the dropdown here to select, create, and update sprints.",attachTo:{element:".pageheader .dropdown",on:"bottom"}},{id:"kanban-congrats",title:"Congratulations!",text:"This concludes the Kanban tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Milestones</a> to learn how to create and manage milestones in Leantime."}],milestoneView:[{id:"milestone-overview",title:"Milestones",text:"Milestones help you track major outcomes and project phases.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-drag",title:"Drag & Sort",text:"Each bar represents one milestone. You can drag them along the timeline, reorder, and resize them. Everything you do on this screen updates the timing of your milestones.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-filter",title:"Filter",text:"You can filter your milestones and also view tasks that are part of them.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"milestone-timeframes",title:"Timeframes",text:"You can change the timeframe of the timeline view to see more of the year or dive deep into a daily breakdown.",attachTo:{element:".col-md-4 .pull-right",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the milestone tour. Head to the <a href='"+leantime.appUrl+"/goalcanvas/dashboard'>Goals</a> to learn how to create and manage goals in Leantime."}],goalsView:[{id:"goals-overview",title:"Goals",text:"Goals help you track measurable impact on your projects."},{id:"goal-parts",title:"Objectives & Metrics",text:"Each goal is made up of an Objective (what you're trying to accomplish) and a Metric (how you'll measure it).",attachTo:{element:".ticketBox",on:"top"}},{id:"goal-progress",title:"Goal Progress",text:"As you update your goal metrics, the progress bar will show you how far along you are.",attachTo:{element:".ticketBox > .row > .col-md-12 .progress",on:"bottom"}},{id:"milestone-connection",title:"Milestones & Goals",text:"You can connect goals to milestones to track the task-level progress of your goals. This helps identify gaps in your project plan.",attachTo:{element:".ticketBox.fixed",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the goals tour. Milestones, Goals, and To-Dos are the basic building blocks in Leantime. Use them to break down your work into manageable chunks. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Kanban Board</a> to review your tasks."}]}[s]||[]},d=function(s){const u=n(s),m=o(s);return m.forEach((e,a)=>{const i=a===0,p=a===m.length-1,r=[];i||r.push({text:leantime.i18n.__("tour.back"),classes:"shepherd-button-secondary",action:u.back}),p?r.push({text:leantime.i18n.__("tour.finish"),action:function(){t(s),confetti(),u.complete()}}):r.push({text:leantime.i18n.__("tour.next"),action:u.next}),p||r.unshift({text:leantime.i18n.__("tour.cancel"),classes:"shepherd-button-secondary",action:u.cancel}),u.addStep({...e,buttons:r})}),u.on("complete",function(){t(s)}),u},l=function(s){const u=d(s);return u.start(),u};return{createTour:n,buildTour:d,startTour:l,getTourDefinition:o}}();leantime.confettiHelper=function(){var n=function(o){const l={...{particleCount:100,spread:70,origin:{y:.6},disableForReducedMotion:!0},...o};typeof confetti=="function"?confetti(l):console.error("Confetti library not loaded")},t=function(){n({particleCount:150,spread:90,origin:{y:.8},colors:["#26a69a","#00bcd4","#4caf50","#8bc34a","#cddc39"]}),setTimeout(function(){n({particleCount:80,spread:120,origin:{y:.7},colors:["#ff9800","#ff5722","#f44336","#e91e63","#9c27b0"]})},500)};return{triggerConfetti:n,celebrateSuccess:t}}();leantime.firstTaskController=function(){var n=function(){var t=document.querySelector("#firstTaskOnboarding");if(t){t.addEventListener("submit",function(d){d.preventDefault();var l=document.querySelector("#firstTask"),s=l.value.trim();if(s==="")return l.classList.add("error"),!1;l.classList.remove("error"),leantime.confettiHelper.celebrateSuccess(),setTimeout(function(){t.submit()},1500)});var o=document.querySelector("#firstTask");o&&o.addEventListener("input",function(){this.classList.remove("error")})}};return{initFirstTaskForm:n}}();document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){leantime.firstTaskController.initFirstTaskForm()}):leantime.firstTaskController.initFirstTaskForm();leantime.menuController=function(){var n=function(s){if(s!==""){var u=document.querySelector("#submenu-"+s),m=document.querySelector("#submenu-icon-"+s),e="";u&&(u.style.display==="none"||getComputedStyle(u).display==="none"?(u.style.display="block",m&&(m.classList.remove("fa-angle-right"),m.classList.add("fa-angle-down")),e="open"):(u.style.display="none",m&&(m.classList.remove("fa-angle-down"),m.classList.add("fa-angle-right")),e="closed"),fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({submenu:s,state:e})}))}},t=function(){document.querySelectorAll(".project-select").forEach(function(a){new SlimSelect({select:a})}),document.addEventListener("click",function(a){a.target.closest(".projectselector.dropdown-menu")&&a.stopPropagation()});var s=document.querySelector(".projectSelectorTabs");if(s){var u=s.querySelectorAll("ul > li > a"),m=localStorage.getItem("currentMenuTab"),e=0;m&&u.forEach(function(a,i){a.getAttribute("href")==="#"+m&&(e=i)}),u.forEach(function(a,i){var p=a.getAttribute("href");if(!(!p||p.charAt(0)!=="#")){var r=document.querySelector(p);r&&(i===e?(r.style.display="",a.parentElement.classList.add("ui-tabs-active")):(r.style.display="none",a.parentElement.classList.remove("ui-tabs-active")),a.addEventListener("click",function(C){C.preventDefault(),u.forEach(function(T){var D=T.getAttribute("href");if(D&&D.charAt(0)==="#"){var R=document.querySelector(D);R&&(R.style.display="none")}T.parentElement.classList.remove("ui-tabs-active")}),r&&(r.style.display=""),a.parentElement.classList.add("ui-tabs-active");var y=p.replace("#","");localStorage.setItem("currentMenuTab",y)}))}})}},o=function(){if(window.innerWidth<576){var s=document.querySelector(".mainwrapper");s&&(s.classList.remove("menuopen"),s.classList.add("menuclosed"))}var u=document.querySelector(".barmenu");u&&u.addEventListener("click",function(){var m=document.querySelector(".mainwrapper");m&&(m.classList.contains("menuopen")?(m.classList.remove("menuopen"),m.classList.add("menuclosed"),leantime.menuRepository.updateUserMenuSettings("closed")):(m.classList.remove("menuclosed"),m.classList.add("menuopen"),leantime.menuRepository.updateUserMenuSettings("open")))})},d=function(s,u="",m){var e=document.querySelector("#"+m+"-toggler-"+s),a=document.querySelector("#"+m+"-projectSelectorlist-group-"+s);if(e)if(u==="closed"?(e.classList.remove("closed","open"),e.classList.add("open")):u==="open"&&(e.classList.remove("open","closed"),e.classList.add("closed")),e.classList.contains("open")){e.classList.remove("open"),e.classList.add("closed");var i=e.querySelector("i");i&&(i.classList.remove("fa-angle-down"),i.classList.add("fa-angle-right")),a&&(a.classList.add("closed"),a.classList.remove("open")),l(s,"closed",m)}else{e.classList.remove("closed"),e.classList.add("open");var i=e.querySelector("i");i&&(i.classList.remove("fa-angle-right"),i.classList.add("fa-angle-down")),a&&(a.classList.add("open"),a.classList.remove("closed")),l(s,"open",m)}};let l=function(s,u,m){fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({submenu:m+"-projectSelectorlist-group-"+s,state:u})})};return{toggleSubmenu:n,initProjectSelector:t,initLeftMenuHamburgerButton:o,updateGroupDropdownSetting:l,toggleProjectDropDownList:d}}();var xe=window.leantime||(window.leantime={});xe.menuRepository=function(){var n=function(t){fetch(xe.appUrl+"/api/sessions",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({menuState:t})})};return{updateUserMenuSettings:n}}();leantime.settingController=function(){var n,t=function(l){if(o(),l.files&&l.files[0]){var s=new FileReader,u=jQuery("#logoImg");s.onload=function(m){n=u.croppie({enableExif:!0,enforceBoundary:!1,viewport:{width:220,height:40,type:"square"},boundary:{width:400,height:200}}),n.croppie("bind",{url:m.currentTarget.result});var e=document.querySelector("#previousImage");e&&(e.style.display="none")},s.readAsDataURL(l.files[0])}},o=function(){jQuery("#logoImg").croppie("destroy");var l=document.querySelector("#previousImage");l&&(l.style.display="")},d=function(){var l=document.querySelector("#save-logo");l&&l.classList.add("running");var s=document.querySelector("#logoImg");s&&s.setAttribute("src",leantime.appUrl+"/images/loaders/loader28.gif"),n.croppie("result",{type:"blob",circle:!1,size:"original",quality:1}).then(function(u){leantime.settingService.saveLogo(u)})};return{readURL:t,clearCroppie:o,saveCroppie:d}}();leantime.settingRepository=function(){var n=function(t){var o=new FormData;o.append("file",t),fetch(leantime.appUrl+"/api/setting",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"},body:o}).then(function(d){var l=document.querySelector("#save-logo");l&&l.classList.remove("running"),location.reload()}).catch(function(d){console.log(d)})};return{saveLogo:n}}();leantime.settingService=function(){var n=function(t){leantime.settingRepository.saveLogo(t)};return{saveLogo:n}}();leantime.widgetController=function(){var n=[],t=function(e,a){let i=e.gridX||0,p=e.gridY||0,r=e.gridWidth||2,C=e.gridHeight||2;if(a.willItFit({x:i,y:p,width:r,height:C}))return{x:i,y:p};let y=Math.max(...a.engine.nodes.map(T=>T.y+T.h),0);for(let T=0;T<=y+1;T++)for(let D=0;D<=12-r;D++)if(a.willItFit({newX:D,newY:T,width:r,height:C}))return{x:D,y:T};return{x:0,y:y+1}};GridStack.renderCB=function(e,a){a.content&&typeof DOMPurify<"u"&&(e.innerHTML=DOMPurify.sanitize(a.content))};var o=function(){n=GridStack.init({margin:"0px 15px 15px 0px",handle:".grid-handler-top",minRow:2,cellHeight:"30px",float:!0,draggable:{handle:".grid-handler-top",appendTo:"body"},lazyLoad:!1,columnOpts:{breakpointForWindow:!0,breakpoints:[{w:700,c:1},{w:950,c:6}]}}),n.on("dragstop",function(a,i){d()}),n.on("resizestop",function(a,i){d()}),document.querySelectorAll(".grid-stack-item").forEach(function(a){var i=a.querySelector(".removeWidget");i&&i.addEventListener("click",function(){l(this.closest(".grid-stack-item"))});var p=a.querySelector(".fitContent");p&&p.addEventListener("click",function(){s(this.closest(".grid-stack-item"))})});var e=document.querySelector("#gridBoard");e&&(e.style.opacity="1")},d=function(){let e=n.save();e.sort((p,r)=>p.y===r.y?p.x-r.x:p.y-r.y);let a=null;arguments.length>0&&arguments[0].action==="toggleWidget"&&(a={widgetId:arguments[0].widgetId,visible:arguments[0].visible}),e.forEach(function(p){var r=document.createElement("div");r.innerHTML=p.content;var C=r.querySelector("[hx-get]");p.id=C?C.getAttribute("id"):null,p.widgetUrl=C?C.getAttribute("hx-get"):null,p.widgetTrigger=C?C.getAttribute("hx-trigger"):null,p.x==null&&(p.x=0),p.gridX=p.x,p.y==null&&(p.y=0),p.gridY=p.y,p.w==null&&(p.w=1),p.gridWidth=p.w,p.h==null&&(p.h=1),p.gridHeight=p.h,p.content=""});var i=new URLSearchParams;i.append("action","saveGrid"),e.forEach(function(p,r){Object.keys(p).forEach(function(C){var y=p[C];y!=null&&i.append("data["+r+"]["+C+"]",y)})}),a&&Object.keys(a).forEach(function(p){i.append("visibilityData["+p+"]",a[p])}),fetch(leantime.appUrl+"/widgets/widgetManager",{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:i})},l=function(e){e.remove(),n.removeWidget(e,!0),d()},s=function(e){document.querySelector(".grid-stack").gridstack.resizeToContent(e,!1),d()},u=function(e,a,i){let p=document.querySelector(".grid-stack").gridstack,r=a.checked;if(t(i,p),r){const y=document.createElement("div");y.className="grid-stack-item";const T=document.createElement("div");T.className=`grid-stack-item-content tw:p-none ${i.widgetBackground=="default"?"maincontentinner":i.background}`,T.innerHTML=m(i),y.appendChild(T),p.el.appendChild(y),p.makeWidget(y,{x:i.gridX||0,y:i.gridY||50,w:i.gridWidth||2,h:i.gridHeight||2}),htmx.process(y),d({action:"toggleWidget",widgetId:e,visible:r})}else{var C=document.getElementById(e);C&&l(C.closest(".grid-stack-item"))}},m=function(e){return'<div class="widgetInner">        <div class="'+(e.widgetBackground=="default"?"tw:pb-l":"")+`">
            <div class="stickyHeader" style="padding:15px; height:50px;  width:100%;">
               <div class="grid-handler-top tw:h-[40px] tw:cursor-grab tw:float-left tw:mr-sm">
                    <i class="fa-solid fa-grip-vertical"></i>
                </div>
           `+(e.name!=""?'<h5 class="subtitle tw:pb-m tw:float-left tw:mr-sm">'+e.name+"</h5>":"")+`
            <div class="inlineDropDownContainer tw:float-right">
                <a href="javascript:void(0);" class="dropdown-toggle ticketDropDown editHeadline" data-toggle="dropdown">
                    <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="javascript:void(0)" class="fitContent"><i class="fa-solid fa-up-right-and-down-left-from-center"></i> Resize to fit content</a></li>
                        <li><a href="javascript:void(0)" class="removeWidget"><i class="fa fa-eye-slash"></i> Hide</a></li>
                </ul>
            </div>

        </div>
 <div class="widgetContent tw:px-l">
             <div hx-get="`+e.widgetUrl+'" hx-trigger="'+e.widgetTrigger+'" hx-target="this" hx-swap="innerHTML" id="'+e.id+`"></div>
        </div>
       </div>
        <div class="clear"></div>
    </div>
`};return{resizeWidget:s,removeWidget:l,saveGrid:d,initGrid:o,toggleWidgetVisibility:u}}();leantime.calendarController=function(){var n=function(l){var s=new Date;s.getDate(),s.getMonth(),s.getFullYear();var u=document.body.offsetHeight-260,m=document.querySelector("#calendar"),e=new FullCalendar.Calendar(m,{timeZone:leantime.i18n.__("usersettings.timezone"),height:u,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listDay"},titleFormat:{year:"numeric",month:"long"},dayHeaderFormat:{weekday:"short"},eventTimeFormat:leantime.dateHelper.getFormatFromSettings("timeformat","luxon"),direction:leantime.i18n.__("language.isRTL")=="false"?"ltr":"rtl",firstDay:parseInt(leantime.i18n.__("language.firstDayOfWeek"),10),locale:leantime.i18n.__("language.code"),buttonText:{today:leantime.i18n.__("buttons.today"),month:leantime.i18n.__("buttons.month"),week:leantime.i18n.__("buttons.week"),day:leantime.i18n.__("buttons.day")},selectable:!0,select:function(a){var i=prompt(leantime.i18n.__("label.event_title"));i&&e.addEvent({title:i,start:a.start,end:a.end,allDay:a.allDay}),e.unselect()},events:l,eventColor:"#0866c6"});e.render()},t=function(){document.addEventListener("DOMContentLoaded",function(){Date.prototype.addDays=function(a){return this.setDate(this.getDate()+a),this};var l=leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr"),s=document.querySelector("#event_date_from"),u=document.querySelector("#event_date_to"),m=flatpickr(s,{dateFormat:l,locale:{firstDayOfWeek:parseInt(leantime.i18n.__("language.firstDayOfWeek"),10)},allowInput:!0,onOpen:function(a,i,p){if(p.element.hasAttribute("readonly"))return p.close(),!1},onChange:function(a,i){a.length>0&&e.set("minDate",a[0]),u.value===""&&e.setDate(a[0],!0)}}),e=flatpickr(u,{dateFormat:l,locale:{firstDayOfWeek:parseInt(leantime.i18n.__("language.firstDayOfWeek"),10)},allowInput:!0,onChange:function(a){a.length>0&&m.set("maxDate",a[0])}})})},o=function(){var l={sizes:{minW:400,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".formModal").nyroModal(l)},beforeClose:function(){location.reload()}},titleFromIframe:!0};jQuery(".exportModal").nyroModal(l)},d=function(l,s){let u=document.querySelector(l),m=leantime.dateHelper.getFormatFromSettings("dateformat","luxon"),e=leantime.dateHelper.getFormatFromSettings("timeformat","luxon");const a=new FullCalendar.Calendar(u,{timeZone:leantime.i18n.__("usersettings.timezone"),height:"calc(100% - 65px)",stickyHeaderDates:!0,initialView:s,eventStartEditable:!0,dayHeaderFormat:m,eventTimeFormat:e,slotLabelFormat:e,views:{multiMonthOneMonth:{type:"multiMonth",duration:{months:1},multiMonthTitleFormat:{month:"long",year:"numeric"},dayHeaderFormat:{weekday:"short"}},timeGridDay:{dayHeaders:!1},listWeek:{listDayFormat:{weekday:"long"},listDaySideFormat:leantime.dateHelper.getFormatFromSettings("dateformat","luxon")}},droppable:!0,eventSources,editable:!0,headerToolbar:!1,nowIndicator:!0,eventDrop:function(r){r.event.extendedProps.enitityType=="ticket"?fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:r.event.extendedProps.enitityId,editFrom:luxon.DateTime.fromJSDate(r.event.start).toFormat(m),timeFrom:luxon.DateTime.fromJSDate(r.event.start).toFormat(e),editTo:luxon.DateTime.fromJSDate(r.event.end).toFormat(m),timeTo:luxon.DateTime.fromJSDate(r.event.end).toFormat(e)})}):r.event.extendedProps.enitityType=="event"&&fetch(leantime.appUrl+"/api/calendar",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:r.event.extendedProps.enitityId,dateFrom:r.event.startStr,dateTo:r.event.endStr})})},eventResize:function(r){r.event.extendedProps.enitityType=="ticket"?fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:r.event.extendedProps.enitityId,editFrom:luxon.DateTime.fromJSDate(r.event.start).toFormat(m),timeFrom:luxon.DateTime.fromJSDate(r.event.start).toFormat(e),editTo:luxon.DateTime.fromJSDate(r.event.end).toFormat(m),timeTo:luxon.DateTime.fromJSDate(r.event.end).toFormat(e)})}):r.event.extendedProps.enitityType=="event"&&fetch(leantime.appUrl+"/api/calendar",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:r.event.extendedProps.enitityId,dateFrom:r.event.startStr,dateTo:r.event.endStr})})},eventReceive:function(r){fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:r.event.id,editFrom:luxon.DateTime.fromJSDate(r.event.start).toFormat(m),timeFrom:luxon.DateTime.fromJSDate(r.event.start).toFormat(e),editTo:luxon.DateTime.fromJSDate(r.event.end).toFormat(m),timeTo:luxon.DateTime.fromJSDate(r.event.end).toFormat(e)})})},eventDragStart:function(r){},eventDidMount:function(r){r.isDraggable===!1&&r.el.classList.add("locked"),r.event.extendedProps.location!=null&&r.event.extendedProps.location!=""&&r.event.extendedProps.location.indexOf("http")==0&&(r.el.setAttribute("href",r.event.extendedProps.location),r.el.setAttribute("target","_blank"))}});document.addEventListener("DOMContentLoaded",function(){var r=document.querySelector("#yourToDoContainer");r&&i(r),p(),a.scrollToTime(Date.now())});function i(r){var C=r;C&&new FullCalendar.ThirdPartyDraggable(C,{itemSelector:".draggable-todo",mirrorClass:"dragging-mirror",eventDragMinDistance:10,mirrorSelector:function(y){return y.closest(".ticketBox")},eventData:function(y){let T=JSON.parse(y.dataset.event);return{id:T.id,title:T.title,color:T.color,enitityType:"ticket",duration:"01:00",url:T.url}}}),a.scrollToTime(Date.now())}function p(){a.setOption("locale",leantime.i18n.__("language.code")),a.render(),a.scrollToTime(Date.now());var r=document.querySelector(".minCalendar .fc-prev-button");r&&r.addEventListener("click",function(){a.prev(),a.getCurrentData()});var C=document.querySelector(".minCalendar .fc-next-button");C&&C.addEventListener("click",function(){a.next()});var y=document.querySelector(".minCalendar .fc-today-button");y&&y.addEventListener("click",function(){a.today()}),document.querySelectorAll(".minCalendar .calendarViewSelect").forEach(function(T){T.addEventListener("click",function(D){console.log(this.dataset.value),a.changeView(this.dataset.value),fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({submenu:"dashboardCalendarView",state:this.dataset.value})})})}),document.querySelectorAll(".day-button").forEach(function(T){T.addEventListener("click",function(){var D=this.dataset.date;a.gotoDate(D),document.querySelectorAll(".day-button").forEach(function(R){R.classList.remove("active")}),this.classList.add("active")})})}htmx.onLoad(function(r){return r.id=="yourToDoContainer"&&i(r),u})};return{initCalendar:n,initEventDatepickers:t,initExportModal:o,initWidgetCalendar:d}}();const Ue=Object.assign({"../../app/Domain/Clients/Js/clientsController.js":()=>A(()=>import("./clientsController-rJN37dRD.js"),[]),"../../app/Domain/Cpcanvas/Js/cpCanvasController.js":()=>A(()=>import("./cpCanvasController-Bk9nlIMp.js"),[]),"../../app/Domain/Dbmcanvas/Js/dbmCanvasController.js":()=>A(()=>import("./dbmCanvasController-BfisiC0W.js"),[]),"../../app/Domain/Eacanvas/Js/eaCanvasController.js":()=>A(()=>import("./eaCanvasController-BBKpXTvo.js"),[]),"../../app/Domain/Emcanvas/Js/emCanvasController.js":()=>A(()=>import("./emCanvasController-BeXTfudd.js"),[]),"../../app/Domain/Gamecenter/Js/game-snake.js":()=>A(()=>import("./game-snake-CiPrYQqj.js"),[]),"../../app/Domain/Goalcanvas/Js/goalCanvasController.js":()=>A(()=>import("./goalCanvasController-Ln3cYq9R.js"),[]),"../../app/Domain/Ideas/Js/ideasController.js":()=>A(()=>import("./ideasController-B5tm3ndV.js"),[]),"../../app/Domain/Insightscanvas/Js/insightsCanvasController.js":()=>A(()=>import("./insightsCanvasController-D4xHaPBV.js"),[]),"../../app/Domain/Lbmcanvas/Js/lbmCanvasController.js":()=>A(()=>import("./lbmCanvasController-DWCLahfG.js"),[]),"../../app/Domain/Leancanvas/Js/leanCanvasController.js":()=>A(()=>import("./leanCanvasController-B9aMTJng.js"),[]),"../../app/Domain/Minempathycanvas/Js/risksCanvasController.js":()=>A(()=>import("./risksCanvasController-D76y0F1o.js"),[]),"../../app/Domain/Obmcanvas/Js/obmCanvasController.js":()=>A(()=>import("./obmCanvasController-D3ulNdVa.js"),[]),"../../app/Domain/Projects/Js/projectsController.js":()=>A(()=>import("./projectsController-BY15Utrs.js"),[]),"../../app/Domain/Retroscanvas/Js/retroCanvasController.js":()=>A(()=>import("./retroCanvasController-Bdzr-tck.js"),[]),"../../app/Domain/Riskscanvas/Js/risksCanvasController.js":()=>A(()=>import("./risksCanvasController-yt1qFgdB.js"),[]),"../../app/Domain/Sbcanvas/Js/sbCanvasController.js":()=>A(()=>import("./sbCanvasController-FLgGdgM2.js"),[]),"../../app/Domain/Smcanvas/Js/smCanvasController.js":()=>A(()=>import("./smCanvasController-DjnDEowx.js"),[]),"../../app/Domain/Sqcanvas/Js/sqCanvasController.js":()=>A(()=>import("./sqCanvasController-C8AMx8k5.js"),[]),"../../app/Domain/Swotcanvas/Js/swotCanvasController.js":()=>A(()=>import("./swotCanvasController-DM1_M8ZL.js"),[]),"../../app/Domain/Tickets/Js/kanbanController.js":()=>A(()=>import("./kanbanController-BaewnVvF.js"),[]),"../../app/Domain/Timesheets/Js/timesheetsController.js":()=>A(()=>import("./timesheetsController-BQyLQw80.js"),[]),"../../app/Domain/Valuecanvas/Js/valueCanvasController.js":()=>A(()=>import("./valueCanvasController-7Q7wZw1F.js"),[]),"../../app/Domain/Wiki/Js/wikiController.js":()=>A(()=>import("./wikiController-BEslrRep.js"),[])}),ke=new Set;function ue(n){if(!n||ke.has(n))return Promise.resolve();ke.add(n);const t=[];for(const[o,d]of Object.entries(Ue)){const l=o.match(/Domain\/([^/]+)\//);l&&l[1].toLowerCase()===n&&t.push(d())}return Promise.all(t)}function me(n){var t;try{return((t=new URL(n,window.location.origin).pathname.replace(/^\/hx\//,"/").split("/").filter(Boolean)[0])==null?void 0:t.toLowerCase())||""}catch{return""}}var Ce,De,Se;ue((Se=(De=(Ce=document.body)==null?void 0:Ce.dataset)==null?void 0:De.module)==null?void 0:Se.toLowerCase());document.addEventListener("htmx:configRequest",function(n){if(!n.detail.boosted)return;const t=me(n.detail.path||"");t&&ue(t)});document.addEventListener("htmx:pushedIntoHistory",function(){const n=me(window.location.pathname);n&&(document.body.dataset.module=n)});document.addEventListener("htmx:historyRestore",function(){const n=me(window.location.pathname);n&&(document.body.dataset.module=n,ue(n))});
