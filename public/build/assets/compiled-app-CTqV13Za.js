import{_ as P}from"./preload-helper-DPi8upcZ.js";(function(){var r={duration:3200,close:"×",location:"default",style:"success",size:"medium"},l={success:{bg:"var(--green)",color:"#fff",border:"var(--green)"},error:{bg:"var(--red)",color:"#fff",border:"var(--red)"},warning:{bg:"var(--yellow)",color:"#333",border:"var(--yellow)"},notice:{bg:"var(--accent1)",color:"#fff",border:"var(--accent1)"},default:{bg:"var(--secondary-background)",color:"var(--primary-font-color)",border:"var(--main-border-color)"}},s=!1;function c(){if(!s){s=!0;var t=document.createElement("style");t.textContent="#growls-default {  position: fixed; top: 70px; right: 20px; z-index: 100060;  display: flex; flex-direction: column; gap: 8px;  pointer-events: none; max-width: 380px;}.lt-toast {  pointer-events: auto; padding: 12px 36px 12px 16px; border-radius: var(--box-radius, 8px);  box-shadow: var(--regular-shadow, 0 2px 8px rgba(0,0,0,.15)); font-size: var(--font-size-s, 13px);  line-height: 1.4; position: relative; overflow: hidden;  opacity: 0; transform: translateX(30px);  transition: opacity .25s ease, transform .25s ease;}.lt-toast.lt-toast-visible {  opacity: 1; transform: translateX(0);}.lt-toast.lt-toast-outgoing {  opacity: 0; transform: translateX(30px);}.lt-toast-close {  position: absolute; top: 8px; right: 10px; cursor: pointer;  font-size: 18px; line-height: 1; opacity: .7;}.lt-toast-close:hover { opacity: 1; }.lt-toast-title {  font-weight: 600; margin-bottom: 2px;}.lt-toast-message { word-break: break-word; }",document.head.appendChild(t)}}function a(t){var e="growls-"+t,n=document.getElementById(e);return n||(n=document.createElement("div"),n.id=e,document.body.appendChild(n)),n}function d(t){c(),t=t||{};var e={};for(var n in r)e[n]=r[n];for(var o in t)e[o]=t[o];var i=l[e.style]||l.default,b=a(e.location),u=document.createElement("div");u.className="lt-toast",u.style.background=i.bg,u.style.color=i.color,u.style.borderLeft="4px solid "+i.border,u.innerHTML='<div class="lt-toast-close">'+e.close+"</div>"+(e.title?'<div class="lt-toast-title">'+e.title+"</div>":"")+'<div class="lt-toast-message">'+(e.message||"")+"</div>",b.appendChild(u);var _=u.querySelector(".lt-toast-close");_.addEventListener("click",function(L){L.stopPropagation(),T(u)}),u.addEventListener("contextmenu",function(L){L.preventDefault(),T(u)});var C=null;u.addEventListener("mouseenter",function(){C&&(clearTimeout(C),C=null)}),u.addEventListener("mouseleave",function(){H()}),u.offsetHeight,u.classList.add("lt-toast-visible");function H(){C=setTimeout(function(){T(u)},e.duration)}function T(L){C&&(clearTimeout(C),C=null),L.classList.remove("lt-toast-visible"),L.classList.add("lt-toast-outgoing"),L.addEventListener("transitionend",function(){L.parentNode&&L.parentNode.removeChild(L)}),setTimeout(function(){L.parentNode&&L.parentNode.removeChild(L)},500)}H()}var m=window.leantime||(window.leantime={});m.toast={show:d};var h=function(t){return d(t)};h.error=function(t){return t=t||{},t.style="error",t.title=t.title||"Error!",d(t)},h.notice=function(t){return t=t||{},t.style="notice",t.title=t.title||"Notice!",d(t)},h.warning=function(t){return t=t||{},t.style="warning",t.title=t.title||"Warning!",d(t)},window._growlShim=h})();window.leantime=window.leantime||{};window.leantime.companyColor=(document.querySelector("meta[name=theme-color]")||{}).content||null;window.leantime.colorScheme=(document.querySelector("meta[name=color-scheme]")||{}).content||null;window.leantime.theme=(document.querySelector("meta[name=theme]")||{}).content||null;window.leantime.appUrl=(document.querySelector("meta[name=identifier-URL]")||{}).content||null;window.leantime.version=(document.querySelector("meta[name=leantime-version]")||{}).content||null;var $=window.leantime;$.replaceSVGColors=function(){$.companyColor!="#1b75bb"&&document.querySelectorAll("svg > *").forEach(function(r){r.getAttribute("fill")=="#1b75bb"&&r.setAttribute("fill",$.companyColor)})};$.handleAsyncResponse=function(r){r!==void 0&&r.result!==void 0&&r.result.html!==void 0&&document.body.insertAdjacentHTML("beforeend",r.result.html)};document.addEventListener("DOMContentLoaded",function(){$.replaceSVGColors(),document.querySelectorAll(".confetti").forEach(function(s){s.addEventListener("click",function(){confetti.start()})}),tippy("[data-tippy-content]");var r=document.querySelector(".login-alert .alert");if(r&&r.textContent!==""){var l=document.querySelector(".login-alert");l&&(l.style.display="")}document.addEventListener("scroll",function(){document.documentElement.dataset.scroll=window.scrollY})});htmx.onLoad(function(r){tippy("[data-tippy-content]"),$.replaceSVGColors()});window.addEventListener("HTMX.ShowNotification",function(r){fetch($.appUrl+"/notifications/getLatestGrowl",{credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(l){return l.text()}).then(function(l){var s=JSON.parse(l);s.notification&&s.notification!=="undefined"&&$.toast.show({message:s.notification,style:s.notificationType})})});document.addEventListener("click",function(r){var l=r.target.closest('[data-toggle="dropdown"]');if(document.querySelectorAll(".dropdown.open, .btn-group.open").forEach(function(c){(!l||!c.contains(l))&&c.classList.remove("open")}),l){r.preventDefault(),r.stopPropagation();var s=l.closest(".dropdown, .btn-group");s&&s.classList.toggle("open")}});document.addEventListener("keydown",function(r){r.key==="Escape"&&document.querySelectorAll(".dropdown.open, .btn-group.open").forEach(function(l){l.classList.remove("open")})});(function(){var r=document.createElement("style");r.textContent=".modal.in {  display: block !important; position: fixed; top: 0; left: 0; right: 0; bottom: 0;  z-index: 100050; overflow-x: hidden; overflow-y: auto;}.modal .modal-dialog {  position: relative; margin: 60px auto; max-width: 600px;}.modal .modal-dialog.modal-lg { max-width: 900px; }.modal .modal-content {  background: var(--secondary-background, #fff); border-radius: var(--box-radius, 8px);  box-shadow: var(--large-shadow, 0 4px 20px rgba(0,0,0,.2)); padding: 20px;}.modal .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }.modal .modal-header .close { background: none; border: none; font-size: 24px; cursor: pointer; color: var(--primary-font-color); }.modal .modal-body { margin-bottom: 15px; }.modal .modal-footer { display: flex; justify-content: flex-end; gap: 8px; }",document.head.appendChild(r);var l=null;function s(a){a&&(a.style.display="block",a.offsetHeight,a.classList.add("in"),document.body.classList.add("modal-open"),l||(l=document.createElement("div"),l.className="modal-backdrop fade in",l.style.cssText="display:block;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:100049;",document.body.appendChild(l),l.addEventListener("click",function(){var d=document.querySelector(".modal.in");d&&c(d)})))}function c(a){a&&(a.classList.remove("in"),a.style.display="none",document.body.classList.remove("modal-open"),l&&l.parentNode&&(l.parentNode.removeChild(l),l=null))}document.addEventListener("click",function(a){var d=a.target.closest('[data-dismiss="modal"]');if(d){var m=d.closest(".modal");m&&c(m)}}),document.addEventListener("keydown",function(a){if(a.key==="Escape"){var d=document.querySelector(".modal.in");d&&c(d)}}),typeof jQuery<"u"&&(jQuery.fn.modal=function(a){return this.each(function(){a==="show"?s(this):a==="hide"?c(this):a==="toggle"&&(this.classList.contains("in")?c(this):s(this))}),this}),window.leantime=window.leantime||{},leantime.bootstrapModal={show:s,hide:c}})();(function(){function r(l,s){s=s||{};var c=l.querySelectorAll(":scope > ul > li > a"),a=[];if(c.forEach(function(m){var h=m.getAttribute("href");if(h&&h.charAt(0)==="#"){var t=l.querySelector(h);t&&a.push(t)}}),a.length!==0){var d=s.active||0;(typeof d!="number"||d<0||d>=a.length)&&(d=0),a.forEach(function(m,h){m.style.display=h===d?"":"none"}),c.forEach(function(m,h){h===d?m.parentElement.classList.add("ui-tabs-active","ui-state-active","active"):m.parentElement.classList.remove("ui-tabs-active","ui-state-active","active")}),c.forEach(function(m,h){m.addEventListener("click",function(t){t.preventDefault(),a.forEach(function(e){e.style.display="none"}),c.forEach(function(e){e.parentElement.classList.remove("ui-tabs-active","ui-state-active","active")}),a[h]&&(a[h].style.display=""),m.parentElement.classList.add("ui-tabs-active","ui-state-active","active")})}),s.create&&s.create.call(l,{},{tab:c[d],panel:a[d]})}}typeof jQuery<"u"&&(jQuery.fn.tabs=function(l){return this.each(function(){r(this,l)}),this})})();(function(){typeof jQuery>"u"||(jQuery.fn.chosen=function(r){return this.each(function(){var l=this;if(l.tagName==="SELECT"){if(l._slimSelect){try{l._slimSelect.destroy()}catch{}l._slimSelect=null}if(r!=="destroy"&&typeof SlimSelect<"u")try{l._slimSelect=new SlimSelect({select:l,showSearch:l.options&&l.options.length>8,allowDeselect:!l.hasAttribute("required")})}catch{}}}),this})})();leantime.editorController=function(){var r=[{start:"*",end:"*",format:"italic"},{start:"_",end:"_",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"__",end:"__",format:"bold"},{start:"~~",end:"~~",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"},{start:"1. ",cmd:"InsertOrderedList",value:{"list-style-type":"decimal"}},{start:"1) ",cmd:"InsertOrderedList",value:{"list-style-type":"decimal"}},{start:"a. ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-alpha"}},{start:"a) ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-alpha"}},{start:"i. ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-roman"}},{start:"i) ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-roman"}},{start:"[ ] ",cmd:"InsertChecklist"},{start:">",format:"blockquote"},{start:"`",end:"`",format:"code"},{start:"```",end:"```",format:"pre"},{start:"~",end:"~",cmd:"createLink"},{start:"---",replacement:"<hr/>"},{start:"--",replacement:"—"},{start:"-",replacement:"—"},{start:"(c)",replacement:"©"}],l={delimiter:"@",delay:20,source:function(o,i,b){b==="@"&&fetch(leantime.appUrl+"/api/users?projectUsersAccess=current&query="+encodeURIComponent(o),{credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(u){return u.json()}).then(function(u){for(var _=[],C=0;C<u.length;C++)_[C]={name:u[C].firstname+" "+u[C].lastname,id:u[C].id,email:u[C].username};i(_)})},highlighter:function(o){return o.replace(new RegExp("("+this.query+")","ig"),function(i,b){return"<strong>"+b+"</strong>"})},insert:function(o){return'<a class="userMention" data-tagged-user-id="'+o.id+'" href="javascript:void(0)"><img src="'+leantime.appUrl+"/api/users?profileImage="+o.id+'" alt="'+o.name+' Image"/>'+o.name.trim()+"</a>&nbsp;"},items:10},s=function(o,i,b){var u,_;u=new XMLHttpRequest,u.withCredentials=!1,u.open("POST",leantime.appUrl+"/api/files"),u.onload=function(){if(u.status<200||u.status>=300){b("HTTP Error: "+u.status);return}i(u.responseText)},_=new FormData,_.append("file",o.blob()),u.send(_)},c=function(o,i,b){window.filePickerCallback=o;var u={afterShowCont:function(){leantime.modals.initNyroModal(document.querySelectorAll(".fileModal"),{callbacks:u})}};leantime.modals.nmManual(leantime.appUrl+"/files/showAll?modalPopUp=true",{stack:!0,callbacks:u,sizes:{minW:500,minH:500}});var _=leantime.modals.nmTop().elts;_.cont&&(_.cont.style.zIndex="1000010"),_.bg&&(_.bg.style.zIndex="1000010"),_.load&&(_.load.style.zIndex="1000010"),_.all&&(_.all.style.zIndex="1000010")},a=function(o,i){o.on("change",function(){}),o.on("init",function(b){var u=o.getDoc().getElementsByClassName("confetti");u&&u.length>0&&u[0].addEventListener("click",function(){confetti.start()})}),o.on("focus",function(){var b=o.getDoc().getElementsByClassName("tinyPlaceholder");if(b.length>0)for(;b[0];)b[0].parentNode.removeChild(b[0])}),o.on("submit",function(){var b=o.getDoc().getElementsByClassName("tinyPlaceholder");if(b.length>0){for(;b[0];)b[0].remove();o.save()}})},d=leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",m=leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",h=function(o){tinymce.init({selector:"textarea.tinymceSimple",iframe_aria_text:"",width:"100%",skin_url:d,content_css:m,content_style:"body.mce-content-body{ font-size:14px; } img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,shortlink,checklist,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advlist,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | link unlink image | checklist bullist numlist | emoticons",browser_spellcheck:!0,toolbar_location:"bottom",branding:!1,statusbar:!1,convert_urls:!0,paste_data_images:!0,menubar:!1,relative_urls:!0,document_base_url:leantime.appUrl+"/",default_link_target:"_blank",table_appearance_options:!1,mentions:l,textpattern_patterns:r,images_upload_handler:s,file_picker_callback:c,setup:a})},t=function(){var o=document.querySelector("input[name=id]"),i=o?o.value:null;i||(i="new");let b="none";window.leantime.currentProject&&(b=window.leantime.currentProject);var u=window.innerHeight-50-205;tinymce.init({selector:"textarea.complexEditor",iframe_aria_text:"",width:"100%",skin_url:leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",content_css:leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",content_style:"html {text-align:center;} body.mce-content-body{ font-size:14px; } img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,embed,autoresize,shortlink,checklist,bettertable,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advancedTemplate,advlist,codesample,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | formatselect forecolor | alignleft aligncenter alignright | link unlink image media embed emoticons | checklist bullist numlist | table  | codesample | advancedTemplate | restoredraft",autosave_prefix:"leantime-complexEditor-autosave-{path}{query}-{id}-"+b+"-"+i+"-",autosave_restore_when_empty:i!=="new",autosave_retention:"10m",browser_spellcheck:!0,contextmenu:!1,autosave_retention:"120m",autosave_interval:"10s",autosave_ask_before_unload:!1,branding:!1,statusbar:!1,convert_urls:!0,menubar:!1,resizable:!0,templates:leantime.appUrl+"/wiki/templates",body_class:"mce-content-body",paste_data_images:!0,relative_urls:!0,document_base_url:leantime.appUrl+"/",table_appearance_options:!1,min_height:400,max_height:u,default_link_target:"_blank",codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Rust",value:"rust"},{text:"SQL",value:"sql"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"Swift",value:"swift"},{text:"Objective C",value:"objectivec"},{text:"Go",value:"go"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],mentions:l,textpattern_patterns:r,images_upload_handler:s,file_picker_callback:c,setup:a})},e=function(o){var i=document.querySelector("input[name=id]"),b=i?i.value:null;(b==null||b==null)&&(b="new");let u="none";window.leantime.currentProject&&(u=window.leantime.currentProject),tinymce.init({selector:"textarea.notesEditor",iframe_aria_text:"",width:"100%",skin_url:leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",content_css:leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",content_style:"html {text-align:center;} body.mce-content-body{ font-size:14px; color:var(--secondary-font-color); max-width:none;} img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,embed,autoresize,shortlink,checklist,bettertable,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advancedTemplate,advlist,codesample,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | formatselect forecolor | alignleft aligncenter alignright | link image table emoticons | checklist bullist | advancedTemplate | restoredraft",toolbar_location:"bottom",browser_spellcheck:!0,contextmenu:!1,autosave_prefix:"leantime-complexEditor-autosave-{path}{query}-{id}-"+u+"-"+b+"-",autosave_restore_when_empty:!0,autosave_retention:"120m",autosave_interval:"10s",autosave_ask_before_unload:!1,branding:!1,statusbar:!1,convert_urls:!0,menubar:!1,resizable:!0,templates:leantime.appUrl+"/wiki/templates",body_class:"mce-content-body",paste_data_images:!0,relative_urls:!0,document_base_url:leantime.appUrl+"/",table_appearance_options:!1,min_height:400,default_link_target:"_blank",codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Rust",value:"rust"},{text:"SQL",value:"sql"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"Swift",value:"swift"},{text:"Objective C",value:"objectivec"},{text:"Go",value:"go"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],textpattern_patterns:r,mentions:l,textpattern_patterns:r,images_upload_handler:s,file_picker_callback:c,setup:function(_){a(_),_.on("blur",function(){_.save(),o()})}})},n=function(o){tinymce.init({selector:o,iframe_aria_text:"",width:"100%",skin_url:d,inline:!0,plugins:"autosave,imagetools,shortlink,checklist,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advlist,mention,slashcommands,textpattern",toolbar:"",toolbar_location:"bottom",browser_spellcheck:!0,contextmenu:!1,branding:!1,statusbar:!1,convert_urls:!0,paste_data_images:!0,menubar:!1,relative_urls:!0,document_base_url:leantime.appUrl+"/",default_link_target:"_blank",table_appearance_options:!1,mentions:l,textpattern_patterns:r,images_upload_handler:s,file_picker_callback:c,setup:a})};return{initSimpleEditor:h,initComplexEditor:t,initNotesEditor:e,initContentEditable:n}}();leantime.snippets=function(){var r=function(t){var e=document.getElementById(t);e.select(),e.setSelectionRange(0,99999),navigator.clipboard.writeText(e.value),leantime.toast.show({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},l=function(t){navigator.clipboard.writeText(t),leantime.toast.show({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},s=function(){document.querySelectorAll(".confetti").forEach(function(t){t.addEventListener("click",function(){confetti.start()})})},c=function(t){var e=document.getElementById("accordion_toggle_"+t),n=e?e.querySelector("i.fa"):null,o="accordion_content-"+t,i="closed",b=document.getElementById("accordion_content-"+t);n&&n.classList.contains("fa-angle-right")?(n.classList.remove("fa-angle-right"),n.classList.add("fa-angle-down"),b&&(b.style.display=""),i="open"):n&&(n.classList.remove("fa-angle-down"),n.classList.add("fa-angle-right"),b&&(b.style.display="none"),i="closed");var u=new FormData;u.append("submenu",o),u.append("state",i),fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",body:u,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}})},a=function(t){var e=document.getElementById("themeStyleSheet"),n=e.getAttribute("href");t=="light"?(n=n.replace("dark.css","light.css"),e.setAttribute("href",n)):t=="dark"&&(n=n.replace("light.css","dark.css"),e.setAttribute("href",n))},d=function(t){var e=document.getElementById("themeStyleSheet"),n=e.getAttribute("href");t=="minimal"?(n=n.replace("default","minimal"),e.setAttribute("href",n)):t=="default"&&(n=n.replace("minimal","default"),e.setAttribute("href",n))},m=function(t){document.getElementById("fontStyleSetter").innerHTML=":root { --primary-font-family: '"+t+"', 'Helvetica Neue', Helvetica, sans-serif; }"},h=function(t,e){document.getElementById("colorSchemeSetter").innerHTML=":root { --accent1: "+t+"; --accent2: "+e+"}"};return{copyUrl:r,copyToClipboard:l,initConfettiClick:s,accordionToggle:c,toggleTheme:a,toggleFont:m,toggleColors:h,toggleBg:d}}();leantime.modals=function(){var r=!1;function l(){return document.getElementById("global-modal")}function s(){return document.getElementById("global-modal-content")}function c(){return document.getElementById("global-modal-box")}function a(T){return/showTicket|ideaDialog|articleDialog/.test(T)}function d(){var T=s();T&&(T.innerHTML='<div style="display:flex;justify-content:center;align-items:center;padding:60px 40px;"><span class="tw:loading tw:loading-spinner tw:loading-lg"></span></div>')}function m(T){for(var L=T.querySelectorAll("script"),M=0;M<L.length;M++){for(var U=L[M],N=document.createElement("script"),F=0;F<U.attributes.length;F++)N.setAttribute(U.attributes[F].name,U.attributes[F].value);N.textContent=U.textContent,U.parentNode.replaceChild(N,U)}}function h(T){if(/<html[\s>]/i.test(T)||/<!DOCTYPE/i.test(T)){var L=new DOMParser().parseFromString(T,"text/html"),M=L.querySelector(".primaryContent");return M?M.innerHTML:L.body?L.body.innerHTML:T}return T}function t(T){T.querySelectorAll(".showDialogOnLoad").forEach(function(L){L.style.display=""}),window.htmx&&window.htmx.process(T),window.tippy&&tippy(T.querySelectorAll("[data-tippy-content]"))}function e(T){var L=T.headers.get("HX-Trigger");if(L&&L.indexOf("HTMX.closemodal")!==-1)return L.indexOf("HTMX.ShowNotification")!==-1&&window.dispatchEvent(new CustomEvent("HTMX.ShowNotification")),b(),Promise.resolve(null);var M=T.headers.get("HX-Redirect");return M?(b(),window.location.href=M,Promise.resolve(null)):T.text()}function n(){if(!(typeof tinymce>"u")){var T=s();if(T){for(var L=tinymce.get(),M=L.length-1;M>=0;M--)if(T.contains(L[M].getElement())){try{L[M].save()}catch{}try{L[M].destroy(!1)}catch{}}}}}function o(T){if(T!==null){var L=s();L&&(n(),L.innerHTML=h(T),m(L),t(L))}}function i(T){var L=l(),M=c();if(L){M.className=M.className.replace(/tw:max-w-\S+/g,"").trim(),M.style.minHeight="",a(T)?(M.classList.add("tw:max-w-5xl"),M.style.minHeight="80vh"):M.classList.add("tw:max-w-3xl"),d(),L.open||L.showModal(),r=!0;var U=leantime.appUrl.replace(/\/$/,""),N=T.indexOf("http")===0?T:U+T;fetch(N,{credentials:"include",headers:{"is-modal":"true","X-Requested-With":"XMLHttpRequest"}}).then(e).then(o).catch(function(F){console.error("modalManager: load error",F);var W=s();W&&(W.innerHTML='<div style="padding:24px;text-align:center;"><p>Could not load content.</p></div>')})}}function b(){var T=l();if(T&&r){r=!1,n();try{history.pushState("",document.title,window.location.pathname+window.location.search)}catch{}if(T.open&&T.close(),typeof window.globalModalCallback=="function"){var L=window.globalModalCallback;window.globalModalCallback=null,L()}else location.reload()}}var u=function(){var T=window.location.hash.substring(1);if(T){var L=T.split("/");L.length>2&&L[1]!=="tab"&&i(T)}},_=function(){b()},C=function(T){typeof T=="function"&&(window.globalModalCallback=T)},H=function(T){var L=leantime.appUrl.replace(/\/$/,""),M=T;T.indexOf(L)===0&&(M=T.substring(L.length)),i(M)};return{openModal:u,setCustomModalCallback:C,closeModal:_,openByUrl:H}}();document.addEventListener("DOMContentLoaded",function(){leantime.modals.openModal(),leantime.modals.initNyroModal(document.querySelectorAll("a.formModal"),{callbacks:{beforeClose:function(){location.reload()}}});var r=document.getElementById("global-modal");r&&(r.addEventListener("cancel",function(l){l.preventDefault(),leantime.modals.closeModal()}),r.addEventListener("close",function(){leantime.modals.closeModal()})),document.addEventListener("submit",function(l){var s=l.target;if(!(!s||!s.closest||!s.closest("#global-modal-content"))&&s.getAttribute("method")!=="dialog"&&!(s.hasAttribute("hx-post")||s.hasAttribute("hx-get")||s.hasAttribute("hx-put")||s.hasAttribute("hx-delete"))){l.preventDefault();var c=(s.getAttribute("method")||"GET").toUpperCase(),a=s.getAttribute("action")||window.location.href,d=document.getElementById("global-modal-content"),m={method:c,credentials:"include",headers:{"is-modal":"true","X-Requested-With":"XMLHttpRequest"}};if(c==="POST")m.body=new FormData(s);else{var h=new URLSearchParams(new FormData(s));a+=(a.indexOf("?")===-1?"?":"&")+h.toString()}fetch(a,m).then(function(t){var e=t.headers.get("HX-Trigger");if(e&&e.indexOf("HTMX.closemodal")!==-1)return e.indexOf("HTMX.ShowNotification")!==-1&&window.dispatchEvent(new CustomEvent("HTMX.ShowNotification")),leantime.modals.closeModal(),null;var n=t.headers.get("HX-Redirect");return n?(leantime.modals.closeModal(),window.location.href=n,null):t.text()}).then(function(t){if(t!==null){var e=t;if(/<html[\s>]/i.test(t)||/<!DOCTYPE/i.test(t)){var n=new DOMParser().parseFromString(t,"text/html"),o=n.querySelector(".primaryContent");e=o?o.innerHTML:n.body?n.body.innerHTML:t}destroyModalEditors(),d.innerHTML=e;for(var i=d.querySelectorAll("script"),b=0;b<i.length;b++){for(var u=i[b],_=document.createElement("script"),C=0;C<u.attributes.length;C++)_.setAttribute(u.attributes[C].name,u.attributes[C].value);_.textContent=u.textContent,u.parentNode.replaceChild(_,u)}d.querySelectorAll(".showDialogOnLoad").forEach(function(H){H.style.display=""}),window.htmx&&window.htmx.process(d),window.tippy&&tippy(d.querySelectorAll("[data-tippy-content]"))}}).catch(function(t){console.error("modalManager: form submit error",t)})}},!0)});window.addEventListener("hashchange",function(){leantime.modals.openModal()});window.addEventListener("closeModal",function(){leantime.modals.closeModal()});document.addEventListener("HTMX.closemodal",function(){leantime.modals.closeModal()});leantime.modals.nmManual=function(r,l){typeof l=="function"&&(l=l()),l&&l.callbacks&&typeof l.callbacks.beforeClose=="function"&&(window.globalModalCallback=l.callbacks.beforeClose),leantime.modals.openByUrl(r)};leantime.modals.nmTop=function(){return{close:function(){leantime.modals.closeModal()},elts:{cont:document.getElementById("global-modal-box"),bg:document.querySelector("#global-modal .tw\\:modal-backdrop"),load:document.querySelector("#global-modal .tw\\:loading"),all:document.getElementById("global-modal")}}};leantime.modals.initNyroModal=function(r,l){r instanceof HTMLElement&&(r=[r]),Array.prototype.forEach.call(r,function(s){if(!s.dataset.modalManagerInit){s.dataset.modalManagerInit="true",l&&l.callbacks&&(s._modalManagerOpts=l);var c=s.getAttribute("href");c&&c.indexOf("#")===0||c&&s.addEventListener("click",function(a){a.preventDefault(),l&&l.callbacks&&typeof l.callbacks.beforeClose=="function"&&(window.globalModalCallback=l.callbacks.beforeClose),leantime.modals.openByUrl(c)})}})};typeof jQuery<"u"&&(jQuery.nmManual=leantime.modals.nmManual,jQuery.nmTop=leantime.modals.nmTop,jQuery.fn.nyroModal=function(r){return leantime.modals.initNyroModal(this.toArray(),r),this});leantime.dateController=function(){function r(c){var a=leantime.i18n.__("language.dayNames").split(",");leantime.i18n.__("language.dayNamesShort").split(",");var d=leantime.i18n.__("language.dayNamesMin").split(","),m=leantime.i18n.__("language.monthNames").split(","),h=leantime.i18n.__("language.monthNamesShort").split(","),t=parseInt(leantime.i18n.__("language.firstDayOfWeek"),10)||0;return{dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr"),locale:{firstDayOfWeek:t,weekdays:{shorthand:d,longhand:a},months:{shorthand:h,longhand:m}},allowInput:!0,onChange:c?function(e,n,o){c.call(o.input,n,o)}:void 0}}var l=function(c,a,d){var m=typeof c=="string"?document.querySelector(c):c,h=typeof a=="string"?document.querySelector(a):a;if(!(!m||!h)&&!(m.hasAttribute("readonly")||h.hasAttribute("readonly"))){var t=r();t.onChange=function(i){i.length>0&&(o.set("minDate",i[0]),h.value||o.setDate(i[0],!0))};var e=r();e.onChange=function(i){i.length>0&&n.set("maxDate",i[0])};var n=flatpickr(m,t),o=flatpickr(h,e)}},s=function(c,a){var d=typeof c=="string"?document.querySelectorAll(c):c?[c]:[];d.forEach(function(m){if(m&&!m.hasAttribute("readonly")){var h=(m.value||"").trim(),t=h&&!/\d/.test(h);t&&(m.setAttribute("placeholder",h),m.value=""),flatpickr(m,r(a))}})};return{initDateRangePicker:l,initDatePicker:s,getBaseDatePickerConfig:r}}();(function(){if(!(typeof jQuery>"u")){var r=new WeakMap;jQuery.datepicker=jQuery.datepicker||{},jQuery.datepicker.setDefaults=function(){},jQuery.datepicker.parseDate=function(l,s){if(!s)return null;var c=leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr");return flatpickr.parseDate(s,c)},jQuery.datepicker.formatDate=function(l,s){if(!s)return"";var c=leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr");return flatpickr.formatDate(s,c)},jQuery.fn.datepicker,jQuery.fn.datepicker=function(l,s){return this.each(function(){var c=this;if(typeof l=="string"){var a=r.get(c);if(!a)return;if(l==="option"||l==="setDate")if(s==="minDate"||l==="setDate"){var d=arguments.length>2?arguments[2]:s;l==="setDate"?a.setDate(d,!0):a.set("minDate",d)}else s==="maxDate"&&a.set("maxDate",arguments[2]);return}if(!c.hasAttribute("readonly")){var m=leantime.dateController.getBaseDatePickerConfig();l&&l.onSelect&&(m.onChange=function(t,e,n){l.onSelect.call(c,e,n)});var h=flatpickr(c,m);r.set(c,h)}})}}})();leantime.dateHelper=function(){var r={jquery:{},luxon:{},flatpickr:{}};r.jquery={d:"dd",D:"D",j:"d",l:"DD",N:"",S:"",w:"",z:"o",W:"",F:"MM",m:"mm",M:"M",n:"m",t:"",L:"",o:"yy",Y:"yy",y:"y",a:"",A:"",B:"",g:"",G:"",h:"",H:"",i:"",s:"",u:"",e:"",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"@"},r.flatpickr={d:"d",D:"D",j:"j",l:"l",N:"",S:"",w:"w",z:"",W:"W",F:"F",m:"m",M:"M",n:"n",t:"",L:"",o:"Y",Y:"Y",y:"y",a:"K",A:"K",B:"",g:"G",G:"H",h:"h",H:"H",i:"i",s:"S",u:"",e:"",I:"",O:"",P:"",T:"",Z:"Z",c:"",r:"",U:"U"},r.luxon={d:"dd",D:"ccc",j:"d",l:"cccc",N:"c",S:"",w:"c",z:"o",W:"WW",F:"MMMM",m:"LL",M:"LLL",n:"L",t:"",L:"",o:"kk",Y:"yyyy",y:"yy",a:"a",A:"a",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",v:"SSS",e:"z",I:"",O:"ZZ",P:"ZZ",T:"ZZZ",Z:"",c:"",r:"",U:"X"};var l=function(c,a){let d=r[a],m="";return c.split("").forEach(function(h){d[h]!==void 0?m=m+""+d[h]:m=m+""+h}),m},s=function(c,a){let d=leantime.i18n.__("language."+c);return l(d,a)};return{mapFormat:l,getFormatFromSettings:s}}();leantime.accessibilityController=function(){var r=function(){var t=document.querySelectorAll(".ss-main");t.forEach(function(e){if(!e.dataset.a11yEnhanced){var n=e.previousElementSibling;if(!(!n||n.tagName!=="SELECT")){var o="",i=n.getAttribute("id");if(i){var b=document.querySelector('label[for="'+i+'"]');b&&(o=b.textContent.trim())}var u=n.hasAttribute("multiple");e.setAttribute("role","combobox"),e.setAttribute("aria-haspopup","listbox"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label",o||n.getAttribute("data-placeholder")||(u?"Select options":"Select option")),u&&e.setAttribute("aria-multiselectable","true");var _=e.parentElement?e.parentElement.querySelector(".ss-content .ss-list"):null;_&&_.setAttribute("role","listbox");var C=new MutationObserver(function(T){T.forEach(function(L){if(L.attributeName==="class"){var M=e.parentElement?e.parentElement.querySelector(".ss-content"):null;if(M){var U=M.classList.contains("ss-open");e.setAttribute("aria-expanded",U?"true":"false")}}})}),H=e.parentElement?e.parentElement.querySelector(".ss-content"):null;H&&C.observe(H,{attributes:!0,attributeFilter:["class"]}),e.dataset.a11yEnhanced="true"}}})},l=function(){var t=document.querySelectorAll("div.tagsinput");t.forEach(function(e){var n=e.nextElementSibling;if(!(!n||n.type!=="text")){var o=n.getAttribute("id"),i="Enter tags";if(o){var b=document.querySelector('label[for="'+o+'"]');b&&(i=b.textContent.trim())}e.setAttribute("role","list"),e.setAttribute("aria-label",i);var u=e.querySelectorAll("span.tag");u.forEach(function(H){H.setAttribute("role","listitem")});var _=e.querySelector("input");if(_&&(_.setAttribute("aria-label","Add new tag"),o&&_.setAttribute("aria-describedby",o+"-help")),o&&!document.getElementById(o+"-help")){var C=document.createElement("span");C.id=o+"-help",C.className="sr-only",C.textContent="Type and press enter to add tags. Press backspace to remove the last tag.",e.parentNode.insertBefore(C,e.nextSibling)}}})},s=function(){var t=document.querySelectorAll("input.hasDatepicker");t.forEach(function(e){var n=e.getAttribute("id"),o="";if(n){var i=document.querySelector('label[for="'+n+'"]');i&&(o=i.textContent.trim())}if(e.setAttribute("role","textbox"),e.setAttribute("aria-label",o||"Select date"),n&&(e.setAttribute("aria-describedby",n+"-help"),!document.getElementById(n+"-help"))){var b=document.createElement("span");b.id=n+"-help",b.className="sr-only",b.textContent="Date input. Use arrow keys to navigate calendar. Press enter to select date.",e.parentNode.insertBefore(b,e.nextSibling)}}),document._a11yDatepickerBound||(document.addEventListener("focusin",function(e){e.target&&e.target.matches&&e.target.matches("input.hasDatepicker")&&setTimeout(function(){var n=document.getElementById("ui-datepicker-div");n&&n.style.display!=="none"&&(n.setAttribute("role","dialog"),n.setAttribute("aria-label","Choose date"),n.setAttribute("aria-modal","true"))},100)}),document._a11yDatepickerBound=!0)},c=function(){typeof tinymce<"u"&&tinymce.on("AddEditor",function(t){var e=t.editor,n="Rich text editor",o=document.querySelector('label[for="'+e.id+'"]');o&&(n=o.textContent.trim()),e.on("init",function(){var i=document.getElementById(e.id+"_ifr");if(i&&(i.setAttribute("aria-label",n),!document.getElementById(e.id+"-help"))){var b=document.createElement("span");b.id=e.id+"-help",b.className="sr-only",b.textContent="Rich text editor. Press ALT+F10 to access toolbar. Press ESC to return to editing area.",i.parentNode.insertBefore(b,i.nextSibling)}})})},a=function(){var t=document.querySelectorAll('input[type="time"]');t.forEach(function(e){var n=e.getAttribute("id");if(n&&!document.querySelector('label[for="'+n+'"]')){var o="Time",i=e.closest(".form-group");if(i){var b=i.querySelector("label");b&&(o=b.textContent.trim()+" time")}e.setAttribute("aria-label",o)}})},d=function(){var t=document.querySelectorAll(".ticketBox");t.forEach(function(e){e.getAttribute("tabindex")||e.setAttribute("tabindex","0");var n=e.querySelector(".ticketHeadline"),o=n?n.textContent.trim():"";o&&(e.setAttribute("role","article"),e.setAttribute("aria-label","Task: "+o)),e.dataset.keyboardBound||(e.addEventListener("keydown",function(i){var b=i.target,u=b.matches('a, button, input, select, textarea, [role="button"], [tabindex]')||b.closest(".dropdown-toggle, .ticketDropdown, .inlineDropDownContainer");if((i.key==="Enter"||i.key===" ")&&!u&&i.target===e){i.preventDefault();var _=e.querySelector("a");_&&_.click()}}),e.dataset.keyboardBound="true")})},m=function(){r(),l(),s(),a(),d()},h=function(){m(),c(),document.addEventListener("htmx:afterSwap",function(){setTimeout(m,100)}),document.addEventListener("shown.bs.modal",function(){setTimeout(m,100)}),setTimeout(r,1e3)};return{init:h,enhanceSlimSelectAccessibility:r,enhanceTagsInputAccessibility:l,enhanceDatepickerAccessibility:s,enhanceTinyMCEAccessibility:c,fixTimepickerLabels:a,enhanceKanbanCardAccessibility:d}}();document.addEventListener("DOMContentLoaded",function(){leantime.accessibilityController.init()});leantime.authController=function(){var r=function(l){(typeof l>"u"||!l)&&(l="body");var s=document.querySelector(l);if(s){s.querySelectorAll("input").forEach(function(a){a.closest(".filterBar")||(a.readOnly=!0,a.disabled=!0)}),s.querySelectorAll("select").forEach(function(a){!a.closest(".filterBar")&&!a.classList.contains("mainSprintSelector")&&(a.readOnly=!0,a.disabled=!0)}),s.querySelectorAll("textarea").forEach(function(a){a.closest(".filterBar")||(a.disabled=!0)}),s.querySelectorAll("a.delete").forEach(function(a){a.remove()}),s.querySelectorAll(".quickAddLink").forEach(function(a){a.style.display="none"}),s.querySelectorAll(".complexEditor").forEach(function(a){typeof tinymce<"u"&&tinymce.get(a.id)&&tinymce.get(a.id).getBody().setAttribute("contenteditable","false")}),s.querySelectorAll(".tinymceSimple").forEach(function(a){typeof tinymce<"u"&&tinymce.get(a.id)&&tinymce.get(a.id).getBody().setAttribute("contenteditable","false")}),s.querySelectorAll(".tox-editor-header").forEach(function(a){a.style.display="none"}),s.querySelectorAll(".tox-statusbar").forEach(function(a){a.style.display="none"}),s.querySelectorAll(".ticketDropdown a").forEach(function(a){a.removeAttribute("data-toggle")});var c=document.getElementById("mainToggler");c&&(c.style.display="none"),document.querySelectorAll(".commentBox").forEach(function(a){a.style.display="none"}),document.querySelectorAll(".deleteComment, .replyButton").forEach(function(a){a.style.display="none"}),s.querySelectorAll(".dropdown i").forEach(function(a){a.classList.remove("fa-caret-down")})}};return{makeInputReadonly:r}}();leantime.commentsController=function(){var r=function(){document.querySelectorAll(".commentBox").forEach(function(s){s.style.display=""}),document.querySelectorAll("#comments .replies .commentBox").forEach(function(s){s.style.display="none"}),document.querySelectorAll(".deleteComment, .replyButton").forEach(function(s){s.style.display=""}),document.querySelectorAll(".commentReply .tinymceSimple").forEach(function(s){var c=tinymce.get(s.id);c&&c.getBody().setAttribute("contenteditable","true")}),document.querySelectorAll(".commentReply .tox-editor-header").forEach(function(s){s.style.display=""}),document.querySelectorAll(".commenterFields input").forEach(function(s){s.readOnly=!1,s.disabled=!1}),document.querySelectorAll(".commenterFields textarea").forEach(function(s){s.readOnly=!1,s.disabled=!1})},l=function(s){if(s==0){var c=document.getElementById("mainToggler");c&&(c.style.display="none")}else{var c=document.getElementById("mainToggler");c&&(c.style.display="")}document.querySelectorAll(".commentBox textarea").forEach(function(h){h.remove()}),document.querySelectorAll(".commentBox").forEach(function(h){h.style.display="none"});var a=document.getElementById("comment"+s);if(a){var d=a.querySelector(".commentReply");d&&d.insertAdjacentHTML("afterbegin",'<textarea rows="5" cols="75" name="text" class="tinymceSimple"></textarea>')}leantime.editorController.initSimpleEditor(),a&&(a.style.display="");var m=document.getElementById("father");m&&(m.value=s)};return{enableCommenterForms:r,toggleCommentBoxes:l}}();leantime.ticketsController=function(){function r(){let g=[];document.querySelectorAll(".sortableTicketList").forEach(function(y){y.querySelectorAll(".column").forEach(function(x,f){g[f]===void 0&&(g[f]=0);var p=x.querySelectorAll(".moveable").length;g[f]+=p})}),document.querySelectorAll(".widgettitle .count").forEach(function(y,x){y.textContent=g[x]})}function l(){document.querySelectorAll(".kanban-swimlane-row").forEach(function(g){var y=g.id;if(y){y.replace("swimlane-row-","");var x=g.querySelector(".kanban-swimlane-content"),f=x?x.querySelectorAll(".moveable").length:0,p=g.querySelector(".kanban-swimlane-sidebar");if(p){p.querySelectorAll(".kanban-lane-count").forEach(function(w){w.textContent=f});var S=p.getAttribute("aria-label")||"",v=S.replace(/\d+ tasks/,f+" tasks");p.setAttribute("aria-label",v)}}}),s()}function s(){document.querySelectorAll(".kanban-swimlane-row").forEach(function(g){var y=g.querySelector(".kanban-swimlane-content"),x=g.querySelector(".micro-progress-bar .progress-segments");if(x){var f={},p=0;y&&y.querySelectorAll(".contentInner").forEach(function(v){var w=v.getAttribute("class")||"",k=w.match(/status_(-?\d+)/);if(k){var A=k[1],E=v.querySelectorAll(".moveable").length;E>0&&(f[A]=E,p+=E)}});var S=x.querySelectorAll(".status-segment");if(p===0){S.forEach(function(v){v.style.flex="0 1 0%";var w=v.querySelector(".segment-count");w&&(w.textContent=""),v.setAttribute("data-tippy-content","")});return}S.forEach(function(v){var w=v.getAttribute("class");if(w){var k=w.match(/status-(-?\d+)/);if(k){var A=k[1],E=f[A]||0,D=E/p*100;v.style.flex=D+" 1 0%";var I=v.querySelector(".segment-count");I&&(I.textContent=E>0?E:"");var q=v.getAttribute("data-tippy-content")||"",Q=q.match(/^([^:]+):/),O=Q?Q[1]:"Status "+A;v.setAttribute("data-tippy-content",E>0?O+": "+E:"")}}})}})}var c=function(g,y){var x=document.getElementById("ticket_"+g);if(!x){console.warn("Card not found for ticket ID:",g);return}var f=x.closest(".contentInner"),p=f&&f.getAttribute("class")||"",S=p.match(/status_(\d+)/);if(!S){console.warn("Could not determine status for ticket:",g),location.reload();return}var v=S[1],w=document.querySelector("#kanboard-"+y+" .contentInner.status_"+v);if(!w){console.warn("Target swimlane not found:",y,v),location.reload();return}f!==w&&(x.classList.add("card-moving-out"),setTimeout(function(){w.appendChild(x),x.classList.remove("card-moving-out"),x.classList.add("card-moving-in"),r(),l(),setTimeout(function(){x.classList.remove("card-moving-in")},300)},200))},a=function(g,y){var x=typeof g=="string"?document.querySelector(g):g,f=x.value;leantime.ticketsRepository.updateRemainingHours(y,f,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.remaining_hours_updated"),style:"success"})})},d=function(g,y){var x=typeof g=="string"?document.querySelector(g):g,f=x.value;leantime.ticketsRepository.updatePlannedHours(y,f,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.planned_hours_updated"),style:"success"})})},m=function(){document.querySelectorAll(".filterBar").forEach(function(g){g.style.display=g.style.display==="none"?"":"none"})},h=function(g,y,x){function f(p){return String(p).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}document.addEventListener("DOMContentLoaded",function(){function p(w){return typeof jQuery<"u"&&jQuery.datepicker&&jQuery.datepicker.formatDate?jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),new Date(w)):new Date(w).toLocaleDateString()}if(x===!1)var S=new Gantt("#gantt",g,{header_height:55,column_width:20,step:24,view_modes:["Day","Week","Month"],bar_height:40,static_progress_indicator:!0,bar_corner_radius:10,arrow_curve:10,padding:20,view_mode:"Month",date_format:leantime.i18n.__("language.momentJSDate"),language:leantime.i18n.__("language.code").slice(0,2),additional_rows:5,custom_popup_html:function(w){var k=w._end,A=p(k),E='<div class="details-container" style="min-width:600px;"> ';return w.projectName!==void 0&&(E+="<h3><b>"+w.projectName+"</b></h3>"),E+="<small>"+w.type+" #"+w.id+" </small>",w.type==="milestone"?E+='<h4><a href="#/tickets/editMilestone/'+w.id+'" >'+f(w.name)+"</a></h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+A+"</strong><br /> "+Math.round(w.progress)+'%</p> <a href="#/tickets/editMilestone/'+w.id+'" ><span class="fa fa-map"></span> '+leantime.i18n.__("links.edit_milestone")+'</a> | <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+w.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":E+='<h4><a href="#/tickets/showTicket/'+w.id+'">'+f(w.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+w.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",E+="</div>",E},on_click:function(w){},on_date_change:function(w,k,A){leantime.ticketsRepository.updateMilestoneDates(w.id,k,A,w._index+1)},on_sort_change:function(w){for(var k={action:"ganttSort",payload:{}},A=0;A<w.length;A++)k.payload[w[A].id]=w[A]._index+1;var E=new URLSearchParams;E.append("action",k.action);for(var D in k.payload)E.append("payload["+D+"]",k.payload[D]);fetch(leantime.appUrl+"/api/tickets",{method:"POST",body:E,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}})},on_progress_change:function(w,k){},on_view_change:function(w){leantime.usersRepository.updateUserViewSettings("roadmap",w)},on_popup_show:function(w){}});else var S=new Gantt("#gantt",g,{readonlyGantt:!0,resizing:!1,progress:!1,is_draggable:!1,custom_popup_html:function(k){var A=k._end,E=p(A),D='<div class="details-container" style="min-width:600px;"> ';return k.projectName!==void 0&&(D+="<h3><b>"+k.projectName+"</b></h3>"),D+="<small>"+k.type+" #"+k.id+" </small>",k.type==="milestone"?D+="<h4>"+f(k.name)+"</h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+E+"</strong><br /> "+Math.round(k.progress)+'%</p> <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+k.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":D+='<h4><a href="#/tickets/showTicket/'+k.id+'">'+f(k.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+k.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",D+="</div>",D},on_click:function(k){},on_date_change:function(k,A,E){},on_progress_change:function(k,A){},on_view_change:function(k){leantime.usersRepository.updateUserViewSettings("roadmap",k)}});var v=document.getElementById("ganttTimeControl");v&&v.addEventListener("click",function(w){var k=w.target.closest("a");if(k){var A=k.getAttribute("data-value");S.change_view_mode(A),v.querySelectorAll("a").forEach(function(D){D.classList.remove("active")}),k.classList.add("active");var E=k.textContent;document.querySelectorAll(".viewText").forEach(function(D){D.textContent=E})}}),S.change_view_mode(y)})},t=function(){Date.prototype.addDays=function(p){return this.setDate(this.getDate()+p),this},jQuery.datepicker.setDefaults({beforeShow:function(p){if(p.hasAttribute("readonly"))return!1}});var g=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),y=jQuery("#sprintStart").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){x.datepicker("option","minDate",f(this));var p=f(this).addDays(13);x.datepicker("setDate",p)}),x=jQuery("#sprintEnd").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){y.datepicker("option","maxDate",f(this))});function f(p){var S;try{S=jQuery.datepicker.parseDate(g,p.value)}catch(v){S=null,console.log(v)}return S}},e=function(){var g=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),y=jQuery("#milestoneEditFrom").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){x.datepicker("option","minDate",f(this))}),x=jQuery("#milestoneEditTo").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){y.datepicker("option","maxDate",f(this))});function f(p){var S;try{S=jQuery.datepicker.parseDate(g,p.value)}catch(v){S=null,console.log(v)}return S}},n=function(){var g=leantime.dateHelper.getFormatFromSettings("dateformat","jquery");jQuery(".milestoneEditFromAsync").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){var x=this.value,f=this.getAttribute("data-id"),p=jQuery(".toDateTicket-"+f);p.datepicker("option","minDate",y(this)),leantime.ticketsRepository.updateEditFromDates(f,x,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})})}),jQuery(".milestoneEditToAsync").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){var x=this.getAttribute("data-id"),f=jQuery(".fromDateTicket-"+x);f.datepicker("option","maxDate",y(this));var p=this.value;leantime.ticketsRepository.updateEditToDates(x,p,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})})});function y(x){var f;try{f=jQuery.datepicker.parseDate(g,x.value)}catch(p){f=null,console.log(p)}return f}},o=function(){typeof jQuery<"u"&&jQuery.fn.tooltip&&jQuery('[data-toggle="tooltip"]').tooltip()},i=function(){var g={"0.5":"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"};document.querySelectorAll(".effortDropdown .dropdown-menu a").forEach(function(y){y.replaceWith(y.cloneNode(!0))}),document.querySelectorAll(".effortDropdown .dropdown-menu a").forEach(function(y){y.addEventListener("click",function(){var x=this.getAttribute("data-value").split("_");if(x.length===2){var f=x[0],p=x[1],S=new URLSearchParams;S.append("id",f),S.append("storypoints",p),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:S,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var v=document.querySelector("#effortDropdownMenuLink"+f+" span.text");v&&(v.textContent=g[p]),leantime.toast.show({message:leantime.i18n.__("short_notifications.effort_updated"),style:"success"}),leantime.kanbanGroupBy==="storypoints"&&c(f,p)})}else console.log("Ticket Controller: Effort data value not set correctly")})})},b=function(){var g={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"};document.querySelectorAll(".priorityDropdown .dropdown-menu a").forEach(function(y){y.replaceWith(y.cloneNode(!0))}),document.querySelectorAll(".priorityDropdown .dropdown-menu a").forEach(function(y){y.addEventListener("click",function(){var x=this.getAttribute("data-value").split("_");if(x.length===2){var f=x[0],p=x[1],S=new URLSearchParams;S.append("id",f),S.append("priority",p),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:S,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var v=document.getElementById("priorityDropdownMenuLink"+f);if(v){var w=v.querySelector("span.text");w&&(w.textContent=g[p]),v.classList.remove("priority-bg-1","priority-bg-2","priority-bg-3","priority-bg-4","priority-bg-5"),v.classList.add("priority-bg-"+p);var k=v.closest(".ticketBox");k&&(k.classList.remove("priority-border-1","priority-border-2","priority-border-3","priority-border-4","priority-border-5"),k.classList.add("priority-border-"+p))}leantime.toast.show({message:leantime.i18n.__("short_notifications.priority_updated"),style:"success"}),leantime.kanbanGroupBy==="priority"&&c(f,p)})}else console.log("Ticket Controller: Priority data value not set correctly")})})},u=function(){document.querySelectorAll(".milestoneDropdown .dropdown-menu a").forEach(function(g){g.replaceWith(g.cloneNode(!0))}),document.querySelectorAll(".milestoneDropdown .dropdown-menu a").forEach(function(g){g.addEventListener("click",function(){var y=this.getAttribute("data-value").split("_"),x=this.getAttribute("data-label");if(y.length===3){var f=y[0],p=y[1],S=y[2],v=document.querySelector("#milestoneDropdownMenuLink"+f+" span.text");v&&v.insertAdjacentHTML("beforeend"," ...");var w=new URLSearchParams;w.append("id",f),w.append("milestoneid",p),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:w,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var k=document.querySelector("#milestoneDropdownMenuLink"+f+" span.text");k&&(k.textContent=x);var A=document.getElementById("milestoneDropdownMenuLink"+f);A&&(A.style.backgroundColor=S),leantime.toast.show({message:leantime.i18n.__("short_notifications.milestone_updated"),style:"success"}),leantime.kanbanGroupBy==="milestoneid"&&c(f,p)})}})})},_=function(){document.querySelectorAll(".statusDropdown .dropdown-menu a").forEach(function(g){g.replaceWith(g.cloneNode(!0))}),document.querySelectorAll(".statusDropdown .dropdown-menu a").forEach(function(g){g.addEventListener("click",function(){var y=this.getAttribute("data-value").split("_"),x=this.getAttribute("data-label");if(y.length==3){var f=y[0],p=y[1],S=y[2],v=new URLSearchParams;v.append("id",f),v.append("status",p),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:v,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(w){return w.json()}).then(function(w){var k=document.querySelector("#statusDropdownMenuLink"+f+" span.text");k&&(k.textContent=x);var A=document.getElementById("statusDropdownMenuLink"+f);A&&(A.className=S+" dropdown-toggle f-left status "),leantime.toast.show({message:leantime.i18n.__("short_notifications.status_updated"),style:"success"}),leantime.handleAsyncResponse(w)})}})})},C=function(){document.querySelectorAll(".userDropdown .dropdown-menu a").forEach(function(g){g.replaceWith(g.cloneNode(!0))}),document.querySelectorAll(".userDropdown .dropdown-menu a").forEach(function(g){g.addEventListener("click",function(){var y=this.getAttribute("data-value").split("_"),x=this.getAttribute("data-label");if(y.length===3){var f=y[0],p=y[1];y[2];var S=new URLSearchParams;S.append("id",f),S.append("editorId",p),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:S,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var v=document.querySelector("#userDropdownMenuLink"+f+" span.text span#userImage"+f+" img");v&&v.setAttribute("src",leantime.appUrl+"/api/users?profileImage="+p);var w=document.querySelector("#userDropdownMenuLink"+f+" span.text span#user"+f);w&&(w.textContent=x),leantime.toast.show({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"}),leantime.kanbanGroupBy==="editorId"&&c(f,p)})}})})},H=function(){document.querySelectorAll(".asyncInputUpdate").forEach(function(g){g.addEventListener("change",function(){var y=this.getAttribute("data-label").split("-");if(y.length==2){var x=y[0],f=y[1],p=this.value,S=new URLSearchParams;S.append("id",f),S.append(x,p),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:S,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){leantime.toast.show({message:leantime.i18n.__("notifications.subtask_saved"),style:"success"})})}})})},T=function(){document.querySelectorAll(".sprintDropdown .dropdown-menu a").forEach(function(g){g.replaceWith(g.cloneNode(!0))}),document.querySelectorAll(".sprintDropdown .dropdown-menu a").forEach(function(g){g.addEventListener("click",function(){var y=this.getAttribute("data-value").split("_"),x=this.getAttribute("data-label");if(y.length==2){var f=y[0],p=y[1],S=new URLSearchParams;S.append("id",f),S.append("sprint",p),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:S,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var v=document.querySelector("#sprintDropdownMenuLink"+f+" span.text");v&&(v.textContent=x),leantime.toast.show({message:leantime.i18n.__("short_notifications.sprint_updated"),style:"success"}),leantime.kanbanGroupBy==="sprint"&&c(f,p)})}})})},L=function(){document.querySelectorAll("input.simpleColorPicker").forEach(function(g){g.type="color",g.style.height="34px",g.style.padding="2px",g.style.cursor="pointer",g.value&&g.value.charAt(0)!=="#"&&(g.value="#"+g.value),g.value||(g.value="#1b75bb"),g.addEventListener("input",function(){this.style.background=this.value})})},M=function(){document.querySelectorAll(".date-picker-form-control .reset-button").forEach(function(g){g.addEventListener("click",function(){var y=this.getAttribute("data-id"),x=document.getElementById("due-date-picker-"+y);x&&(x.value=leantime.i18n.__("text.anytime")),leantime.ticketsRepository.updateDueDates(y,null,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})})})}),leantime.dateController.initDatePicker(".quickDueDates, .duedates",function(g,y){var x=y.currentDay,f=y.currentMonth,p=y.currentYear,S=new Date(p,f,x),v=typeof jQuery<"u"&&jQuery.datepicker&&jQuery.datepicker.formatDate?jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),S):S.toLocaleDateString(),w=this.getAttribute("data-id");leantime.ticketsRepository.updateDueDates(w,v,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})})})},U=function(g,y,x,f){var p=document.getElementById(f).getContext("2d");new Chart(p,{type:"line",data:{labels:g,datasets:[{label:leantime.i18n.__("label.booked_hours"),backgroundColor:"rgba(201,48,44, 0.5)",borderColor:"rgb(201,48,44)",data:y},{label:leantime.i18n.__("label.planned_hours"),backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgb(54, 162, 235)",data:x}]},options:{scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.booked_hours")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.planned_hours")},ticks:{beginAtZero:!0}}}}})},N=function(){var g=new URL(window.location.href),y=g.searchParams.get("tab"),x=0;if(y){var f=document.querySelector(".ticketTabs");if(f){var p=f.querySelector('a[href="#'+y+'"]');p&&p.parentElement&&(x=Array.prototype.indexOf.call(p.parentElement.parentElement.children,p.parentElement))}}typeof jQuery<"u"&&jQuery.fn.tabs&&jQuery(".ticketTabs").tabs({create:function(S,v){document.querySelectorAll(".ticketTabs").forEach(function(w){w.style.visibility="visible"})},activate:function(S,v){g=new URL(window.location.href),g.searchParams.set("tab",v.newPanel[0].id),window.history.replaceState(null,null,g)},load:function(){},enable:function(){},active:x})},F=function(g){var y=document.getElementById("ticketSearch");y&&y.addEventListener("submit",function(x){x.preventDefault();var f=function(B){var j=document.getElementById(B);return j?j.value:void 0},p=function(B){var j=document.querySelector("input[name='"+B+"']:checked");return j?j.value:void 0},S=f("projectIdInput"),v=f("userSelect"),w=f("milestoneSelect"),k=f("termInput"),A=f("sprintSelect"),E=f("typeSelect"),D=f("prioritySelect"),I=f("statusSelect"),q=f("sortBySelect"),Q=p("groupBy"),O=p("showTasks"),R="?search=true";S!=""&&S!=null&&(R=R+"&projectId="+S),v!=""&&v!=null&&(R=R+"&users="+v),w!=""&&w!=null&&(R=R+"&milestone="+w),k!=""&&k!=null&&(R=R+"&term="+k),A!=""&&A!=null&&(R=R+"&sprint="+A),E!=""&&E!=null&&(R=R+"&type="+E),D!=""&&D!=null&&(R=R+"&priority="+D),I!=""&&I!=null&&(R=R+"&status="+I),q!=""&&q!=null&&(R=R+"&sort="+q),Q!=""&&Q!=null&&(R=R+"&groupBy="+Q),O!=""&&O!=null&&(R=R+"&showTasks="+O);var G=g+R;window.location.href=G})},W=function(g){var y=function(O){var R=document.getElementById(O);return R?R.value:void 0},x=function(O){var R=document.querySelector("input[name='"+O+"']:checked");return R?R.value:void 0},f=y("projectIdInput"),p=y("userSelect"),S=y("milestoneSelect"),v=y("termInput"),w=y("sprintSelect"),k=y("typeSelect"),A=y("prioritySelect"),E=y("statusSelect"),D=y("sortBySelect"),I=x("groupBy"),q="?search=true";f!=""&&f!=null&&(q=q+"&projectId="+f),p!=""&&p!=null&&(q=q+"&users="+p),S!=""&&S!=null&&(q=q+"&milestone="+S),v!=""&&v!=null&&(q=q+"&term="+v),w!=""&&w!=null&&(q=q+"&sprint="+w),k!=""&&k!=null&&(q=q+"&type="+k),A!=""&&A!=null&&(q=q+"&priority="+A),E!=""&&E!=null&&(q=q+"&status="+E),D!=""&&D!=null&&(q=q+"&sort="+D),I!=""&&I!=null&&(q=q+"&groupBy="+I);var Q=g+q;window.location.href=Q},z=function(){document.addEventListener("DOMContentLoaded",function(){r(),l(),document.querySelectorAll(".filterBar .row-fluid").forEach(function(g){g.style.opacity="1"}),document.querySelectorAll(".sortableTicketList").forEach(function(g){var y=g.id,x=g.closest(".kanban-swimlane-row");if(!(x&&x.getAttribute("data-expanded")==="false")){var f=250;g.querySelectorAll(".column .contentInner").forEach(function(p){p.offsetHeight>f&&(f=p.offsetHeight)}),document.querySelectorAll("#"+y+" .column .contentInner").forEach(function(p){p.style.height=f+"px"})}})})},V=function(g){var y=g;document.querySelectorAll(".sortableTicketList.kanbanBoard .ticketBox").forEach(function(p){p.addEventListener("mouseenter",function(){this.style.background="var(--kanban-card-hover)"}),p.addEventListener("mouseleave",function(){this.style.background="var(--kanban-card-bg)"})});function x(p){var S=p.querySelectorAll(":scope > .moveable"),v=[];return S.forEach(function(w){if(w.id){var k=w.id.indexOf("_");k!==-1&&v.push(w.id.substring(0,k)+"[]="+w.id.substring(k+1))}}),v.join("&")}document.querySelectorAll(".sortableTicketList").forEach(function(p){p.querySelectorAll(".contentInner").forEach(function(S){S._sortableInstance&&S._sortableInstance.destroy(),S._sortableInstance=new Sortable(S,{group:"ticket-kanban",draggable:".moveable",ghostClass:"ui-state-highlight",filter:".portlet-toggle, input, a, select, textarea",preventOnFilter:!1,animation:150,delay:10,delayOnTouchOnly:!0,onStart:function(v){v.item.classList.add("tilt"),f(v.item);var w=v.item.closest(".sortableTicketList.kanbanBoard");v.item.dataset.originalSwimlaneId=w?w.id:""},onEnd:function(v){v.item.classList.remove("tilt"),v.item._moveHandler&&(document.removeEventListener("mousemove",v.item._moveHandler),delete v.item._moveHandler),r(),l(),document.querySelectorAll(".sortableTicketList .contentInner").forEach(function(X){var de=X.querySelectorAll(".moveable").length>0;if(de){X.classList.remove("empty-column"),X.setAttribute("data-empty-text","");var Ge=X.getAttribute("aria-label")||"";X.setAttribute("aria-label",Ge.replace("Empty column","")+" column items")}else X.classList.add("empty-column"),X.setAttribute("data-empty-text","Empty"),X.setAttribute("aria-label","Empty column")});var w=v.item.closest(".sortableTicketList.kanbanBoard"),k=w?w.id:"",A=v.item.dataset.originalSwimlaneId;if(A&&k&&A!==k){var E=v.item.id.replace("ticket_",""),D=k.replace("kanboard-",""),I={milestoneid:"milestoneid",editorId:"editorId",priority:"priority",storypoints:"storypoints",sprint:"sprint",dueDate:"dateToFinish"},q=leantime.kanbanGroupBy,Q=I[q];if(q==="dueDate"){var O=new Date;switch(O.setHours(12,0,0,0),D){case"0":var R=new Date(O);R.setDate(R.getDate()-1),D=R.toISOString().split("T")[0];break;case"1":var G=new Date(O),B=6-G.getDay();B<0&&(B=0),G.setDate(G.getDate()+B),D=G.toISOString().split("T")[0];break;case"2":var j=new Date(O),Ne=6-j.getDay()+7;j.setDate(j.getDate()+Ne),D=j.toISOString().split("T")[0];break;case"3":var ue=new Date(O);ue.setDate(ue.getDate()+21),D=ue.toISOString().split("T")[0];break;case"4":D="";break}}if(Q&&E){var J=document.getElementById("ticket_"+E);if(q==="milestoneid"){var K=document.querySelector("#swimlane-row-"+D+" .swimlane-header-label"),Xe=(K?K.textContent:"")||leantime.i18n.__("label.no_milestone"),ye=J?J.querySelector(".milestoneDropdown .dropdown-toggle .text"):null;ye&&(ye.textContent=Xe);var me=J?J.querySelector('.milestoneDropdown .dropdown-menu a[data-value^="'+E+"_"+D+'_"]'):null,ne="#b0b0b0";if(me&&D!=="0"&&D!==""){var be=me.getAttribute("data-value");if(be){var _e=be.split("_");_e.length>=3&&(ne=_e.slice(2).join("_"))}if(!ne||ne==="#b0b0b0"){var we=me.getAttribute("style");if(we){var xe=we.match(/background-color:\s*([^;]+)/i);xe&&(ne=xe[1].trim())}}}var Se=J?J.querySelector(".milestoneDropdown .dropdown-toggle"):null;Se&&(Se.style.backgroundColor=ne)}else if(q==="priority"){J&&(J.className=J.className.replace(/(^|\s)priority-border-\S+/g,""),J.classList.add("priority-border-"+D));var We={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"},ie=document.getElementById("priorityDropdownMenuLink"+E);if(ie){var Te=ie.querySelector("span.text");Te&&(Te.textContent=We[D]||D),ie.classList.remove("priority-bg-1","priority-bg-2","priority-bg-3","priority-bg-4","priority-bg-5"),ie.classList.add("priority-bg-"+D)}}else if(q==="editorId"){var fe=document.getElementById("userDropdownMenuLink"+E);if(fe){var ke=fe.querySelector("span.text span img");ke&&ke.setAttribute("src",leantime.appUrl+"/api/users?profileImage="+D);var K=document.querySelector("#swimlane-row-"+D+" .swimlane-header-label"),Qe=(K?K.textContent:"")||leantime.i18n.__("label.not_assigned"),Ce=fe.querySelector("span.text span#user"+E);Ce&&(Ce.textContent=Qe)}}else if(q==="storypoints"){var ze={"0.5":"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"},Le=document.getElementById("effortDropdownMenuLink"+E);if(Le){var Ee=Le.querySelector("span.text");Ee&&(Ee.textContent=ze[D]||D)}}else if(q==="sprint"){var De=document.getElementById("sprintDropdownMenuLink"+E);if(De){var K=document.querySelector("#swimlane-row-"+D+" .swimlane-header-label"),Je=(K?K.textContent:"")||leantime.i18n.__("label.backlog"),Ae=De.querySelector("span.text");Ae&&(Ae.textContent=Je)}}else if(q==="dueDate"){var Me=J?J.querySelector(".dues .fa-calendar"):null,re=Me?Me.parentElement:null;if(re&&D){var pe=D.split("-"),Ye=pe[1]+"/"+pe[2]+"/"+pe[0],ee=[];re.childNodes.forEach(function(X){X.nodeType===3&&ee.push(X)}),ee.length>0&&(ee[0].textContent=" "+Ye)}else if(re&&!D){var ee=[];re.childNodes.forEach(function(de){de.nodeType===3&&ee.push(de)}),ee.length>0&&(ee[0].textContent=" No due date")}}leantime.toast.show({message:"To-Do Updated",style:"success"});var he=new URLSearchParams;he.append("id",E),he.append(Q,D),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:he,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(X){if(!X.ok)throw new Error("Request failed")}).catch(function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.not_saved")||"Error updating ticket",style:"error"}),location.reload()})}}delete v.item.dataset.originalSwimlaneId;for(var Ve=v.item.closest(".sortableTicketList"),oe={action:"kanbanSort",payload:{},handler:v.item.id},le=0;le<y.length;le++){var qe=Ve.querySelector(".contentInner.status_"+y[le]);qe&&(oe.payload[y[le]]=x(qe))}var se=new URLSearchParams;se.append("action",oe.action),se.append("handler",oe.handler);for(var Re in oe.payload)se.append("payload["+Re+"]",oe.payload[Re]);fetch(leantime.appUrl+"/api/tickets",{method:"POST",body:se,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(X){return X.json()}).then(function(X){leantime.handleAsyncResponse(X)})}})})});function f(p){var S=p.getBoundingClientRect().left,v=function(w){w.pageX+5>S?(p.classList.add("right"),p.classList.remove("left")):w.pageX<S+5?(p.classList.add("left"),p.classList.remove("right")):(p.classList.remove("left"),p.classList.remove("right")),S=w.pageX};document.addEventListener("mousemove",v),p._moveHandler=v}document.querySelectorAll(".portlet").forEach(function(p){p.classList.add("ui-widget","ui-widget-content","ui-helper-clearfix","ui-corner-all"),p.querySelectorAll(".portlet-header").forEach(function(S){S.classList.add("ui-widget-header","ui-corner-all"),S.insertAdjacentHTML("afterbegin","<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>")})}),document.querySelectorAll(".portlet-toggle").forEach(function(p){p.addEventListener("click",function(){this.classList.toggle("ui-icon-minusthick"),this.classList.toggle("ui-icon-plusthick");var S=this.closest(".portlet");S&&S.querySelectorAll(".portlet-content").forEach(function(v){v.style.display=v.style.display==="none"?"":"none"})})})},Y=function(g){function y(x){return!isNaN(parseFloat(x))&&isFinite(x)}document.addEventListener("DOMContentLoaded",function(){var x=[];function f(S){if(typeof S=="string"&&S.indexOf("<")!==-1){var v=document.createElement("div");v.innerHTML=S;var w=v.querySelector("input");return w?w.value:S}return S}var p=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom">p<"clear">',searching:!1,stateSave:!0,displayLength:100,order:x,columnDefs:[{visible:!1,targets:10},{visible:!1,targets:11},{target:"no-sort",orderable:!1}],footerCallback:function(S,v,w,k,A){var E=this.api(),D=E.column(10).data().reduce(function(B,j){return y(B)===!1&&(B=f(B)),y(j)===!1&&(j=f(j)),isNaN(B)&&(B=0),isNaN(j)&&(j=0),parseFloat(B)+parseFloat(j)},0),I=E.column(11).data().reduce(function(B,j){return y(B)===!1&&(B=f(B)),y(j)===!1&&(j=f(j)),isNaN(B)&&(B=0),isNaN(j)&&(j=0),parseFloat(B)+parseFloat(j)},0),q=E.column(12).data().reduce(function(B,j){return parseFloat(B)+parseFloat(j)},0),Q=E.column(9).footer();Q&&(Q.innerHTML="Total");var O=E.column(10).footer();O&&(O.innerHTML=D);var R=E.column(11).footer();R&&(R.innerHTML=I);var G=E.column(12).footer();G&&(G.innerHTML=q)}});new jQuery.fn.dataTable.Buttons(p.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(S,v,w,k){return typeof k.dataset.order<"u"&&k.dataset.order!==void 0&&(S=k.dataset.order),S}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(document.getElementById("tableButtons")),p.table(0).on("column-visibility",function(S,v,w,k){for(var A=1;A<p.tables().context.length;A++)p.tables(A).column(w).visible(k);p.draw()}),document.querySelectorAll(".ticketTable input").forEach(function(S){S.addEventListener("change",function(){this.parentElement.setAttribute("data-order",this.value),p.draw()})})})},te=function(g){document.addEventListener("DOMContentLoaded",function(){var y=[];jQuery(".listStyleTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"<"center"p>><"clear">',searching:!1,stateSave:!0,displayLength:25,order:y,fnDrawCallback:function(x){if(x._iDisplayLength>x.fnRecordsDisplay()){var f=x.nTableWrapper.querySelector(".dataTables_paginate");f&&(f.style.display="none")}else{var f=x.nTableWrapper.querySelector(".dataTables_paginate");f&&(f.style.display="")}}})})},ae=function(g){document.addEventListener("DOMContentLoaded",function(){var y=[],x=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"><"clear">',searching:!1,stateSave:!0,displayLength:100,order:y,columnDefs:[{visible:!1,targets:7},{visible:!1,targets:8},{target:"no-sort",orderable:!1}]});new jQuery.fn.dataTable.Buttons(x.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(f,p,S,v){return typeof v.dataset.order<"u"&&v.dataset.order!==void 0&&(f=v.dataset.order),f}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(document.getElementById("tableButtons")),x.table(0).on("column-visibility",function(f,p,S,v){for(var w=1;w<x.tables().context.length;w++)x.tables(w).column(S).visible(v);x.draw()}),document.querySelectorAll(".ticketTable input").forEach(function(f){f.addEventListener("change",function(){this.parentElement.setAttribute("data-order",this.value),x.draw()})})})},Be=function(g,y){var x=typeof y=="string"?document.querySelector(y):y;if(typeof jQuery<"u"){var f=document.querySelectorAll("textarea.complexEditor");f.length>0&&jQuery("textarea.complexEditor").tinymce()!==null&&(jQuery("textarea.complexEditor").tinymce().save(),jQuery("textarea.complexEditor").tinymce().remove())}document.querySelectorAll(".ticketRows").forEach(function(v){v.classList.remove("active")});var p=document.getElementById("row-"+g);p&&p.classList.add("active"),x.innerHTML="<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px' /></div>";function S(v){v.querySelectorAll("form").forEach(function(w){w.addEventListener("submit",function(k){if(k.preventDefault(),typeof jQuery<"u"){var A=document.querySelectorAll("textarea.complexEditor");A.length>0&&jQuery("textarea.complexEditor").tinymce()!==null&&(jQuery("textarea.complexEditor").tinymce().save(),jQuery("textarea.complexEditor").tinymce().remove())}v.innerHTML="<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px'/></div>";var E=new FormData(this),D=this.getAttribute("action");fetch(D,{method:"POST",body:E,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(I){return I.text()}).then(function(I){v.innerHTML=I,S(v)})})})}fetch(leantime.appUrl+"/tickets/showTicket/"+g,{credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(v){return v.text()}).then(function(v){x.innerHTML=v,S(x)})},Ie=function(){typeof jQuery<"u"&&jQuery.fn.tagsInput&&jQuery("#tags").tagsInput({autocomplete_url:leantime.appUrl+"/api/tags"});var g=document.getElementById("tags_tag");g&&g.addEventListener("focusout",function(){var y=this.value;y!=""&&typeof jQuery<"u"&&jQuery("#tags").addTag(y)})},Oe=function(g,y){var x=document.getElementById("commentText-"+g),f="Discussion on To-Do #"+y+`:
\r`+(x?x.textContent:""),p=document.querySelector('li a[href*="timesheet"]');p&&p.click();var S=document.querySelector("#timesheet #description");S&&(S.value=f)};return{toggleFilterBar:m,initGanttChart:h,updateRemainingHours:a,updatePlannedHours:d,initTimeSheetChart:U,initTicketTabs:N,initTicketSearchSubmit:F,initTicketKanban:V,initTicketsTable:Y,initEffortDropdown:i,initPriorityDropdown:b,initMilestoneDropdown:u,initStatusDropdown:_,initUserDropdown:C,initSprintDropdown:T,initToolTips:o,initTagsInput:Ie,initMilestoneDatesAsyncUpdate:n,initAsyncInputChange:H,initDueDateTimePickers:M,setUpKanbanColumns:z,addCommentTimesheetContent:Oe,initMilestoneTable:ae,initMilestoneDates:e,initTicketsList:te,loadTicketToContainer:Be,initTicketSearchUrlBuilder:W,initSprintDates:t,initSimpleColorPicker:L,openTicketModalManually:function(g){leantime.modals&&leantime.modals.openByUrl&&leantime.modals.openByUrl(g)}}}();var Z=window.leantime||(window.leantime={});Z.ticketsRepository=function(){var r=function(m,h,t,e){let n=Z.dateHelper.getFormatFromSettings("dateformat","luxon"),o=Z.dateHelper.getFormatFromSettings("timeformat","luxon"),i=luxon.DateTime.fromSQL(h).toFormat(n),b=luxon.DateTime.fromSQL(h).toFormat(o),u=luxon.DateTime.fromSQL(t).toFormat(n),_=luxon.DateTime.fromSQL(t).toFormat(o);fetch(Z.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:m,editFrom:i,editTo:u,timeFrom:b,timeTo:_,sortIndex:e})})},l=function(m,h,t){fetch(Z.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:m,hourRemaining:h})}).then(function(){t()})},s=function(m,h,t){fetch(Z.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:m,planHours:h})}).then(function(){t()})},c=function(m,h,t){fetch(Z.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:m,dateToFinish:h})}).then(function(){t()})},a=function(m,h,t){fetch(Z.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:m,editFrom:h})}).then(function(){t()})},d=function(m,h,t){fetch(Z.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:m,editTo:h})}).then(function(){t()})};return{updateMilestoneDates:r,updateRemainingHours:l,updatePlannedHours:s,updateDueDates:c,updateEditFromDates:a,updateEditToDates:d}}();leantime.dashboardController=function(){var r={};leantime.theme=="dark"?r={red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(56, 56, 56)"}:r={red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"};var l=function(){var t=moment().startOf("week").add(5,"days"),e=document.querySelector("#dateToFinish");e&&(e.value=t.format("YYYY-MM-DD"))},s=function(t,e,n){var o={type:"doughnut",data:{datasets:[{data:[e,n],backgroundColor:[leantime.dashboardController.chartColors.green,leantime.dashboardController.chartColors.grey],label:leantime.i18n.__("label.project_done")}],labels:[e+"% Done",n+"% Open"]},options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:""}},animation:{animateScale:!0,animateRotate:!0}}},i=document.getElementById(t).getContext("2d");new Chart(i,o)},c=function(t,e,n){moment.locale(leantime.i18n.__("language.code"));var o={type:"line",data:{labels:t,datasets:[{label:leantime.i18n.__("label.ideal"),backgroundColor:leantime.dashboardController.chartColors.blue,borderColor:leantime.dashboardController.chartColors.blue,data:e,fill:!1,lineTension:0},{label:"Actual",backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:n,fill:!1,lineTension:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},plugins:{legend:{position:"bottom"},title:{display:!1,text:"Line Chart"},tooltips:{mode:"index",intersect:!1}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0}}}}},i=document.getElementById("sprintBurndown").getContext("2d");return _burndownChart=new Chart(i,o),_burndownChart},a=function(t,e,n,o,i){var b=document.getElementById(t);b&&b.addEventListener("click",function(u){i.data.datasets[0].data=n,i.data.datasets[1].data=o,i.options.scales.y.title.text=e,document.querySelectorAll(".chartButtons").forEach(function(_){_.classList.remove("active")}),b.classList.add("active"),i.update()})},d=function(t,e){moment.locale(leantime.i18n.__("language.code"));var n={type:"line",data:{labels:t,datasets:[{label:leantime.i18n.__("label.done_todos"),backgroundColor:leantime.dashboardController.chartColors.green,borderColor:leantime.dashboardController.chartColors.green,data:e.done.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.progress_todos"),backgroundColor:leantime.dashboardController.chartColors.yellow,borderColor:leantime.dashboardController.chartColors.yellow,data:e.progress.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.new_todos"),backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:e.open.data,fill:!0,lineTension:0,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},elements:{point:{pointStyle:"line",radius:"0"}},plugins:{tooltips:{mode:"index",intersect:!1},legend:{position:"bottom"},title:{display:!1,text:"Line Chart"}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0},stacked:!0}}}},o=document.getElementById("backlogBurndown").getContext("2d");return _burndownChart=new Chart(o,n),_burndownChart},m=function(t,e,n,o){var i=document.getElementById(t);i&&i.addEventListener("click",function(b){o.data.datasets[0].data=e.done.data,o.data.datasets[1].data=e.progress.data,o.data.datasets[2].data=e.open.data,o.options.scales.y.title.text=n,document.querySelectorAll(".backlogChartButtons").forEach(function(u){u.classList.remove("active")}),i.classList.add("active"),o.update()})},h=function(){document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".duedates").forEach(function(t){leantime.dateController.initDatePicker(t,function(e){var n=e;n==""&&(this.value=leantime.i18n.__("text.anytime"));var o=moment(n,leantime.i18n.__("language.momentJSDate")).format("YYYY-MM-DD HH:mm:ss"),i=this.getAttribute("data-id"),b=o;leantime.ticketsRepository.updateDueDates(i,b,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.duedate_updated")})})})})})};return{chartColors:r,initBurndown:c,initChartButtonClick:a,initBacklogBurndown:d,initBacklogChartButtonClick:m,initProgressChart:s,prepareHiddenDueDate:l,initDueDateTimePickers:h}}();leantime.usersController=function(){var r=null,l=function(t){if(s(),t.files&&t.files[0]){var e=new FileReader,n=document.querySelector("#profileImg");e.onload=function(o){r=new Croppie(n,{enableExif:!0,viewport:{width:175,height:175,type:"circle"},boundary:{width:200,height:200}}),r.bind({url:o.currentTarget.result});var i=document.querySelector("#previousImage");i&&(i.style.display="none")},e.readAsDataURL(t.files[0])}},s=function(){r&&(r.destroy(),r=null);var t=document.querySelector("#previousImage");t&&(t.style.display="")},c=function(){var t=document.querySelector("#save-picture");t&&t.classList.add("running");var e=document.querySelector("#profileImg");e&&e.setAttribute("src",leantime.appUrl+"/images/loaders/loader28.gif"),r&&r.result({type:"blob",circle:!0}).then(function(n){leantime.usersService.saveUserPhoto(n)})},a=function(){document.addEventListener("DOMContentLoaded",function(){jQuery("#allUsersTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})})},d=function(){var t={sizes:{minW:400,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(e){e.style.display=""}),jQuery(".userImportModal").nyroModal(t)}}};jQuery(".userImportModal").nyroModal(t)},m=function(){var t={sizes:{minW:900,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(e){e.style.display=""}),jQuery(".userEditModal").nyroModal(t)},beforeClose:function(){location.reload()}}};jQuery(".userEditModal").nyroModal(t)},h=function(t){let e,n=document.getElementById(t),o=document.getElementById("pwStrength"),i=new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})"),b=new RegExp("((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))");function u(_){i.test(_)?(o.style.backgroundColor="#107530",o.textContent=leantime.i18n.__("label.strong")):b.test(_)?(o.style.backgroundColor="#C5850D",o.textContent=leantime.i18n.__("label.medium")):(o.style.backgroundColor="#CC6B6B",o.textContent=leantime.i18n.__("label.weak"))}n.addEventListener("input",()=>{o.style.display="block",clearTimeout(e),e=setTimeout(()=>u(n.value),500),n.value.length!==0?o.style.display!="block":o.style.display="none"})};return{readURL:l,clearCroppie:s,saveCroppie:c,initUserTable:a,_initModals:d,checkPWStrength:h,initUserEditModal:m}}();leantime.usersRepository=function(){var r=function(s){var c=new FormData;c.append("file",s),fetch(leantime.appUrl+"/api/users",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"},body:c}).then(function(a){var d=document.querySelector("#save-picture");d&&d.classList.remove("running"),location.reload()}).catch(function(a){console.log(a)})},l=function(s,c){fetch(leantime.appUrl+"/api/users",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({patchViewSettings:s,value:c})})};return{saveUserPhoto:r,updateUserViewSettings:l}}();leantime.usersService=function(){var r=function(l){leantime.usersRepository.saveUserPhoto(l)};return{saveUserPhoto:r}}();leantime.canvasController=function(){var r="",l=function(u){r=u},s=function(){window.addEventListener("load",function(){document.querySelectorAll(".loading").forEach(function(u){u.style.display="none"}),document.querySelectorAll(".filterBar .row-fluid").forEach(function(u){u.style.opacity="1"})})},c=function(){jQuery(".addCanvasLink").nyroModal(),document.querySelectorAll(".editCanvasLink").forEach(function(u){u.addEventListener("click",function(){jQuery("#editCanvas").modal("show")})}),document.querySelectorAll(".cloneCanvasLink").forEach(function(u){u.addEventListener("click",function(){jQuery("#cloneCanvas").modal("show")})}),document.querySelectorAll(".mergeCanvasLink").forEach(function(u){u.addEventListener("click",function(){jQuery("#mergeCanvas").modal("show")})}),document.querySelectorAll(".importCanvasLink").forEach(function(u){u.addEventListener("click",function(){jQuery("#importCanvas").modal("show")})})},a=!1,d={sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(u){u.style.display=""}),a==!0&&(a=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+r+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+r+"CanvasMilestone .deleteMilestone").nyroModal(d)},beforeClose:function(){location.reload()}},titleFromIframe:!0},m=function(){jQuery("."+r+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+r+"CanvasMilestone .deleteMilestone").nyroModal(d)},h=function(u){jQuery.nmManual(u,d)},t=function(u){if(u=="existing"){document.querySelectorAll("#newMilestone, #milestoneSelectors").forEach(function(T){T.style.display="none"});var _=document.getElementById("existingMilestone");_&&(_.style.display=""),m()}if(u=="new"){var C=document.getElementById("newMilestone");C&&(C.style.display=""),document.querySelectorAll("#existingMilestone, #milestoneSelectors").forEach(function(T){T.style.display="none"}),m()}if(u=="hide"){document.querySelectorAll("#newMilestone, #existingMilestone").forEach(function(T){T.style.display="none"});var H=document.getElementById("milestoneSelectors");H&&(H.style.display="")}},e=function(){a=!0},n=function(){document.body.addEventListener("click",function(u){var _=u.target.closest(".userDropdown .dropdown-menu a");if(_){var C=_.getAttribute("data-value").split("_");if(_.getAttribute("data-label"),C.length==3){var H=C[0],T=C[1];C[2],fetch(leantime.appUrl+"/api/"+r+"canvas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:H,author:T})}).then(function(){var L=document.querySelector("#userDropdownMenuLink"+H+" span.text span#userImage"+H+" img");L&&L.setAttribute("src",leantime.appUrl+"/api/users?profileImage="+T),leantime.toast.show({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}}})},o=function(){document.body.addEventListener("click",function(u){var _=u.target.closest(".statusDropdown .dropdown-menu a");if(_){var C=_.getAttribute("data-value").split("/"),H=_.getAttribute("data-label");if(C.length==2){var T=C[0],L=C[1],M=_.getAttribute("class");fetch(leantime.appUrl+"/api/"+r+"canvas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:T,status:L})}).then(function(){var U=document.querySelector("#statusDropdownMenuLink"+T+" span.text");U&&(U.textContent=H);var N=document.getElementById("statusDropdownMenuLink"+T);N&&(N.className=M+" dropdown-toggle f-left status "),leantime.toast.show({message:leantime.i18n.__("short_notifications.status_updated")})})}}})},i=function(){document.body.addEventListener("click",function(u){var _=u.target.closest(".relatesDropdown .dropdown-menu a");if(_){var C=_.getAttribute("data-value").split("/"),H=_.getAttribute("data-label");if(C.length==2){var T=C[0],L=C[1],M=_.getAttribute("class");fetch(leantime.appUrl+"/api/"+r+"canvas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:T,relates:L})}).then(function(){var U=document.querySelector("#relatesDropdownMenuLink"+T+" span.text");U&&(U.textContent=H);var N=document.getElementById("relatesDropdownMenuLink"+T);N&&(N.className=M+" dropdown-toggle f-left relates "),leantime.toast.show({message:leantime.i18n.__("short_notifications.relates_updated")})})}}})},b=function(u,_){_=_||{};var C=u,H=!1,T=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(F){F.style.display=""}),H&&(H=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+C+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+C+"CanvasMilestone .deleteMilestone").nyroModal(T())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},L=function(){jQuery("."+C+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+C+"CanvasMilestone .deleteMilestone").nyroModal(T())},M;_.rowSelectors&&_.rowSelectors.length>0?M=function(){_.rowSelectors.forEach(function(F){var W=0;document.querySelectorAll("#"+F+" div.contentInner").forEach(function(z){z.offsetHeight>W&&(W=z.offsetHeight+35)}),document.querySelectorAll("#"+F+" .column .contentInner").forEach(function(z){z.style.height=W+"px"})})}:_.nbRows&&_.nbRows>0?M=function(){var F=_.nbRows,W=["firstRow","secondRow","thirdRow","fourthRow"],z=document.documentElement.offsetHeight-320-20*F;F===2&&(z-=25);for(var V=0;V<F&&V<W.length;V++){var Y="#"+W[V],te=z/F;F>=3&&(te=z*.333),document.querySelectorAll(Y+" div.contentInner").forEach(function(ae){ae.offsetHeight>te&&(te=ae.offsetHeight+50)}),document.querySelectorAll(Y+" .column .contentInner").forEach(function(ae){ae.style.height=te+"px"})}}:M=function(){};var U={setCloseModal:function(){H=!0},toggleMilestoneSelectors:function(F){if(F=="existing"){document.querySelectorAll("#newMilestone, #milestoneSelectors").forEach(function(Y){Y.style.display="none"});var W=document.getElementById("existingMilestone");W&&(W.style.display=""),L()}if(F=="new"){var z=document.getElementById("newMilestone");z&&(z.style.display=""),document.querySelectorAll("#existingMilestone, #milestoneSelectors").forEach(function(Y){Y.style.display="none"}),L()}if(F=="hide"){document.querySelectorAll("#newMilestone, #existingMilestone").forEach(function(Y){Y.style.display="none"});var V=document.getElementById("milestoneSelectors");V&&(V.style.display="")}},openModalManually:function(F){jQuery.nmManual(F,T)},initUserDropdown:n,initStatusDropdown:o,initRelatesDropdown:i,setRowHeights:M};if(_.extras)for(var N in _.extras)_.extras.hasOwnProperty(N)&&(U[N]=_.extras[N]);return U};return{setCanvasName:l,initFilterBar:s,initCanvasLinks:c,initUserDropdown:n,initStatusDropdown:o,initRelatesDropdown:i,setCloseModal:e,toggleMilestoneSelectors:t,openModalManually:h,createController:b}}();leantime.reactionsController=function(){return{addReactions:function(s,c,a,d){fetch(leantime.appUrl+"/api/reactions",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"add",module:s,moduleId:c,reaction:a})}).then(function(){d()})},removeReaction:function(s,c,a,d){fetch(leantime.appUrl+"/api/reactions",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"remove",module:s,moduleId:c,reaction:a})}).then(function(){d()})}}}();leantime.helperController=function(){var r=function(n,o){o?leantime.helperRepository.updateUserModalSettings(n,!0):leantime.helperRepository.updateUserModalSettings(n,!1)},l=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.tourFactory.startTour("myWorkDashboard")},s=function(){leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal()},c=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("projectDashboard"),leantime.tourFactory.startTour("projectDashboard")},a=function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("kanbanBoard"),leantime.tourFactory.startTour("kanbanBoard")},d=function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("milestoneView"),leantime.tourFactory.startTour("milestoneView")},m=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("goals"),leantime.tourFactory.startTour("goalsView")},h=function(){document.addEventListener("DOMContentLoaded",function(){var n={sizes:{minW:700,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(o){o.style.display=""}),jQuery(".onboardingModal").nyroModal(n)},beforeClose:function(){location.reload()}}};jQuery(".onboardingModal").nyroModal(n),jQuery.nmManual(leantime.appUrl+"/help/firstLogin",n)})},t=function(n,o,i){document.addEventListener("DOMContentLoaded",function(){jQuery.nmManual(leantime.appUrl+"/help/showOnboardingDialog?module="+n,{sizes:{minW:o||200,minH:i||500},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){leantime.replaceSVGColors()},afterShowCont:function(){htmx.process("#global-modal-content")}}})})},e=function(n){leantime.helperRepository.updateUserModalSettings(n),leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal()};return{showHelperModal:t,hideAndKeepHidden:e,setDontShowAgain:r,closeModal:s,startMyWorkDashboardTour:l,startProjectDashboardTour:c,startKanbanTour:a,startMilestoneTour:d,startGoalTour:m,firstLoginModal:h}}();var ce=window.leantime||(window.leantime={});ce.helperRepository=function(){var r=function(c,a=!1){fetch(ce.appUrl+"/api/users",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({settings:c,permanent:a?1:0,patchModalSettings:1})})},l=function(){fetch(ce.appUrl+"/api/sessions",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({tourActive:1})})},s=function(){fetch(ce.appUrl+"/api/sessions",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({tourActive:0})})};return{updateUserModalSettings:r,startingTour:l,stopTour:s}}();leantime.tourFactory=function(){var r=function(d){return new Shepherd.Tour({useModalOverlay:!0,defaultStepOptions:{classes:"shepherd-theme-arrows",scrollTo:!1,cancelIcon:{enabled:!0}},tourName:d})},l=function(d){leantime.helperRepository.updateUserModalSettings(d),typeof _paq<"u"&&_paq.push(["trackEvent","Tour","Completed",d])},s=function(d){return{myWorkDashboard:[{id:"welcome-step",title:"👋 Welcome to the Dashboard Tour",text:"Let's start with a few basics to get you up to speed on the navigation and different elements inside Leantime."},{id:"top-nav-step",title:"Work Modes",text:"The top navigation shows you the current 'work mode' you're in. You can be inside a project, your personal work area, or in the company mode.",attachTo:{element:".work-modes",on:"bottom"}},{id:"menu-step",title:"Left Navigation",text:"The left navigation breaks down the current work mode and gives you access to different areas. Everything presented here is part of the currently selected work mode above.",attachTo:{element:".leftpanel",on:"right"}},{id:"my-menu",title:"My Profile Bar",text:"Here you'll find links to your account as well as notifications and latest news about Leantime.",attachTo:{element:".headmenu.pull-right",on:"bottom"}},{id:"dashboard-widgets",title:"Your Dashboard Widgets",text:"Your dashboard is broken up into various widgets showing you focused information about your work.",attachTo:{element:".primaryContent",on:"top"}},{id:"dashboard-widgets-dandd",title:"Customize Your Dashboard",text:"Widgets can be resized and moved around using the drag and drop functionality.",attachTo:{element:"#widget_wrapper_todos .grid-handler-top",on:"bottom"}},{id:"my-todo-widget",title:"My To-Dos",text:"The My To-Do widget shows you all the tasks that are currently assigned to you.",attachTo:{element:"#widget_wrapper_todos",on:"top"}},{id:"my-todo-widget2",title:"Group To-Dos",text:"You can use the dropdowns here to filter your tasks by project or group them by priority, status, project, or dates.",attachTo:{element:"#yourToDoContainer > .clear",on:"bottom"}},{id:"my-todo-widget4",title:"Sort To-Dos",text:"Each To-Do can be dragged and dropped to change its order. You can also drag and drop a task to the calendar to schedule it.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child",on:"bottom"}},{id:"my-todo-widget-timer",title:"Start the Timer",text:"When you're ready to start working on a task, just click the start timer button.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .timerContainer",on:"bottom"}},{id:"my-todo-widget-complete",title:"Complete a Task",text:"Once a task is complete, you can mark it as done by clicking the status dropdown.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .statusDropdown",on:"bottom"}},{id:"my-todo-widget-add",title:"Add More Tasks",text:"You can add more tasks by clicking the plus button in each section, or by using the 3-dot menu next to each task.",attachTo:{element:"#yourToDoContainer .fa-circle-plus",on:"bottom"}},{id:"finish",title:"Congratulations!",text:"You've completed the My Work dashboard tour. Head to <a href='"+leantime.appUrl+"/dashboard/show'>your project</a> to learn more about project management in Leantime."}],projectDashboard:[{id:"left-nav",title:"Project Menu",text:"The project menu organizes your project into different sections: <strong>Data Room</strong> - to host all your files and information, <strong>Think</strong> - to strategize, ideate and define, <strong>Make</strong> - to manage goals, milestones and tasks.",attachTo:{element:".leftmenu ul",on:"left"}},{id:"project-selector",title:"Project Selector",text:"Use the project selector to jump between projects. The left menu shows everything related to your current project.",attachTo:{element:".bigProjectSelector",on:"bottom"}},{id:"project-checklist",title:"Checklist",text:"The project checklist is a quick reference to see if your project contains all the necessary information for successful execution.",attachTo:{element:"#progressForm",on:"bottom"}},{id:"project-status",title:"Quick Status Updates",text:"You can use status updates to quickly share the progress of your project with your team using red, yellow and green colors. The status will be visible across the application.",attachTo:{element:".project-updates",on:"left"}},{id:"project-progress",title:"Progress",text:"The project progress indicator shows you how much work you have completed. It accounts for various task sizes, team velocity, and project milestones.",attachTo:{element:".project-progress",on:"left"}},{id:"latest-tasks",title:"Latest Tasks",text:"The list of latest tasks shows you the most recent tasks added to your project and can be used as a project inbox.",attachTo:{element:".latest-todos",on:"left"}},{id:"teams",title:"Team",text:"The team box shows you the members of this project.",attachTo:{element:".team-container",on:"top"}},{id:"finished",title:"Congratulations!",text:"You've completed the project dashboard tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>To-Dos</a> to learn more about the various ways to manage your tasks in Leantime."}],kanbanBoard:[{id:"kanban-overview",title:"Your Kanban Board",text:"This is your Kanban board. It helps you visualize your work and limit work-in-progress.",attachTo:{element:".kanban-board-wrapper",on:"top"}},{id:"kanban-columns",title:"Work Flow",text:"Tasks move from left to right as they progress. Drag and drop cards to update their status.",attachTo:{element:".column",on:"right"}},{id:"kanban-columns2",title:"Flexible Columns",text:"Using the 3-dot menu, you can add or remove columns and rename them.",attachTo:{element:".column .widgettitle .inlineDropDownContainer",on:"right"}},{id:"kanban-filter",title:"Filter Tasks",text:"You can filter your tasks by various fields like priority, status, project, or dates.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"kanban-group",title:"Swimlanes",text:"Additionally, you can group your tasks to create Kanban swimlanes. This helps you visualize your work by team members, priority, or milestones.",attachTo:{element:".filterWrapper > .btn-group",on:"bottom"}},{id:"kanban-sprints",title:"Sprints",text:"If you manage your work in sprints, you can use the dropdown here to select, create, and update sprints.",attachTo:{element:".pageheader .dropdown",on:"bottom"}},{id:"kanban-congrats",title:"Congratulations!",text:"This concludes the Kanban tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Milestones</a> to learn how to create and manage milestones in Leantime."}],milestoneView:[{id:"milestone-overview",title:"Milestones",text:"Milestones help you track major outcomes and project phases.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-drag",title:"Drag & Sort",text:"Each bar represents one milestone. You can drag them along the timeline, reorder, and resize them. Everything you do on this screen updates the timing of your milestones.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-filter",title:"Filter",text:"You can filter your milestones and also view tasks that are part of them.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"milestone-timeframes",title:"Timeframes",text:"You can change the timeframe of the timeline view to see more of the year or dive deep into a daily breakdown.",attachTo:{element:".col-md-4 .pull-right",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the milestone tour. Head to the <a href='"+leantime.appUrl+"/goalcanvas/dashboard'>Goals</a> to learn how to create and manage goals in Leantime."}],goalsView:[{id:"goals-overview",title:"Goals",text:"Goals help you track measurable impact on your projects."},{id:"goal-parts",title:"Objectives & Metrics",text:"Each goal is made up of an Objective (what you're trying to accomplish) and a Metric (how you'll measure it).",attachTo:{element:".ticketBox",on:"top"}},{id:"goal-progress",title:"Goal Progress",text:"As you update your goal metrics, the progress bar will show you how far along you are.",attachTo:{element:".ticketBox > .row > .col-md-12 .progress",on:"bottom"}},{id:"milestone-connection",title:"Milestones & Goals",text:"You can connect goals to milestones to track the task-level progress of your goals. This helps identify gaps in your project plan.",attachTo:{element:".ticketBox.fixed",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the goals tour. Milestones, Goals, and To-Dos are the basic building blocks in Leantime. Use them to break down your work into manageable chunks. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Kanban Board</a> to review your tasks."}]}[d]||[]},c=function(d){const m=r(d),h=s(d);return h.forEach((t,e)=>{const n=e===0,o=e===h.length-1,i=[];n||i.push({text:leantime.i18n.__("tour.back"),classes:"shepherd-button-secondary",action:m.back}),o?i.push({text:leantime.i18n.__("tour.finish"),action:function(){l(d),confetti(),m.complete()}}):i.push({text:leantime.i18n.__("tour.next"),action:m.next}),o||i.unshift({text:leantime.i18n.__("tour.cancel"),classes:"shepherd-button-secondary",action:m.cancel}),m.addStep({...t,buttons:i})}),m.on("complete",function(){l(d)}),m},a=function(d){const m=c(d);return m.start(),m};return{createTour:r,buildTour:c,startTour:a,getTourDefinition:s}}();leantime.confettiHelper=function(){var r=function(s){const a={...{particleCount:100,spread:70,origin:{y:.6},disableForReducedMotion:!0},...s};typeof confetti=="function"?confetti(a):console.error("Confetti library not loaded")},l=function(){r({particleCount:150,spread:90,origin:{y:.8},colors:["#26a69a","#00bcd4","#4caf50","#8bc34a","#cddc39"]}),setTimeout(function(){r({particleCount:80,spread:120,origin:{y:.7},colors:["#ff9800","#ff5722","#f44336","#e91e63","#9c27b0"]})},500)};return{triggerConfetti:r,celebrateSuccess:l}}();leantime.firstTaskController=function(){var r=function(){var l=document.querySelector("#firstTaskOnboarding");if(l){l.addEventListener("submit",function(c){c.preventDefault();var a=document.querySelector("#firstTask"),d=a.value.trim();if(d==="")return a.classList.add("error"),!1;a.classList.remove("error"),leantime.confettiHelper.celebrateSuccess(),setTimeout(function(){l.submit()},1500)});var s=document.querySelector("#firstTask");s&&s.addEventListener("input",function(){this.classList.remove("error")})}};return{initFirstTaskForm:r}}();document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){leantime.firstTaskController.initFirstTaskForm()}):leantime.firstTaskController.initFirstTaskForm();leantime.menuController=function(){var r=function(d){if(d!==""){var m=document.querySelector("#submenu-"+d),h=document.querySelector("#submenu-icon-"+d),t="";m&&(m.style.display==="none"||getComputedStyle(m).display==="none"?(m.style.display="block",h&&(h.classList.remove("fa-angle-right"),h.classList.add("fa-angle-down")),t="open"):(m.style.display="none",h&&(h.classList.remove("fa-angle-down"),h.classList.add("fa-angle-right")),t="closed"),fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({submenu:d,state:t})}))}},l=function(){document.querySelectorAll(".project-select").forEach(function(e){new SlimSelect({select:e})}),document.addEventListener("click",function(e){e.target.closest(".projectselector.dropdown-menu")&&e.stopPropagation()});var d=document.querySelector(".projectSelectorTabs");if(d){var m=d.querySelectorAll("ul > li > a"),h=localStorage.getItem("currentMenuTab"),t=0;h&&m.forEach(function(e,n){e.getAttribute("href")==="#"+h&&(t=n)}),m.forEach(function(e,n){var o=e.getAttribute("href");if(!(!o||o.charAt(0)!=="#")){var i=document.querySelector(o);i&&(n===t?(i.style.display="",e.parentElement.classList.add("ui-tabs-active")):(i.style.display="none",e.parentElement.classList.remove("ui-tabs-active")),e.addEventListener("click",function(b){b.preventDefault(),m.forEach(function(_){var C=_.getAttribute("href");if(C&&C.charAt(0)==="#"){var H=document.querySelector(C);H&&(H.style.display="none")}_.parentElement.classList.remove("ui-tabs-active")}),i&&(i.style.display=""),e.parentElement.classList.add("ui-tabs-active");var u=o.replace("#","");localStorage.setItem("currentMenuTab",u)}))}})}},s=function(){if(window.innerWidth<576){var d=document.querySelector(".mainwrapper");d&&(d.classList.remove("menuopen"),d.classList.add("menuclosed"))}var m=document.querySelector(".barmenu");m&&m.addEventListener("click",function(){var h=document.querySelector(".mainwrapper");h&&(h.classList.contains("menuopen")?(h.classList.remove("menuopen"),h.classList.add("menuclosed"),leantime.menuRepository.updateUserMenuSettings("closed")):(h.classList.remove("menuclosed"),h.classList.add("menuopen"),leantime.menuRepository.updateUserMenuSettings("open")))})},c=function(d,m="",h){var t=document.querySelector("#"+h+"-toggler-"+d),e=document.querySelector("#"+h+"-projectSelectorlist-group-"+d);if(t)if(m==="closed"?(t.classList.remove("closed","open"),t.classList.add("open")):m==="open"&&(t.classList.remove("open","closed"),t.classList.add("closed")),t.classList.contains("open")){t.classList.remove("open"),t.classList.add("closed");var n=t.querySelector("i");n&&(n.classList.remove("fa-angle-down"),n.classList.add("fa-angle-right")),e&&(e.classList.add("closed"),e.classList.remove("open")),a(d,"closed",h)}else{t.classList.remove("closed"),t.classList.add("open");var n=t.querySelector("i");n&&(n.classList.remove("fa-angle-right"),n.classList.add("fa-angle-down")),e&&(e.classList.add("open"),e.classList.remove("closed")),a(d,"open",h)}};let a=function(d,m,h){fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({submenu:h+"-projectSelectorlist-group-"+d,state:m})})};return{toggleSubmenu:r,initProjectSelector:l,initLeftMenuHamburgerButton:s,updateGroupDropdownSetting:a,toggleProjectDropDownList:c}}();var He=window.leantime||(window.leantime={});He.menuRepository=function(){var r=function(l){fetch(He.appUrl+"/api/sessions",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({menuState:l})})};return{updateUserMenuSettings:r}}();leantime.settingController=function(){var r,l=function(a){if(s(),a.files&&a.files[0]){var d=new FileReader,m=jQuery("#logoImg");d.onload=function(h){r=m.croppie({enableExif:!0,enforceBoundary:!1,viewport:{width:220,height:40,type:"square"},boundary:{width:400,height:200}}),r.croppie("bind",{url:h.currentTarget.result});var t=document.querySelector("#previousImage");t&&(t.style.display="none")},d.readAsDataURL(a.files[0])}},s=function(){jQuery("#logoImg").croppie("destroy");var a=document.querySelector("#previousImage");a&&(a.style.display="")},c=function(){var a=document.querySelector("#save-logo");a&&a.classList.add("running");var d=document.querySelector("#logoImg");d&&d.setAttribute("src",leantime.appUrl+"/images/loaders/loader28.gif"),r.croppie("result",{type:"blob",circle:!1,size:"original",quality:1}).then(function(m){leantime.settingService.saveLogo(m)})};return{readURL:l,clearCroppie:s,saveCroppie:c}}();leantime.settingRepository=function(){var r=function(l){var s=new FormData;s.append("file",l),fetch(leantime.appUrl+"/api/setting",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"},body:s}).then(function(c){var a=document.querySelector("#save-logo");a&&a.classList.remove("running"),location.reload()}).catch(function(c){console.log(c)})};return{saveLogo:r}}();leantime.settingService=function(){var r=function(l){leantime.settingRepository.saveLogo(l)};return{saveLogo:r}}();leantime.widgetController=function(){var r=[],l=function(t,e){let n=t.gridX||0,o=t.gridY||0,i=t.gridWidth||2,b=t.gridHeight||2;if(e.willItFit({x:n,y:o,width:i,height:b}))return{x:n,y:o};let u=Math.max(...e.engine.nodes.map(_=>_.y+_.h),0);for(let _=0;_<=u+1;_++)for(let C=0;C<=12-i;C++)if(e.willItFit({newX:C,newY:_,width:i,height:b}))return{x:C,y:_};return{x:0,y:u+1}};GridStack.renderCB=function(t,e){e.content&&typeof DOMPurify<"u"&&(t.innerHTML=DOMPurify.sanitize(e.content))};var s=function(){r=GridStack.init({margin:"0px 15px 15px 0px",handle:".grid-handler-top",minRow:2,cellHeight:"30px",float:!0,draggable:{handle:".grid-handler-top",appendTo:"body"},lazyLoad:!1,columnOpts:{breakpointForWindow:!0,breakpoints:[{w:700,c:1},{w:950,c:6}]}}),r.on("dragstop",function(e,n){c()}),r.on("resizestop",function(e,n){c()}),document.querySelectorAll(".grid-stack-item").forEach(function(e){var n=e.querySelector(".removeWidget");n&&n.addEventListener("click",function(){a(this.closest(".grid-stack-item"))});var o=e.querySelector(".fitContent");o&&o.addEventListener("click",function(){d(this.closest(".grid-stack-item"))})});var t=document.querySelector("#gridBoard");t&&(t.style.opacity="1")},c=function(){let t=r.save();t.sort((o,i)=>o.y===i.y?o.x-i.x:o.y-i.y);let e=null;arguments.length>0&&arguments[0].action==="toggleWidget"&&(e={widgetId:arguments[0].widgetId,visible:arguments[0].visible}),t.forEach(function(o){var i=document.createElement("div");i.innerHTML=o.content;var b=i.querySelector("[hx-get]");o.id=b?b.getAttribute("id"):null,o.widgetUrl=b?b.getAttribute("hx-get"):null,o.widgetTrigger=b?b.getAttribute("hx-trigger"):null,o.x==null&&(o.x=0),o.gridX=o.x,o.y==null&&(o.y=0),o.gridY=o.y,o.w==null&&(o.w=1),o.gridWidth=o.w,o.h==null&&(o.h=1),o.gridHeight=o.h,o.content=""});var n=new URLSearchParams;n.append("action","saveGrid"),t.forEach(function(o,i){Object.keys(o).forEach(function(b){var u=o[b];u!=null&&n.append("data["+i+"]["+b+"]",u)})}),e&&Object.keys(e).forEach(function(o){n.append("visibilityData["+o+"]",e[o])}),fetch(leantime.appUrl+"/widgets/widgetManager",{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:n})},a=function(t){t.remove(),r.removeWidget(t,!0),c()},d=function(t){document.querySelector(".grid-stack").gridstack.resizeToContent(t,!1),c()},m=function(t,e,n){let o=document.querySelector(".grid-stack").gridstack,i=e.checked;if(l(n,o),i){const u=document.createElement("div");u.className="grid-stack-item";const _=document.createElement("div");_.className=`grid-stack-item-content tw:p-none ${n.widgetBackground=="default"?"maincontentinner":n.background}`,_.innerHTML=h(n),u.appendChild(_),o.el.appendChild(u),o.makeWidget(u,{x:n.gridX||0,y:n.gridY||50,w:n.gridWidth||2,h:n.gridHeight||2}),htmx.process(u),c({action:"toggleWidget",widgetId:t,visible:i})}else{var b=document.getElementById(t);b&&a(b.closest(".grid-stack-item"))}},h=function(t){return'<div class="widgetInner">        <div class="'+(t.widgetBackground=="default"?"tw:pb-l":"")+`">
            <div class="stickyHeader" style="padding:15px; height:50px;  width:100%;">
               <div class="grid-handler-top tw:h-[40px] tw:cursor-grab tw:float-left tw:mr-sm">
                    <i class="fa-solid fa-grip-vertical"></i>
                </div>
           `+(t.name!=""?'<h5 class="subtitle tw:pb-m tw:float-left tw:mr-sm">'+t.name+"</h5>":"")+`
            <div class="inlineDropDownContainer tw:float-right">
                <a href="javascript:void(0);" class="dropdown-toggle ticketDropDown editHeadline" data-toggle="dropdown">
                    <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="javascript:void(0)" class="fitContent"><i class="fa-solid fa-up-right-and-down-left-from-center"></i> Resize to fit content</a></li>
                        <li><a href="javascript:void(0)" class="removeWidget"><i class="fa fa-eye-slash"></i> Hide</a></li>
                </ul>
            </div>

        </div>
 <div class="widgetContent tw:px-l">
             <div hx-get="`+t.widgetUrl+'" hx-trigger="'+t.widgetTrigger+'" hx-target="this" hx-swap="innerHTML" id="'+t.id+`"></div>
        </div>
       </div>
        <div class="clear"></div>
    </div>
`};return{resizeWidget:d,removeWidget:a,saveGrid:c,initGrid:s,toggleWidgetVisibility:m}}();leantime.calendarController=function(){var r=function(a){var d=new Date;d.getDate(),d.getMonth(),d.getFullYear();var m=document.body.offsetHeight-260,h=document.querySelector("#calendar"),t=new FullCalendar.Calendar(h,{timeZone:leantime.i18n.__("usersettings.timezone"),height:m,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listDay"},titleFormat:{year:"numeric",month:"long"},dayHeaderFormat:{weekday:"short"},eventTimeFormat:leantime.dateHelper.getFormatFromSettings("timeformat","luxon"),direction:leantime.i18n.__("language.isRTL")=="false"?"ltr":"rtl",firstDay:parseInt(leantime.i18n.__("language.firstDayOfWeek"),10),locale:leantime.i18n.__("language.code"),buttonText:{today:leantime.i18n.__("buttons.today"),month:leantime.i18n.__("buttons.month"),week:leantime.i18n.__("buttons.week"),day:leantime.i18n.__("buttons.day")},selectable:!0,select:function(e){var n=prompt(leantime.i18n.__("label.event_title"));n&&t.addEvent({title:n,start:e.start,end:e.end,allDay:e.allDay}),t.unselect()},events:a,eventColor:"#0866c6"});t.render()},l=function(){document.addEventListener("DOMContentLoaded",function(){Date.prototype.addDays=function(e){return this.setDate(this.getDate()+e),this};var a=leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr"),d=document.querySelector("#event_date_from"),m=document.querySelector("#event_date_to"),h=flatpickr(d,{dateFormat:a,locale:{firstDayOfWeek:parseInt(leantime.i18n.__("language.firstDayOfWeek"),10)},allowInput:!0,onOpen:function(e,n,o){if(o.element.hasAttribute("readonly"))return o.close(),!1},onChange:function(e,n){e.length>0&&t.set("minDate",e[0]),m.value===""&&t.setDate(e[0],!0)}}),t=flatpickr(m,{dateFormat:a,locale:{firstDayOfWeek:parseInt(leantime.i18n.__("language.firstDayOfWeek"),10)},allowInput:!0,onChange:function(e){e.length>0&&h.set("maxDate",e[0])}})})},s=function(){var a={sizes:{minW:400,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".formModal").nyroModal(a)},beforeClose:function(){location.reload()}},titleFromIframe:!0};jQuery(".exportModal").nyroModal(a)},c=function(a,d){let m=document.querySelector(a),h=leantime.dateHelper.getFormatFromSettings("dateformat","luxon"),t=leantime.dateHelper.getFormatFromSettings("timeformat","luxon");const e=new FullCalendar.Calendar(m,{timeZone:leantime.i18n.__("usersettings.timezone"),height:"calc(100% - 65px)",stickyHeaderDates:!0,initialView:d,eventStartEditable:!0,dayHeaderFormat:h,eventTimeFormat:t,slotLabelFormat:t,views:{multiMonthOneMonth:{type:"multiMonth",duration:{months:1},multiMonthTitleFormat:{month:"long",year:"numeric"},dayHeaderFormat:{weekday:"short"}},timeGridDay:{dayHeaders:!1},listWeek:{listDayFormat:{weekday:"long"},listDaySideFormat:leantime.dateHelper.getFormatFromSettings("dateformat","luxon")}},droppable:!0,eventSources,editable:!0,headerToolbar:!1,nowIndicator:!0,eventDrop:function(i){i.event.extendedProps.enitityType=="ticket"?fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:i.event.extendedProps.enitityId,editFrom:luxon.DateTime.fromJSDate(i.event.start).toFormat(h),timeFrom:luxon.DateTime.fromJSDate(i.event.start).toFormat(t),editTo:luxon.DateTime.fromJSDate(i.event.end).toFormat(h),timeTo:luxon.DateTime.fromJSDate(i.event.end).toFormat(t)})}):i.event.extendedProps.enitityType=="event"&&fetch(leantime.appUrl+"/api/calendar",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:i.event.extendedProps.enitityId,dateFrom:i.event.startStr,dateTo:i.event.endStr})})},eventResize:function(i){i.event.extendedProps.enitityType=="ticket"?fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:i.event.extendedProps.enitityId,editFrom:luxon.DateTime.fromJSDate(i.event.start).toFormat(h),timeFrom:luxon.DateTime.fromJSDate(i.event.start).toFormat(t),editTo:luxon.DateTime.fromJSDate(i.event.end).toFormat(h),timeTo:luxon.DateTime.fromJSDate(i.event.end).toFormat(t)})}):i.event.extendedProps.enitityType=="event"&&fetch(leantime.appUrl+"/api/calendar",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:i.event.extendedProps.enitityId,dateFrom:i.event.startStr,dateTo:i.event.endStr})})},eventReceive:function(i){fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:i.event.id,editFrom:luxon.DateTime.fromJSDate(i.event.start).toFormat(h),timeFrom:luxon.DateTime.fromJSDate(i.event.start).toFormat(t),editTo:luxon.DateTime.fromJSDate(i.event.end).toFormat(h),timeTo:luxon.DateTime.fromJSDate(i.event.end).toFormat(t)})})},eventDragStart:function(i){},eventDidMount:function(i){i.isDraggable===!1&&i.el.classList.add("locked"),i.event.extendedProps.location!=null&&i.event.extendedProps.location!=""&&i.event.extendedProps.location.indexOf("http")==0&&(i.el.setAttribute("href",i.event.extendedProps.location),i.el.setAttribute("target","_blank"))}});document.addEventListener("DOMContentLoaded",function(){var i=document.querySelector("#yourToDoContainer");i&&n(i),o(),e.scrollToTime(Date.now())});function n(i){var b=i;b&&new FullCalendar.ThirdPartyDraggable(b,{itemSelector:".draggable-todo",mirrorClass:"dragging-mirror",eventDragMinDistance:10,mirrorSelector:function(u){return u.closest(".ticketBox")},eventData:function(u){let _=JSON.parse(u.dataset.event);return{id:_.id,title:_.title,color:_.color,enitityType:"ticket",duration:"01:00",url:_.url}}}),e.scrollToTime(Date.now())}function o(){e.setOption("locale",leantime.i18n.__("language.code")),e.render(),e.scrollToTime(Date.now());var i=document.querySelector(".minCalendar .fc-prev-button");i&&i.addEventListener("click",function(){e.prev(),e.getCurrentData()});var b=document.querySelector(".minCalendar .fc-next-button");b&&b.addEventListener("click",function(){e.next()});var u=document.querySelector(".minCalendar .fc-today-button");u&&u.addEventListener("click",function(){e.today()}),document.querySelectorAll(".minCalendar .calendarViewSelect").forEach(function(_){_.addEventListener("click",function(C){console.log(this.dataset.value),e.changeView(this.dataset.value),fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({submenu:"dashboardCalendarView",state:this.dataset.value})})})}),document.querySelectorAll(".day-button").forEach(function(_){_.addEventListener("click",function(){var C=this.dataset.date;e.gotoDate(C),document.querySelectorAll(".day-button").forEach(function(H){H.classList.remove("active")}),this.classList.add("active")})})}htmx.onLoad(function(i){return i.id=="yourToDoContainer"&&n(i),m})};return{initCalendar:r,initEventDatepickers:l,initExportModal:s,initWidgetCalendar:c}}();const Ze=Object.assign({"../../app/Domain/Clients/Js/clientsController.js":()=>P(()=>import("./clientsController-rJN37dRD.js"),[]),"../../app/Domain/Cpcanvas/Js/cpCanvasController.js":()=>P(()=>import("./cpCanvasController-Bk9nlIMp.js"),[]),"../../app/Domain/Dbmcanvas/Js/dbmCanvasController.js":()=>P(()=>import("./dbmCanvasController-BfisiC0W.js"),[]),"../../app/Domain/Eacanvas/Js/eaCanvasController.js":()=>P(()=>import("./eaCanvasController-BBKpXTvo.js"),[]),"../../app/Domain/Emcanvas/Js/emCanvasController.js":()=>P(()=>import("./emCanvasController-BeXTfudd.js"),[]),"../../app/Domain/Gamecenter/Js/game-snake.js":()=>P(()=>import("./game-snake-CiPrYQqj.js"),[]),"../../app/Domain/Goalcanvas/Js/goalCanvasController.js":()=>P(()=>import("./goalCanvasController-Ln3cYq9R.js"),[]),"../../app/Domain/Ideas/Js/ideasController.js":()=>P(()=>import("./ideasController-B5tm3ndV.js"),[]),"../../app/Domain/Insightscanvas/Js/insightsCanvasController.js":()=>P(()=>import("./insightsCanvasController-D4xHaPBV.js"),[]),"../../app/Domain/Lbmcanvas/Js/lbmCanvasController.js":()=>P(()=>import("./lbmCanvasController-DWCLahfG.js"),[]),"../../app/Domain/Leancanvas/Js/leanCanvasController.js":()=>P(()=>import("./leanCanvasController-B9aMTJng.js"),[]),"../../app/Domain/Minempathycanvas/Js/risksCanvasController.js":()=>P(()=>import("./risksCanvasController-D76y0F1o.js"),[]),"../../app/Domain/Obmcanvas/Js/obmCanvasController.js":()=>P(()=>import("./obmCanvasController-D3ulNdVa.js"),[]),"../../app/Domain/Projects/Js/projectsController.js":()=>P(()=>import("./projectsController-BY15Utrs.js"),[]),"../../app/Domain/Retroscanvas/Js/retroCanvasController.js":()=>P(()=>import("./retroCanvasController-Bdzr-tck.js"),[]),"../../app/Domain/Riskscanvas/Js/risksCanvasController.js":()=>P(()=>import("./risksCanvasController-yt1qFgdB.js"),[]),"../../app/Domain/Sbcanvas/Js/sbCanvasController.js":()=>P(()=>import("./sbCanvasController-FLgGdgM2.js"),[]),"../../app/Domain/Smcanvas/Js/smCanvasController.js":()=>P(()=>import("./smCanvasController-DjnDEowx.js"),[]),"../../app/Domain/Sqcanvas/Js/sqCanvasController.js":()=>P(()=>import("./sqCanvasController-C8AMx8k5.js"),[]),"../../app/Domain/Swotcanvas/Js/swotCanvasController.js":()=>P(()=>import("./swotCanvasController-DM1_M8ZL.js"),[]),"../../app/Domain/Tickets/Js/kanbanController.js":()=>P(()=>import("./kanbanController-BaewnVvF.js"),[]),"../../app/Domain/Timesheets/Js/timesheetsController.js":()=>P(()=>import("./timesheetsController-BQyLQw80.js"),[]),"../../app/Domain/Valuecanvas/Js/valueCanvasController.js":()=>P(()=>import("./valueCanvasController-7Q7wZw1F.js"),[]),"../../app/Domain/Wiki/Js/wikiController.js":()=>P(()=>import("./wikiController-BEslrRep.js"),[])}),je=new Set;function ge(r){if(!r||je.has(r))return Promise.resolve();je.add(r);const l=[];for(const[s,c]of Object.entries(Ze)){const a=s.match(/Domain\/([^/]+)\//);a&&a[1].toLowerCase()===r&&l.push(c())}return Promise.all(l)}function ve(r){var l;try{return((l=new URL(r,window.location.origin).pathname.replace(/^\/hx\//,"/").split("/").filter(Boolean)[0])==null?void 0:l.toLowerCase())||""}catch{return""}}var Fe,Pe,Ue;ge((Ue=(Pe=(Fe=document.body)==null?void 0:Fe.dataset)==null?void 0:Pe.module)==null?void 0:Ue.toLowerCase());document.addEventListener("htmx:configRequest",function(r){if(!r.detail.boosted)return;const l=ve(r.detail.path||"");l&&ge(l)});document.addEventListener("htmx:pushedIntoHistory",function(){const r=ve(window.location.pathname);r&&(document.body.dataset.module=r)});document.addEventListener("htmx:historyRestore",function(){const r=ve(window.location.pathname);r&&(document.body.dataset.module=r,ge(r))});
