import{_ as H}from"./preload-helper-DPi8upcZ.js";(function(){var n={duration:3200,close:"×",location:"default",style:"success",size:"medium",namespace:"growl"};function s(l){var v="growls-"+l,S=document.getElementById(v);return S||(S=document.createElement("div"),S.id=v,document.body.appendChild(S)),S}function i(l){l=l||{};var v={};for(var S in n)v[S]=n[S];for(var t in l)v[t]=l[t];var e=v.namespace,o=s(v.location),a=document.createElement("div");a.className=e+" "+e+"-"+v.style+" "+e+"-"+v.size+" "+e+"-incoming",a.innerHTML='<div class="'+e+'-close">'+v.close+"</div>"+(v.title?'<div class="'+e+'-title">'+v.title+"</div>":"")+'<div class="'+e+'-message">'+(v.message||"")+"</div>",o.appendChild(a);var m=a.querySelector("."+e+"-close");m.addEventListener("click",function(C){C.stopPropagation(),x(a)}),a.addEventListener("contextmenu",function(C){C.preventDefault(),x(a)});var b=null;a.addEventListener("mouseenter",function(){b&&(clearTimeout(b),b=null)}),a.addEventListener("mouseleave",function(){h()}),a.offsetHeight,a.classList.remove(e+"-incoming");function h(){b=setTimeout(function(){x(a)},v.duration)}function x(C){b&&(clearTimeout(b),b=null),C.classList.add(e+"-outgoing"),C.addEventListener("transitionend",function(){C.parentNode&&C.parentNode.removeChild(C)}),setTimeout(function(){C.parentNode&&C.parentNode.removeChild(C)},500)}h()}var u=window.leantime||(window.leantime={});u.toast={show:i};var r=function(l){return i(l)};r.error=function(l){return l=l||{},l.style="error",l.title=l.title||"Error!",i(l)},r.notice=function(l){return l=l||{},l.style="notice",l.title=l.title||"Notice!",i(l)},r.warning=function(l){return l=l||{},l.style="warning",l.title=l.title||"Warning!",i(l)},window._growlShim=r})();var W=W||{},He=document.querySelector("meta[name=theme-color]");W.companyColor=He?He.getAttribute("content"):null;var Pe=document.querySelector("meta[name=color-scheme]");W.colorScheme=Pe?Pe.getAttribute("content"):null;var Ue=document.querySelector("meta[name=theme]");W.theme=Ue?Ue.getAttribute("content"):null;var Be=document.querySelector("meta[name=identifier-URL]");W.appUrl=Be?Be.getAttribute("content"):null;var Fe=document.querySelector("meta[name=leantime-version]");W.version=Fe?Fe.getAttribute("content"):null;W.replaceSVGColors=function(){W.companyColor!="#1b75bb"&&document.querySelectorAll("svg > *").forEach(function(n){n.getAttribute("fill")=="#1b75bb"&&n.setAttribute("fill",W.companyColor)})};W.handleAsyncResponse=function(n){n!==void 0&&n.result!==void 0&&n.result.html!==void 0&&document.body.insertAdjacentHTML("beforeend",n.result.html)};document.addEventListener("DOMContentLoaded",function(){W.replaceSVGColors(),document.querySelectorAll(".confetti").forEach(function(i){i.addEventListener("click",function(){confetti.start()})}),tippy("[data-tippy-content]");var n=document.querySelector(".login-alert .alert");if(n&&n.textContent!==""){var s=document.querySelector(".login-alert");s&&(s.style.display="")}document.addEventListener("scroll",function(){document.documentElement.dataset.scroll=window.scrollY})});htmx.onLoad(function(n){tippy("[data-tippy-content]"),W.replaceSVGColors()});window.addEventListener("HTMX.ShowNotification",function(n){fetch(W.appUrl+"/notifications/getLatestGrowl",{credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(s){return s.text()}).then(function(s){var i=JSON.parse(s);i.notification&&i.notification!=="undefined"&&W.toast.show({message:i.notification,style:i.notificationType})})});document.addEventListener("click",function(n){var s=n.target.closest('[data-toggle="dropdown"]');if(document.querySelectorAll(".dropdown.open, .btn-group.open").forEach(function(u){(!s||!u.contains(s))&&u.classList.remove("open")}),s){n.preventDefault(),n.stopPropagation();var i=s.closest(".dropdown, .btn-group");i&&i.classList.toggle("open")}});document.addEventListener("keydown",function(n){n.key==="Escape"&&document.querySelectorAll(".dropdown.open, .btn-group.open").forEach(function(s){s.classList.remove("open")})});leantime.editorController=function(){var n=[{start:"*",end:"*",format:"italic"},{start:"_",end:"_",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"__",end:"__",format:"bold"},{start:"~~",end:"~~",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"},{start:"1. ",cmd:"InsertOrderedList",value:{"list-style-type":"decimal"}},{start:"1) ",cmd:"InsertOrderedList",value:{"list-style-type":"decimal"}},{start:"a. ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-alpha"}},{start:"a) ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-alpha"}},{start:"i. ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-roman"}},{start:"i) ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-roman"}},{start:"[ ] ",cmd:"InsertChecklist"},{start:">",format:"blockquote"},{start:"`",end:"`",format:"code"},{start:"```",end:"```",format:"pre"},{start:"~",end:"~",cmd:"createLink"},{start:"---",replacement:"<hr/>"},{start:"--",replacement:"—"},{start:"-",replacement:"—"},{start:"(c)",replacement:"©"}],s={delimiter:"@",delay:20,source:function(a,m,b){b==="@"&&fetch(leantime.appUrl+"/api/users?projectUsersAccess=current&query="+encodeURIComponent(a),{credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(h){return h.json()}).then(function(h){for(var x=[],C=0;C<h.length;C++)x[C]={name:h[C].firstname+" "+h[C].lastname,id:h[C].id,email:h[C].username};m(x)})},highlighter:function(a){return a.replace(new RegExp("("+this.query+")","ig"),function(m,b){return"<strong>"+b+"</strong>"})},insert:function(a){return'<a class="userMention" data-tagged-user-id="'+a.id+'" href="javascript:void(0)"><img src="'+leantime.appUrl+"/api/users?profileImage="+a.id+'" alt="'+a.name+' Image"/>'+a.name.trim()+"</a>&nbsp;"},items:10},i=function(a,m,b){var h,x;h=new XMLHttpRequest,h.withCredentials=!1,h.open("POST",leantime.appUrl+"/api/files"),h.onload=function(){if(h.status<200||h.status>=300){b("HTTP Error: "+h.status);return}m(h.responseText)},x=new FormData,x.append("file",a.blob()),h.send(x)},u=function(a,m,b){window.filePickerCallback=a;var h={afterShowCont:function(){jQuery(".fileModal").nyroModal({callbacks:h})}};jQuery.nmManual(leantime.appUrl+"/files/showAll?modalPopUp=true",{stack:!0,callbacks:h,sizes:{minW:500,minH:500}}),jQuery.nmTop().elts.cont.css("zIndex","1000010"),jQuery.nmTop().elts.bg.css("zIndex","1000010"),jQuery.nmTop().elts.load.css("zIndex","1000010"),jQuery.nmTop().elts.all.find(".nyroModalCloseButton").css("zIndex","1000010")},r=function(a,m){a.on("change",function(){}),a.on("init",function(b){var h=a.getDoc().getElementsByClassName("confetti");h&&h.length>0&&h[0].addEventListener("click",function(){confetti.start()})}),a.on("focus",function(){var b=a.getDoc().getElementsByClassName("tinyPlaceholder");if(b.length>0)for(;b[0];)b[0].parentNode.removeChild(b[0])}),a.on("submit",function(){var b=a.getDoc().getElementsByClassName("tinyPlaceholder");if(b.length>0){for(;b[0];)b[0].remove();a.save()}})},l=leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",v=leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",S=function(a){tinymce.init({selector:"textarea.tinymceSimple",iframe_aria_text:"",width:"100%",skin_url:l,content_css:v,content_style:"body.mce-content-body{ font-size:14px; } img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,shortlink,checklist,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advlist,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | link unlink image | checklist bullist numlist | emoticons",browser_spellcheck:!0,toolbar_location:"bottom",branding:!1,statusbar:!1,convert_urls:!0,paste_data_images:!0,menubar:!1,relative_urls:!0,document_base_url:leantime.appUrl+"/",default_link_target:"_blank",table_appearance_options:!1,mentions:s,textpattern_patterns:n,images_upload_handler:i,file_picker_callback:u,setup:r})},t=function(){var a=document.querySelector("input[name=id]"),m=a?a.value:null;m||(m="new");let b="none";window.leantime.currentProject&&(b=window.leantime.currentProject);var h=window.innerHeight-50-205;tinymce.init({selector:"textarea.complexEditor",iframe_aria_text:"",width:"100%",skin_url:leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",content_css:leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",content_style:"html {text-align:center;} body.mce-content-body{ font-size:14px; } img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,embed,autoresize,shortlink,checklist,bettertable,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advancedTemplate,advlist,codesample,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | formatselect forecolor | alignleft aligncenter alignright | link unlink image media embed emoticons | checklist bullist numlist | table  | codesample | advancedTemplate | restoredraft",autosave_prefix:"leantime-complexEditor-autosave-{path}{query}-{id}-"+b+"-"+m+"-",autosave_restore_when_empty:m!=="new",autosave_retention:"10m",browser_spellcheck:!0,contextmenu:!1,autosave_retention:"120m",autosave_interval:"10s",autosave_ask_before_unload:!1,branding:!1,statusbar:!1,convert_urls:!0,menubar:!1,resizable:!0,templates:leantime.appUrl+"/wiki/templates",body_class:"mce-content-body",paste_data_images:!0,relative_urls:!0,document_base_url:leantime.appUrl+"/",table_appearance_options:!1,min_height:400,max_height:h,default_link_target:"_blank",codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Rust",value:"rust"},{text:"SQL",value:"sql"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"Swift",value:"swift"},{text:"Objective C",value:"objectivec"},{text:"Go",value:"go"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],mentions:s,textpattern_patterns:n,images_upload_handler:i,file_picker_callback:u,setup:r})},e=function(a){var m=document.querySelector("input[name=id]"),b=m?m.value:null;(b==null||b==null)&&(b="new");let h="none";window.leantime.currentProject&&(h=window.leantime.currentProject),tinymce.init({selector:"textarea.notesEditor",iframe_aria_text:"",width:"100%",skin_url:leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",content_css:leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",content_style:"html {text-align:center;} body.mce-content-body{ font-size:14px; color:var(--secondary-font-color); max-width:none;} img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,embed,autoresize,shortlink,checklist,bettertable,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advancedTemplate,advlist,codesample,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | formatselect forecolor | alignleft aligncenter alignright | link image table emoticons | checklist bullist | advancedTemplate | restoredraft",toolbar_location:"bottom",browser_spellcheck:!0,contextmenu:!1,autosave_prefix:"leantime-complexEditor-autosave-{path}{query}-{id}-"+h+"-"+b+"-",autosave_restore_when_empty:!0,autosave_retention:"120m",autosave_interval:"10s",autosave_ask_before_unload:!1,branding:!1,statusbar:!1,convert_urls:!0,menubar:!1,resizable:!0,templates:leantime.appUrl+"/wiki/templates",body_class:"mce-content-body",paste_data_images:!0,relative_urls:!0,document_base_url:leantime.appUrl+"/",table_appearance_options:!1,min_height:400,default_link_target:"_blank",codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Rust",value:"rust"},{text:"SQL",value:"sql"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"Swift",value:"swift"},{text:"Objective C",value:"objectivec"},{text:"Go",value:"go"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],textpattern_patterns:n,mentions:s,textpattern_patterns:n,images_upload_handler:i,file_picker_callback:u,setup:function(x){r(x),x.on("blur",function(){x.save(),a()})}})},o=function(a){tinymce.init({selector:a,iframe_aria_text:"",width:"100%",skin_url:l,inline:!0,plugins:"autosave,imagetools,shortlink,checklist,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advlist,mention,slashcommands,textpattern",toolbar:"",toolbar_location:"bottom",browser_spellcheck:!0,contextmenu:!1,branding:!1,statusbar:!1,convert_urls:!0,paste_data_images:!0,menubar:!1,relative_urls:!0,document_base_url:leantime.appUrl+"/",default_link_target:"_blank",table_appearance_options:!1,mentions:s,textpattern_patterns:n,images_upload_handler:i,file_picker_callback:u,setup:r})};return{initSimpleEditor:S,initComplexEditor:t,initNotesEditor:e,initContentEditable:o}}();leantime.snippets=function(){var n=function(t){var e=document.getElementById(t);e.select(),e.setSelectionRange(0,99999),navigator.clipboard.writeText(e.value),leantime.toast.show({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},s=function(t){navigator.clipboard.writeText(t),leantime.toast.show({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},i=function(){document.querySelectorAll(".confetti").forEach(function(t){t.addEventListener("click",function(){confetti.start()})})},u=function(t){var e=document.getElementById("accordion_toggle_"+t),o=e?e.querySelector("i.fa"):null,a="accordion_content-"+t,m="closed",b=document.getElementById("accordion_content-"+t);o&&o.classList.contains("fa-angle-right")?(o.classList.remove("fa-angle-right"),o.classList.add("fa-angle-down"),b&&(b.style.display=""),m="open"):o&&(o.classList.remove("fa-angle-down"),o.classList.add("fa-angle-right"),b&&(b.style.display="none"),m="closed");var h=new FormData;h.append("submenu",a),h.append("state",m),fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",body:h,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}})},r=function(t){var e=document.getElementById("themeStyleSheet"),o=e.getAttribute("href");t=="light"?(o=o.replace("dark.css","light.css"),e.setAttribute("href",o)):t=="dark"&&(o=o.replace("light.css","dark.css"),e.setAttribute("href",o))},l=function(t){var e=document.getElementById("themeStyleSheet"),o=e.getAttribute("href");t=="minimal"?(o=o.replace("default","minimal"),e.setAttribute("href",o)):t=="default"&&(o=o.replace("minimal","default"),e.setAttribute("href",o))},v=function(t){document.getElementById("fontStyleSetter").innerHTML=":root { --primary-font-family: '"+t+"', 'Helvetica Neue', Helvetica, sans-serif; }"},S=function(t,e){document.getElementById("colorSchemeSetter").innerHTML=":root { --accent1: "+t+"; --accent2: "+e+"}"};return{copyUrl:n,copyToClipboard:s,initConfettiClick:i,accordionToggle:u,toggleTheme:r,toggleFont:v,toggleColors:S,toggleBg:l}}();leantime.modals=function(){var n=!1;function s(){return document.getElementById("global-modal")}function i(){return document.getElementById("global-modal-content")}function u(){return document.getElementById("global-modal-box")}function r(k){return/showTicket|ideaDialog|articleDialog/.test(k)}function l(){var k=i();k&&(k.innerHTML='<div style="display:flex;justify-content:center;align-items:center;padding:60px 40px;"><span class="tw:loading tw:loading-spinner tw:loading-lg"></span></div>')}function v(k){for(var L=k.querySelectorAll("script"),R=0;R<L.length;R++){for(var U=L[R],F=document.createElement("script"),I=0;I<U.attributes.length;I++)F.setAttribute(U.attributes[I].name,U.attributes[I].value);F.textContent=U.textContent,U.parentNode.replaceChild(F,U)}}function S(k){if(/<html[\s>]/i.test(k)||/<!DOCTYPE/i.test(k)){var L=new DOMParser().parseFromString(k,"text/html"),R=L.querySelector(".primaryContent");return R?R.innerHTML:L.body?L.body.innerHTML:k}return k}function t(k){k.querySelectorAll(".showDialogOnLoad").forEach(function(L){L.style.display=""}),window.htmx&&window.htmx.process(k),window.tippy&&tippy(k.querySelectorAll("[data-tippy-content]"))}function e(k){var L=k.headers.get("HX-Trigger");if(L&&L.indexOf("HTMX.closemodal")!==-1)return L.indexOf("HTMX.ShowNotification")!==-1&&window.dispatchEvent(new CustomEvent("HTMX.ShowNotification")),m(),Promise.resolve(null);var R=k.headers.get("HX-Redirect");return R?(m(),window.location.href=R,Promise.resolve(null)):k.text()}function o(k){if(k!==null){var L=i();L&&(L.innerHTML=S(k),v(L),t(L))}}function a(k){var L=s(),R=u();if(L){R.className=R.className.replace(/tw:max-w-\S+/g,"").trim(),R.style.minHeight="",r(k)?(R.classList.add("tw:max-w-5xl"),R.style.minHeight="80vh"):R.classList.add("tw:max-w-3xl"),l(),L.open||L.showModal(),n=!0;var U=leantime.appUrl.replace(/\/$/,""),F=k.indexOf("http")===0?k:U+k;fetch(F,{credentials:"include",headers:{"is-modal":"true","X-Requested-With":"XMLHttpRequest"}}).then(e).then(o).catch(function(I){console.error("modalManager: load error",I);var B=i();B&&(B.innerHTML='<div style="padding:24px;text-align:center;"><p>Could not load content.</p></div>')})}}function m(){var k=s();if(k&&n){n=!1;try{history.pushState("",document.title,window.location.pathname+window.location.search)}catch{}if(k.open&&k.close(),typeof window.globalModalCallback=="function"){var L=window.globalModalCallback;window.globalModalCallback=null,L()}else location.reload()}}var b=function(){var k=window.location.hash.substring(1);if(k){var L=k.split("/");L.length>2&&L[1]!=="tab"&&a(k)}},h=function(){m()},x=function(k){typeof k=="function"&&(window.globalModalCallback=k)},C=function(k){var L=leantime.appUrl.replace(/\/$/,""),R=k;k.indexOf(L)===0&&(R=k.substring(L.length)),a(R)};return{openModal:b,setCustomModalCallback:x,closeModal:h,openByUrl:C}}();document.addEventListener("DOMContentLoaded",function(){leantime.modals.openModal();var n=document.getElementById("global-modal");n&&(n.addEventListener("cancel",function(s){s.preventDefault(),leantime.modals.closeModal()}),n.addEventListener("close",function(){leantime.modals.closeModal()})),document.addEventListener("submit",function(s){var i=s.target;if(!(!i||!i.closest||!i.closest("#global-modal-content"))&&i.getAttribute("method")!=="dialog"&&!(i.hasAttribute("hx-post")||i.hasAttribute("hx-get")||i.hasAttribute("hx-put")||i.hasAttribute("hx-delete"))){s.preventDefault();var u=(i.getAttribute("method")||"GET").toUpperCase(),r=i.getAttribute("action")||window.location.href,l=document.getElementById("global-modal-content"),v={method:u,credentials:"include",headers:{"is-modal":"true","X-Requested-With":"XMLHttpRequest"}};if(u==="POST")v.body=new FormData(i);else{var S=new URLSearchParams(new FormData(i));r+=(r.indexOf("?")===-1?"?":"&")+S.toString()}fetch(r,v).then(function(t){var e=t.headers.get("HX-Trigger");if(e&&e.indexOf("HTMX.closemodal")!==-1)return e.indexOf("HTMX.ShowNotification")!==-1&&window.dispatchEvent(new CustomEvent("HTMX.ShowNotification")),leantime.modals.closeModal(),null;var o=t.headers.get("HX-Redirect");return o?(leantime.modals.closeModal(),window.location.href=o,null):t.text()}).then(function(t){if(t!==null){var e=t;if(/<html[\s>]/i.test(t)||/<!DOCTYPE/i.test(t)){var o=new DOMParser().parseFromString(t,"text/html"),a=o.querySelector(".primaryContent");e=a?a.innerHTML:o.body?o.body.innerHTML:t}l.innerHTML=e;for(var m=l.querySelectorAll("script"),b=0;b<m.length;b++){for(var h=m[b],x=document.createElement("script"),C=0;C<h.attributes.length;C++)x.setAttribute(h.attributes[C].name,h.attributes[C].value);x.textContent=h.textContent,h.parentNode.replaceChild(x,h)}l.querySelectorAll(".showDialogOnLoad").forEach(function(k){k.style.display=""}),window.htmx&&window.htmx.process(l),window.tippy&&tippy(l.querySelectorAll("[data-tippy-content]"))}}).catch(function(t){console.error("modalManager: form submit error",t)})}},!0)});window.addEventListener("hashchange",function(){leantime.modals.openModal()});window.addEventListener("closeModal",function(){leantime.modals.closeModal()});document.addEventListener("HTMX.closemodal",function(){leantime.modals.closeModal()});leantime.modals.nmManual=function(n,s){typeof s=="function"&&(s=s()),s&&s.callbacks&&typeof s.callbacks.beforeClose=="function"&&(window.globalModalCallback=s.callbacks.beforeClose),leantime.modals.openByUrl(n)};leantime.modals.nmTop=function(){return{close:function(){leantime.modals.closeModal()},elts:{cont:document.getElementById("global-modal-box"),bg:document.querySelector("#global-modal .tw\\:modal-backdrop"),load:document.querySelector("#global-modal .tw\\:loading"),all:document.getElementById("global-modal")}}};leantime.modals.initNyroModal=function(n,s){n instanceof HTMLElement&&(n=[n]),Array.prototype.forEach.call(n,function(i){if(!i.dataset.modalManagerInit){i.dataset.modalManagerInit="true",s&&s.callbacks&&(i._modalManagerOpts=s);var u=i.getAttribute("href");u&&u.indexOf("#")===0||u&&i.addEventListener("click",function(r){r.preventDefault(),s&&s.callbacks&&typeof s.callbacks.beforeClose=="function"&&(window.globalModalCallback=s.callbacks.beforeClose),leantime.modals.openByUrl(u)})}})};typeof jQuery<"u"&&(jQuery.nmManual=leantime.modals.nmManual,jQuery.nmTop=leantime.modals.nmTop,jQuery.fn.nyroModal=function(n){return leantime.modals.initNyroModal(this.toArray(),n),this});leantime.dateController=function(){function n(u){var r=leantime.i18n.__("language.dayNames").split(",");leantime.i18n.__("language.dayNamesShort").split(",");var l=leantime.i18n.__("language.dayNamesMin").split(","),v=leantime.i18n.__("language.monthNames").split(","),S=leantime.i18n.__("language.monthNamesShort").split(","),t=parseInt(leantime.i18n.__("language.firstDayOfWeek"),10)||0;return{dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr"),locale:{firstDayOfWeek:t,weekdays:{shorthand:l,longhand:r},months:{shorthand:S,longhand:v}},allowInput:!0,onChange:u?function(e,o,a){u.call(a.input,o,a)}:void 0}}var s=function(u,r,l){var v=typeof u=="string"?document.querySelector(u):u,S=typeof r=="string"?document.querySelector(r):r;if(!(!v||!S)&&!(v.hasAttribute("readonly")||S.hasAttribute("readonly"))){var t=n();t.onChange=function(m){m.length>0&&(a.set("minDate",m[0]),S.value||a.setDate(m[0],!0))};var e=n();e.onChange=function(m){m.length>0&&o.set("maxDate",m[0])};var o=flatpickr(v,t),a=flatpickr(S,e)}},i=function(u,r){var l=typeof u=="string"?document.querySelector(u):u;l&&(l.hasAttribute("readonly")||flatpickr(l,n(r)))};return{initDateRangePicker:s,initDatePicker:i,getBaseDatePickerConfig:n}}();(function(){if(!(typeof jQuery>"u")){var n=new WeakMap;jQuery.datepicker=jQuery.datepicker||{},jQuery.datepicker.setDefaults=function(){},jQuery.datepicker.parseDate=function(s,i){if(!i)return null;var u=leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr");return flatpickr.parseDate(i,u)},jQuery.datepicker.formatDate=function(s,i){if(!i)return"";var u=leantime.dateHelper.getFormatFromSettings("dateformat","flatpickr");return flatpickr.formatDate(i,u)},jQuery.fn.datepicker,jQuery.fn.datepicker=function(s,i){return this.each(function(){var u=this;if(typeof s=="string"){var r=n.get(u);if(!r)return;if(s==="option"||s==="setDate")if(i==="minDate"||s==="setDate"){var l=arguments.length>2?arguments[2]:i;s==="setDate"?r.setDate(l,!0):r.set("minDate",l)}else i==="maxDate"&&r.set("maxDate",arguments[2]);return}if(!u.hasAttribute("readonly")){var v=leantime.dateController.getBaseDatePickerConfig();s&&s.onSelect&&(v.onChange=function(t,e,o){s.onSelect.call(u,e,o)});var S=flatpickr(u,v);n.set(u,S)}})}}})();leantime.dateHelper=function(){var n={jquery:{},luxon:{},flatpickr:{}};n.jquery={d:"dd",D:"D",j:"d",l:"DD",N:"",S:"",w:"",z:"o",W:"",F:"MM",m:"mm",M:"M",n:"m",t:"",L:"",o:"yy",Y:"yy",y:"y",a:"",A:"",B:"",g:"",G:"",h:"",H:"",i:"",s:"",u:"",e:"",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"@"},n.flatpickr={d:"d",D:"D",j:"j",l:"l",N:"",S:"",w:"w",z:"",W:"W",F:"F",m:"m",M:"M",n:"n",t:"",L:"",o:"Y",Y:"Y",y:"y",a:"K",A:"K",B:"",g:"G",G:"H",h:"h",H:"H",i:"i",s:"S",u:"",e:"",I:"",O:"",P:"",T:"",Z:"Z",c:"",r:"",U:"U"},n.luxon={d:"dd",D:"ccc",j:"d",l:"cccc",N:"c",S:"",w:"c",z:"o",W:"WW",F:"MMMM",m:"LL",M:"LLL",n:"L",t:"",L:"",o:"kk",Y:"yyyy",y:"yy",a:"a",A:"a",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",v:"SSS",e:"z",I:"",O:"ZZ",P:"ZZ",T:"ZZZ",Z:"",c:"",r:"",U:"X"};var s=function(u,r){let l=n[r],v="";return u.split("").forEach(function(S){l[S]!==void 0?v=v+""+l[S]:v=v+""+S}),v},i=function(u,r){let l=leantime.i18n.__("language."+u);return s(l,r)};return{mapFormat:s,getFormatFromSettings:i}}();leantime.accessibilityController=function(){var n=function(){var t=document.querySelectorAll(".ss-main");t.forEach(function(e){if(!e.dataset.a11yEnhanced){var o=e.previousElementSibling;if(!(!o||o.tagName!=="SELECT")){var a="",m=o.getAttribute("id");if(m){var b=document.querySelector('label[for="'+m+'"]');b&&(a=b.textContent.trim())}var h=o.hasAttribute("multiple");e.setAttribute("role","combobox"),e.setAttribute("aria-haspopup","listbox"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label",a||o.getAttribute("data-placeholder")||(h?"Select options":"Select option")),h&&e.setAttribute("aria-multiselectable","true");var x=e.parentElement?e.parentElement.querySelector(".ss-content .ss-list"):null;x&&x.setAttribute("role","listbox");var C=new MutationObserver(function(L){L.forEach(function(R){if(R.attributeName==="class"){var U=e.parentElement?e.parentElement.querySelector(".ss-content"):null;if(U){var F=U.classList.contains("ss-open");e.setAttribute("aria-expanded",F?"true":"false")}}})}),k=e.parentElement?e.parentElement.querySelector(".ss-content"):null;k&&C.observe(k,{attributes:!0,attributeFilter:["class"]}),e.dataset.a11yEnhanced="true"}}})},s=function(){var t=document.querySelectorAll("div.tagsinput");t.forEach(function(e){var o=e.nextElementSibling;if(!(!o||o.type!=="text")){var a=o.getAttribute("id"),m="Enter tags";if(a){var b=document.querySelector('label[for="'+a+'"]');b&&(m=b.textContent.trim())}e.setAttribute("role","list"),e.setAttribute("aria-label",m);var h=e.querySelectorAll("span.tag");h.forEach(function(k){k.setAttribute("role","listitem")});var x=e.querySelector("input");if(x&&(x.setAttribute("aria-label","Add new tag"),a&&x.setAttribute("aria-describedby",a+"-help")),a&&!document.getElementById(a+"-help")){var C=document.createElement("span");C.id=a+"-help",C.className="sr-only",C.textContent="Type and press enter to add tags. Press backspace to remove the last tag.",e.parentNode.insertBefore(C,e.nextSibling)}}})},i=function(){var t=document.querySelectorAll("input.hasDatepicker");t.forEach(function(e){var o=e.getAttribute("id"),a="";if(o){var m=document.querySelector('label[for="'+o+'"]');m&&(a=m.textContent.trim())}if(e.setAttribute("role","textbox"),e.setAttribute("aria-label",a||"Select date"),o&&(e.setAttribute("aria-describedby",o+"-help"),!document.getElementById(o+"-help"))){var b=document.createElement("span");b.id=o+"-help",b.className="sr-only",b.textContent="Date input. Use arrow keys to navigate calendar. Press enter to select date.",e.parentNode.insertBefore(b,e.nextSibling)}}),document._a11yDatepickerBound||(document.addEventListener("focusin",function(e){e.target&&e.target.matches&&e.target.matches("input.hasDatepicker")&&setTimeout(function(){var o=document.getElementById("ui-datepicker-div");o&&o.style.display!=="none"&&(o.setAttribute("role","dialog"),o.setAttribute("aria-label","Choose date"),o.setAttribute("aria-modal","true"))},100)}),document._a11yDatepickerBound=!0)},u=function(){typeof tinymce<"u"&&tinymce.on("AddEditor",function(t){var e=t.editor,o="Rich text editor",a=document.querySelector('label[for="'+e.id+'"]');a&&(o=a.textContent.trim()),e.on("init",function(){var m=document.getElementById(e.id+"_ifr");if(m&&(m.setAttribute("aria-label",o),!document.getElementById(e.id+"-help"))){var b=document.createElement("span");b.id=e.id+"-help",b.className="sr-only",b.textContent="Rich text editor. Press ALT+F10 to access toolbar. Press ESC to return to editing area.",m.parentNode.insertBefore(b,m.nextSibling)}})})},r=function(){var t=document.querySelectorAll('input[type="time"]');t.forEach(function(e){var o=e.getAttribute("id");if(o&&!document.querySelector('label[for="'+o+'"]')){var a="Time",m=e.closest(".form-group");if(m){var b=m.querySelector("label");b&&(a=b.textContent.trim()+" time")}e.setAttribute("aria-label",a)}})},l=function(){var t=document.querySelectorAll(".ticketBox");t.forEach(function(e){e.getAttribute("tabindex")||e.setAttribute("tabindex","0");var o=e.querySelector(".ticketHeadline"),a=o?o.textContent.trim():"";a&&(e.setAttribute("role","article"),e.setAttribute("aria-label","Task: "+a)),e.dataset.keyboardBound||(e.addEventListener("keydown",function(m){var b=m.target,h=b.matches('a, button, input, select, textarea, [role="button"], [tabindex]')||b.closest(".dropdown-toggle, .ticketDropdown, .inlineDropDownContainer");if((m.key==="Enter"||m.key===" ")&&!h&&m.target===e){m.preventDefault();var x=e.querySelector("a");x&&x.click()}}),e.dataset.keyboardBound="true")})},v=function(){n(),s(),i(),r(),l()},S=function(){v(),u(),document.addEventListener("htmx:afterSwap",function(){setTimeout(v,100)}),document.addEventListener("shown.bs.modal",function(){setTimeout(v,100)}),setTimeout(n,1e3)};return{init:S,enhanceSlimSelectAccessibility:n,enhanceTagsInputAccessibility:s,enhanceDatepickerAccessibility:i,enhanceTinyMCEAccessibility:u,fixTimepickerLabels:r,enhanceKanbanCardAccessibility:l}}();document.addEventListener("DOMContentLoaded",function(){leantime.accessibilityController.init()});leantime.authController=function(){var n=function(s){(typeof s>"u"||!s)&&(s="body");var i=document.querySelector(s);if(i){i.querySelectorAll("input").forEach(function(r){r.closest(".filterBar")||(r.readOnly=!0,r.disabled=!0)}),i.querySelectorAll("select").forEach(function(r){!r.closest(".filterBar")&&!r.classList.contains("mainSprintSelector")&&(r.readOnly=!0,r.disabled=!0)}),i.querySelectorAll("textarea").forEach(function(r){r.closest(".filterBar")||(r.disabled=!0)}),i.querySelectorAll("a.delete").forEach(function(r){r.remove()}),i.querySelectorAll(".quickAddLink").forEach(function(r){r.style.display="none"}),i.querySelectorAll(".complexEditor").forEach(function(r){typeof tinymce<"u"&&tinymce.get(r.id)&&tinymce.get(r.id).getBody().setAttribute("contenteditable","false")}),i.querySelectorAll(".tinymceSimple").forEach(function(r){typeof tinymce<"u"&&tinymce.get(r.id)&&tinymce.get(r.id).getBody().setAttribute("contenteditable","false")}),i.querySelectorAll(".tox-editor-header").forEach(function(r){r.style.display="none"}),i.querySelectorAll(".tox-statusbar").forEach(function(r){r.style.display="none"}),i.querySelectorAll(".ticketDropdown a").forEach(function(r){r.removeAttribute("data-toggle")});var u=document.getElementById("mainToggler");u&&(u.style.display="none"),document.querySelectorAll(".commentBox").forEach(function(r){r.style.display="none"}),document.querySelectorAll(".deleteComment, .replyButton").forEach(function(r){r.style.display="none"}),i.querySelectorAll(".dropdown i").forEach(function(r){r.classList.remove("fa-caret-down")})}};return{makeInputReadonly:n}}();leantime.commentsController=function(){var n=function(){document.querySelectorAll(".commentBox").forEach(function(i){i.style.display=""}),document.querySelectorAll("#comments .replies .commentBox").forEach(function(i){i.style.display="none"}),document.querySelectorAll(".deleteComment, .replyButton").forEach(function(i){i.style.display=""}),document.querySelectorAll(".commentReply .tinymceSimple").forEach(function(i){var u=tinymce.get(i.id);u&&u.getBody().setAttribute("contenteditable","true")}),document.querySelectorAll(".commentReply .tox-editor-header").forEach(function(i){i.style.display=""}),document.querySelectorAll(".commenterFields input").forEach(function(i){i.readOnly=!1,i.disabled=!1}),document.querySelectorAll(".commenterFields textarea").forEach(function(i){i.readOnly=!1,i.disabled=!1})},s=function(i){if(i==0){var u=document.getElementById("mainToggler");u&&(u.style.display="none")}else{var u=document.getElementById("mainToggler");u&&(u.style.display="")}document.querySelectorAll(".commentBox textarea").forEach(function(S){S.remove()}),document.querySelectorAll(".commentBox").forEach(function(S){S.style.display="none"});var r=document.getElementById("comment"+i);if(r){var l=r.querySelector(".commentReply");l&&l.insertAdjacentHTML("afterbegin",'<textarea rows="5" cols="75" name="text" class="tinymceSimple"></textarea>')}leantime.editorController.initSimpleEditor(),r&&(r.style.display="");var v=document.getElementById("father");v&&(v.value=i)};return{enableCommenterForms:n,toggleCommentBoxes:s}}();leantime.ticketsController=function(){function n(){let g=[];document.querySelectorAll(".sortableTicketList").forEach(function(p){p.querySelectorAll(".column").forEach(function(_,c){g[c]===void 0&&(g[c]=0);var d=_.querySelectorAll(".moveable").length;g[c]+=d})}),document.querySelectorAll(".widgettitle .count").forEach(function(p,_){p.textContent=g[_]})}function s(){document.querySelectorAll(".kanban-swimlane-row").forEach(function(g){var p=g.id;if(p){p.replace("swimlane-row-","");var _=g.querySelector(".kanban-swimlane-content"),c=_?_.querySelectorAll(".moveable").length:0,d=g.querySelector(".kanban-swimlane-sidebar");if(d){d.querySelectorAll(".kanban-lane-count").forEach(function(y){y.textContent=c});var w=d.getAttribute("aria-label")||"",f=w.replace(/\d+ tasks/,c+" tasks");d.setAttribute("aria-label",f)}}}),i()}function i(){document.querySelectorAll(".kanban-swimlane-row").forEach(function(g){var p=g.querySelector(".kanban-swimlane-content"),_=g.querySelector(".micro-progress-bar .progress-segments");if(_){var c={},d=0;p&&p.querySelectorAll(".contentInner").forEach(function(f){var y=f.getAttribute("class")||"",T=y.match(/status_(-?\d+)/);if(T){var A=T[1],E=f.querySelectorAll(".moveable").length;E>0&&(c[A]=E,d+=E)}});var w=_.querySelectorAll(".status-segment");if(d===0){w.forEach(function(f){f.style.flex="0 1 0%";var y=f.querySelector(".segment-count");y&&(y.textContent=""),f.setAttribute("data-tippy-content","")});return}w.forEach(function(f){var y=f.getAttribute("class");if(y){var T=y.match(/status-(-?\d+)/);if(T){var A=T[1],E=c[A]||0,D=E/d*100;f.style.flex=D+" 1 0%";var O=f.querySelector(".segment-count");O&&(O.textContent=E>0?E:"");var M=f.getAttribute("data-tippy-content")||"",Q=M.match(/^([^:]+):/),N=Q?Q[1]:"Status "+A;f.setAttribute("data-tippy-content",E>0?N+": "+E:"")}}})}})}var u=function(g,p){var _=document.getElementById("ticket_"+g);if(!_){console.warn("Card not found for ticket ID:",g);return}var c=_.closest(".contentInner"),d=c&&c.getAttribute("class")||"",w=d.match(/status_(\d+)/);if(!w){console.warn("Could not determine status for ticket:",g),location.reload();return}var f=w[1],y=document.querySelector("#kanboard-"+p+" .contentInner.status_"+f);if(!y){console.warn("Target swimlane not found:",p,f),location.reload();return}c!==y&&(_.classList.add("card-moving-out"),setTimeout(function(){y.appendChild(_),_.classList.remove("card-moving-out"),_.classList.add("card-moving-in"),n(),s(),setTimeout(function(){_.classList.remove("card-moving-in")},300)},200))},r=function(g,p){var _=typeof g=="string"?document.querySelector(g):g,c=_.value;leantime.ticketsRepository.updateRemainingHours(p,c,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.remaining_hours_updated"),style:"success"})})},l=function(g,p){var _=typeof g=="string"?document.querySelector(g):g,c=_.value;leantime.ticketsRepository.updatePlannedHours(p,c,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.planned_hours_updated"),style:"success"})})},v=function(){document.querySelectorAll(".filterBar").forEach(function(g){g.style.display=g.style.display==="none"?"":"none"})},S=function(g,p,_){function c(d){return String(d).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}document.addEventListener("DOMContentLoaded",function(){function d(y){return typeof jQuery<"u"&&jQuery.datepicker&&jQuery.datepicker.formatDate?jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),new Date(y)):new Date(y).toLocaleDateString()}if(_===!1)var w=new Gantt("#gantt",g,{header_height:55,column_width:20,step:24,view_modes:["Day","Week","Month"],bar_height:40,static_progress_indicator:!0,bar_corner_radius:10,arrow_curve:10,padding:20,view_mode:"Month",date_format:leantime.i18n.__("language.momentJSDate"),language:leantime.i18n.__("language.code").slice(0,2),additional_rows:5,custom_popup_html:function(y){var T=y._end,A=d(T),E='<div class="details-container" style="min-width:600px;"> ';return y.projectName!==void 0&&(E+="<h3><b>"+y.projectName+"</b></h3>"),E+="<small>"+y.type+" #"+y.id+" </small>",y.type==="milestone"?E+='<h4><a href="#/tickets/editMilestone/'+y.id+'" >'+c(y.name)+"</a></h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+A+"</strong><br /> "+Math.round(y.progress)+'%</p> <a href="#/tickets/editMilestone/'+y.id+'" ><span class="fa fa-map"></span> '+leantime.i18n.__("links.edit_milestone")+'</a> | <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+y.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":E+='<h4><a href="#/tickets/showTicket/'+y.id+'">'+c(y.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+y.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",E+="</div>",E},on_click:function(y){},on_date_change:function(y,T,A){leantime.ticketsRepository.updateMilestoneDates(y.id,T,A,y._index+1)},on_sort_change:function(y){for(var T={action:"ganttSort",payload:{}},A=0;A<y.length;A++)T.payload[y[A].id]=y[A]._index+1;var E=new URLSearchParams;E.append("action",T.action);for(var D in T.payload)E.append("payload["+D+"]",T.payload[D]);fetch(leantime.appUrl+"/api/tickets",{method:"POST",body:E,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}})},on_progress_change:function(y,T){},on_view_change:function(y){leantime.usersRepository.updateUserViewSettings("roadmap",y)},on_popup_show:function(y){}});else var w=new Gantt("#gantt",g,{readonlyGantt:!0,resizing:!1,progress:!1,is_draggable:!1,custom_popup_html:function(T){var A=T._end,E=d(A),D='<div class="details-container" style="min-width:600px;"> ';return T.projectName!==void 0&&(D+="<h3><b>"+T.projectName+"</b></h3>"),D+="<small>"+T.type+" #"+T.id+" </small>",T.type==="milestone"?D+="<h4>"+c(T.name)+"</h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+E+"</strong><br /> "+Math.round(T.progress)+'%</p> <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+T.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":D+='<h4><a href="#/tickets/showTicket/'+T.id+'">'+c(T.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+T.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",D+="</div>",D},on_click:function(T){},on_date_change:function(T,A,E){},on_progress_change:function(T,A){},on_view_change:function(T){leantime.usersRepository.updateUserViewSettings("roadmap",T)}});var f=document.getElementById("ganttTimeControl");f&&f.addEventListener("click",function(y){var T=y.target.closest("a");if(T){var A=T.getAttribute("data-value");w.change_view_mode(A),f.querySelectorAll("a").forEach(function(D){D.classList.remove("active")}),T.classList.add("active");var E=T.textContent;document.querySelectorAll(".viewText").forEach(function(D){D.textContent=E})}}),w.change_view_mode(p)})},t=function(){Date.prototype.addDays=function(d){return this.setDate(this.getDate()+d),this},jQuery.datepicker.setDefaults({beforeShow:function(d){if(d.hasAttribute("readonly"))return!1}});var g=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),p=jQuery("#sprintStart").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){_.datepicker("option","minDate",c(this));var d=c(this).addDays(13);_.datepicker("setDate",d)}),_=jQuery("#sprintEnd").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){p.datepicker("option","maxDate",c(this))});function c(d){var w;try{w=jQuery.datepicker.parseDate(g,d.value)}catch(f){w=null,console.log(f)}return w}},e=function(){var g=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),p=jQuery("#milestoneEditFrom").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){_.datepicker("option","minDate",c(this))}),_=jQuery("#milestoneEditTo").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){p.datepicker("option","maxDate",c(this))});function c(d){var w;try{w=jQuery.datepicker.parseDate(g,d.value)}catch(f){w=null,console.log(f)}return w}},o=function(){var g=leantime.dateHelper.getFormatFromSettings("dateformat","jquery");jQuery(".milestoneEditFromAsync").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){var _=this.value,c=this.getAttribute("data-id"),d=jQuery(".toDateTicket-"+c);d.datepicker("option","minDate",p(this)),leantime.ticketsRepository.updateEditFromDates(c,_,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})})}),jQuery(".milestoneEditToAsync").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:leantime.i18n.__("language.isRTL")==="true"?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",function(){var _=this.getAttribute("data-id"),c=jQuery(".fromDateTicket-"+_);c.datepicker("option","maxDate",p(this));var d=this.value;leantime.ticketsRepository.updateEditToDates(_,d,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})})});function p(_){var c;try{c=jQuery.datepicker.parseDate(g,_.value)}catch(d){c=null,console.log(d)}return c}},a=function(){typeof jQuery<"u"&&jQuery.fn.tooltip&&jQuery('[data-toggle="tooltip"]').tooltip()},m=function(){var g={"0.5":"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"};document.querySelectorAll(".effortDropdown .dropdown-menu a").forEach(function(p){p.replaceWith(p.cloneNode(!0))}),document.querySelectorAll(".effortDropdown .dropdown-menu a").forEach(function(p){p.addEventListener("click",function(){var _=this.getAttribute("data-value").split("_");if(_.length===2){var c=_[0],d=_[1],w=new URLSearchParams;w.append("id",c),w.append("storypoints",d),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:w,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var f=document.querySelector("#effortDropdownMenuLink"+c+" span.text");f&&(f.textContent=g[d]),leantime.toast.show({message:leantime.i18n.__("short_notifications.effort_updated"),style:"success"}),leantime.kanbanGroupBy==="storypoints"&&u(c,d)})}else console.log("Ticket Controller: Effort data value not set correctly")})})},b=function(){var g={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"};document.querySelectorAll(".priorityDropdown .dropdown-menu a").forEach(function(p){p.replaceWith(p.cloneNode(!0))}),document.querySelectorAll(".priorityDropdown .dropdown-menu a").forEach(function(p){p.addEventListener("click",function(){var _=this.getAttribute("data-value").split("_");if(_.length===2){var c=_[0],d=_[1],w=new URLSearchParams;w.append("id",c),w.append("priority",d),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:w,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var f=document.getElementById("priorityDropdownMenuLink"+c);if(f){var y=f.querySelector("span.text");y&&(y.textContent=g[d]),f.classList.remove("priority-bg-1","priority-bg-2","priority-bg-3","priority-bg-4","priority-bg-5"),f.classList.add("priority-bg-"+d);var T=f.closest(".ticketBox");T&&(T.classList.remove("priority-border-1","priority-border-2","priority-border-3","priority-border-4","priority-border-5"),T.classList.add("priority-border-"+d))}leantime.toast.show({message:leantime.i18n.__("short_notifications.priority_updated"),style:"success"}),leantime.kanbanGroupBy==="priority"&&u(c,d)})}else console.log("Ticket Controller: Priority data value not set correctly")})})},h=function(){document.querySelectorAll(".milestoneDropdown .dropdown-menu a").forEach(function(g){g.replaceWith(g.cloneNode(!0))}),document.querySelectorAll(".milestoneDropdown .dropdown-menu a").forEach(function(g){g.addEventListener("click",function(){var p=this.getAttribute("data-value").split("_"),_=this.getAttribute("data-label");if(p.length===3){var c=p[0],d=p[1],w=p[2],f=document.querySelector("#milestoneDropdownMenuLink"+c+" span.text");f&&f.insertAdjacentHTML("beforeend"," ...");var y=new URLSearchParams;y.append("id",c),y.append("milestoneid",d),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:y,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var T=document.querySelector("#milestoneDropdownMenuLink"+c+" span.text");T&&(T.textContent=_);var A=document.getElementById("milestoneDropdownMenuLink"+c);A&&(A.style.backgroundColor=w),leantime.toast.show({message:leantime.i18n.__("short_notifications.milestone_updated"),style:"success"}),leantime.kanbanGroupBy==="milestoneid"&&u(c,d)})}})})},x=function(){document.querySelectorAll(".statusDropdown .dropdown-menu a").forEach(function(g){g.replaceWith(g.cloneNode(!0))}),document.querySelectorAll(".statusDropdown .dropdown-menu a").forEach(function(g){g.addEventListener("click",function(){var p=this.getAttribute("data-value").split("_"),_=this.getAttribute("data-label");if(p.length==3){var c=p[0],d=p[1],w=p[2],f=new URLSearchParams;f.append("id",c),f.append("status",d),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:f,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(y){return y.json()}).then(function(y){var T=document.querySelector("#statusDropdownMenuLink"+c+" span.text");T&&(T.textContent=_);var A=document.getElementById("statusDropdownMenuLink"+c);A&&(A.className=w+" dropdown-toggle f-left status "),leantime.toast.show({message:leantime.i18n.__("short_notifications.status_updated"),style:"success"}),leantime.handleAsyncResponse(y)})}})})},C=function(){document.querySelectorAll(".userDropdown .dropdown-menu a").forEach(function(g){g.replaceWith(g.cloneNode(!0))}),document.querySelectorAll(".userDropdown .dropdown-menu a").forEach(function(g){g.addEventListener("click",function(){var p=this.getAttribute("data-value").split("_"),_=this.getAttribute("data-label");if(p.length===3){var c=p[0],d=p[1];p[2];var w=new URLSearchParams;w.append("id",c),w.append("editorId",d),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:w,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var f=document.querySelector("#userDropdownMenuLink"+c+" span.text span#userImage"+c+" img");f&&f.setAttribute("src",leantime.appUrl+"/api/users?profileImage="+d);var y=document.querySelector("#userDropdownMenuLink"+c+" span.text span#user"+c);y&&(y.textContent=_),leantime.toast.show({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"}),leantime.kanbanGroupBy==="editorId"&&u(c,d)})}})})},k=function(){document.querySelectorAll(".asyncInputUpdate").forEach(function(g){g.addEventListener("change",function(){var p=this.getAttribute("data-label").split("-");if(p.length==2){var _=p[0],c=p[1],d=this.value,w=new URLSearchParams;w.append("id",c),w.append(_,d),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:w,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){leantime.toast.show({message:leantime.i18n.__("notifications.subtask_saved"),style:"success"})})}})})},L=function(){document.querySelectorAll(".sprintDropdown .dropdown-menu a").forEach(function(g){g.replaceWith(g.cloneNode(!0))}),document.querySelectorAll(".sprintDropdown .dropdown-menu a").forEach(function(g){g.addEventListener("click",function(){var p=this.getAttribute("data-value").split("_"),_=this.getAttribute("data-label");if(p.length==2){var c=p[0],d=p[1],w=new URLSearchParams;w.append("id",c),w.append("sprint",d),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:w,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var f=document.querySelector("#sprintDropdownMenuLink"+c+" span.text");f&&(f.textContent=_),leantime.toast.show({message:leantime.i18n.__("short_notifications.sprint_updated"),style:"success"}),leantime.kanbanGroupBy==="sprint"&&u(c,d)})}})})},R=function(){document.querySelectorAll("input.simpleColorPicker").forEach(function(g){g.type="color",g.style.height="34px",g.style.padding="2px",g.style.cursor="pointer",g.value&&g.value.charAt(0)!=="#"&&(g.value="#"+g.value),g.value||(g.value="#1b75bb"),g.addEventListener("input",function(){this.style.background=this.value})})},U=function(){document.querySelectorAll(".date-picker-form-control .reset-button").forEach(function(g){g.addEventListener("click",function(){var p=this.getAttribute("data-id"),_=document.getElementById("due-date-picker-"+p);_&&(_.value=leantime.i18n.__("text.anytime")),leantime.ticketsRepository.updateDueDates(p,null,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})})})}),leantime.dateController.initDatePicker(".quickDueDates, .duedates",function(g,p){var _=p.currentDay,c=p.currentMonth,d=p.currentYear,w=new Date(d,c,_),f=typeof jQuery<"u"&&jQuery.datepicker&&jQuery.datepicker.formatDate?jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),w):w.toLocaleDateString(),y=this.getAttribute("data-id");leantime.ticketsRepository.updateDueDates(y,f,function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})})})},F=function(g,p,_,c){var d=document.getElementById(c).getContext("2d");new Chart(d,{type:"line",data:{labels:g,datasets:[{label:leantime.i18n.__("label.booked_hours"),backgroundColor:"rgba(201,48,44, 0.5)",borderColor:"rgb(201,48,44)",data:p},{label:leantime.i18n.__("label.planned_hours"),backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgb(54, 162, 235)",data:_}]},options:{scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.booked_hours")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.planned_hours")},ticks:{beginAtZero:!0}}}}})},I=function(){document.addEventListener("DOMContentLoaded",function(){let g=new URL(window.location.href),p=g.searchParams.get("tab"),_=0;if(p){var c=document.querySelector(".ticketTabs");if(c){var d=c.querySelector('a[href="#'+p+'"]');d&&d.parentElement&&(_=Array.prototype.indexOf.call(d.parentElement.parentElement.children,d.parentElement))}}typeof jQuery<"u"&&jQuery.fn.tabs&&jQuery(".ticketTabs").tabs({create:function(w,f){document.querySelectorAll(".ticketTabs").forEach(function(y){y.style.visibility="visible"})},activate:function(w,f){g=new URL(window.location.href),g.searchParams.set("tab",f.newPanel[0].id),window.history.replaceState(null,null,g)},load:function(){},enable:function(){},active:_})})},B=function(g){var p=document.getElementById("ticketSearch");p&&p.addEventListener("submit",function(_){_.preventDefault();var c=function(P){var j=document.getElementById(P);return j?j.value:void 0},d=function(P){var j=document.querySelector("input[name='"+P+"']:checked");return j?j.value:void 0},w=c("projectIdInput"),f=c("userSelect"),y=c("milestoneSelect"),T=c("termInput"),A=c("sprintSelect"),E=c("typeSelect"),D=c("prioritySelect"),O=c("statusSelect"),M=c("sortBySelect"),Q=d("groupBy"),N=d("showTasks"),q="?search=true";w!=""&&w!=null&&(q=q+"&projectId="+w),f!=""&&f!=null&&(q=q+"&users="+f),y!=""&&y!=null&&(q=q+"&milestone="+y),T!=""&&T!=null&&(q=q+"&term="+T),A!=""&&A!=null&&(q=q+"&sprint="+A),E!=""&&E!=null&&(q=q+"&type="+E),D!=""&&D!=null&&(q=q+"&priority="+D),O!=""&&O!=null&&(q=q+"&status="+O),M!=""&&M!=null&&(q=q+"&sort="+M),Q!=""&&Q!=null&&(q=q+"&groupBy="+Q),N!=""&&N!=null&&(q=q+"&showTasks="+N);var Z=g+q;window.location.href=Z})},J=function(g){var p=function(N){var q=document.getElementById(N);return q?q.value:void 0},_=function(N){var q=document.querySelector("input[name='"+N+"']:checked");return q?q.value:void 0},c=p("projectIdInput"),d=p("userSelect"),w=p("milestoneSelect"),f=p("termInput"),y=p("sprintSelect"),T=p("typeSelect"),A=p("prioritySelect"),E=p("statusSelect"),D=p("sortBySelect"),O=_("groupBy"),M="?search=true";c!=""&&c!=null&&(M=M+"&projectId="+c),d!=""&&d!=null&&(M=M+"&users="+d),w!=""&&w!=null&&(M=M+"&milestone="+w),f!=""&&f!=null&&(M=M+"&term="+f),y!=""&&y!=null&&(M=M+"&sprint="+y),T!=""&&T!=null&&(M=M+"&type="+T),A!=""&&A!=null&&(M=M+"&priority="+A),E!=""&&E!=null&&(M=M+"&status="+E),D!=""&&D!=null&&(M=M+"&sort="+D),O!=""&&O!=null&&(M=M+"&groupBy="+O);var Q=g+M;window.location.href=Q},z=function(){document.addEventListener("DOMContentLoaded",function(){n(),s(),document.querySelectorAll(".filterBar .row-fluid").forEach(function(g){g.style.opacity="1"}),document.querySelectorAll(".sortableTicketList").forEach(function(g){var p=g.id,_=g.closest(".kanban-swimlane-row");if(!(_&&_.getAttribute("data-expanded")==="false")){var c=250;g.querySelectorAll(".column .contentInner").forEach(function(d){d.offsetHeight>c&&(c=d.offsetHeight)}),document.querySelectorAll("#"+p+" .column .contentInner").forEach(function(d){d.style.height=c+"px"})}})})},K=function(g){var p=g;document.querySelectorAll(".sortableTicketList.kanbanBoard .ticketBox").forEach(function(d){d.addEventListener("mouseenter",function(){this.style.background="var(--kanban-card-hover)"}),d.addEventListener("mouseleave",function(){this.style.background="var(--kanban-card-bg)"})});function _(d){var w=d.querySelectorAll(":scope > .moveable"),f=[];return w.forEach(function(y){if(y.id){var T=y.id.indexOf("_");T!==-1&&f.push(y.id.substring(0,T)+"[]="+y.id.substring(T+1))}}),f.join("&")}document.querySelectorAll(".sortableTicketList").forEach(function(d){d.querySelectorAll(".contentInner").forEach(function(w){w._sortableInstance&&w._sortableInstance.destroy(),w._sortableInstance=new Sortable(w,{group:"ticket-kanban",draggable:".moveable",ghostClass:"ui-state-highlight",filter:".portlet-toggle, input, a, select, textarea",preventOnFilter:!1,animation:150,delay:10,delayOnTouchOnly:!0,onStart:function(f){f.item.classList.add("tilt"),c(f.item);var y=f.item.closest(".sortableTicketList.kanbanBoard");f.item.dataset.originalSwimlaneId=y?y.id:""},onEnd:function(f){f.item.classList.remove("tilt"),f.item._moveHandler&&(document.removeEventListener("mousemove",f.item._moveHandler),delete f.item._moveHandler),n(),s(),document.querySelectorAll(".sortableTicketList .contentInner").forEach(function(X){var de=X.querySelectorAll(".moveable").length>0;if(de){X.classList.remove("empty-column"),X.setAttribute("data-empty-text","");var tt=X.getAttribute("aria-label")||"";X.setAttribute("aria-label",tt.replace("Empty column","")+" column items")}else X.classList.add("empty-column"),X.setAttribute("data-empty-text","Empty"),X.setAttribute("aria-label","Empty column")});var y=f.item.closest(".sortableTicketList.kanbanBoard"),T=y?y.id:"",A=f.item.dataset.originalSwimlaneId;if(A&&T&&A!==T){var E=f.item.id.replace("ticket_",""),D=T.replace("kanboard-",""),O={milestoneid:"milestoneid",editorId:"editorId",priority:"priority",storypoints:"storypoints",sprint:"sprint",dueDate:"dateToFinish"},M=leantime.kanbanGroupBy,Q=O[M];if(M==="dueDate"){var N=new Date;switch(N.setHours(12,0,0,0),D){case"0":var q=new Date(N);q.setDate(q.getDate()-1),D=q.toISOString().split("T")[0];break;case"1":var Z=new Date(N),P=6-Z.getDay();P<0&&(P=0),Z.setDate(Z.getDate()+P),D=Z.toISOString().split("T")[0];break;case"2":var j=new Date(N),Ye=6-j.getDay()+7;j.setDate(j.getDate()+Ye),D=j.toISOString().split("T")[0];break;case"3":var ue=new Date(N);ue.setDate(ue.getDate()+21),D=ue.toISOString().split("T")[0];break;case"4":D="";break}}if(Q&&E){var Y=document.getElementById("ticket_"+E);if(M==="milestoneid"){var $=document.querySelector("#swimlane-row-"+D+" .swimlane-header-label"),Je=($?$.textContent:"")||leantime.i18n.__("label.no_milestone"),be=Y?Y.querySelector(".milestoneDropdown .dropdown-toggle .text"):null;be&&(be.textContent=Je);var me=Y?Y.querySelector('.milestoneDropdown .dropdown-menu a[data-value^="'+E+"_"+D+'_"]'):null,ne="#b0b0b0";if(me&&D!=="0"&&D!==""){var _e=me.getAttribute("data-value");if(_e){var we=_e.split("_");we.length>=3&&(ne=we.slice(2).join("_"))}if(!ne||ne==="#b0b0b0"){var Se=me.getAttribute("style");if(Se){var xe=Se.match(/background-color:\s*([^;]+)/i);xe&&(ne=xe[1].trim())}}}var Te=Y?Y.querySelector(".milestoneDropdown .dropdown-toggle"):null;Te&&(Te.style.backgroundColor=ne)}else if(M==="priority"){Y&&(Y.className=Y.className.replace(/(^|\s)priority-border-\S+/g,""),Y.classList.add("priority-border-"+D));var Ve={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"},re=document.getElementById("priorityDropdownMenuLink"+E);if(re){var ke=re.querySelector("span.text");ke&&(ke.textContent=Ve[D]||D),re.classList.remove("priority-bg-1","priority-bg-2","priority-bg-3","priority-bg-4","priority-bg-5"),re.classList.add("priority-bg-"+D)}}else if(M==="editorId"){var fe=document.getElementById("userDropdownMenuLink"+E);if(fe){var Ce=fe.querySelector("span.text span img");Ce&&Ce.setAttribute("src",leantime.appUrl+"/api/users?profileImage="+D);var $=document.querySelector("#swimlane-row-"+D+" .swimlane-header-label"),Ge=($?$.textContent:"")||leantime.i18n.__("label.not_assigned"),Le=fe.querySelector("span.text span#user"+E);Le&&(Le.textContent=Ge)}}else if(M==="storypoints"){var Ke={"0.5":"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"},Ee=document.getElementById("effortDropdownMenuLink"+E);if(Ee){var De=Ee.querySelector("span.text");De&&(De.textContent=Ke[D]||D)}}else if(M==="sprint"){var Ae=document.getElementById("sprintDropdownMenuLink"+E);if(Ae){var $=document.querySelector("#swimlane-row-"+D+" .swimlane-header-label"),Ze=($?$.textContent:"")||leantime.i18n.__("label.backlog"),Me=Ae.querySelector("span.text");Me&&(Me.textContent=Ze)}}else if(M==="dueDate"){var qe=Y?Y.querySelector(".dues .fa-calendar"):null,le=qe?qe.parentElement:null;if(le&&D){var pe=D.split("-"),$e=pe[1]+"/"+pe[2]+"/"+pe[0],ee=[];le.childNodes.forEach(function(X){X.nodeType===3&&ee.push(X)}),ee.length>0&&(ee[0].textContent=" "+$e)}else if(le&&!D){var ee=[];le.childNodes.forEach(function(de){de.nodeType===3&&ee.push(de)}),ee.length>0&&(ee[0].textContent=" No due date")}}leantime.toast.show({message:"To-Do Updated",style:"success"});var ge=new URLSearchParams;ge.append("id",E),ge.append(Q,D),fetch(leantime.appUrl+"/api/tickets",{method:"PATCH",body:ge,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(X){if(!X.ok)throw new Error("Request failed")}).catch(function(){leantime.toast.show({message:leantime.i18n.__("short_notifications.not_saved")||"Error updating ticket",style:"error"}),location.reload()})}}delete f.item.dataset.originalSwimlaneId;for(var et=f.item.closest(".sortableTicketList"),oe={action:"kanbanSort",payload:{},handler:f.item.id},se=0;se<p.length;se++){var Re=et.querySelector(".contentInner.status_"+p[se]);Re&&(oe.payload[p[se]]=_(Re))}var ce=new URLSearchParams;ce.append("action",oe.action),ce.append("handler",oe.handler);for(var je in oe.payload)ce.append("payload["+je+"]",oe.payload[je]);fetch(leantime.appUrl+"/api/tickets",{method:"POST",body:ce,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(X){return X.json()}).then(function(X){leantime.handleAsyncResponse(X)})}})})});function c(d){var w=d.getBoundingClientRect().left,f=function(y){y.pageX+5>w?(d.classList.add("right"),d.classList.remove("left")):y.pageX<w+5?(d.classList.add("left"),d.classList.remove("right")):(d.classList.remove("left"),d.classList.remove("right")),w=y.pageX};document.addEventListener("mousemove",f),d._moveHandler=f}document.querySelectorAll(".portlet").forEach(function(d){d.classList.add("ui-widget","ui-widget-content","ui-helper-clearfix","ui-corner-all"),d.querySelectorAll(".portlet-header").forEach(function(w){w.classList.add("ui-widget-header","ui-corner-all"),w.insertAdjacentHTML("afterbegin","<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>")})}),document.querySelectorAll(".portlet-toggle").forEach(function(d){d.addEventListener("click",function(){this.classList.toggle("ui-icon-minusthick"),this.classList.toggle("ui-icon-plusthick");var w=this.closest(".portlet");w&&w.querySelectorAll(".portlet-content").forEach(function(f){f.style.display=f.style.display==="none"?"":"none"})})})},V=function(g){function p(_){return!isNaN(parseFloat(_))&&isFinite(_)}document.addEventListener("DOMContentLoaded",function(){var _=[];function c(w){if(typeof w=="string"&&w.indexOf("<")!==-1){var f=document.createElement("div");f.innerHTML=w;var y=f.querySelector("input");return y?y.value:w}return w}var d=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom">p<"clear">',searching:!1,stateSave:!0,displayLength:100,order:_,columnDefs:[{visible:!1,targets:10},{visible:!1,targets:11},{target:"no-sort",orderable:!1}],footerCallback:function(w,f,y,T,A){var E=this.api(),D=E.column(10).data().reduce(function(P,j){return p(P)===!1&&(P=c(P)),p(j)===!1&&(j=c(j)),isNaN(P)&&(P=0),isNaN(j)&&(j=0),parseFloat(P)+parseFloat(j)},0),O=E.column(11).data().reduce(function(P,j){return p(P)===!1&&(P=c(P)),p(j)===!1&&(j=c(j)),isNaN(P)&&(P=0),isNaN(j)&&(j=0),parseFloat(P)+parseFloat(j)},0),M=E.column(12).data().reduce(function(P,j){return parseFloat(P)+parseFloat(j)},0),Q=E.column(9).footer();Q&&(Q.innerHTML="Total");var N=E.column(10).footer();N&&(N.innerHTML=D);var q=E.column(11).footer();q&&(q.innerHTML=O);var Z=E.column(12).footer();Z&&(Z.innerHTML=M)}});new jQuery.fn.dataTable.Buttons(d.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(w,f,y,T){return typeof T.dataset.order<"u"&&T.dataset.order!==void 0&&(w=T.dataset.order),w}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(document.getElementById("tableButtons")),d.table(0).on("column-visibility",function(w,f,y,T){for(var A=1;A<d.tables().context.length;A++)d.tables(A).column(y).visible(T);d.draw()}),document.querySelectorAll(".ticketTable input").forEach(function(w){w.addEventListener("change",function(){this.parentElement.setAttribute("data-order",this.value),d.draw()})})})},te=function(g){document.addEventListener("DOMContentLoaded",function(){var p=[];jQuery(".listStyleTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"<"center"p>><"clear">',searching:!1,stateSave:!0,displayLength:25,order:p,fnDrawCallback:function(_){if(_._iDisplayLength>_.fnRecordsDisplay()){var c=_.nTableWrapper.querySelector(".dataTables_paginate");c&&(c.style.display="none")}else{var c=_.nTableWrapper.querySelector(".dataTables_paginate");c&&(c.style.display="")}}})})},ae=function(g){document.addEventListener("DOMContentLoaded",function(){var p=[],_=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"><"clear">',searching:!1,stateSave:!0,displayLength:100,order:p,columnDefs:[{visible:!1,targets:7},{visible:!1,targets:8},{target:"no-sort",orderable:!1}]});new jQuery.fn.dataTable.Buttons(_.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(c,d,w,f){return typeof f.dataset.order<"u"&&f.dataset.order!==void 0&&(c=f.dataset.order),c}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(document.getElementById("tableButtons")),_.table(0).on("column-visibility",function(c,d,w,f){for(var y=1;y<_.tables().context.length;y++)_.tables(y).column(w).visible(f);_.draw()}),document.querySelectorAll(".ticketTable input").forEach(function(c){c.addEventListener("change",function(){this.parentElement.setAttribute("data-order",this.value),_.draw()})})})},Qe=function(g,p){var _=typeof p=="string"?document.querySelector(p):p;if(typeof jQuery<"u"){var c=document.querySelectorAll("textarea.complexEditor");c.length>0&&jQuery("textarea.complexEditor").tinymce()!==null&&(jQuery("textarea.complexEditor").tinymce().save(),jQuery("textarea.complexEditor").tinymce().remove())}document.querySelectorAll(".ticketRows").forEach(function(f){f.classList.remove("active")});var d=document.getElementById("row-"+g);d&&d.classList.add("active"),_.innerHTML="<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px' /></div>";function w(f){f.querySelectorAll("form").forEach(function(y){y.addEventListener("submit",function(T){if(T.preventDefault(),typeof jQuery<"u"){var A=document.querySelectorAll("textarea.complexEditor");A.length>0&&jQuery("textarea.complexEditor").tinymce()!==null&&(jQuery("textarea.complexEditor").tinymce().save(),jQuery("textarea.complexEditor").tinymce().remove())}f.innerHTML="<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px'/></div>";var E=new FormData(this),D=this.getAttribute("action");fetch(D,{method:"POST",body:E,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(O){return O.text()}).then(function(O){f.innerHTML=O,w(f)})})})}fetch(leantime.appUrl+"/tickets/showTicket/"+g,{credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(f){return f.text()}).then(function(f){_.innerHTML=f,w(_)})},We=function(){typeof jQuery<"u"&&jQuery.fn.tagsInput&&jQuery("#tags").tagsInput({autocomplete_url:leantime.appUrl+"/api/tags"});var g=document.getElementById("tags_tag");g&&g.addEventListener("focusout",function(){var p=this.value;p!=""&&typeof jQuery<"u"&&jQuery("#tags").addTag(p)})},ze=function(g,p){var _=document.getElementById("commentText-"+g),c="Discussion on To-Do #"+p+`:
\r`+(_?_.textContent:""),d=document.querySelector('li a[href*="timesheet"]');d&&d.click();var w=document.querySelector("#timesheet #description");w&&(w.value=c)};return{toggleFilterBar:v,initGanttChart:S,updateRemainingHours:r,updatePlannedHours:l,initTimeSheetChart:F,initTicketTabs:I,initTicketSearchSubmit:B,initTicketKanban:K,initTicketsTable:V,initEffortDropdown:m,initPriorityDropdown:b,initMilestoneDropdown:h,initStatusDropdown:x,initUserDropdown:C,initSprintDropdown:L,initToolTips:a,initTagsInput:We,initMilestoneDatesAsyncUpdate:o,initAsyncInputChange:k,initDueDateTimePickers:U,setUpKanbanColumns:z,addCommentTimesheetContent:ze,initMilestoneTable:ae,initMilestoneDates:e,initTicketsList:te,loadTicketToContainer:Qe,initTicketSearchUrlBuilder:J,initSprintDates:t,initSimpleColorPicker:R}}();var G=G||{};G.ticketsRepository=function(){var n=function(v,S,t,e){let o=G.dateHelper.getFormatFromSettings("dateformat","luxon"),a=G.dateHelper.getFormatFromSettings("timeformat","luxon"),m=luxon.DateTime.fromSQL(S).toFormat(o),b=luxon.DateTime.fromSQL(S).toFormat(a),h=luxon.DateTime.fromSQL(t).toFormat(o),x=luxon.DateTime.fromSQL(t).toFormat(a);fetch(G.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:v,editFrom:m,editTo:h,timeFrom:b,timeTo:x,sortIndex:e})})},s=function(v,S,t){fetch(G.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:v,hourRemaining:S})}).then(function(){t()})},i=function(v,S,t){fetch(G.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:v,planHours:S})}).then(function(){t()})},u=function(v,S,t){fetch(G.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:v,dateToFinish:S})}).then(function(){t()})},r=function(v,S,t){fetch(G.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:v,editFrom:S})}).then(function(){t()})},l=function(v,S,t){fetch(G.appUrl+"/api/tickets",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:v,editTo:S})}).then(function(){t()})};return{updateMilestoneDates:n,updateRemainingHours:s,updatePlannedHours:i,updateDueDates:u,updateEditFromDates:r,updateEditToDates:l}}();leantime.dashboardController=function(){var n={};leantime.theme=="dark"?n={red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(56, 56, 56)"}:n={red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"};var s=function(){var t=moment().startOf("week").add(5,"days"),e=document.querySelector("#dateToFinish");e&&(e.value=t.format("YYYY-MM-DD"))},i=function(t,e,o){var a={type:"doughnut",data:{datasets:[{data:[e,o],backgroundColor:[leantime.dashboardController.chartColors.green,leantime.dashboardController.chartColors.grey],label:leantime.i18n.__("label.project_done")}],labels:[e+"% Done",o+"% Open"]},options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:""}},animation:{animateScale:!0,animateRotate:!0}}},m=document.getElementById(t).getContext("2d");new Chart(m,a)},u=function(t,e,o){moment.locale(leantime.i18n.__("language.code"));var a={type:"line",data:{labels:t,datasets:[{label:leantime.i18n.__("label.ideal"),backgroundColor:leantime.dashboardController.chartColors.blue,borderColor:leantime.dashboardController.chartColors.blue,data:e,fill:!1,lineTension:0},{label:"Actual",backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:o,fill:!1,lineTension:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},plugins:{legend:{position:"bottom"},title:{display:!1,text:"Line Chart"},tooltips:{mode:"index",intersect:!1}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0}}}}},m=document.getElementById("sprintBurndown").getContext("2d");return _burndownChart=new Chart(m,a),_burndownChart},r=function(t,e,o,a,m){var b=document.getElementById(t);b&&b.addEventListener("click",function(h){m.data.datasets[0].data=o,m.data.datasets[1].data=a,m.options.scales.y.title.text=e,document.querySelectorAll(".chartButtons").forEach(function(x){x.classList.remove("active")}),b.classList.add("active"),m.update()})},l=function(t,e){moment.locale(leantime.i18n.__("language.code"));var o={type:"line",data:{labels:t,datasets:[{label:leantime.i18n.__("label.done_todos"),backgroundColor:leantime.dashboardController.chartColors.green,borderColor:leantime.dashboardController.chartColors.green,data:e.done.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.progress_todos"),backgroundColor:leantime.dashboardController.chartColors.yellow,borderColor:leantime.dashboardController.chartColors.yellow,data:e.progress.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.new_todos"),backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:e.open.data,fill:!0,lineTension:0,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},elements:{point:{pointStyle:"line",radius:"0"}},plugins:{tooltips:{mode:"index",intersect:!1},legend:{position:"bottom"},title:{display:!1,text:"Line Chart"}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0},stacked:!0}}}},a=document.getElementById("backlogBurndown").getContext("2d");return _burndownChart=new Chart(a,o),_burndownChart},v=function(t,e,o,a){var m=document.getElementById(t);m&&m.addEventListener("click",function(b){a.data.datasets[0].data=e.done.data,a.data.datasets[1].data=e.progress.data,a.data.datasets[2].data=e.open.data,a.options.scales.y.title.text=o,document.querySelectorAll(".backlogChartButtons").forEach(function(h){h.classList.remove("active")}),m.classList.add("active"),a.update()})},S=function(){document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".duedates").forEach(function(t){leantime.dateController.initDatePicker(t,function(e){var o=e;o==""&&(this.value=leantime.i18n.__("text.anytime"));var a=moment(o,leantime.i18n.__("language.momentJSDate")).format("YYYY-MM-DD HH:mm:ss"),m=this.getAttribute("data-id"),b=a;leantime.ticketsRepository.updateDueDates(m,b,function(){typeof jQuery<"u"&&jQuery.growl&&jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated")})})})})})};return{chartColors:n,initBurndown:u,initChartButtonClick:r,initBacklogBurndown:l,initBacklogChartButtonClick:v,initProgressChart:i,prepareHiddenDueDate:s,initDueDateTimePickers:S}}();leantime.usersController=function(){var n=null,s=function(t){if(i(),t.files&&t.files[0]){var e=new FileReader,o=document.querySelector("#profileImg");e.onload=function(a){n=new Croppie(o,{enableExif:!0,viewport:{width:175,height:175,type:"circle"},boundary:{width:200,height:200}}),n.bind({url:a.currentTarget.result});var m=document.querySelector("#previousImage");m&&(m.style.display="none")},e.readAsDataURL(t.files[0])}},i=function(){n&&(n.destroy(),n=null);var t=document.querySelector("#previousImage");t&&(t.style.display="")},u=function(){var t=document.querySelector("#save-picture");t&&t.classList.add("running");var e=document.querySelector("#profileImg");e&&e.setAttribute("src",leantime.appUrl+"/images/loaders/loader28.gif"),n&&n.result({type:"blob",circle:!0}).then(function(o){leantime.usersService.saveUserPhoto(o)})},r=function(){document.addEventListener("DOMContentLoaded",function(){jQuery("#allUsersTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})})},l=function(){var t={sizes:{minW:400,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(e){e.style.display=""}),jQuery(".userImportModal").nyroModal(t)}}};jQuery(".userImportModal").nyroModal(t)},v=function(){var t={sizes:{minW:900,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(e){e.style.display=""}),jQuery(".userEditModal").nyroModal(t)},beforeClose:function(){location.reload()}}};jQuery(".userEditModal").nyroModal(t)},S=function(t){let e,o=document.getElementById(t),a=document.getElementById("pwStrength"),m=new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})"),b=new RegExp("((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))");function h(x){m.test(x)?(a.style.backgroundColor="#107530",a.textContent=leantime.i18n.__("label.strong")):b.test(x)?(a.style.backgroundColor="#C5850D",a.textContent=leantime.i18n.__("label.medium")):(a.style.backgroundColor="#CC6B6B",a.textContent=leantime.i18n.__("label.weak"))}o.addEventListener("input",()=>{a.style.display="block",clearTimeout(e),e=setTimeout(()=>h(o.value),500),o.value.length!==0?a.style.display!="block":a.style.display="none"})};return{readURL:s,clearCroppie:i,saveCroppie:u,initUserTable:r,_initModals:l,checkPWStrength:S,initUserEditModal:v}}();leantime.usersRepository=function(){var n=function(i){var u=new FormData;u.append("file",i),fetch(leantime.appUrl+"/api/users",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"},body:u}).then(function(r){var l=document.querySelector("#save-picture");l&&l.classList.remove("running"),location.reload()}).catch(function(r){console.log(r)})},s=function(i,u){fetch(leantime.appUrl+"/api/users",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({patchViewSettings:i,value:u})})};return{saveUserPhoto:n,updateUserViewSettings:s}}();leantime.usersService=function(){var n=function(s){leantime.usersRepository.saveUserPhoto(s)};return{saveUserPhoto:n}}();leantime.canvasController=function(){var n="",s=function(h){n=h},i=function(){window.addEventListener("load",function(){document.querySelectorAll(".loading").forEach(function(h){h.style.display="none"}),document.querySelectorAll(".filterBar .row-fluid").forEach(function(h){h.style.opacity="1"})})},u=function(){jQuery(".addCanvasLink").nyroModal(),document.querySelectorAll(".editCanvasLink").forEach(function(h){h.addEventListener("click",function(){jQuery("#editCanvas").modal("show")})}),document.querySelectorAll(".cloneCanvasLink").forEach(function(h){h.addEventListener("click",function(){jQuery("#cloneCanvas").modal("show")})}),document.querySelectorAll(".mergeCanvasLink").forEach(function(h){h.addEventListener("click",function(){jQuery("#mergeCanvas").modal("show")})}),document.querySelectorAll(".importCanvasLink").forEach(function(h){h.addEventListener("click",function(){jQuery("#importCanvas").modal("show")})})},r=!1,l={sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(h){h.style.display=""}),r==!0&&(r=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(l)},beforeClose:function(){location.reload()}},titleFromIframe:!0},v=function(){jQuery("."+n+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+n+"CanvasMilestone .deleteMilestone").nyroModal(l)},S=function(h){jQuery.nmManual(h,l)},t=function(h){if(h=="existing"){document.querySelectorAll("#newMilestone, #milestoneSelectors").forEach(function(L){L.style.display="none"});var x=document.getElementById("existingMilestone");x&&(x.style.display=""),v()}if(h=="new"){var C=document.getElementById("newMilestone");C&&(C.style.display=""),document.querySelectorAll("#existingMilestone, #milestoneSelectors").forEach(function(L){L.style.display="none"}),v()}if(h=="hide"){document.querySelectorAll("#newMilestone, #existingMilestone").forEach(function(L){L.style.display="none"});var k=document.getElementById("milestoneSelectors");k&&(k.style.display="")}},e=function(){r=!0},o=function(){document.body.addEventListener("click",function(h){var x=h.target.closest(".userDropdown .dropdown-menu a");if(x){var C=x.getAttribute("data-value").split("_");if(x.getAttribute("data-label"),C.length==3){var k=C[0],L=C[1];C[2],fetch(leantime.appUrl+"/api/"+n+"canvas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:k,author:L})}).then(function(){var R=document.querySelector("#userDropdownMenuLink"+k+" span.text span#userImage"+k+" img");R&&R.setAttribute("src",leantime.appUrl+"/api/users?profileImage="+L),leantime.toast.show({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})})}}})},a=function(){document.body.addEventListener("click",function(h){var x=h.target.closest(".statusDropdown .dropdown-menu a");if(x){var C=x.getAttribute("data-value").split("/"),k=x.getAttribute("data-label");if(C.length==2){var L=C[0],R=C[1],U=x.getAttribute("class");fetch(leantime.appUrl+"/api/"+n+"canvas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:L,status:R})}).then(function(){var F=document.querySelector("#statusDropdownMenuLink"+L+" span.text");F&&(F.textContent=k);var I=document.getElementById("statusDropdownMenuLink"+L);I&&(I.className=U+" dropdown-toggle f-left status "),leantime.toast.show({message:leantime.i18n.__("short_notifications.status_updated")})})}}})},m=function(){document.body.addEventListener("click",function(h){var x=h.target.closest(".relatesDropdown .dropdown-menu a");if(x){var C=x.getAttribute("data-value").split("/"),k=x.getAttribute("data-label");if(C.length==2){var L=C[0],R=C[1],U=x.getAttribute("class");fetch(leantime.appUrl+"/api/"+n+"canvas",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({id:L,relates:R})}).then(function(){var F=document.querySelector("#relatesDropdownMenuLink"+L+" span.text");F&&(F.textContent=k);var I=document.getElementById("relatesDropdownMenuLink"+L);I&&(I.className=U+" dropdown-toggle f-left relates "),leantime.toast.show({message:leantime.i18n.__("short_notifications.relates_updated")})})}}})},b=function(h,x){x=x||{};var C=h,k=!1,L=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(B){B.style.display=""}),k&&(k=!1,location.reload())},afterShowCont:function(){window.htmx.process("#global-modal-content"),jQuery("."+C+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+C+"CanvasMilestone .deleteMilestone").nyroModal(L())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},R=function(){jQuery("."+C+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+C+"CanvasMilestone .deleteMilestone").nyroModal(L())},U;x.rowSelectors&&x.rowSelectors.length>0?U=function(){x.rowSelectors.forEach(function(B){var J=0;document.querySelectorAll("#"+B+" div.contentInner").forEach(function(z){z.offsetHeight>J&&(J=z.offsetHeight+35)}),document.querySelectorAll("#"+B+" .column .contentInner").forEach(function(z){z.style.height=J+"px"})})}:x.nbRows&&x.nbRows>0?U=function(){var B=x.nbRows,J=["firstRow","secondRow","thirdRow","fourthRow"],z=document.documentElement.offsetHeight-320-20*B;B===2&&(z-=25);for(var K=0;K<B&&K<J.length;K++){var V="#"+J[K],te=z/B;B>=3&&(te=z*.333),document.querySelectorAll(V+" div.contentInner").forEach(function(ae){ae.offsetHeight>te&&(te=ae.offsetHeight+50)}),document.querySelectorAll(V+" .column .contentInner").forEach(function(ae){ae.style.height=te+"px"})}}:U=function(){};var F={setCloseModal:function(){k=!0},toggleMilestoneSelectors:function(B){if(B=="existing"){document.querySelectorAll("#newMilestone, #milestoneSelectors").forEach(function(V){V.style.display="none"});var J=document.getElementById("existingMilestone");J&&(J.style.display=""),R()}if(B=="new"){var z=document.getElementById("newMilestone");z&&(z.style.display=""),document.querySelectorAll("#existingMilestone, #milestoneSelectors").forEach(function(V){V.style.display="none"}),R()}if(B=="hide"){document.querySelectorAll("#newMilestone, #existingMilestone").forEach(function(V){V.style.display="none"});var K=document.getElementById("milestoneSelectors");K&&(K.style.display="")}},openModalManually:function(B){jQuery.nmManual(B,L)},initUserDropdown:o,initStatusDropdown:a,initRelatesDropdown:m,setRowHeights:U};if(x.extras)for(var I in x.extras)x.extras.hasOwnProperty(I)&&(F[I]=x.extras[I]);return F};return{setCanvasName:s,initFilterBar:i,initCanvasLinks:u,initUserDropdown:o,initStatusDropdown:a,initRelatesDropdown:m,setCloseModal:e,toggleMilestoneSelectors:t,openModalManually:S,createController:b}}();leantime.reactionsController=function(){return{addReactions:function(i,u,r,l){fetch(leantime.appUrl+"/api/reactions",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"add",module:i,moduleId:u,reaction:r})}).then(function(){l()})},removeReaction:function(i,u,r,l){fetch(leantime.appUrl+"/api/reactions",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"remove",module:i,moduleId:u,reaction:r})}).then(function(){l()})}}}();leantime.helperController=function(){var n=function(o,a){a?leantime.helperRepository.updateUserModalSettings(o,!0):leantime.helperRepository.updateUserModalSettings(o,!1)},s=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.tourFactory.startTour("myWorkDashboard")},i=function(){leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal()},u=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("projectDashboard"),leantime.tourFactory.startTour("projectDashboard")},r=function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("kanbanBoard"),leantime.tourFactory.startTour("kanbanBoard")},l=function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("milestoneView"),leantime.tourFactory.startTour("milestoneView")},v=function(){return leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("goals"),leantime.tourFactory.startTour("goalsView")},S=function(){document.addEventListener("DOMContentLoaded",function(){var o={sizes:{minW:700,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){document.querySelectorAll(".showDialogOnLoad").forEach(function(a){a.style.display=""}),jQuery(".onboardingModal").nyroModal(o)},beforeClose:function(){location.reload()}}};jQuery(".onboardingModal").nyroModal(o),jQuery.nmManual(leantime.appUrl+"/help/firstLogin",o)})},t=function(o,a,m){document.addEventListener("DOMContentLoaded",function(){jQuery.nmManual(leantime.appUrl+"/help/showOnboardingDialog?module="+o,{sizes:{minW:a||200,minH:m||500},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){leantime.replaceSVGColors()},afterShowCont:function(){htmx.process("#global-modal-content")}}})})},e=function(o){leantime.helperRepository.updateUserModalSettings(o),leantime.modals.setCustomModalCallback(function(){}),leantime.modals.closeModal()};return{showHelperModal:t,hideAndKeepHidden:e,setDontShowAgain:n,closeModal:i,startMyWorkDashboardTour:s,startProjectDashboardTour:u,startKanbanTour:r,startMilestoneTour:l,startGoalTour:v,firstLoginModal:S}}();var ie=ie||{};ie.helperRepository=function(){var n=function(u,r=!1){fetch(ie.appUrl+"/api/users",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({settings:u,permanent:r?1:0,patchModalSettings:1})})},s=function(){fetch(ie.appUrl+"/api/sessions",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({tourActive:1})})},i=function(){fetch(ie.appUrl+"/api/sessions",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({tourActive:0})})};return{updateUserModalSettings:n,startingTour:s,stopTour:i}}();leantime.tourFactory=function(){var n=function(l){return new Shepherd.Tour({useModalOverlay:!0,defaultStepOptions:{classes:"shepherd-theme-arrows",scrollTo:!1,cancelIcon:{enabled:!0}},tourName:l})},s=function(l){leantime.helperRepository.updateUserModalSettings(l),typeof _paq<"u"&&_paq.push(["trackEvent","Tour","Completed",l])},i=function(l){return{myWorkDashboard:[{id:"welcome-step",title:"👋 Welcome to the Dashboard Tour",text:"Let's start with a few basics to get you up to speed on the navigation and different elements inside Leantime."},{id:"top-nav-step",title:"Work Modes",text:"The top navigation shows you the current 'work mode' you're in. You can be inside a project, your personal work area, or in the company mode.",attachTo:{element:".work-modes",on:"bottom"}},{id:"menu-step",title:"Left Navigation",text:"The left navigation breaks down the current work mode and gives you access to different areas. Everything presented here is part of the currently selected work mode above.",attachTo:{element:".leftpanel",on:"right"}},{id:"my-menu",title:"My Profile Bar",text:"Here you'll find links to your account as well as notifications and latest news about Leantime.",attachTo:{element:".headmenu.pull-right",on:"bottom"}},{id:"dashboard-widgets",title:"Your Dashboard Widgets",text:"Your dashboard is broken up into various widgets showing you focused information about your work.",attachTo:{element:".primaryContent",on:"top"}},{id:"dashboard-widgets-dandd",title:"Customize Your Dashboard",text:"Widgets can be resized and moved around using the drag and drop functionality.",attachTo:{element:"#widget_wrapper_todos .grid-handler-top",on:"bottom"}},{id:"my-todo-widget",title:"My To-Dos",text:"The My To-Do widget shows you all the tasks that are currently assigned to you.",attachTo:{element:"#widget_wrapper_todos",on:"top"}},{id:"my-todo-widget2",title:"Group To-Dos",text:"You can use the dropdowns here to filter your tasks by project or group them by priority, status, project, or dates.",attachTo:{element:"#yourToDoContainer > .clear",on:"bottom"}},{id:"my-todo-widget4",title:"Sort To-Dos",text:"Each To-Do can be dragged and dropped to change its order. You can also drag and drop a task to the calendar to schedule it.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child",on:"bottom"}},{id:"my-todo-widget-timer",title:"Start the Timer",text:"When you're ready to start working on a task, just click the start timer button.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .timerContainer",on:"bottom"}},{id:"my-todo-widget-complete",title:"Complete a Task",text:"Once a task is complete, you can mark it as done by clicking the status dropdown.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .statusDropdown",on:"bottom"}},{id:"my-todo-widget-add",title:"Add More Tasks",text:"You can add more tasks by clicking the plus button in each section, or by using the 3-dot menu next to each task.",attachTo:{element:"#yourToDoContainer .fa-circle-plus",on:"bottom"}},{id:"finish",title:"Congratulations!",text:"You've completed the My Work dashboard tour. Head to <a href='"+leantime.appUrl+"/dashboard/show'>your project</a> to learn more about project management in Leantime."}],projectDashboard:[{id:"left-nav",title:"Project Menu",text:"The project menu organizes your project into different sections: <strong>Data Room</strong> - to host all your files and information, <strong>Think</strong> - to strategize, ideate and define, <strong>Make</strong> - to manage goals, milestones and tasks.",attachTo:{element:".leftmenu ul",on:"left"}},{id:"project-selector",title:"Project Selector",text:"Use the project selector to jump between projects. The left menu shows everything related to your current project.",attachTo:{element:".bigProjectSelector",on:"bottom"}},{id:"project-checklist",title:"Checklist",text:"The project checklist is a quick reference to see if your project contains all the necessary information for successful execution.",attachTo:{element:"#progressForm",on:"bottom"}},{id:"project-status",title:"Quick Status Updates",text:"You can use status updates to quickly share the progress of your project with your team using red, yellow and green colors. The status will be visible across the application.",attachTo:{element:".project-updates",on:"left"}},{id:"project-progress",title:"Progress",text:"The project progress indicator shows you how much work you have completed. It accounts for various task sizes, team velocity, and project milestones.",attachTo:{element:".project-progress",on:"left"}},{id:"latest-tasks",title:"Latest Tasks",text:"The list of latest tasks shows you the most recent tasks added to your project and can be used as a project inbox.",attachTo:{element:".latest-todos",on:"left"}},{id:"teams",title:"Team",text:"The team box shows you the members of this project.",attachTo:{element:".team-container",on:"top"}},{id:"finished",title:"Congratulations!",text:"You've completed the project dashboard tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>To-Dos</a> to learn more about the various ways to manage your tasks in Leantime."}],kanbanBoard:[{id:"kanban-overview",title:"Your Kanban Board",text:"This is your Kanban board. It helps you visualize your work and limit work-in-progress.",attachTo:{element:".kanban-board-wrapper",on:"top"}},{id:"kanban-columns",title:"Work Flow",text:"Tasks move from left to right as they progress. Drag and drop cards to update their status.",attachTo:{element:".column",on:"right"}},{id:"kanban-columns2",title:"Flexible Columns",text:"Using the 3-dot menu, you can add or remove columns and rename them.",attachTo:{element:".column .widgettitle .inlineDropDownContainer",on:"right"}},{id:"kanban-filter",title:"Filter Tasks",text:"You can filter your tasks by various fields like priority, status, project, or dates.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"kanban-group",title:"Swimlanes",text:"Additionally, you can group your tasks to create Kanban swimlanes. This helps you visualize your work by team members, priority, or milestones.",attachTo:{element:".filterWrapper > .btn-group",on:"bottom"}},{id:"kanban-sprints",title:"Sprints",text:"If you manage your work in sprints, you can use the dropdown here to select, create, and update sprints.",attachTo:{element:".pageheader .dropdown",on:"bottom"}},{id:"kanban-congrats",title:"Congratulations!",text:"This concludes the Kanban tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Milestones</a> to learn how to create and manage milestones in Leantime."}],milestoneView:[{id:"milestone-overview",title:"Milestones",text:"Milestones help you track major outcomes and project phases.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-drag",title:"Drag & Sort",text:"Each bar represents one milestone. You can drag them along the timeline, reorder, and resize them. Everything you do on this screen updates the timing of your milestones.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-filter",title:"Filter",text:"You can filter your milestones and also view tasks that are part of them.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"milestone-timeframes",title:"Timeframes",text:"You can change the timeframe of the timeline view to see more of the year or dive deep into a daily breakdown.",attachTo:{element:".col-md-4 .pull-right",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the milestone tour. Head to the <a href='"+leantime.appUrl+"/goalcanvas/dashboard'>Goals</a> to learn how to create and manage goals in Leantime."}],goalsView:[{id:"goals-overview",title:"Goals",text:"Goals help you track measurable impact on your projects."},{id:"goal-parts",title:"Objectives & Metrics",text:"Each goal is made up of an Objective (what you're trying to accomplish) and a Metric (how you'll measure it).",attachTo:{element:".ticketBox",on:"top"}},{id:"goal-progress",title:"Goal Progress",text:"As you update your goal metrics, the progress bar will show you how far along you are.",attachTo:{element:".ticketBox > .row > .col-md-12 .progress",on:"bottom"}},{id:"milestone-connection",title:"Milestones & Goals",text:"You can connect goals to milestones to track the task-level progress of your goals. This helps identify gaps in your project plan.",attachTo:{element:".ticketBox.fixed",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the goals tour. Milestones, Goals, and To-Dos are the basic building blocks in Leantime. Use them to break down your work into manageable chunks. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Kanban Board</a> to review your tasks."}]}[l]||[]},u=function(l){const v=n(l),S=i(l);return S.forEach((t,e)=>{const o=e===0,a=e===S.length-1,m=[];o||m.push({text:leantime.i18n.__("tour.back"),classes:"shepherd-button-secondary",action:v.back}),a?m.push({text:leantime.i18n.__("tour.finish"),action:function(){s(l),confetti(),v.complete()}}):m.push({text:leantime.i18n.__("tour.next"),action:v.next}),a||m.unshift({text:leantime.i18n.__("tour.cancel"),classes:"shepherd-button-secondary",action:v.cancel}),v.addStep({...t,buttons:m})}),v.on("complete",function(){s(l)}),v},r=function(l){const v=u(l);return v.start(),v};return{createTour:n,buildTour:u,startTour:r,getTourDefinition:i}}();leantime.confettiHelper=function(){var n=function(i){const r={...{particleCount:100,spread:70,origin:{y:.6},disableForReducedMotion:!0},...i};typeof confetti=="function"?confetti(r):console.error("Confetti library not loaded")},s=function(){n({particleCount:150,spread:90,origin:{y:.8},colors:["#26a69a","#00bcd4","#4caf50","#8bc34a","#cddc39"]}),setTimeout(function(){n({particleCount:80,spread:120,origin:{y:.7},colors:["#ff9800","#ff5722","#f44336","#e91e63","#9c27b0"]})},500)};return{triggerConfetti:n,celebrateSuccess:s}}();leantime.firstTaskController=function(){var n=function(){var s=document.querySelector("#firstTaskOnboarding");if(s){s.addEventListener("submit",function(u){u.preventDefault();var r=document.querySelector("#firstTask"),l=r.value.trim();if(l==="")return r.classList.add("error"),!1;r.classList.remove("error"),leantime.confettiHelper.celebrateSuccess(),setTimeout(function(){s.submit()},1500)});var i=document.querySelector("#firstTask");i&&i.addEventListener("input",function(){this.classList.remove("error")})}};return{initFirstTaskForm:n}}();document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){leantime.firstTaskController.initFirstTaskForm()}):leantime.firstTaskController.initFirstTaskForm();leantime.menuController=function(){var n=function(l){if(l!==""){var v=document.querySelector("#submenu-"+l),S=document.querySelector("#submenu-icon-"+l),t="";v&&(v.style.display==="none"||getComputedStyle(v).display==="none"?(v.style.display="block",S&&(S.classList.remove("fa-angle-right"),S.classList.add("fa-angle-down")),t="open"):(v.style.display="none",S&&(S.classList.remove("fa-angle-down"),S.classList.add("fa-angle-right")),t="closed"),fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({submenu:l,state:t})}))}},s=function(){document.querySelectorAll(".project-select").forEach(function(t){new SlimSelect({select:t})}),document.addEventListener("click",function(t){t.target.closest(".projectselector.dropdown-menu")&&t.stopPropagation()});let l=localStorage.getItem("currentMenuTab");if(typeof l>"u")activeTabIndex=0;else{var v=document.querySelector(".projectSelectorTabs");if(v){var S=v.querySelector('a[href="#'+l+'"]');S&&S.parentElement?activeTabIndex=Array.from(S.parentElement.parentElement.children).indexOf(S.parentElement):activeTabIndex=0}else activeTabIndex=0}jQuery(".projectSelectorTabs").tabs({create:function(t,e){},activate:function(t,e){localStorage.setItem("currentMenuTab",e.newPanel[0].id)},load:function(){},enable:function(){},active:activeTabIndex})},i=function(){if(window.innerWidth<576){var l=document.querySelector(".mainwrapper");l&&(l.classList.remove("menuopen"),l.classList.add("menuclosed"))}var v=document.querySelector(".barmenu");v&&v.addEventListener("click",function(){var S=document.querySelector(".mainwrapper");S&&(S.classList.contains("menuopen")?(S.classList.remove("menuopen"),S.classList.add("menuclosed"),leantime.menuRepository.updateUserMenuSettings("closed")):(S.classList.remove("menuclosed"),S.classList.add("menuopen"),leantime.menuRepository.updateUserMenuSettings("open")))})},u=function(l,v="",S){var t=document.querySelector("#"+S+"-toggler-"+l),e=document.querySelector("#"+S+"-projectSelectorlist-group-"+l);if(t)if(v==="closed"?(t.classList.remove("closed","open"),t.classList.add("open")):v==="open"&&(t.classList.remove("open","closed"),t.classList.add("closed")),t.classList.contains("open")){t.classList.remove("open"),t.classList.add("closed");var o=t.querySelector("i");o&&(o.classList.remove("fa-angle-down"),o.classList.add("fa-angle-right")),e&&(e.classList.add("closed"),e.classList.remove("open")),r(l,"closed",S)}else{t.classList.remove("closed"),t.classList.add("open");var o=t.querySelector("i");o&&(o.classList.remove("fa-angle-right"),o.classList.add("fa-angle-down")),e&&(e.classList.add("open"),e.classList.remove("closed")),r(l,"open",S)}};let r=function(l,v,S){fetch(leantime.appUrl+"/api/submenu",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({submenu:S+"-projectSelectorlist-group-"+l,state:v})})};return{toggleSubmenu:n,initProjectSelector:s,initLeftMenuHamburgerButton:i,updateGroupDropdownSetting:r,toggleProjectDropDownList:u}}();var he=he||{};he.menuRepository=function(){var n=function(s){fetch(he.appUrl+"/api/sessions",{method:"PATCH",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({menuState:s})})};return{updateUserMenuSettings:n}}();leantime.settingController=function(){var n,s=function(r){if(i(),r.files&&r.files[0]){var l=new FileReader,v=jQuery("#logoImg");l.onload=function(S){n=v.croppie({enableExif:!0,enforceBoundary:!1,viewport:{width:220,height:40,type:"square"},boundary:{width:400,height:200}}),n.croppie("bind",{url:S.currentTarget.result});var t=document.querySelector("#previousImage");t&&(t.style.display="none")},l.readAsDataURL(r.files[0])}},i=function(){jQuery("#logoImg").croppie("destroy");var r=document.querySelector("#previousImage");r&&(r.style.display="")},u=function(){var r=document.querySelector("#save-logo");r&&r.classList.add("running");var l=document.querySelector("#logoImg");l&&l.setAttribute("src",leantime.appUrl+"/images/loaders/loader28.gif"),n.croppie("result",{type:"blob",circle:!1,size:"original",quality:1}).then(function(v){leantime.settingService.saveLogo(v)})};return{readURL:s,clearCroppie:i,saveCroppie:u}}();leantime.settingRepository=function(){var n=function(s){var i=new FormData;i.append("file",s),fetch(leantime.appUrl+"/api/setting",{method:"POST",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"},body:i}).then(function(u){var r=document.querySelector("#save-logo");r&&r.classList.remove("running"),location.reload()}).catch(function(u){console.log(u)})};return{saveLogo:n}}();leantime.settingService=function(){var n=function(s){leantime.settingRepository.saveLogo(s)};return{saveLogo:n}}();leantime.widgetController=function(){var n=[],s=function(t,e){let o=t.gridX||0,a=t.gridY||0,m=t.gridWidth||2,b=t.gridHeight||2;if(e.willItFit({x:o,y:a,width:m,height:b}))return{x:o,y:a};let h=Math.max(...e.engine.nodes.map(x=>x.y+x.h),0);for(let x=0;x<=h+1;x++)for(let C=0;C<=12-m;C++)if(e.willItFit({newX:C,newY:x,width:m,height:b}))return{x:C,y:x};return{x:0,y:h+1}};GridStack.renderCB=function(t,e){e.content&&typeof DOMPurify<"u"&&(t.innerHTML=DOMPurify.sanitize(e.content))};var i=function(){n=GridStack.init({margin:"0px 15px 15px 0px",handle:".grid-handler-top",minRow:2,cellHeight:"30px",float:!0,draggable:{handle:".grid-handler-top",appendTo:"body"},lazyLoad:!1,columnOpts:{breakpointForWindow:!0,breakpoints:[{w:700,c:1},{w:950,c:6}]}}),n.on("dragstop",function(t,e){u()}),n.on("resizestop",function(t,e){u()}),document.querySelectorAll(".grid-stack-item").forEach(function(t){var e=t.querySelector(".removeWidget");e&&e.addEventListener("click",function(){r(this.closest(".grid-stack-item"))});var o=t.querySelector(".fitContent");o&&o.addEventListener("click",function(){l(this.closest(".grid-stack-item"))})}),document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector("#gridBoard");t&&(t.style.opacity="1")})},u=function(){let t=n.save();t.sort((a,m)=>a.y===m.y?a.x-m.x:a.y-m.y);let e=null;arguments.length>0&&arguments[0].action==="toggleWidget"&&(e={widgetId:arguments[0].widgetId,visible:arguments[0].visible}),t.forEach(function(a){var m=document.createElement("div");m.innerHTML=a.content;var b=m.querySelector("[hx-get]");a.id=b?b.getAttribute("id"):null,a.widgetUrl=b?b.getAttribute("hx-get"):null,a.widgetTrigger=b?b.getAttribute("hx-trigger"):null,a.x==null&&(a.x=0),a.gridX=a.x,a.y==null&&(a.y=0),a.gridY=a.y,a.w==null&&(a.w=1),a.gridWidth=a.w,a.h==null&&(a.h=1),a.gridHeight=a.h,a.content=""});var o=new URLSearchParams;o.append("action","saveGrid"),t.forEach(function(a,m){Object.keys(a).forEach(function(b){var h=a[b];h!=null&&o.append("data["+m+"]["+b+"]",h)})}),e&&Object.keys(e).forEach(function(a){o.append("visibilityData["+a+"]",e[a])}),fetch(leantime.appUrl+"/widgets/widgetManager",{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:o})},r=function(t){t.remove(),n.removeWidget(t,!0),u()},l=function(t){document.querySelector(".grid-stack").gridstack.resizeToContent(t,!1),u()},v=function(t,e,o){let a=document.querySelector(".grid-stack").gridstack,m=e.checked;if(s(o,a),m){const h=document.createElement("div");h.className="grid-stack-item";const x=document.createElement("div");x.className=`grid-stack-item-content tw:p-none ${o.widgetBackground=="default"?"maincontentinner":o.background}`,x.innerHTML=S(o),h.appendChild(x),a.el.appendChild(h),a.makeWidget(h,{x:o.gridX||0,y:o.gridY||50,w:o.gridWidth||2,h:o.gridHeight||2}),htmx.process(h),u({action:"toggleWidget",widgetId:t,visible:m})}else{var b=document.getElementById(t);b&&r(b.closest(".grid-stack-item"))}},S=function(t){return'<div class="widgetInner">        <div class="'+(t.widgetBackground=="default"?"tw:pb-l":"")+`">
            <div class="stickyHeader" style="padding:15px; height:50px;  width:100%;">
               <div class="grid-handler-top tw:h-[40px] tw:cursor-grab tw:float-left tw:mr-sm">
                    <i class="fa-solid fa-grip-vertical"></i>
                </div>
           `+(t.name!=""?'<h5 class="subtitle tw:pb-m tw:float-left tw:mr-sm">'+t.name+"</h5>":"")+`
            <div class="inlineDropDownContainer tw:float-right">
                <a href="javascript:void(0);" class="dropdown-toggle ticketDropDown editHeadline" data-toggle="dropdown">
                    <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="javascript:void(0)" class="fitContent"><i class="fa-solid fa-up-right-and-down-left-from-center"></i> Resize to fit content</a></li>
                        <li><a href="javascript:void(0)" class="removeWidget"><i class="fa fa-eye-slash"></i> Hide</a></li>
                </ul>
            </div>

        </div>
 <div class="widgetContent tw:px-l">
             <div hx-get="`+t.widgetUrl+'" hx-trigger="'+t.widgetTrigger+'" id="'+t.id+`"></div>
        </div>
       </div>
        <div class="clear"></div>
    </div>
`};return{resizeWidget:l,removeWidget:r,saveGrid:u,initGrid:i,toggleWidgetVisibility:v}}();const at=Object.assign({"../../app/Domain/Calendar/Js/calendarController.js":()=>H(()=>import("./calendarController-DwSRQU4Z.js"),[]),"../../app/Domain/Clients/Js/clientsController.js":()=>H(()=>import("./clientsController-rJN37dRD.js"),[]),"../../app/Domain/Cpcanvas/Js/cpCanvasController.js":()=>H(()=>import("./cpCanvasController-Bk9nlIMp.js"),[]),"../../app/Domain/Dbmcanvas/Js/dbmCanvasController.js":()=>H(()=>import("./dbmCanvasController-BfisiC0W.js"),[]),"../../app/Domain/Eacanvas/Js/eaCanvasController.js":()=>H(()=>import("./eaCanvasController-BBKpXTvo.js"),[]),"../../app/Domain/Emcanvas/Js/emCanvasController.js":()=>H(()=>import("./emCanvasController-BeXTfudd.js"),[]),"../../app/Domain/Gamecenter/Js/game-snake.js":()=>H(()=>import("./game-snake-CiPrYQqj.js"),[]),"../../app/Domain/Goalcanvas/Js/goalCanvasController.js":()=>H(()=>import("./goalCanvasController-Ln3cYq9R.js"),[]),"../../app/Domain/Ideas/Js/ideasController.js":()=>H(()=>import("./ideasController-B5tm3ndV.js"),[]),"../../app/Domain/Insightscanvas/Js/insightsCanvasController.js":()=>H(()=>import("./insightsCanvasController-D4xHaPBV.js"),[]),"../../app/Domain/Lbmcanvas/Js/lbmCanvasController.js":()=>H(()=>import("./lbmCanvasController-DWCLahfG.js"),[]),"../../app/Domain/Leancanvas/Js/leanCanvasController.js":()=>H(()=>import("./leanCanvasController-B9aMTJng.js"),[]),"../../app/Domain/Minempathycanvas/Js/risksCanvasController.js":()=>H(()=>import("./risksCanvasController-D76y0F1o.js"),[]),"../../app/Domain/Obmcanvas/Js/obmCanvasController.js":()=>H(()=>import("./obmCanvasController-D3ulNdVa.js"),[]),"../../app/Domain/Projects/Js/projectsController.js":()=>H(()=>import("./projectsController-BY15Utrs.js"),[]),"../../app/Domain/Retroscanvas/Js/retroCanvasController.js":()=>H(()=>import("./retroCanvasController-Bdzr-tck.js"),[]),"../../app/Domain/Riskscanvas/Js/risksCanvasController.js":()=>H(()=>import("./risksCanvasController-yt1qFgdB.js"),[]),"../../app/Domain/Sbcanvas/Js/sbCanvasController.js":()=>H(()=>import("./sbCanvasController-FLgGdgM2.js"),[]),"../../app/Domain/Smcanvas/Js/smCanvasController.js":()=>H(()=>import("./smCanvasController-DjnDEowx.js"),[]),"../../app/Domain/Sqcanvas/Js/sqCanvasController.js":()=>H(()=>import("./sqCanvasController-C8AMx8k5.js"),[]),"../../app/Domain/Swotcanvas/Js/swotCanvasController.js":()=>H(()=>import("./swotCanvasController-DM1_M8ZL.js"),[]),"../../app/Domain/Tickets/Js/kanbanController.js":()=>H(()=>import("./kanbanController-BaewnVvF.js"),[]),"../../app/Domain/Timesheets/Js/timesheetsController.js":()=>H(()=>import("./timesheetsController-BQyLQw80.js"),[]),"../../app/Domain/Valuecanvas/Js/valueCanvasController.js":()=>H(()=>import("./valueCanvasController-7Q7wZw1F.js"),[]),"../../app/Domain/Wiki/Js/wikiController.js":()=>H(()=>import("./wikiController-BEslrRep.js"),[])}),Ie=new Set;function ve(n){if(!n||Ie.has(n))return Promise.resolve();Ie.add(n);const s=[];for(const[i,u]of Object.entries(at)){const r=i.match(/Domain\/([^/]+)\//);r&&r[1].toLowerCase()===n&&s.push(u())}return Promise.all(s)}function ye(n){var s;try{return((s=new URL(n,window.location.origin).pathname.replace(/^\/hx\//,"/").split("/").filter(Boolean)[0])==null?void 0:s.toLowerCase())||""}catch{return""}}var Oe,Ne,Xe;ve((Xe=(Ne=(Oe=document.body)==null?void 0:Oe.dataset)==null?void 0:Ne.module)==null?void 0:Xe.toLowerCase());document.addEventListener("htmx:configRequest",function(n){if(!n.detail.boosted)return;const s=ye(n.detail.path||"");s&&ve(s)});document.addEventListener("htmx:pushedIntoHistory",function(){const n=ye(window.location.pathname);n&&(document.body.dataset.module=n)});document.addEventListener("htmx:historyRestore",function(){const n=ye(window.location.pathname);n&&(document.body.dataset.module=n,ve(n))});
