!function(t){var e,n,i="0.4.2",r="hasOwnProperty",s=/[\.\/]/,a=/\s*,\s*/,o=function(t,e){return t-e},h={n:{}},l=function(){for(var t=0,e=this.length;e>t;t++)if(void 0!==this[t])return this[t]},u=function(){for(var t=this.length;--t;)if(void 0!==this[t])return this[t]},d=function(t,i){t=String(t);var r,s=n,a=Array.prototype.slice.call(arguments,2),h=d.listeners(t),p=0,c=[],f={},g=[],_=e;g.firstDefined=l,g.lastDefined=u,e=t,n=0;for(var m=0,y=h.length;y>m;m++)"zIndex"in h[m]&&(c.push(h[m].zIndex),h[m].zIndex<0&&(f[h[m].zIndex]=h[m]));for(c.sort(o);c[p]<0;)if(r=f[c[p++]],g.push(r.apply(i,a)),n)return n=s,g;for(m=0;y>m;m++)if("zIndex"in(r=h[m]))if(r.zIndex==c[p]){if(g.push(r.apply(i,a)),n)break;do{if((r=f[c[++p]])&&g.push(r.apply(i,a)),n)break}while(r)}else f[r.zIndex]=r;else if(g.push(r.apply(i,a)),n)break;return n=s,e=_,g};d._events=h,d.listeners=function(t){var e,n,i,r,a,o,l,u,d=t.split(s),p=h,c=[p],f=[];for(r=0,a=d.length;a>r;r++){for(u=[],o=0,l=c.length;l>o;o++)for(n=[(p=c[o].n)[d[r]],p["*"]],i=2;i--;)(e=n[i])&&(u.push(e),f=f.concat(e.f||[]));c=u}return f},d.on=function(t,e){if(t=String(t),"function"!=typeof e)return function(){};for(var n=t.split(a),i=0,r=n.length;r>i;i++)!function(t){for(var n,i=t.split(s),r=h,a=0,o=i.length;o>a;a++)r=(r=r.n).hasOwnProperty(i[a])&&r[i[a]]||(r[i[a]]={n:{}});for(r.f=r.f||[],a=0,o=r.f.length;o>a;a++)if(r.f[a]==e){n=!0;break}!n&&r.f.push(e)}(n[i]);return function(t){+t==+t&&(e.zIndex=+t)}},d.f=function(t){var e=[].slice.call(arguments,1);return function(){d.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},d.stop=function(){n=1},d.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},d.nts=function(){return e.split(s)},d.off=d.unbind=function(t,e){if(t){var n=t.split(a);if(n.length>1)for(var i=0,o=n.length;o>i;i++)d.off(n[i],e);else{n=t.split(s);var l,u,p,c,f,g=[h];for(i=0,o=n.length;o>i;i++)for(c=0;c<g.length;c+=p.length-2){if(p=[c,1],l=g[c].n,"*"!=n[i])l[n[i]]&&p.push(l[n[i]]);else for(u in l)l[r](u)&&p.push(l[u]);g.splice.apply(g,p)}for(i=0,o=g.length;o>i;i++)for(l=g[i];l.n;){if(e){if(l.f){for(c=0,f=l.f.length;f>c;c++)if(l.f[c]==e){l.f.splice(c,1);break}!l.f.length&&delete l.f}for(u in l.n)if(l.n[r](u)&&l.n[u].f){var _=l.n[u].f;for(c=0,f=_.length;f>c;c++)if(_[c]==e){_.splice(c,1);break}!_.length&&delete l.n[u].f}}else for(u in delete l.f,l.n)l.n[r](u)&&l.n[u].f&&delete l.n[u].f;l=l.n}}}else d._events=h={n:{}}},d.once=function(t,e){var n=function(){return d.unbind(t,n),e.apply(this,arguments)};return d.on(t,n)},d.version=i,d.toString=function(){return"You are running Eve "+i},"undefined"!=typeof module&&module.exports?module.exports=d:"function"==typeof define&&define.amd?define("eve",[],(function(){return d})):t.eve=d}(this),function(t,e){if("function"==typeof define&&define.amd)define(["eve"],(function(n){return e(t,n)}));else if("undefined"!=typeof exports){var n=require("eve");module.exports=e(t,n)}else e(t,t.eve)}(window||this,(function(t,e){var n=function(e){var n={},i=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,16)},r=Array.isArray||function(t){return t instanceof Array||"[object Array]"==Object.prototype.toString.call(t)},s=0,a="M"+(+new Date).toString(36),o=function(){return a+(s++).toString(36)},h=Date.now||function(){return+new Date},l=function(t){var e=this;if(null==t)return e.s;var n=e.s-t;e.b+=e.dur*n,e.B+=e.dur*n,e.s=t},u=function(t){return null==t?this.spd:void(this.spd=t)},d=function(t){var e=this;return null==t?e.dur:(e.s=e.s*t/e.dur,void(e.dur=t))},p=function(){var t=this;delete n[t.id],t.update(),e("mina.stop."+t.id,t)},c=function(){var t=this;t.pdif||(delete n[t.id],t.update(),t.pdif=t.get()-t.b)},f=function(){var t=this;t.pdif&&(t.b=t.get()-t.pdif,delete t.pdif,n[t.id]=t)},g=function(){var t,e=this;if(r(e.start)){t=[];for(var n=0,i=e.start.length;i>n;n++)t[n]=+e.start[n]+(e.end[n]-e.start[n])*e.easing(e.s)}else t=+e.start+(e.end-e.start)*e.easing(e.s);e.set(t)},_=function(){var t=0;for(var r in n)if(n.hasOwnProperty(r)){var s=n[r],a=s.get();t++,s.s=(a-s.b)/(s.dur/s.spd),s.s>=1&&(delete n[r],s.s=1,t--,function(t){setTimeout((function(){e("mina.finish."+t.id,t)}))}(s)),s.update()}t&&i(_)},m=function(t,e,r,s,a,h,y){var v={id:o(),start:t,end:e,b:r,s:0,dur:s-r,spd:1,get:a,set:h,easing:y||m.linear,status:l,speed:u,duration:d,stop:p,pause:c,resume:f,update:g};n[v.id]=v;var x,b=0;for(x in n)if(n.hasOwnProperty(x)&&2==++b)break;return 1==b&&i(_),v};return m.time=h,m.getById=function(t){return n[t]||null},m.linear=function(t){return t},m.easeout=function(t){return Math.pow(t,1.7)},m.easein=function(t){return Math.pow(t,.48)},m.easeinout=function(t){if(1==t)return 1;if(0==t)return 0;var e=.48-t/1.04,n=Math.sqrt(.1734+e*e),i=n-e,r=-n-e,s=Math.pow(Math.abs(i),1/3)*(0>i?-1:1)+Math.pow(Math.abs(r),1/3)*(0>r?-1:1)+.5;return 3*(1-s)*s*s+s*s*s},m.backin=function(t){if(1==t)return 1;var e=1.70158;return t*t*((e+1)*t-e)},m.backout=function(t){if(0==t)return 0;var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},m.elastic=function(t){return t==!!t?t:Math.pow(2,-10*t)*Math.sin(2*(t-.075)*Math.PI/.3)+1},m.bounce=function(t){var e,n=7.5625,i=2.75;return 1/i>t?e=n*t*t:2/i>t?e=n*(t-=1.5/i)*t+.75:2.5/i>t?e=n*(t-=2.25/i)*t+.9375:e=n*(t-=2.625/i)*t+.984375,e},t.mina=m,m}(void 0===e?function(){}:e),i=function(t){function n(t,e){if(t){if(t.nodeType)return c(t);if(r(t,"array")&&n.set)return n.set.apply(n,t);if(t instanceof l)return t;if(null==e)return c(t=_.doc.querySelector(String(t)))}return new p(t=null==t?"100%":t,e=null==e?"100%":e)}function i(t,e){if(e){if("#text"==t&&(t=_.doc.createTextNode(e.text||e["#text"]||"")),"#comment"==t&&(t=_.doc.createComment(e.text||e["#text"]||"")),"string"==typeof t&&(t=i(t)),"string"==typeof e)return 1==t.nodeType?"xlink:"==e.substring(0,6)?t.getAttributeNS(q,e.substring(6)):"xml:"==e.substring(0,4)?t.getAttributeNS(H,e.substring(4)):t.getAttribute(e):"text"==e?t.nodeValue:null;if(1==t.nodeType){for(var n in e)if(e[m](n)){var r=y(e[n]);r?"xlink:"==n.substring(0,6)?t.setAttributeNS(q,n.substring(6),r):"xml:"==n.substring(0,4)?t.setAttributeNS(H,n.substring(4),r):t.setAttribute(n,r):t.removeAttribute(n)}}else"text"in e&&(t.nodeValue=e.text)}else t=_.doc.createElementNS(H,t);return t}function r(t,e){return"finite"==(e=y.prototype.toLowerCase.call(e))?isFinite(t):!("array"!=e||!(t instanceof Array||Array.isArray&&Array.isArray(t)))||("null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||$.call(t).slice(8,-1).toLowerCase()==e)}function s(t,e,n){return function i(){var r=Array.prototype.slice.call(arguments,0),s=r.join("␀"),a=i.cache=i.cache||{},o=i.count=i.count||[];return a[m](s)?(function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}(o,s),n?n(a[s]):a[s]):(o.length>=1e3&&delete a[o.shift()],o.push(s),a[s]=t.apply(e,r),n?n(a[s]):a[s])}}function a(t){return t%360*M/180}function o(t){return t.node.ownerSVGElement&&c(t.node.ownerSVGElement)||n.select("svg")}function h(t){r(t,"array")||(t=Array.prototype.slice.call(arguments,0));for(var e=0,n=0,i=this.node;this[e];)delete this[e++];for(e=0;e<t.length;e++)"set"==t[e].type?t[e].forEach((function(t){i.appendChild(t.node)})):i.appendChild(t[e].node);var s=i.childNodes;for(e=0;e<s.length;e++)this[n++]=c(s[e]);return this}function l(t){if(t.snap in j)return j[t.snap];var e;try{e=t.ownerSVGElement}catch(t){}this.node=t,e&&(this.paper=new p(e)),this.type=t.tagName||t.nodeName;var n=this.id=N(this);if(this.anims={},this._={transform:[]},t.snap=n,j[n]=this,"g"==this.type&&(this.add=h),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var i in p.prototype)p.prototype[m](i)&&(this[i]=p.prototype[i])}function u(t){this.node=t}function d(t,e){var n=i(t);return e.appendChild(n),c(n)}function p(t,e){var n,r,s,a=p.prototype;if(t&&"svg"==t.tagName){if(t.snap in j)return j[t.snap];var o=t.ownerDocument;for(var h in n=new l(t),r=t.getElementsByTagName("desc")[0],s=t.getElementsByTagName("defs")[0],r||((r=i("desc")).appendChild(o.createTextNode("Created with Snap")),n.node.appendChild(r)),s||(s=i("defs"),n.node.appendChild(s)),n.defs=s,a)a[m](h)&&(n[h]=a[h]);n.paper=n.root=n}else i((n=d("svg",_.doc.body)).node,{height:e,version:1.1,width:t,xmlns:H});return n}function c(t){return t?t instanceof l||t instanceof u?t:t.tagName&&"svg"==t.tagName.toLowerCase()?new p(t):t.tagName&&"object"==t.tagName.toLowerCase()&&"image/svg+xml"==t.type?new p(t.contentDocument.getElementsByTagName("svg")[0]):new l(t):t}function f(t,e){for(var n=0,i=t.length;i>n;n++){var r={type:t[n].type,attr:t[n].attr()},s=t[n].children();e.push(r),s.length&&f(s,r.childNodes=[])}}n.version="0.4.0",n.toString=function(){return"Snap v"+this.version},n._={};var _={win:t.window,doc:t.window.document};n._.glob=_;var m="hasOwnProperty",y=String,v=parseFloat,x=parseInt,b=Math,w=b.max,k=b.min,S=b.abs,M=(b.pow,b.PI),C=(b.round,""),$=Object.prototype.toString,A=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,T=(n._.separator=/[,\s]+/,/[\s]*,[\s]*/),D={hs:1,rg:1},E=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,Y=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,B=/(-?\d*\.?\d*(?:e[\-+]?\\d+)?)[\s]*,?[\s]*/gi,F=0,L="S"+(+new Date).toString(36),N=function(t){return(t&&t.type?t.type:C)+L+(F++).toString(36)},q="http://www.w3.org/1999/xlink",H="http://www.w3.org/2000/svg",j={};n.url=function(t){return"url('#"+t+"')"},n._.$=i,n._.id=N,n.format=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(t,n,i){var r=i;return n.replace(e,(function(t,e,n,i,s){e=e||i,r&&(e in r&&(r=r[e]),"function"==typeof r&&s&&(r=r()))})),r=(null==r||r==i?t:r)+""};return function(e,i){return y(e).replace(t,(function(t,e){return n(t,e,i)}))}}(),n._.clone=function t(e){if("function"==typeof e||Object(e)!==e)return e;var n=new e.constructor;for(var i in e)e[m](i)&&(n[i]=t(e[i]));return n},n._.cacher=s,n.rad=a,n.deg=function(t){return 180*t/M%360},n.sin=function(t){return b.sin(n.rad(t))},n.tan=function(t){return b.tan(n.rad(t))},n.cos=function(t){return b.cos(n.rad(t))},n.asin=function(t){return n.deg(b.asin(t))},n.acos=function(t){return n.deg(b.acos(t))},n.atan=function(t){return n.deg(b.atan(t))},n.atan2=function(t){return n.deg(b.atan2(t))},n.angle=function t(e,n,i,r,s,a){if(null==s){var o=e-i,h=n-r;return o||h?(180+180*b.atan2(-h,-o)/M+360)%360:0}return t(e,n,s,a)-t(i,r,s,a)},n.len=function(t,e,i,r){return Math.sqrt(n.len2(t,e,i,r))},n.len2=function(t,e,n,i){return(t-n)*(t-n)+(e-i)*(e-i)},n.closestPoint=function(t,e,n){function i(t){var i=t.x-e,r=t.y-n;return i*i+r*r}for(var r,s,a,o,h=t.node,l=h.getTotalLength(),u=l/h.pathSegList.numberOfItems*.125,d=1/0,p=0;l>=p;p+=u)(o=i(a=h.getPointAtLength(p)))<d&&(r=a,s=p,d=o);for(u*=.5;u>.5;){var c,f,g,_,m,y;(g=s-u)>=0&&(m=i(c=h.getPointAtLength(g)))<d?(r=c,s=g,d=m):(_=s+u)<=l&&(y=i(f=h.getPointAtLength(_)))<d?(r=f,s=_,d=y):u*=.5}return{x:r.x,y:r.y,length:s,distance:Math.sqrt(d)}},n.is=r,n.snapTo=function(t,e,n){if(n=r(n,"finite")?n:10,r(t,"array")){for(var i=t.length;i--;)if(S(t[i]-e)<=n)return t[i]}else{var s=e%(t=+t);if(n>s)return e-s;if(s>t-n)return e-s+t}return e},n.getRGB=s((function(t){if(!t||(t=y(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:V};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:V};if(!(D[m](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=X(t)),!t)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:V};var e,i,s,a,o,h,l=t.match(A);return l?(l[2]&&(s=x(l[2].substring(5),16),i=x(l[2].substring(3,5),16),e=x(l[2].substring(1,3),16)),l[3]&&(s=x((o=l[3].charAt(3))+o,16),i=x((o=l[3].charAt(2))+o,16),e=x((o=l[3].charAt(1))+o,16)),l[4]&&(h=l[4].split(T),e=v(h[0]),"%"==h[0].slice(-1)&&(e*=2.55),i=v(h[1]),"%"==h[1].slice(-1)&&(i*=2.55),s=v(h[2]),"%"==h[2].slice(-1)&&(s*=2.55),"rgba"==l[1].toLowerCase().slice(0,4)&&(a=v(h[3])),h[3]&&"%"==h[3].slice(-1)&&(a/=100)),l[5]?(h=l[5].split(T),e=v(h[0]),"%"==h[0].slice(-1)&&(e/=100),i=v(h[1]),"%"==h[1].slice(-1)&&(i/=100),s=v(h[2]),"%"==h[2].slice(-1)&&(s/=100),("deg"==h[0].slice(-3)||"°"==h[0].slice(-1))&&(e/=360),"hsba"==l[1].toLowerCase().slice(0,4)&&(a=v(h[3])),h[3]&&"%"==h[3].slice(-1)&&(a/=100),n.hsb2rgb(e,i,s,a)):l[6]?(h=l[6].split(T),e=v(h[0]),"%"==h[0].slice(-1)&&(e/=100),i=v(h[1]),"%"==h[1].slice(-1)&&(i/=100),s=v(h[2]),"%"==h[2].slice(-1)&&(s/=100),("deg"==h[0].slice(-3)||"°"==h[0].slice(-1))&&(e/=360),"hsla"==l[1].toLowerCase().slice(0,4)&&(a=v(h[3])),h[3]&&"%"==h[3].slice(-1)&&(a/=100),n.hsl2rgb(e,i,s,a)):(e=k(b.round(e),255),i=k(b.round(i),255),s=k(b.round(s),255),a=k(w(a,0),1),(l={r:e,g:i,b:s,toString:V}).hex="#"+(16777216|s|i<<8|e<<16).toString(16).slice(1),l.opacity=r(a,"finite")?a:1,l)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:V}}),n),n.hsb=s((function(t,e,i){return n.hsb2rgb(t,e,i).hex})),n.hsl=s((function(t,e,i){return n.hsl2rgb(t,e,i).hex})),n.rgb=s((function(t,e,n,i){if(r(i,"finite")){var s=b.round;return"rgba("+[s(t),s(e),s(n),+i.toFixed(2)]+")"}return"#"+(16777216|n|e<<8|t<<16).toString(16).slice(1)}));var X=function(t){var e=_.doc.getElementsByTagName("head")[0]||_.doc.getElementsByTagName("svg")[0],n="rgb(255, 0, 0)";return(X=s((function(t){if("red"==t.toLowerCase())return n;e.style.color=n,e.style.color=t;var i=_.doc.defaultView.getComputedStyle(e,C).getPropertyValue("color");return i==n?null:i})))(t)},P=function(){return"hsb("+[this.h,this.s,this.b]+")"},O=function(){return"hsl("+[this.h,this.s,this.l]+")"},V=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},z=function(t,e,i){if(null==e&&r(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(i=t.b,e=t.g,t=t.r),null==e&&r(t,string)){var s=n.getRGB(t);t=s.r,e=s.g,i=s.b}return(t>1||e>1||i>1)&&(t/=255,e/=255,i/=255),[t,e,i]},G=function(t,e,i,s){var a={r:t=b.round(255*t),g:e=b.round(255*e),b:i=b.round(255*i),opacity:r(s,"finite")?s:1,hex:n.rgb(t,e,i),toString:V};return r(s,"finite")&&(a.opacity=s),a};n.color=function(t){var e;return r(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=n.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.opacity=1,t.hex=e.hex):r(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=n.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.opacity=1,t.hex=e.hex):(r(t,"string")&&(t=n.getRGB(t)),r(t,"object")&&"r"in t&&"g"in t&&"b"in t&&!("error"in t)?(e=n.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=n.rgb2hsb(t),t.v=e.b):((t={hex:"none"}).r=t.g=t.b=t.h=t.s=t.v=t.l=-1,t.error=1)),t.toString=V,t},n.hsb2rgb=function(t,e,n,i){var s,a,o,h,l;return r(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(n=t.b,e=t.s,i=t.o,t=t.h),h=(l=n*e)*(1-S((t=(t*=360)%360/60)%2-1)),s=a=o=n-l,G(s+=[l,h,0,0,h,l][t=~~t],a+=[h,l,l,h,0,0][t],o+=[0,0,h,l,l,h][t],i)},n.hsl2rgb=function(t,e,n,i){var s,a,o,h,l;return r(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(n=t.l,e=t.s,t=t.h),(t>1||e>1||n>1)&&(t/=360,e/=100,n/=100),h=(l=2*e*(.5>n?n:1-n))*(1-S((t=(t*=360)%360/60)%2-1)),s=a=o=n-l/2,G(s+=[l,h,0,0,h,l][t=~~t],a+=[h,l,l,h,0,0][t],o+=[0,0,h,l,l,h][t],i)},n.rgb2hsb=function(t,e,n){var i,r;return t=(n=z(t,e,n))[0],e=n[1],n=n[2],{h:((0==(r=(i=w(t,e,n))-k(t,e,n))?null:i==t?(e-n)/r:i==e?(n-t)/r+2:(t-e)/r+4)+360)%6*60/360,s:0==r?0:r/i,b:i,toString:P}},n.rgb2hsl=function(t,e,n){var i,r,s,a;return t=(n=z(t,e,n))[0],e=n[1],n=n[2],i=((r=w(t,e,n))+(s=k(t,e,n)))/2,{h:((0==(a=r-s)?null:r==t?(e-n)/a:r==e?(n-t)/a+2:(t-e)/a+4)+360)%6*60/360,s:0==a?0:.5>i?a/(2*i):a/(2-2*i),l:i,toString:O}},n.parsePathString=function(t){if(!t)return null;var e=n.path(t);if(e.arr)return n.path.clone(e.arr);var i={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},s=[];return r(t,"array")&&r(t[0],"array")&&(s=n.path.clone(t)),s.length||y(t).replace(E,(function(t,e,n){var r=[],a=e.toLowerCase();if(n.replace(B,(function(t,e){e&&r.push(+e)})),"m"==a&&r.length>2&&(s.push([e].concat(r.splice(0,2))),a="l",e="m"==e?"l":"L"),"o"==a&&1==r.length&&s.push([e,r[0]]),"r"==a)s.push([e].concat(r));else for(;r.length>=i[a]&&(s.push([e].concat(r.splice(0,i[a]))),i[a]););})),s.toString=n.path.toString,e.arr=n.path.clone(s),s};var R=n.parseTransformString=function(t){if(!t)return null;var e=[];return r(t,"array")&&r(t[0],"array")&&(e=n.path.clone(t)),e.length||y(t).replace(Y,(function(t,n,i){var r=[];n.toLowerCase(),i.replace(B,(function(t,e){e&&r.push(+e)})),e.push([n].concat(r))})),e.toString=n.path.toString,e};n._.svgTransform2string=function(t){var e=[];return t=t.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,(function(t,n,i){return i=i.split(/\s*,\s*|\s+/),"rotate"==n&&1==i.length&&i.push(0,0),"scale"==n&&(i.length>2?i=i.slice(0,2):2==i.length&&i.push(0,0),1==i.length&&i.push(i[0],0,0)),e.push("skewX"==n?["m",1,0,b.tan(a(i[0])),1,0,0]:"skewY"==n?["m",1,b.tan(a(i[0])),0,1,0,0]:[n.charAt(0)].concat(i)),t})),e},n._.rgTransform=/^[a-z][\s]*-?\.?\d/i,n._.transform2matrix=function(t,e){var i=R(t),r=new n.Matrix;if(i)for(var s=0,a=i.length;a>s;s++){var o,h,l,u,d,p=i[s],c=p.length,f=y(p[0]).toLowerCase(),g=p[0]!=f,_=g?r.invert():0;"t"==f&&2==c?r.translate(p[1],0):"t"==f&&3==c?g?(o=_.x(0,0),h=_.y(0,0),l=_.x(p[1],p[2]),u=_.y(p[1],p[2]),r.translate(l-o,u-h)):r.translate(p[1],p[2]):"r"==f?2==c?(d=d||e,r.rotate(p[1],d.x+d.width/2,d.y+d.height/2)):4==c&&(g?(l=_.x(p[2],p[3]),u=_.y(p[2],p[3]),r.rotate(p[1],l,u)):r.rotate(p[1],p[2],p[3])):"s"==f?2==c||3==c?(d=d||e,r.scale(p[1],p[c-1],d.x+d.width/2,d.y+d.height/2)):4==c?g?(l=_.x(p[2],p[3]),u=_.y(p[2],p[3]),r.scale(p[1],p[1],l,u)):r.scale(p[1],p[1],p[2],p[3]):5==c&&(g?(l=_.x(p[3],p[4]),u=_.y(p[3],p[4]),r.scale(p[1],p[2],l,u)):r.scale(p[1],p[2],p[3],p[4])):"m"==f&&7==c&&r.add(p[1],p[2],p[3],p[4],p[5],p[6])}return r},n._unit2px=function(t,e,n){function r(t){if(null==t)return C;if(t==+t)return t;i(u,{width:t});try{return u.getBBox().width}catch(t){return 0}}function s(t){if(null==t)return C;if(t==+t)return t;i(u,{height:t});try{return u.getBBox().height}catch(t){return 0}}function a(i,r){null==e?l[i]=r(t.attr(i)||0):i==e&&(l=r(null==n?t.attr(i)||0:n))}var h=o(t).node,l={},u=h.querySelector(".svg---mgr");switch(u||(u=i("rect"),i(u,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),h.appendChild(u)),t.type){case"rect":a("rx",r),a("ry",s);case"image":a("width",r),a("height",s);case"text":a("x",r),a("y",s);break;case"circle":a("cx",r),a("cy",s),a("r",r);break;case"ellipse":a("cx",r),a("cy",s),a("rx",r),a("ry",s);break;case"line":a("x1",r),a("x2",r),a("y1",s),a("y2",s);break;case"marker":a("refX",r),a("markerWidth",r),a("refY",s),a("markerHeight",s);break;case"radialGradient":a("fx",r),a("fy",s);break;case"tspan":a("dx",r),a("dy",s);break;default:a(e,r)}return h.removeChild(u),l},_.doc.contains||_.doc.compareDocumentPosition,n._.getSomeDefs=function(t){var e=t.node.ownerSVGElement&&c(t.node.ownerSVGElement)||t.node.parentNode&&c(t.node.parentNode)||n.select("svg")||n(0,0),i=e.select("defs"),r=null!=i&&i.node;return r||(r=d("defs",e.node).node),r},n._.getSomeSVG=o,n.select=function(t){return t=y(t).replace(/([^\\]):/g,"$1\\:"),c(_.doc.querySelector(t))},n.selectAll=function(t){for(var e=_.doc.querySelectorAll(t),i=(n.set||Array)(),r=0;r<e.length;r++)i.push(c(e[r]));return i},setInterval((function(){for(var t in j)if(j[m](t)){var e=j[t],n=e.node;("svg"!=e.type&&!n.ownerSVGElement||"svg"==e.type&&(!n.parentNode||"ownerSVGElement"in n.parentNode&&!n.ownerSVGElement))&&delete j[t]}}),1e4),l.prototype.attr=function(t,n){var i=this,s=i.node;if(!t){if(1!=s.nodeType)return{text:s.nodeValue};for(var a=s.attributes,o={},h=0,l=a.length;l>h;h++)o[a[h].nodeName]=a[h].nodeValue;return o}if(r(t,"string")){if(!(arguments.length>1))return e("snap.util.getattr."+t,i).firstDefined();var u={};u[t]=n,t=u}for(var d in t)t[m](d)&&e("snap.util.attr."+d,i,t[d]);return i},n.parse=function(t){var e=_.doc.createDocumentFragment(),n=!0,i=_.doc.createElement("div");if((t=y(t)).match(/^\s*<\s*svg(?:\s|>)/)||(t="<svg>"+t+"</svg>",n=!1),i.innerHTML=t,t=i.getElementsByTagName("svg")[0])if(n)e=t;else for(;t.firstChild;)e.appendChild(t.firstChild);return new u(e)},n.fragment=function(){for(var t=Array.prototype.slice.call(arguments,0),e=_.doc.createDocumentFragment(),i=0,r=t.length;r>i;i++){var s=t[i];s.node&&s.node.nodeType&&e.appendChild(s.node),s.nodeType&&e.appendChild(s),"string"==typeof s&&e.appendChild(n.parse(s).node)}return new u(e)},n._.make=d,n._.wrap=c,p.prototype.el=function(t,e){var n=d(t,this.node);return e&&n.attr(e),n},l.prototype.children=function(){for(var t=[],e=this.node.childNodes,i=0,r=e.length;r>i;i++)t[i]=n(e[i]);return t},l.prototype.toJSON=function(){var t=[];return f([this],t),t[0]},e.on("snap.util.getattr",(function(){var t=e.nt(),n=(t=t.substring(t.lastIndexOf(".")+1)).replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}));return W[m](n)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(n):i(this.node,t)}));var W={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};e.on("snap.util.attr",(function(t){var n=e.nt(),r={};r[n=n.substring(n.lastIndexOf(".")+1)]=t;var s=n.replace(/-(\w)/gi,(function(t,e){return e.toUpperCase()})),a=n.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}));W[m](a)?this.node.style[s]=null==t?C:t:i(this.node,r)})),p.prototype,n.ajax=function(t,n,i,s){var a=new XMLHttpRequest,o=N();if(a){if(r(n,"function"))s=i,i=n,n=null;else if(r(n,"object")){var h=[];for(var l in n)n.hasOwnProperty(l)&&h.push(encodeURIComponent(l)+"="+encodeURIComponent(n[l]));n=h.join("&")}return a.open(n?"POST":"GET",t,!0),n&&(a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Content-type","application/x-www-form-urlencoded")),i&&(e.once("snap.ajax."+o+".0",i),e.once("snap.ajax."+o+".200",i),e.once("snap.ajax."+o+".304",i)),a.onreadystatechange=function(){4==a.readyState&&e("snap.ajax."+o+"."+a.status,s,a)},4==a.readyState||a.send(n),a}},n.load=function(t,e,i){n.ajax(t,(function(t){var r=n.parse(t.responseText);i?e.call(i,r):e(r)}))};var I=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,i=n.body,r=n.documentElement,s=r.clientTop||i.clientTop||0,a=r.clientLeft||i.clientLeft||0;return{y:e.top+(g.win.pageYOffset||r.scrollTop||i.scrollTop)-s,x:e.left+(g.win.pageXOffset||r.scrollLeft||i.scrollLeft)-a}};return n.getElementByPoint=function(t,e){var n=(this.canvas,_.doc.elementFromPoint(t,e));if(_.win.opera&&"svg"==n.tagName){var i=I(n),r=n.createSVGRect();r.x=t-i.x,r.y=e-i.y,r.width=r.height=1;var s=n.getIntersectionList(r,null);s.length&&(n=s[s.length-1])}return n?c(n):null},n.plugin=function(t){t(n,l,p,_,u)},_.win.Snap=n,n}(t||this);return i.plugin((function(i,r,s,a,o){function h(t,e){if(null==e){var n=!0;if(!(e=t.node.getAttribute("linearGradient"==t.type||"radialGradient"==t.type?"gradientTransform":"pattern"==t.type?"patternTransform":"transform")))return new i.Matrix;e=i._.svgTransform2string(e)}else e=i._.rgTransform.test(e)?c(e).replace(/\.{3}|\u2026/g,t._.transform||E):i._.svgTransform2string(e),p(e,"array")&&(e=i.path?i.path.toString.call(e):c(e)),t._.transform=e;var r=i._.transform2matrix(e,t.getBBox(1));return n?r:void(t.matrix=r)}function l(t,e,n){return function(i){var r=i.slice(t,e);return 1==r.length&&(r=r[0]),n?n(r):r}}function u(t){return function(){var e=t?"<"+this.type:"",n=this.node.attributes,i=this.node.childNodes;if(t)for(var r=0,s=n.length;s>r;r++)e+=" "+n[r].name+'="'+n[r].value.replace(/"/g,'\\"')+'"';if(i.length){for(t&&(e+=">"),r=0,s=i.length;s>r;r++)3==i[r].nodeType?e+=i[r].nodeValue:1==i[r].nodeType&&(e+=v(i[r]).toString());t&&(e+="</"+this.type+">")}else t&&(e+="/>");return e}}var d=r.prototype,p=i.is,c=String,f=i._unit2px,g=i._.$,_=i._.make,m=i._.getSomeDefs,y="hasOwnProperty",v=i._.wrap;d.getBBox=function(t){if(!i.Matrix||!i.path)return this.node.getBBox();var e=this,n=new i.Matrix;if(e.removed)return i._.box();for(;"use"==e.type;)if(t||(n=n.add(e.transform().localMatrix.translate(e.attr("x")||0,e.attr("y")||0))),e.original)e=e.original;else{var r=e.attr("xlink:href");e=e.original=e.node.ownerDocument.getElementById(r.substring(r.indexOf("#")+1))}var s=e._,a=i.path.get[e.type]||i.path.get.deflt;try{return t?(s.bboxwt=a?i.path.getBBox(e.realPath=a(e)):i._.box(e.node.getBBox()),i._.box(s.bboxwt)):(e.realPath=a(e),e.matrix=e.transform().localMatrix,s.bbox=i.path.getBBox(i.path.map(e.realPath,n.add(e.matrix))),i._.box(s.bbox))}catch(t){return i._.box()}};var x=function(){return this.string};d.transform=function(t){var e=this._;if(null==t){for(var n,r=this,s=new i.Matrix(this.node.getCTM()),a=h(this),o=[a],l=new i.Matrix,u=a.toTransformString(),d=c(a)==c(this.matrix)?c(e.transform):u;"svg"!=r.type&&(r=r.parent());)o.push(h(r));for(n=o.length;n--;)l.add(o[n]);return{string:d,globalMatrix:s,totalMatrix:l,localMatrix:a,diffMatrix:s.clone().add(a.invert()),global:s.toTransformString(),total:l.toTransformString(),local:u,toString:x}}return t instanceof i.Matrix?(this.matrix=t,this._.transform=t.toTransformString()):h(this,t),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?g(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?g(this.node,{patternTransform:this.matrix}):g(this.node,{transform:this.matrix})),this},d.parent=function(){return v(this.node.parentNode)},d.append=d.add=function(t){if(t){if("set"==t.type){var e=this;return t.forEach((function(t){e.add(t)})),this}t=v(t),this.node.appendChild(t.node),t.paper=this.paper}return this},d.appendTo=function(t){return t&&(t=v(t)).append(this),this},d.prepend=function(t){if(t){if("set"==t.type){var e,n=this;return t.forEach((function(t){e?e.after(t):n.prepend(t),e=t})),this}var i=(t=v(t)).parent();this.node.insertBefore(t.node,this.node.firstChild),this.add&&this.add(),t.paper=this.paper,this.parent()&&this.parent().add(),i&&i.add()}return this},d.prependTo=function(t){return(t=v(t)).prepend(this),this},d.before=function(t){if("set"==t.type){var e=this;return t.forEach((function(t){var n=t.parent();e.node.parentNode.insertBefore(t.node,e.node),n&&n.add()})),this.parent().add(),this}var n=(t=v(t)).parent();return this.node.parentNode.insertBefore(t.node,this.node),this.parent()&&this.parent().add(),n&&n.add(),t.paper=this.paper,this},d.after=function(t){var e=(t=v(t)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(t.node,this.node.nextSibling):this.node.parentNode.appendChild(t.node),this.parent()&&this.parent().add(),e&&e.add(),t.paper=this.paper,this},d.insertBefore=function(t){t=v(t);var e=this.parent();return t.node.parentNode.insertBefore(this.node,t.node),this.paper=t.paper,e&&e.add(),t.parent()&&t.parent().add(),this},d.insertAfter=function(t){t=v(t);var e=this.parent();return t.node.parentNode.insertBefore(this.node,t.node.nextSibling),this.paper=t.paper,e&&e.add(),t.parent()&&t.parent().add(),this},d.remove=function(){var t=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,t&&t.add(),this},d.select=function(t){return t=c(t).replace(/([^\\]):/g,"$1\\:"),v(this.node.querySelector(t))},d.selectAll=function(t){for(var e=this.node.querySelectorAll(t),n=(i.set||Array)(),r=0;r<e.length;r++)n.push(v(e[r]));return n},d.asPX=function(t,e){return null==e&&(e=this.attr(t)),+f(this,t,e)},d.use=function(){var t,e=this.node.id;return e||(e=this.id,g(this.node,{id:e})),t="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?_(this.type,this.node.parentNode):_("use",this.node.parentNode),g(t.node,{"xlink:href":"#"+e}),t.original=this,t},d.clone=function(){var t=v(this.node.cloneNode(!0));return g(t.node,"id")&&g(t.node,{id:t.id}),function(t){function e(t,e){var n=g(t.node,e);(n=(n=n&&n.match(s))&&n[2])&&"#"==n.charAt()&&(n=n.substring(1))&&(o[n]=(o[n]||[]).concat((function(n){var i={};i[e]=URL(n),g(t.node,i)})))}function n(t){var e=g(t.node,"xlink:href");e&&"#"==e.charAt()&&(e=e.substring(1))&&(o[e]=(o[e]||[]).concat((function(e){t.attr("xlink:href","#"+e)})))}for(var i,r=t.selectAll("*"),s=/^\s*url\(("|'|)(.*)\1\)\s*$/,a=[],o={},h=0,l=r.length;l>h;h++){e(i=r[h],"fill"),e(i,"stroke"),e(i,"filter"),e(i,"mask"),e(i,"clip-path"),n(i);var u=g(i.node,"id");u&&(g(i.node,{id:i.id}),a.push({old:u,id:i.id}))}for(h=0,l=a.length;l>h;h++){var d=o[a[h].old];if(d)for(var p=0,c=d.length;c>p;p++)d[p](a[h].id)}}(t),t.insertAfter(this),t},d.toDefs=function(){return m(this).appendChild(this.node),this},d.pattern=d.toPattern=function(t,e,n,i){var r=_("pattern",m(this));return null==t&&(t=this.getBBox()),p(t,"object")&&"x"in t&&(e=t.y,n=t.width,i=t.height,t=t.x),g(r.node,{x:t,y:e,width:n,height:i,patternUnits:"userSpaceOnUse",id:r.id,viewBox:[t,e,n,i].join(" ")}),r.node.appendChild(this.node),r},d.marker=function(t,e,n,i,r,s){var a=_("marker",m(this));return null==t&&(t=this.getBBox()),p(t,"object")&&"x"in t&&(e=t.y,n=t.width,i=t.height,r=t.refX||t.cx,s=t.refY||t.cy,t=t.x),g(a.node,{viewBox:[t,e,n,i].join(" "),markerWidth:n,markerHeight:i,orient:"auto",refX:r||0,refY:s||0,id:a.id}),a.node.appendChild(this.node),a};var b=function(t,e,i,r){"function"!=typeof i||i.length||(r=i,i=n.linear),this.attr=t,this.dur=e,i&&(this.easing=i),r&&(this.callback=r)};i._.Animation=b,i.animation=function(t,e,n,i){return new b(t,e,n,i)},d.inAnim=function(){var t=this,e=[];for(var n in t.anims)t.anims[y](n)&&function(t){e.push({anim:new b(t._attrs,t.dur,t.easing,t._callback),mina:t,curStatus:t.status(),status:function(e){return t.status(e)},stop:function(){t.stop()}})}(t.anims[n]);return e},i.animate=function(t,i,r,s,a,o){"function"!=typeof a||a.length||(o=a,a=n.linear);var h=n.time(),l=n(t,i,h,h+s,n.time,r,a);return o&&e.once("mina.finish."+l.id,o),l},d.stop=function(){for(var t=this.inAnim(),e=0,n=t.length;n>e;e++)t[e].stop();return this},d.animate=function(t,i,r,s){"function"!=typeof r||r.length||(s=r,r=n.linear),t instanceof b&&(s=t.callback,i=(r=t.easing).dur,t=t.attr);var a,o,h,u,d=[],f=[],g={},_=this;for(var m in t)if(t[y](m)){_.equal?(a=(u=_.equal(m,c(t[m]))).from,o=u.to,h=u.f):(a=+_.attr(m),o=+t[m]);var v=p(a,"array")?a.length:1;g[m]=l(d.length,d.length+v,h),d=d.concat(a),f=f.concat(o)}var x=n.time(),w=n(d,f,x,x+i,n.time,(function(t){var e={};for(var n in g)g[y](n)&&(e[n]=g[n](t));_.attr(e)}),r);return _.anims[w.id]=w,w._attrs=t,w._callback=s,e("snap.animcreated."+_.id,w),e.once("mina.finish."+w.id,(function(){delete _.anims[w.id],s&&s.call(_)})),e.once("mina.stop."+w.id,(function(){delete _.anims[w.id]})),_};var w={};d.data=function(t,n){var r=w[this.id]=w[this.id]||{};if(0==arguments.length)return e("snap.data.get."+this.id,this,r,null),r;if(1==arguments.length){if(i.is(t,"object")){for(var s in t)t[y](s)&&this.data(s,t[s]);return this}return e("snap.data.get."+this.id,this,r[t],t),r[t]}return r[t]=n,e("snap.data.set."+this.id,this,n,t),this},d.removeData=function(t){return null==t?w[this.id]={}:w[this.id]&&delete w[this.id][t],this},d.outerSVG=d.toString=u(1),d.innerSVG=u(),d.toDataURL=function(){if(t&&t.btoa){var e=this.getBBox(),n=i.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+e.x.toFixed(3),y:+e.y.toFixed(3),width:+e.width.toFixed(3),height:+e.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(n)))}},o.prototype.select=d.select,o.prototype.selectAll=d.selectAll})),i.plugin((function(t){function e(t,e,i,r,s,a){return null==e&&"[object SVGMatrix]"==n.call(t)?(this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.e=t.e,void(this.f=t.f)):void(null!=t?(this.a=+t,this.b=+e,this.c=+i,this.d=+r,this.e=+s,this.f=+a):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var n=Object.prototype.toString,i=String,r=Math;!function(n){function s(t){return t[0]*t[0]+t[1]*t[1]}function a(t){var e=r.sqrt(s(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}n.add=function(t,n,i,r,s,a){var o,h,l,u,d=[[],[],[]],p=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],c=[[t,i,s],[n,r,a],[0,0,1]];for(t&&t instanceof e&&(c=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),o=0;3>o;o++)for(h=0;3>h;h++){for(u=0,l=0;3>l;l++)u+=p[o][l]*c[l][h];d[o][h]=u}return this.a=d[0][0],this.b=d[1][0],this.c=d[0][1],this.d=d[1][1],this.e=d[0][2],this.f=d[1][2],this},n.invert=function(){var t=this,n=t.a*t.d-t.b*t.c;return new e(t.d/n,-t.b/n,-t.c/n,t.a/n,(t.c*t.f-t.d*t.e)/n,(t.b*t.e-t.a*t.f)/n)},n.clone=function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)},n.translate=function(t,e){return this.add(1,0,0,1,t,e)},n.scale=function(t,e,n,i){return null==e&&(e=t),(n||i)&&this.add(1,0,0,1,n,i),this.add(t,0,0,e,0,0),(n||i)&&this.add(1,0,0,1,-n,-i),this},n.rotate=function(e,n,i){e=t.rad(e),n=n||0,i=i||0;var s=+r.cos(e).toFixed(9),a=+r.sin(e).toFixed(9);return this.add(s,a,-a,s,n,i),this.add(1,0,0,1,-n,-i)},n.x=function(t,e){return t*this.a+e*this.c+this.e},n.y=function(t,e){return t*this.b+e*this.d+this.f},n.get=function(t){return+this[i.fromCharCode(97+t)].toFixed(4)},n.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},n.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},n.determinant=function(){return this.a*this.d-this.b*this.c},n.split=function(){var e={};e.dx=this.e,e.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];e.scalex=r.sqrt(s(n[0])),a(n[0]),e.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*e.shear,n[1][1]-n[0][1]*e.shear],e.scaley=r.sqrt(s(n[1])),a(n[1]),e.shear/=e.scaley,this.determinant()<0&&(e.scalex=-e.scalex);var i=-n[0][1],o=n[1][1];return 0>o?(e.rotate=t.deg(r.acos(o)),0>i&&(e.rotate=360-e.rotate)):e.rotate=t.deg(r.asin(i)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},n.toTransformString=function(t){var e=t||this.split();return+e.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[+e.dx.toFixed(4),+e.dy.toFixed(4)]:"")+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:"")+(e.rotate?"r"+[+e.rotate.toFixed(4),0,0]:""))}}(e.prototype),t.Matrix=e,t.matrix=function(t,n,i,r,s,a){return new e(t,n,i,r,s,a)}})),i.plugin((function(t,n,i,r,s){function a(i){return function(r){if(e.stop(),r instanceof s&&1==r.node.childNodes.length&&("radialGradient"==r.node.firstChild.tagName||"linearGradient"==r.node.firstChild.tagName||"pattern"==r.node.firstChild.tagName)&&(r=r.node.firstChild,c(this).appendChild(r),r=d(r)),r instanceof n)if("radialGradient"==r.type||"linearGradient"==r.type||"pattern"==r.type){r.node.id||g(r.node,{id:r.id});var a=_(r.node.id)}else a=r.attr(i);else if((a=t.color(r)).error){var o=t(c(this).ownerSVGElement).gradient(r);o?(o.node.id||g(o.node,{id:o.id}),a=_(o.node.id)):a=r}else a=m(a);var h={};h[i]=a,g(this.node,h),this.node.style[i]=v}}function o(t){e.stop(),t==+t&&(t+="px"),this.node.style.fontSize=t}function h(t){for(var e=[],n=t.childNodes,i=0,r=n.length;r>i;i++){var s=n[i];3==s.nodeType&&e.push(s.nodeValue),"tspan"==s.tagName&&e.push(1==s.childNodes.length&&3==s.firstChild.nodeType?s.firstChild.nodeValue:h(s))}return e}function l(){return e.stop(),this.node.style.fontSize}var u=t._.make,d=t._.wrap,p=t.is,c=t._.getSomeDefs,f=/^url\(#?([^)]+)\)$/,g=t._.$,_=t.url,m=String,y=t._.separator,v="";e.on("snap.util.attr.mask",(function(t){if(t instanceof n||t instanceof s){if(e.stop(),t instanceof s&&1==t.node.childNodes.length&&(t=t.node.firstChild,c(this).appendChild(t),t=d(t)),"mask"==t.type)var i=t;else(i=u("mask",c(this))).node.appendChild(t.node);!i.node.id&&g(i.node,{id:i.id}),g(this.node,{mask:_(i.id)})}})),function(t){e.on("snap.util.attr.clip",t),e.on("snap.util.attr.clip-path",t),e.on("snap.util.attr.clipPath",t)}((function(t){if(t instanceof n||t instanceof s){if(e.stop(),"clipPath"==t.type)var i=t;else(i=u("clipPath",c(this))).node.appendChild(t.node),!i.node.id&&g(i.node,{id:i.id});g(this.node,{"clip-path":_(i.node.id||i.id)})}})),e.on("snap.util.attr.fill",a("fill")),e.on("snap.util.attr.stroke",a("stroke"));var x=/^([lr])(?:\(([^)]*)\))?(.*)$/i;e.on("snap.util.grad.parse",(function(t){var e=(t=m(t)).match(x);if(!e)return null;var n=e[1],i=e[2],r=e[3];return i=i.split(/\s*,\s*/).map((function(t){return+t==t?+t:t})),1==i.length&&0==i[0]&&(i=[]),r=(r=r.split("-")).map((function(t){var e={color:(t=t.split(":"))[0]};return t[1]&&(e.offset=parseFloat(t[1])),e})),{type:n,params:i,stops:r}})),e.on("snap.util.attr.d",(function(n){e.stop(),p(n,"array")&&p(n[0],"array")&&(n=t.path.toString.call(n)),(n=m(n)).match(/[ruo]/i)&&(n=t.path.toAbsolute(n)),g(this.node,{d:n})}))(-1),e.on("snap.util.attr.#text",(function(t){e.stop(),t=m(t);for(var n=r.doc.createTextNode(t);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(n)}))(-1),e.on("snap.util.attr.path",(function(t){e.stop(),this.attr({d:t})}))(-1),e.on("snap.util.attr.class",(function(t){e.stop(),this.node.className.baseVal=t}))(-1),e.on("snap.util.attr.viewBox",(function(t){var n;n=p(t,"object")&&"x"in t?[t.x,t.y,t.width,t.height].join(" "):p(t,"array")?t.join(" "):t,g(this.node,{viewBox:n}),e.stop()}))(-1),e.on("snap.util.attr.transform",(function(t){this.transform(t),e.stop()}))(-1),e.on("snap.util.attr.r",(function(t){"rect"==this.type&&(e.stop(),g(this.node,{rx:t,ry:t}))}))(-1),e.on("snap.util.attr.textpath",(function(t){if(e.stop(),"text"==this.type){var i,r,s;if(!t&&this.textPath){for(r=this.textPath;r.node.firstChild;)this.node.appendChild(r.node.firstChild);return r.remove(),void delete this.textPath}if(p(t,"string")){var a=c(this),o=d(a.parentNode).path(t);a.appendChild(o.node),i=o.id,o.attr({id:i})}else(t=d(t))instanceof n&&((i=t.attr("id"))||(i=t.id,t.attr({id:i})));if(i)if(r=this.textPath,s=this.node,r)r.attr({"xlink:href":"#"+i});else{for(r=g("textPath",{"xlink:href":"#"+i});s.firstChild;)r.appendChild(s.firstChild);s.appendChild(r),this.textPath=d(r)}}}))(-1),e.on("snap.util.attr.text",(function(t){if("text"==this.type){for(var n=this.node,i=function(t){var e=g("tspan");if(p(t,"array"))for(var n=0;n<t.length;n++)e.appendChild(i(t[n]));else e.appendChild(r.doc.createTextNode(t));return e.normalize&&e.normalize(),e};n.firstChild;)n.removeChild(n.firstChild);for(var s=i(t);s.firstChild;)n.appendChild(s.firstChild)}e.stop()}))(-1),e.on("snap.util.attr.fontSize",o)(-1),e.on("snap.util.attr.font-size",o)(-1),e.on("snap.util.getattr.transform",(function(){return e.stop(),this.transform()}))(-1),e.on("snap.util.getattr.textpath",(function(){return e.stop(),this.textPath}))(-1),function(){function n(n){return function(){e.stop();var i=r.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+n);return"none"==i?i:t(r.doc.getElementById(i.match(f)[1]))}}function i(t){return function(n){e.stop();var i="marker"+t.charAt(0).toUpperCase()+t.substring(1);if(""!=n&&n){if("marker"==n.type){var r=n.node.id;return r||g(n.node,{id:n.id}),void(this.node.style[i]=_(r))}}else this.node.style[i]="none"}}e.on("snap.util.getattr.marker-end",n("end"))(-1),e.on("snap.util.getattr.markerEnd",n("end"))(-1),e.on("snap.util.getattr.marker-start",n("start"))(-1),e.on("snap.util.getattr.markerStart",n("start"))(-1),e.on("snap.util.getattr.marker-mid",n("mid"))(-1),e.on("snap.util.getattr.markerMid",n("mid"))(-1),e.on("snap.util.attr.marker-end",i("end"))(-1),e.on("snap.util.attr.markerEnd",i("end"))(-1),e.on("snap.util.attr.marker-start",i("start"))(-1),e.on("snap.util.attr.markerStart",i("start"))(-1),e.on("snap.util.attr.marker-mid",i("mid"))(-1),e.on("snap.util.attr.markerMid",i("mid"))(-1)}(),e.on("snap.util.getattr.r",(function(){return"rect"==this.type&&g(this.node,"rx")==g(this.node,"ry")?(e.stop(),g(this.node,"rx")):void 0}))(-1),e.on("snap.util.getattr.text",(function(){if("text"==this.type||"tspan"==this.type){e.stop();var t=h(this.node);return 1==t.length?t[0]:t}}))(-1),e.on("snap.util.getattr.#text",(function(){return this.node.textContent}))(-1),e.on("snap.util.getattr.viewBox",(function(){e.stop();var n=g(this.node,"viewBox");return n?(n=n.split(y),t._.box(+n[0],+n[1],+n[2],+n[3])):void 0}))(-1),e.on("snap.util.getattr.points",(function(){var t=g(this.node,"points");return e.stop(),t?t.split(y):void 0}))(-1),e.on("snap.util.getattr.path",(function(){var t=g(this.node,"d");return e.stop(),t}))(-1),e.on("snap.util.getattr.class",(function(){return this.node.className.baseVal}))(-1),e.on("snap.util.getattr.fontSize",l)(-1),e.on("snap.util.getattr.font-size",l)(-1)})),i.plugin((function(t,e){var n=/\S+/g,i=String,r=e.prototype;r.addClass=function(t){var e,r,s,a=i(t||"").match(n)||[],o=this.node,h=o.className.baseVal,l=h.match(n)||[];if(a.length){for(e=0;r=a[e++];)~l.indexOf(r)||l.push(r);h!=(s=l.join(" "))&&(o.className.baseVal=s)}return this},r.removeClass=function(t){var e,r,s,a,o=i(t||"").match(n)||[],h=this.node,l=h.className.baseVal,u=l.match(n)||[];if(u.length){for(e=0;s=o[e++];)~(r=u.indexOf(s))&&u.splice(r,1);l!=(a=u.join(" "))&&(h.className.baseVal=a)}return this},r.hasClass=function(t){return!!~(this.node.className.baseVal.match(n)||[]).indexOf(t)},r.toggleClass=function(t,e){if(null!=e)return e?this.addClass(t):this.removeClass(t);var i,r,s,a,o=(t||"").match(n)||[],h=this.node,l=h.className.baseVal,u=l.match(n)||[];for(i=0;s=o[i++];)~(r=u.indexOf(s))?u.splice(r,1):u.push(s);return l!=(a=u.join(" "))&&(h.className.baseVal=a),this}})),i.plugin((function(){function t(t){return t}function n(t){return function(e){return+e.toFixed(3)+t}}var i={"+":function(t,e){return t+e},"-":function(t,e){return t-e},"/":function(t,e){return t/e},"*":function(t,e){return t*e}},r=String,s=/[a-z]+$/i,a=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;e.on("snap.util.attr",(function(t){var n=r(t).match(a);if(n){var o=e.nt(),h=o.substring(o.lastIndexOf(".")+1),l=this.attr(h),u={};e.stop();var d=n[3]||"",p=l.match(s),c=i[n[1]];if(p&&p==d?t=c(parseFloat(l),+n[2]):(l=this.asPX(h),t=c(this.asPX(h),this.asPX(h,n[2]+d))),isNaN(l)||isNaN(t))return;u[h]=t,this.attr(u)}}))(-10),e.on("snap.util.equal",(function(o,h){var l=r(this.attr(o)||""),u=r(h).match(a);if(u){e.stop();var d=u[3]||"",p=l.match(s),c=i[u[1]];return p&&p==d?{from:parseFloat(l),to:c(parseFloat(l),+u[2]),f:n(p)}:{from:l=this.asPX(o),to:c(l,this.asPX(o,u[2]+d)),f:t}}}))(-10)})),i.plugin((function(n,i,r,s){var a=r.prototype,o=n.is;a.rect=function(t,e,n,i,r,s){var a;return null==s&&(s=r),o(t,"object")&&"[object Object]"==t?a=t:null!=t&&(a={x:t,y:e,width:n,height:i},null!=r&&(a.rx=r,a.ry=s)),this.el("rect",a)},a.circle=function(t,e,n){var i;return o(t,"object")&&"[object Object]"==t?i=t:null!=t&&(i={cx:t,cy:e,r:n}),this.el("circle",i)};var h=function(){function t(){this.parentNode.removeChild(this)}return function(e,n){var i=s.doc.createElement("img"),r=s.doc.body;i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){n.call(i),i.onload=i.onerror=null,r.removeChild(i)},i.onerror=t,r.appendChild(i),i.src=e}}();a.image=function(t,e,i,r,s){var a=this.el("image");if(o(t,"object")&&"src"in t)a.attr(t);else if(null!=t){var l={"xlink:href":t,preserveAspectRatio:"none"};null!=e&&null!=i&&(l.x=e,l.y=i),null!=r&&null!=s?(l.width=r,l.height=s):h(t,(function(){n._.$(a.node,{width:this.offsetWidth,height:this.offsetHeight})})),n._.$(a.node,l)}return a},a.ellipse=function(t,e,n,i){var r;return o(t,"object")&&"[object Object]"==t?r=t:null!=t&&(r={cx:t,cy:e,rx:n,ry:i}),this.el("ellipse",r)},a.path=function(t){var e;return o(t,"object")&&!o(t,"array")?e=t:t&&(e={d:t}),this.el("path",e)},a.group=a.g=function(t){var e=this.el("g");return 1==arguments.length&&t&&!t.type?e.attr(t):arguments.length&&e.add(Array.prototype.slice.call(arguments,0)),e},a.svg=function(t,e,n,i,r,s,a,h){var l={};return o(t,"object")&&null==e?l=t:(null!=t&&(l.x=t),null!=e&&(l.y=e),null!=n&&(l.width=n),null!=i&&(l.height=i),null!=r&&null!=s&&null!=a&&null!=h&&(l.viewBox=[r,s,a,h])),this.el("svg",l)},a.mask=function(t){var e=this.el("mask");return 1==arguments.length&&t&&!t.type?e.attr(t):arguments.length&&e.add(Array.prototype.slice.call(arguments,0)),e},a.ptrn=function(t,e,n,i,r,s,a,h){if(o(t,"object"))var l=t;else l={patternUnits:"userSpaceOnUse"},t&&(l.x=t),e&&(l.y=e),null!=n&&(l.width=n),null!=i&&(l.height=i),l.viewBox=null!=r&&null!=s&&null!=a&&null!=h?[r,s,a,h]:[t||0,e||0,n||0,i||0];return this.el("pattern",l)},a.use=function(t){return null!=t?(t instanceof i&&(t.attr("id")||t.attr({id:n._.id(t)}),t=t.attr("id")),"#"==String(t).charAt()&&(t=t.substring(1)),this.el("use",{"xlink:href":"#"+t})):i.prototype.use.call(this)},a.symbol=function(t,e,n,i){var r={};return null!=t&&null!=e&&null!=n&&null!=i&&(r.viewBox=[t,e,n,i]),this.el("symbol",r)},a.text=function(t,e,n){var i={};return o(t,"object")?i=t:null!=t&&(i={x:t,y:e,text:n||""}),this.el("text",i)},a.line=function(t,e,n,i){var r={};return o(t,"object")?r=t:null!=t&&(r={x1:t,x2:n,y1:e,y2:i}),this.el("line",r)},a.polyline=function(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,0));var e={};return o(t,"object")&&!o(t,"array")?e=t:null!=t&&(e={points:t}),this.el("polyline",e)},a.polygon=function(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,0));var e={};return o(t,"object")&&!o(t,"array")?e=t:null!=t&&(e={points:t}),this.el("polygon",e)},function(){function i(){return this.selectAll("stop")}function r(t,e){var i=l("stop"),r={offset:+e+"%"};return t=n.color(t),r["stop-color"]=t.hex,t.opacity<1&&(r["stop-opacity"]=t.opacity),l(i,r),this.node.appendChild(i),this}function s(){if("linearGradient"==this.type){var t=l(this.node,"x1")||0,e=l(this.node,"x2")||1,i=l(this.node,"y1")||0,r=l(this.node,"y2")||0;return n._.box(t,i,math.abs(e-t),math.abs(r-i))}var s=this.node.cx||.5,a=this.node.cy||.5,o=this.node.r||0;return n._.box(s-o,a-o,2*o,2*o)}function o(t,e,a,o,h){var u=n._.make("linearGradient",t);return u.stops=i,u.addStop=r,u.getBBox=s,null!=e&&l(u.node,{x1:e,y1:a,x2:o,y2:h}),u}function h(t,e,a,o,h,u){var d=n._.make("radialGradient",t);return d.stops=i,d.addStop=r,d.getBBox=s,null!=e&&l(d.node,{cx:e,cy:a,r:o}),null!=h&&null!=u&&l(d.node,{fx:h,fy:u}),d}var l=n._.$;a.gradient=function(t){return function(t,n){function i(t,e){for(var n=(e-d)/(t-p),i=p;t>i;i++)a[i].offset=+(+d+n*(i-p)).toFixed(2);p=t,d=e}var r,s=e("snap.util.grad.parse",null,n).firstDefined();if(!s)return null;s.params.unshift(t),r="l"==s.type.toLowerCase()?o.apply(0,s.params):h.apply(0,s.params),s.type!=s.type.toLowerCase()&&l(r.node,{gradientUnits:"userSpaceOnUse"});var a=s.stops,u=a.length,d=0,p=0;u--;for(var c=0;u>c;c++)"offset"in a[c]&&i(c,a[c].offset);for(a[u].offset=a[u].offset||100,i(u,a[u].offset),c=0;u>=c;c++){var f=a[c];r.addStop(f.color,f.offset)}return r}(this.defs,t)},a.gradientLinear=function(t,e,n,i){return o(this.defs,t,e,n,i)},a.gradientRadial=function(t,e,n,i,r){return h(this.defs,t,e,n,i,r)},a.toString=function(){var t,e=this.node.ownerDocument,i=e.createDocumentFragment(),r=e.createElement("div"),s=this.node.cloneNode(!0);return i.appendChild(r),r.appendChild(s),n._.$(s,{xmlns:"http://www.w3.org/2000/svg"}),t=r.innerHTML,i.removeChild(i.firstChild),t},a.toDataURL=function(){return t&&t.btoa?"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this))):void 0},a.clear=function(){for(var t,e=this.node.firstChild;e;)t=e.nextSibling,"defs"!=e.tagName?e.parentNode.removeChild(e):a.clear.call({node:e}),e=t}}()})),i.plugin((function(t,e){function n(t){var e=n.ps=n.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout((function(){for(var n in e)e[D](n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])})),e[t]}function i(t,e,n,i){return null==t&&(t=e=n=i=0),null==e&&(e=t.y,n=t.width,i=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:i,h:i,x2:t+n,y2:e+i,cx:t+n/2,cy:e+i/2,r1:B.min(n,i)/2,r2:B.max(n,i)/2,r0:B.sqrt(n*n+i*i)/2,path:y(t,e,n,i),vb:[t,e,n,i].join(" ")}}function r(){return this.join(",").replace(E,"$1")}function s(t){var e=T(t);return e.toString=r,e}function a(t,e,n,i,r,s,a,o,l){return null==l?c(t,e,n,i,r,s,a,o):h(t,e,n,i,r,s,a,o,function(t,e,n,i,r,s,a,o,h){if(!(0>h||c(t,e,n,i,r,s,a,o)<h)){var l,u=1,d=u/2,p=u-d,f=.01;for(l=c(t,e,n,i,r,s,a,o,p);H(l-h)>f;)l=c(t,e,n,i,r,s,a,o,p+=(h>l?1:-1)*(d/=2));return p}}(t,e,n,i,r,s,a,o,l))}function o(n,i){function r(t){return+(+t).toFixed(3)}return t._.cacher((function(t,s,o){t instanceof e&&(t=t.attr("d"));for(var l,u,d,p,c,f="",g={},_=0,m=0,y=(t=M(t)).length;y>m;m++){if("M"==(d=t[m])[0])l=+d[1],u=+d[2];else{if(_+(p=a(l,u,d[1],d[2],d[3],d[4],d[5],d[6]))>s){if(i&&!g.start){if(f+=["C"+r((c=a(l,u,d[1],d[2],d[3],d[4],d[5],d[6],s-_)).start.x),r(c.start.y),r(c.m.x),r(c.m.y),r(c.x),r(c.y)],o)return f;g.start=f,f=["M"+r(c.x),r(c.y)+"C"+r(c.n.x),r(c.n.y),r(c.end.x),r(c.end.y),r(d[5]),r(d[6])].join(),_+=p,l=+d[5],u=+d[6];continue}if(!n&&!i)return a(l,u,d[1],d[2],d[3],d[4],d[5],d[6],s-_)}_+=p,l=+d[5],u=+d[6]}f+=d.shift()+d}return g.end=f,n?_:i?g:h(l,u,d[0],d[1],d[2],d[3],d[4],d[5],1)}),null,t._.clone)}function h(t,e,n,i,r,s,a,o,h){var l=1-h,u=q(l,3),d=q(l,2),p=h*h,c=p*h,f=t+2*h*(n-t)+p*(r-2*n+t),g=e+2*h*(i-e)+p*(s-2*i+e),_=n+2*h*(r-n)+p*(a-2*r+n),m=i+2*h*(s-i)+p*(o-2*s+i);return{x:u*t+3*d*h*n+3*l*h*h*r+c*a,y:u*e+3*d*h*i+3*l*h*h*s+c*o,m:{x:f,y:g},n:{x:_,y:m},start:{x:l*t+h*n,y:l*e+h*i},end:{x:l*r+h*a,y:l*s+h*o},alpha:90-180*B.atan2(f-_,g-m)/F}}function l(e,n,r,s,a,o,h,l){t.is(e,"array")||(e=[e,n,r,s,a,o,h,l]);var u=S.apply(null,e);return i(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)}function u(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height}function d(t,e){return t=i(t),u(e=i(e),t.x,t.y)||u(e,t.x2,t.y)||u(e,t.x,t.y2)||u(e,t.x2,t.y2)||u(t,e.x,e.y)||u(t,e.x2,e.y)||u(t,e.x,e.y2)||u(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}function p(t,e,n,i,r){return t*(t*(-3*e+9*n-9*i+3*r)+6*e-12*n+6*i)-3*e+3*n}function c(t,e,n,i,r,s,a,o,h){null==h&&(h=1);for(var l=(h=h>1?1:0>h?0:h)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],c=0,f=0;12>f;f++){var g=l*u[f]+l,_=p(g,t,n,r,a),m=p(g,e,i,s,o),y=_*_+m*m;c+=d[f]*B.sqrt(y)}return l*c}function f(t,e,n,i,r,s,a,o){if(!(N(t,n)<L(r,a)||L(t,n)>N(r,a)||N(e,i)<L(s,o)||L(e,i)>N(s,o))){var h=(t-n)*(s-o)-(e-i)*(r-a);if(h){var l=((t*i-e*n)*(r-a)-(t-n)*(r*o-s*a))/h,u=((t*i-e*n)*(s-o)-(e-i)*(r*o-s*a))/h,d=+l.toFixed(2),p=+u.toFixed(2);if(!(d<+L(t,n).toFixed(2)||d>+N(t,n).toFixed(2)||d<+L(r,a).toFixed(2)||d>+N(r,a).toFixed(2)||p<+L(e,i).toFixed(2)||p>+N(e,i).toFixed(2)||p<+L(s,o).toFixed(2)||p>+N(s,o).toFixed(2)))return{x:l,y:u}}}}function g(t,e,n){if(!d(l(t),l(e)))return n?0:[];for(var i=~~(c.apply(0,t)/8),r=~~(c.apply(0,e)/8),s=[],a=[],o={},u=n?0:[],p=0;i+1>p;p++){var g=h.apply(0,t.concat(p/i));s.push({x:g.x,y:g.y,t:p/i})}for(p=0;r+1>p;p++)g=h.apply(0,e.concat(p/r)),a.push({x:g.x,y:g.y,t:p/r});for(p=0;i>p;p++)for(var _=0;r>_;_++){var m=s[p],y=s[p+1],v=a[_],x=a[_+1],b=H(y.x-m.x)<.001?"y":"x",w=H(x.x-v.x)<.001?"y":"x",k=f(m.x,m.y,y.x,y.y,v.x,v.y,x.x,x.y);if(k){if(o[k.x.toFixed(4)]==k.y.toFixed(4))continue;o[k.x.toFixed(4)]=k.y.toFixed(4);var S=m.t+H((k[b]-m[b])/(y[b]-m[b]))*(y.t-m.t),M=v.t+H((k[w]-v[w])/(x[w]-v[w]))*(x.t-v.t);S>=0&&1>=S&&M>=0&&1>=M&&(n?u++:u.push({x:k.x,y:k.y,t1:S,t2:M}))}}return u}function _(t,e,n){t=M(t),e=M(e);for(var i,r,s,a,o,h,l,u,d,p,c=n?0:[],f=0,_=t.length;_>f;f++){var m=t[f];if("M"==m[0])i=o=m[1],r=h=m[2];else{"C"==m[0]?(d=[i,r].concat(m.slice(1)),i=d[6],r=d[7]):(d=[i,r,i,r,o,h,o,h],i=o,r=h);for(var y=0,v=e.length;v>y;y++){var x=e[y];if("M"==x[0])s=l=x[1],a=u=x[2];else{"C"==x[0]?(p=[s,a].concat(x.slice(1)),s=p[6],a=p[7]):(p=[s,a,s,a,l,u,l,u],s=l,a=u);var b=g(d,p,n);if(n)c+=b;else{for(var w=0,k=b.length;k>w;w++)b[w].segment1=f,b[w].segment2=y,b[w].bez1=d,b[w].bez2=p;c=c.concat(b)}}}}}return c}function m(t){var e=n(t);if(e.bbox)return T(e.bbox);if(!t)return i();for(var r,s=0,a=0,o=[],h=[],l=0,u=(t=M(t)).length;u>l;l++)if("M"==(r=t[l])[0])s=r[1],a=r[2],o.push(s),h.push(a);else{var d=S(s,a,r[1],r[2],r[3],r[4],r[5],r[6]);o=o.concat(d.min.x,d.max.x),h=h.concat(d.min.y,d.max.y),s=r[5],a=r[6]}var p=L.apply(0,o),c=L.apply(0,h),f=i(p,c,N.apply(0,o)-p,N.apply(0,h)-c);return e.bbox=T(f),f}function y(t,e,n,i,s){if(s)return[["M",+t+ +s,e],["l",n-2*s,0],["a",s,s,0,0,1,s,s],["l",0,i-2*s],["a",s,s,0,0,1,-s,s],["l",2*s-n,0],["a",s,s,0,0,1,-s,-s],["l",0,2*s-i],["a",s,s,0,0,1,s,-s],["z"]];var a=[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]];return a.toString=r,a}function v(t,e,n,i,s){if(null==s&&null==i&&(i=n),t=+t,e=+e,n=+n,i=+i,null!=s)var a=Math.PI/180,o=t+n*Math.cos(-i*a),h=t+n*Math.cos(-s*a),l=[["M",o,e+n*Math.sin(-i*a)],["A",n,n,0,+(s-i>180),0,h,e+n*Math.sin(-s*a)]];else l=[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return l.toString=r,l}function x(e){var i=n(e);if(i.abs)return s(i.abs);if(A(e,"array")&&A(e&&e[0],"array")||(e=t.parsePathString(e)),!e||!e.length)return[["M",0,0]];var a,o=[],h=0,l=0,u=0,d=0,p=0;"M"==e[0][0]&&(u=h=+e[0][1],d=l=+e[0][2],p++,o[0]=["M",h,l]);for(var c,f,g=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),_=p,m=e.length;m>_;_++){if(o.push(c=[]),(a=(f=e[_])[0])!=a.toUpperCase())switch(c[0]=a.toUpperCase(),c[0]){case"A":c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=+f[6]+h,c[7]=+f[7]+l;break;case"V":c[1]=+f[1]+l;break;case"H":c[1]=+f[1]+h;break;case"R":for(var y=[h,l].concat(f.slice(1)),x=2,b=y.length;b>x;x++)y[x]=+y[x]+h,y[++x]=+y[x]+l;o.pop(),o=o.concat(C(y,g));break;case"O":o.pop(),(y=v(h,l,f[1],f[2])).push(y[0]),o=o.concat(y);break;case"U":o.pop(),o=o.concat(v(h,l,f[1],f[2],f[3])),c=["U"].concat(o[o.length-1].slice(-2));break;case"M":u=+f[1]+h,d=+f[2]+l;default:for(x=1,b=f.length;b>x;x++)c[x]=+f[x]+(x%2?h:l)}else if("R"==a)y=[h,l].concat(f.slice(1)),o.pop(),o=o.concat(C(y,g)),c=["R"].concat(f.slice(-2));else if("O"==a)o.pop(),(y=v(h,l,f[1],f[2])).push(y[0]),o=o.concat(y);else if("U"==a)o.pop(),o=o.concat(v(h,l,f[1],f[2],f[3])),c=["U"].concat(o[o.length-1].slice(-2));else for(var w=0,k=f.length;k>w;w++)c[w]=f[w];if("O"!=(a=a.toUpperCase()))switch(c[0]){case"Z":h=+u,l=+d;break;case"H":h=c[1];break;case"V":l=c[1];break;case"M":u=c[c.length-2],d=c[c.length-1];default:h=c[c.length-2],l=c[c.length-1]}}return o.toString=r,i.abs=s(o),o}function b(t,e,n,i){return[t,e,n,i,n,i]}function w(t,e,n,i,r,s){var a=1/3,o=2/3;return[a*t+o*n,a*e+o*i,a*r+o*n,a*s+o*i,r,s]}function k(e,n,i,r,s,a,o,h,l,u){var d,p=120*F/180,c=F/180*(+s||0),f=[],g=t._.cacher((function(t,e,n){return{x:t*B.cos(n)-e*B.sin(n),y:t*B.sin(n)+e*B.cos(n)}}));if(u)M=u[0],C=u[1],w=u[2],S=u[3];else{e=(d=g(e,n,-c)).x,n=d.y,h=(d=g(h,l,-c)).x,l=d.y;var _=(B.cos(F/180*s),B.sin(F/180*s),(e-h)/2),m=(n-l)/2,y=_*_/(i*i)+m*m/(r*r);y>1&&(i*=y=B.sqrt(y),r*=y);var v=i*i,x=r*r,b=(a==o?-1:1)*B.sqrt(H((v*x-v*m*m-x*_*_)/(v*m*m+x*_*_))),w=b*i*m/r+(e+h)/2,S=b*-r*_/i+(n+l)/2,M=B.asin(((n-S)/r).toFixed(9)),C=B.asin(((l-S)/r).toFixed(9));0>(M=w>e?F-M:M)&&(M=2*F+M),0>(C=w>h?F-C:C)&&(C=2*F+C),o&&M>C&&(M-=2*F),!o&&C>M&&(C-=2*F)}var $=C-M;if(H($)>p){var A=C,T=h,D=l;C=M+p*(o&&C>M?1:-1),f=k(h=w+i*B.cos(C),l=S+r*B.sin(C),i,r,s,0,o,T,D,[C,A,w,S])}$=C-M;var E=B.cos(M),Y=B.sin(M),L=B.cos(C),N=B.sin(C),q=B.tan($/4),j=4/3*i*q,X=4/3*r*q,P=[e,n],O=[e+j*Y,n-X*E],V=[h+j*N,l-X*L],z=[h,l];if(O[0]=2*P[0]-O[0],O[1]=2*P[1]-O[1],u)return[O,V,z].concat(f);for(var G=[],R=0,W=(f=[O,V,z].concat(f).join().split(",")).length;W>R;R++)G[R]=R%2?g(f[R-1],f[R],c).y:g(f[R],f[R+1],c).x;return G}function S(t,e,n,i,r,s,a,o){for(var h,l,u,d,p,c,f,g,_=[],m=[[],[]],y=0;2>y;++y)if(0==y?(l=6*t-12*n+6*r,h=-3*t+9*n-9*r+3*a,u=3*n-3*t):(l=6*e-12*i+6*s,h=-3*e+9*i-9*s+3*o,u=3*i-3*e),H(h)<1e-12){if(H(l)<1e-12)continue;(d=-u/l)>0&&1>d&&_.push(d)}else f=l*l-4*u*h,g=B.sqrt(f),0>f||((p=(-l+g)/(2*h))>0&&1>p&&_.push(p),(c=(-l-g)/(2*h))>0&&1>c&&_.push(c));for(var v,x=_.length,b=x;x--;)v=1-(d=_[x]),m[0][x]=v*v*v*t+3*v*v*d*n+3*v*d*d*r+d*d*d*a,m[1][x]=v*v*v*e+3*v*v*d*i+3*v*d*d*s+d*d*d*o;return m[0][b]=t,m[1][b]=e,m[0][b+1]=a,m[1][b+1]=o,m[0].length=m[1].length=b+2,{min:{x:L.apply(0,m[0]),y:L.apply(0,m[1])},max:{x:N.apply(0,m[0]),y:N.apply(0,m[1])}}}function M(t,e){var i=!e&&n(t);if(!e&&i.curve)return s(i.curve);for(var r=x(t),a=e&&x(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=function(t,e,n){var i,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(k.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*e.x-e.bx,r=2*e.y-e.by):(i=e.x,r=e.y),t=["C",i,r].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(w(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(w(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(b(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(b(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(b(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(b(e.x,e.y,e.X,e.Y))}return t},u=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)p[e]="A",a&&(c[e]="A"),t.splice(e++,0,["C"].concat(n.splice(0,6)));t.splice(e,1),m=N(r.length,a&&a.length||0)}},d=function(t,e,n,i,s){t&&e&&"M"==t[s][0]&&"M"!=e[s][0]&&(e.splice(s,0,["M",i.x,i.y]),n.bx=0,n.by=0,n.x=t[s][1],n.y=t[s][2],m=N(r.length,a&&a.length||0))},p=[],c=[],f="",g="",_=0,m=N(r.length,a&&a.length||0);m>_;_++){r[_]&&(f=r[_][0]),"C"!=f&&(p[_]=f,_&&(g=p[_-1])),r[_]=l(r[_],o,g),"A"!=p[_]&&"C"==f&&(p[_]="C"),u(r,_),a&&(a[_]&&(f=a[_][0]),"C"!=f&&(c[_]=f,_&&(g=c[_-1])),a[_]=l(a[_],h,g),"A"!=c[_]&&"C"==f&&(c[_]="C"),u(a,_)),d(r,a,o,h,_),d(a,r,h,o,_);var y=r[_],v=a&&a[_],S=y.length,M=a&&v.length;o.x=y[S-2],o.y=y[S-1],o.bx=Y(y[S-4])||o.x,o.by=Y(y[S-3])||o.y,h.bx=a&&(Y(v[M-4])||h.x),h.by=a&&(Y(v[M-3])||h.y),h.x=a&&v[M-2],h.y=a&&v[M-1]}return a||(i.curve=s(r)),a?[r,a]:r}function C(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var s=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4==i?s[3]={x:+t[0],y:+t[1]}:r-2==i&&(s[2]={x:+t[0],y:+t[1]},s[3]={x:+t[2],y:+t[3]}):s[0]={x:+t[r-2],y:+t[r-1]}:r-4==i?s[3]=s[2]:i||(s[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return n}var $=e.prototype,A=t.is,T=t._.clone,D="hasOwnProperty",E=/,?([a-z]),?/gi,Y=parseFloat,B=Math,F=B.PI,L=B.min,N=B.max,q=B.pow,H=B.abs,j=o(1),X=o(),P=o(0,1),O=t._unit2px,V={path:function(t){return t.attr("path")},circle:function(t){var e=O(t);return v(e.cx,e.cy,e.r)},ellipse:function(t){var e=O(t);return v(e.cx||0,e.cy||0,e.rx,e.ry)},rect:function(t){var e=O(t);return y(e.x||0,e.y||0,e.width,e.height,e.rx,e.ry)},image:function(t){var e=O(t);return y(e.x||0,e.y||0,e.width,e.height)},line:function(t){return"M"+[t.attr("x1")||0,t.attr("y1")||0,t.attr("x2"),t.attr("y2")]},polyline:function(t){return"M"+t.attr("points")},polygon:function(t){return"M"+t.attr("points")+"z"},deflt:function(t){var e=t.node.getBBox();return y(e.x,e.y,e.width,e.height)}};t.path=n,t.path.getTotalLength=j,t.path.getPointAtLength=X,t.path.getSubpath=function(t,e,n){if(this.getTotalLength(t)-n<1e-6)return P(t,e).end;var i=P(t,n,1);return e?P(i,e).end:i},$.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},$.getPointAtLength=function(t){return X(this.attr("d"),t)},$.getSubpath=function(e,n){return t.path.getSubpath(this.attr("d"),e,n)},t._.box=i,t.path.findDotsAtSegment=h,t.path.bezierBBox=l,t.path.isPointInsideBBox=u,t.closest=function(e,n,r,s){for(var a=100,o=i(e-a/2,n-a/2,a,a),h=[],l=r[0].hasOwnProperty("x")?function(t){return{x:r[t].x,y:r[t].y}}:function(t){return{x:r[t],y:s[t]}},d=0;1e6>=a&&!d;){for(var p=0,c=r.length;c>p;p++){var f=l(p);if(u(o,f.x,f.y)){d++,h.push(f);break}}d||(o=i(e-(a*=2)/2,n-a/2,a,a))}if(1e6!=a){var g,_=1/0;for(p=0,c=h.length;c>p;p++){var m=t.len(e,n,h[p].x,h[p].y);_>m&&(_=m,h[p].len=m,g=h[p])}return g}},t.path.isBBoxIntersect=d,t.path.intersection=function(t,e){return _(t,e)},t.path.intersectionNumber=function(t,e){return _(t,e,1)},t.path.isPointInside=function(t,e,n){var i=m(t);return u(i,e,n)&&_(t,[["M",e,n],["H",i.x2+10]],1)%2==1},t.path.getBBox=m,t.path.get=V,t.path.toRelative=function(e){var i=n(e),a=String.prototype.toLowerCase;if(i.rel)return s(i.rel);t.is(e,"array")&&t.is(e&&e[0],"array")||(e=t.parsePathString(e));var o=[],h=0,l=0,u=0,d=0,p=0;"M"==e[0][0]&&(u=h=e[0][1],d=l=e[0][2],p++,o.push(["M",h,l]));for(var c=p,f=e.length;f>c;c++){var g=o[c]=[],_=e[c];if(_[0]!=a.call(_[0]))switch(g[0]=a.call(_[0]),g[0]){case"a":g[1]=_[1],g[2]=_[2],g[3]=_[3],g[4]=_[4],g[5]=_[5],g[6]=+(_[6]-h).toFixed(3),g[7]=+(_[7]-l).toFixed(3);break;case"v":g[1]=+(_[1]-l).toFixed(3);break;case"m":u=_[1],d=_[2];default:for(var m=1,y=_.length;y>m;m++)g[m]=+(_[m]-(m%2?h:l)).toFixed(3)}else{g=o[c]=[],"m"==_[0]&&(u=_[1]+h,d=_[2]+l);for(var v=0,x=_.length;x>v;v++)o[c][v]=_[v]}var b=o[c].length;switch(o[c][0]){case"z":h=u,l=d;break;case"h":h+=+o[c][b-1];break;case"v":l+=+o[c][b-1];break;default:h+=+o[c][b-2],l+=+o[c][b-1]}}return o.toString=r,i.rel=s(o),o},t.path.toAbsolute=x,t.path.toCubic=M,t.path.map=function(t,e){if(!e)return t;var n,i,r,s,a,o,h;for(r=0,a=(t=M(t)).length;a>r;r++)for(s=1,o=(h=t[r]).length;o>s;s+=2)n=e.x(h[s],h[s+1]),i=e.y(h[s],h[s+1]),h[s]=n,h[s+1]=i;return t},t.path.toString=r,t.path.clone=s})),i.plugin((function(t){var i=Math.max,r=Math.min,s=function(t){if(this.items=[],this.bindings={},this.length=0,this.type="set",t)for(var e=0,n=t.length;n>e;e++)t[e]&&(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},a=s.prototype;a.push=function(){for(var t,e,n=0,i=arguments.length;i>n;n++)(t=arguments[n])&&(this[e=this.items.length]=this.items[e]=t,this.length++);return this},a.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},a.forEach=function(t,e){for(var n=0,i=this.items.length;i>n;n++)if(!1===t.call(e,this.items[n],n))return this;return this},a.animate=function(i,r,s,a){"function"!=typeof s||s.length||(a=s,s=n.linear),i instanceof t._.Animation&&(a=i.callback,s=i.easing,r=s.dur,i=i.attr);var o=arguments;if(t.is(i,"array")&&t.is(o[o.length-1],"array"))var h=!0;var l,u=function(){l?this.b=l:l=this.b},d=0,p=this,c=a&&function(){++d==p.length&&a.call(this)};return this.forEach((function(t,n){e.once("snap.animcreated."+t.id,u),h?o[n]&&t.animate.apply(t,o[n]):t.animate(i,r,s,c)}))},a.remove=function(){for(;this.length;)this.pop().remove();return this},a.bind=function(t,e,n){var i={};if("function"==typeof e)this.bindings[t]=e;else{var r=n||t;this.bindings[t]=function(t){i[r]=t,e.attr(i)}}return this},a.attr=function(t){var e={};for(var n in t)this.bindings[n]?this.bindings[n](t[n]):e[n]=t[n];for(var i=0,r=this.items.length;r>i;i++)this.items[i].attr(e);return this},a.clear=function(){for(;this.length;)this.pop()},a.splice=function(t,e){t=0>t?i(this.length+t,0):t,e=i(0,r(this.length-t,e));var n,a=[],o=[],h=[];for(n=2;n<arguments.length;n++)h.push(arguments[n]);for(n=0;e>n;n++)o.push(this[t+n]);for(;n<this.length-t;n++)a.push(this[t+n]);var l=h.length;for(n=0;n<l+a.length;n++)this.items[t+n]=this[t+n]=l>n?h[n]:a[n-l];for(n=this.items.length=this.length-=e-l;this[n];)delete this[n++];return new s(o)},a.exclude=function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]==t)return this.splice(e,1),!0;return!1},a.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},a.getBBox=function(){for(var t=[],e=[],n=[],s=[],a=this.items.length;a--;)if(!this.items[a].removed){var o=this.items[a].getBBox();t.push(o.x),e.push(o.y),n.push(o.x+o.width),s.push(o.y+o.height)}return{x:t=r.apply(0,t),y:e=r.apply(0,e),x2:n=i.apply(0,n),y2:s=i.apply(0,s),width:n-t,height:s-e,cx:t+(n-t)/2,cy:e+(s-e)/2}},a.clone=function(t){t=new s;for(var e=0,n=this.items.length;n>e;e++)t.push(this.items[e].clone());return t},a.toString=function(){return"Snap‘s set"},a.type="set",t.Set=s,t.set=function(){var t=new s;return arguments.length&&t.push.apply(t,Array.prototype.slice.call(arguments,0)),t}})),i.plugin((function(t,n){function i(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}}function r(e,n,r){n=f(n).replace(/\.{3}|\u2026/g,e),e=t.parseTransformString(e)||[],n=t.parseTransformString(n)||[];for(var s,a,o,h,d=Math.max(e.length,n.length),p=[],c=[],g=0;d>g;g++){if(o=e[g]||i(n[g]),h=n[g]||i(o),o[0]!=h[0]||"r"==o[0].toLowerCase()&&(o[2]!=h[2]||o[3]!=h[3])||"s"==o[0].toLowerCase()&&(o[3]!=h[3]||o[4]!=h[4])){e=t._.transform2matrix(e,r()),n=t._.transform2matrix(n,r()),p=[["m",e.a,e.b,e.c,e.d,e.e,e.f]],c=[["m",n.a,n.b,n.c,n.d,n.e,n.f]];break}for(p[g]=[],c[g]=[],s=0,a=Math.max(o.length,h.length);a>s;s++)s in o&&(p[g][s]=o[s]),s in h&&(c[g][s]=h[s])}return{from:u(p),to:u(c),f:l(p)}}function s(t){return t}function a(t){return function(e){return+e.toFixed(3)+t}}function o(t){return t.join(" ")}function h(e){return t.rgb(e[0],e[1],e[2])}function l(t){var e,n,i,r,s,a,o=0,h=[];for(e=0,n=t.length;n>e;e++){for(s="[",a=['"'+t[e][0]+'"'],i=1,r=t[e].length;r>i;i++)a[i]="val["+o+++"]";s+=a+"]",h[e]=s}return Function("val","return Snap.path.toString.call(["+h+"])")}function u(t){for(var e=[],n=0,i=t.length;i>n;n++)for(var r=1,s=t[n].length;s>r;r++)e.push(t[n][r]);return e}function d(t){return isFinite(parseFloat(t))}var p={},c=/[a-z]+$/i,f=String;p.stroke=p.fill="colour",n.prototype.equal=function(t,n){return e("snap.util.equal",this,t,n).firstDefined()},e.on("snap.util.equal",(function(e,n){var i,g,_=f(this.attr(e)||""),m=this;if(d(_)&&d(n))return{from:parseFloat(_),to:parseFloat(n),f:s};if("colour"==p[e])return i=t.color(_),g=t.color(n),{from:[i.r,i.g,i.b,i.opacity],to:[g.r,g.g,g.b,g.opacity],f:h};if("viewBox"==e)return{from:i=this.attr(e).vb.split(" ").map(Number),to:g=n.split(" ").map(Number),f:o};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return n instanceof t.Matrix&&(n=n.toTransformString()),t._.rgTransform.test(n)||(n=t._.svgTransform2string(n)),r(_,n,(function(){return m.getBBox(1)}));if("d"==e||"path"==e)return{from:u((i=t.path.toCubic(_,n))[0]),to:u(i[1]),f:l(i[0])};if("points"==e)return{from:i=f(_).split(t._.separator),to:g=f(n).split(t._.separator),f:function(t){return t}};var y=_.match(c),v=f(n).match(c);return y&&function(e,n){return!(!t.is(e,"array")||!t.is(n,"array"))&&e.toString()==n.toString()}(y,v)?{from:parseFloat(_),to:parseFloat(n),f:a(y)}:{from:this.asPX(e),to:this.asPX(e,n),f:s}}))})),i.plugin((function(t,n,i,r){for(var s=n.prototype,a=("createTouch"in r.doc),o=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],h={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},l=function(t,e){var n="y"==t?"scrollTop":"scrollLeft",i=e&&e.node?e.node.ownerDocument:r.doc;return i[n in i.documentElement?"documentElement":"body"][n]},u=function(){return this.originalEvent.preventDefault()},d=function(){return this.originalEvent.stopPropagation()},p=function(t,e,n,i){var r=a&&h[e]?h[e]:e,s=function(r){var s=l("y",i),o=l("x",i);if(a&&h.hasOwnProperty(e))for(var p=0,c=r.targetTouches&&r.targetTouches.length;c>p;p++)if(r.targetTouches[p].target==t||t.contains(r.targetTouches[p].target)){var f=r;(r=r.targetTouches[p]).originalEvent=f,r.preventDefault=u,r.stopPropagation=d;break}var g=r.clientX+o,_=r.clientY+s;return n.call(i,r,g,_)};return e!==r&&t.addEventListener(e,s,!1),t.addEventListener(r,s,!1),function(){return e!==r&&t.removeEventListener(e,s,!1),t.removeEventListener(r,s,!1),!0}},c=[],f=function(t){for(var n,i=t.clientX,r=t.clientY,s=l("y"),o=l("x"),h=c.length;h--;){if(n=c[h],a){for(var u,d=t.touches&&t.touches.length;d--;)if((u=t.touches[d]).identifier==n.el._drag.id||n.el.node.contains(u.target)){i=u.clientX,r=u.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var p=n.el.node;p.nextSibling,p.parentNode,p.style.display,i+=o,r+=s,e("snap.drag.move."+n.el.id,n.move_scope||n.el,i-n.el._drag.x,r-n.el._drag.y,i,r,t)}},g=function(n){t.unmousemove(f).unmouseup(g);for(var i,r=c.length;r--;)(i=c[r]).el._drag={},e("snap.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,n),e.off("snap.drag.*."+i.el.id);c=[]},_=o.length;_--;)!function(e){t[e]=s[e]=function(n,i){if(t.is(n,"function"))this.events=this.events||[],this.events.push({name:e,f:n,unbind:p(this.node||document,e,n,i||this)});else for(var r=0,s=this.events.length;s>r;r++)if(this.events[r].name==e)try{this.events[r].f.call(this)}catch(t){}return this},t["un"+e]=s["un"+e]=function(t){for(var n=this.events||[],i=n.length;i--;)if(n[i].name==e&&(n[i].f==t||!t))return n[i].unbind(),n.splice(i,1),!n.length&&delete this.events,this;return this}}(o[_]);s.hover=function(t,e,n,i){return this.mouseover(t,n).mouseout(e,i||n)},s.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var m=[];s.drag=function(n,i,r,s,a,o){function h(h,l,u){(h.originalEvent||h).preventDefault(),d._drag.x=l,d._drag.y=u,d._drag.id=h.identifier,!c.length&&t.mousemove(f).mouseup(g),c.push({el:d,move_scope:s,start_scope:a,end_scope:o}),i&&e.on("snap.drag.start."+d.id,i),n&&e.on("snap.drag.move."+d.id,n),r&&e.on("snap.drag.end."+d.id,r),e("snap.drag.start."+d.id,a||s||d,l,u,h)}function l(t,n,i){e("snap.draginit."+d.id,d,t,n,i)}var u,d=this;return arguments.length?(e.on("snap.draginit."+d.id,h),d._drag={},m.push({el:d,start:h,init:l}),d.mousedown(l),d):d.drag((function(t,e){this.attr({transform:u+(u?"T":"t")+[t,e]})}),(function(){u=this.transform().local}))},s.undrag=function(){for(var n=m.length;n--;)m[n].el==this&&(this.unmousedown(m[n].init),m.splice(n,1),e.unbind("snap.drag.*."+this.id),e.unbind("snap.draginit."+this.id));return!m.length&&t.unmousemove(f).unmouseup(g),this}})),i.plugin((function(t,n,i){var r=(n.prototype,i.prototype),s=/^\s*url\((.+)\)/,a=String,o=t._.$;t.filter={},r.filter=function(e){var i=this;"svg"!=i.type&&(i=i.paper);var r=t.parse(a(e)),s=t._.id(),h=(i.node.offsetWidth,i.node.offsetHeight,o("filter"));return o(h,{id:s,filterUnits:"userSpaceOnUse"}),h.appendChild(r.node),i.defs.appendChild(h),new n(h)},e.on("snap.util.getattr.filter",(function(){e.stop();var n=o(this.node,"filter");if(n){var i=a(n).match(s);return i&&t.select(i[1])}})),e.on("snap.util.attr.filter",(function(i){if(i instanceof n&&"filter"==i.type){e.stop();var r=i.node.id;r||(o(i.node,{id:i.id}),r=i.id),o(this.node,{filter:t.url(r)})}i&&"none"!=i||(e.stop(),this.node.removeAttribute("filter"))})),t.filter.blur=function(e,n){null==e&&(e=2);var i=null==n?e:[e,n];return t.format('<feGaussianBlur stdDeviation="{def}"/>',{def:i})},t.filter.blur.toString=function(){return this()},t.filter.shadow=function(e,n,i,r,s){return"string"==typeof i&&(s=r=i,i=4),"string"!=typeof r&&(s=r,r="#000"),r=r||"#000",null==i&&(i=4),null==s&&(s=1),null==e&&(e=0,n=2),null==n&&(n=e),r=t.color(r),t.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:r,dx:e,dy:n,blur:i,opacity:s})},t.filter.shadow.toString=function(){return this()},t.filter.grayscale=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},t.filter.grayscale.toString=function(){return this()},t.filter.sepia=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},t.filter.sepia.toString=function(){return this()},t.filter.saturate=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-e})},t.filter.saturate.toString=function(){return this()},t.filter.hueRotate=function(e){return e=e||0,t.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:e})},t.filter.hueRotate.toString=function(){return this()},t.filter.invert=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:e,amount2:1-e})},t.filter.invert.toString=function(){return this()},t.filter.brightness=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:e})},t.filter.brightness.toString=function(){return this()},t.filter.contrast=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:e,amount2:.5-e/2})},t.filter.contrast.toString=function(){return this()}})),i.plugin((function(t,e){var n=t._.box,i=t.is,r=/^[^a-z]*([tbmlrc])/i,s=function(){return"T"+this.dx+","+this.dy};e.prototype.getAlign=function(t,e){null==e&&i(t,"string")&&(e=t,t=null);var a=(t=t||this.paper).getBBox?t.getBBox():n(t),o=this.getBBox(),h={};switch(e=(e=e&&e.match(r))?e[1].toLowerCase():"c"){case"t":h.dx=0,h.dy=a.y-o.y;break;case"b":h.dx=0,h.dy=a.y2-o.y2;break;case"m":h.dx=0,h.dy=a.cy-o.cy;break;case"l":h.dx=a.x-o.x,h.dy=0;break;case"r":h.dx=a.x2-o.x2,h.dy=0;break;default:h.dx=a.cx-o.cx,h.dy=0}return h.toString=s,h},e.prototype.align=function(t,e){return this.transform("..."+this.getAlign(t,e))}})),i}));var Gantt=function(){"use strict";const t="year",e="month",n="day",i="hour",r="minute",s="second",a="millisecond";var o={parse(t,e="-",n=/[.:]/){if(t instanceof Date)return t;if("string"==typeof t){let i,r;const s=t.split(" ");i=s[0].split(e).map((t=>parseInt(t,10))),r=s[1]&&s[1].split(n),i[1]=i[1]-1;let a=i;return r&&r.length&&(4==r.length&&(r[3]="0."+r[3],r[3]=1e3*parseFloat(r[3])),a=a.concat(r)),new Date(...a)}},to_string(t,e=!1){if(!(t instanceof Date))throw new TypeError("Invalid argument type");const n=this.get_date_values(t).map(((t,e)=>(1===e&&(t+=1),h(t+"",6===e?3:2,"0")))),i=`${n[0]}-${n[1]}-${n[2]}`,r=`${n[3]}:${n[4]}:${n[5]}.${n[6]}`;return i+(e?" "+r:"")},format(t,e="YYYY-MM-DD HH:mm:ss.SSS",n="en"){const i=new Intl.DateTimeFormat(n,{month:"long"}).format(t),r=i.charAt(0).toUpperCase()+i.slice(1),s=this.get_date_values(t).map((t=>h(t,2,0))),a={YYYY:s[0],MM:h(+s[1]+1,2,0),DD:s[2],HH:s[3],mm:s[4],ss:s[5],SSS:s[6],D:s[2],MMMM:r,MMM:r};let o=e;const l=[];return Object.keys(a).sort(((t,e)=>e.length-t.length)).forEach((t=>{o.includes(t)&&(o=o.replace(t,`$${l.length}`),l.push(a[t]))})),l.forEach(((t,e)=>{o=o.replace(`$${e}`,t)})),o},diff(t,e,i=n){let r,s,a,o,h,l,u;return r=t-e,s=r/1e3,o=s/60,a=o/60,h=a/24,l=h/30,u=l/12,i.endsWith("s")||(i+="s"),Math.floor({milliseconds:r,seconds:s,minutes:o,hours:a,days:h,months:l,years:u}[i])},today(){const t=this.get_date_values(new Date).slice(0,3);return new Date(...t)},now:()=>new Date,add(o,h,l){h=parseInt(h,10);const u=[o.getFullYear()+(l===t?h:0),o.getMonth()+(l===e?h:0),o.getDate()+(l===n?h:0),o.getHours()+(l===i?h:0),o.getMinutes()+(l===r?h:0),o.getSeconds()+(l===s?h:0),o.getMilliseconds()+(l===a?h:0)];return new Date(...u)},start_of(o,h){const l={[t]:6,[e]:5,[n]:4,[i]:3,[r]:2,[s]:1,[a]:0};function u(t){return l[t]<=l[h]}const d=[o.getFullYear(),u(t)?0:o.getMonth(),u(e)?1:o.getDate(),u(n)?0:o.getHours(),u(i)?0:o.getMinutes(),u(r)?0:o.getSeconds(),u(s)?0:o.getMilliseconds()];return new Date(...d)},clone(t){return new Date(...this.get_date_values(t))},get_date_values:t=>[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()],get_days_in_month(t){const e=t.getMonth(),n=t.getFullYear();return new Date(n,e+1,0).getDate()}};function h(t,e,n){return t+="",e>>=0,n=String(void 0!==n?n:" "),t.length>e?String(t):((e-=t.length)>n.length&&(n+=n.repeat(e/n.length)),n.slice(0,e)+String(t))}function l(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function u(t,e){const n=document.createElementNS("http://www.w3.org/2000/svg",t);for(let t in e)if("append_to"===t){e.append_to.appendChild(n)}else"innerHTML"===t?n.innerHTML=e.innerHTML:"clipPath"===t?n.setAttribute("clip-path","url(#"+e[t]+")"):n.setAttribute(t,e[t]);return n}l.on=(t,e,n,i)=>{i?l.delegate(t,e,n,i):(i=n,l.bind(t,e,i))},l.off=(t,e,n)=>{t.removeEventListener(e,n)},l.bind=(t,e,n)=>{e.split(/\s+/).forEach((function(e){t.addEventListener(e,n)}))},l.delegate=(t,e,n,i)=>{t.addEventListener(e,(function(t){const e=t.target.closest(n);e&&(t.delegatedTarget=e,i.call(this,t,e))}))},l.closest=(t,e)=>e?e.matches(t)?e:l.closest(t,e.parentNode):null,l.attr=(t,e,n)=>{if(!n&&"string"==typeof e)return t.getAttribute(e);if("object"!=typeof e)t.setAttribute(e,n);else for(let n in e)l.attr(t,n,e[n])};class d{constructor(t,e){this.set_defaults(t,e),this.prepare(),this.draw(),this.bind()}set_defaults(t,e){this.action_completed=!1,this.gantt=t,this.task=e}prepare(){this.prepare_values(),this.prepare_helpers()}prepare_values(){this.invalid=this.task.invalid,this.height=this.task.bar_height,this.image_size=this.gantt.options.bar_height-16,this.x=this.compute_x(),this.y=this.compute_y(),this.corner_radius=this.gantt.options.bar_corner_radius,this.duration=o.diff(this.task._end,this.task._start,"hour")/this.gantt.options.step,this.width=this.gantt.options.column_width*this.duration,this.progress_width=this.gantt.options.column_width*this.duration*(this.task.progress/100)||0,this.group=u("g",{class:"bar-wrapper "+(this.task.custom_class||""),"data-id":this.task.id}),this.bar_group=u("g",{class:"bar-group",append_to:this.group}),this.handle_group=u("g",{class:"handle-group",append_to:this.group})}prepare_helpers(){SVGElement.prototype.getX=function(){return+this.getAttribute("x")},SVGElement.prototype.getY=function(){return+this.getAttribute("y")},SVGElement.prototype.getWidth=function(){return+this.getAttribute("width")},SVGElement.prototype.getHeight=function(){return+this.getAttribute("height")},SVGElement.prototype.getEndX=function(){return this.getX()+this.getWidth()}}draw(){this.draw_bar(),this.gantt.options.progress&&this.draw_progress_bar(),this.draw_label(),this.task.thumbnail&&this.draw_thumbnail(),this.gantt.options.resizing&&this.draw_resize_handles()}draw_bar(){this.$bar=u("rect",{x:this.x,y:this.y,width:this.width,height:this.height,rx:this.corner_radius,ry:this.corner_radius,fill:this.task.bg_color,class:"bar",append_to:this.bar_group}),this.invalid&&this.$bar.classList.add("bar-invalid")}draw_progress_bar(){this.invalid||(this.$bar_progress=u("rect",{x:this.x,y:this.y,width:this.progress_width,height:this.height,rx:this.corner_radius,ry:this.corner_radius,class:"bar-progress",append_to:this.bar_group}))}draw_label(){let t;t=this.task.thumbnail?this.x+this.image_size+5:this.x+5,u("text",{x:t,y:this.y+this.height/2,innerHTML:this.task.name,class:"bar-label",append_to:this.bar_group}),requestAnimationFrame((()=>this.update_label_position()))}draw_thumbnail(){var t,e,n=(this.height-this.image_size)/2;t=u("defs",{append_to:this.bar_group}),u("rect",{id:"rect_"+this.task.id,x:this.x+15,y:this.y+n,width:this.image_size,height:this.image_size,rx:"15",class:"img_mask",append_to:t}),e=u("clipPath",{id:"clip_"+this.task.id,append_to:t}),u("use",{href:"#rect_"+this.task.id,append_to:e}),u("image",{x:this.x+15,y:this.y+n,width:this.image_size,height:this.image_size,class:"bar-img",href:this.task.thumbnail,clipPath:"clip_"+this.task.id,append_to:this.bar_group})}draw_resize_handles(){if(this.invalid)return;const t=this.$bar;u("rect",{x:t.getX()+t.getWidth()-9,y:t.getY()+1,width:8,height:this.height-2,rx:this.corner_radius,ry:this.corner_radius,class:"handle right",append_to:this.handle_group}),u("rect",{x:t.getX()+1,y:t.getY()+1,width:8,height:this.height-2,rx:this.corner_radius,ry:this.corner_radius,class:"handle left",append_to:this.handle_group}),this.task.progress&&this.task.progress<100&&(this.$handle_progress=u("polygon",{points:this.get_progress_polygon_points().join(","),class:"handle progress",append_to:this.handle_group}))}get_progress_polygon_points(){const t=this.$bar_progress;return[t.getEndX()-5,t.getY()+t.getHeight(),t.getEndX()+5,t.getY()+t.getHeight(),t.getEndX(),t.getY()+t.getHeight()-8.66]}bind(){this.invalid||this.setup_click_event()}setup_click_event(){l.on(this.group,"focus "+this.gantt.options.popup_trigger,(t=>{this.action_completed||(this.show_popup(),this.gantt.unselect_all(),this.group.classList.add("active"))})),l.on(this.group,"dblclick",(t=>{this.action_completed||this.gantt.trigger_event("click",[this.task])}))}show_popup(){if(this.gantt.bar_being_dragged)return;const t=o.format(this.task._start,"MMM D",this.gantt.options.language)+" - "+o.format(o.add(this.task._end,-1,"second"),"MMM D",this.gantt.options.language);this.gantt.show_popup({target_element:this.$bar,title:this.task.name,subtitle:t,task:this.task})}update_bar_position({x:t=null,width:e=null,y:n=null}){const i=this.$bar;if(t){if(!this.task.dependencies.map((t=>this.gantt.get_bar(t).$bar.getX())).reduce(((e,n)=>t>=n),t))return void(e=null);this.update_attr(i,"x",t)}e&&e>=this.gantt.options.column_width/4&&this.update_attr(i,"width",e),n&&this.update_attr(i,"y",n),this.update_label_position(),this.gantt.options.resizing&&this.update_handle_position(),this.update_progressbar_position(),this.update_handle_position(),this.update_arrow_position()}update_label_position_on_horizontal_scroll(t){var e=t.x,n=t.sx,i=document.querySelector(".gantt-container"),r=this.group.querySelector(".bar-label"),s=this.group.querySelector(".bar-img")||"",a=this.bar_group.querySelector(".img_mask")||"",o=this.$bar.getX()+this.$bar.getWidth(),h=r.getX()+e,l=s&&s.getX()+e||0,u=s&&s.getBBox().width+7||7,d=h+r.getBBox().width+7,p=n+i.clientWidth/2;r.classList.contains("big")||(d<o&&e>0&&d<p||h-u>this.$bar.getX()&&e<0&&d>p)&&(r.setAttribute("x",h),s&&(s.setAttribute("x",l),a.setAttribute("x",l)))}date_changed(){let t=!1;const{new_start_date:e,new_end_date:n}=this.compute_start_end_date();Number(this.task._start)!==Number(e)&&(t=!0,this.task._start=e),Number(this.task._end)!==Number(n)&&(t=!0,this.task._end=n),t&&this.gantt.trigger_event("date_change",[this.task,o.format(e,"YYYY-MM-DD HH:mm:ss"),o.format(o.add(n,-1,"second"),"YYYY-MM-DD HH:mm:ss")])}sort_changed(){this.gantt.trigger_event("sort_change",[this.gantt.tasks])}progress_changed(){const t=this.compute_progress();this.task.progress=t,this.gantt.trigger_event("progress_change",[this.task,t])}set_action_completed(){this.action_completed=!0,setTimeout((()=>this.action_completed=!1),1e3)}compute_start_end_date(){const t=this.$bar,e=t.getX()/this.gantt.options.column_width,n=o.add(this.gantt.gantt_start,e*this.gantt.options.step,"hour"),i=t.getWidth()/this.gantt.options.column_width;return{new_start_date:n,new_end_date:o.add(n,i*this.gantt.options.step,"hour")}}compute_progress(){const t=this.$bar_progress.getWidth()/this.$bar.getWidth()*100;return parseInt(t,10)}compute_x(){const{step:t,column_width:e}=this.gantt.options,n=this.task._start,i=this.gantt.gantt_start;return o.diff(n,i,"hour")/t*e}compute_y(){return this.gantt.options.header_height+this.gantt.options.padding+this.task._index*(this.height+this.gantt.options.padding)}get_snap_position(t){let e,n,i=t;return this.gantt.view_is("Week")?(e=t%(this.gantt.options.column_width/7),n=i-e+(e<this.gantt.options.column_width/14?0:this.gantt.options.column_width/7)):this.gantt.view_is("Month")?(e=t%(this.gantt.options.column_width/30),n=i-e+(e<this.gantt.options.column_width/60?0:this.gantt.options.column_width/30)):this.gantt.view_is("Day")?(e=t%(this.gantt.options.column_width/24),n=i-e+(e<this.gantt.options.column_width/48?0:this.gantt.options.column_width/24)):(e=t%this.gantt.options.column_width,n=i-e+(e<this.gantt.options.column_width/2?0:this.gantt.options.column_width)),n}update_attr(t,e,n){return n=+n,isNaN(n)||t.setAttribute(e,n),t}update_progressbar_position(){this.invalid||(this.$bar_progress.setAttribute("x",this.$bar.getX()),this.$bar_progress.setAttribute("y",this.$bar.getY()),this.$bar_progress.setAttribute("width",this.$bar.getWidth()*(this.task.progress/100)))}update_label_position(){const t=this.bar_group.querySelector(".img_mask")||"",e=this.$bar,n=this.group.querySelector(".bar-label"),i=this.group.querySelector(".bar-img"),r=this.image_size+10,s=(e.getHeight()-this.image_size)/2;n.getBBox().width>e.getWidth()?(n.classList.add("big"),i?(i.setAttribute("x",e.getX()+e.getWidth()+5),t.setAttribute("x",e.getX()+e.getWidth()+5),n.setAttribute("x",e.getX()+e.getWidth()+r),i.setAttribute("y",e.getY()+s),t.setAttribute("y",e.getY()+s),n.setAttribute("y",e.getY()+e.getHeight()/2)):n.setAttribute("x",e.getX()+e.getWidth()+5)):(n.classList.remove("big"),i?(i.setAttribute("x",e.getX()+5),t.setAttribute("x",e.getX()+5),n.setAttribute("x",e.getX()+r),i.setAttribute("y",e.getY()+s),t.setAttribute("y",e.getY()+s),n.setAttribute("y",e.getY()+e.getHeight()/2)):(n.setAttribute("x",e.getX()+5),n.setAttribute("y",e.getY()+e.getHeight()/2)))}update_handle_position(){if(this.invalid)return;const t=this.$bar;this.handle_group.querySelector(".handle.left").setAttribute("x",t.getX()+1),this.handle_group.querySelector(".handle.left").setAttribute("y",t.getY()+1),this.handle_group.querySelector(".handle.right").setAttribute("x",t.getEndX()-9),this.handle_group.querySelector(".handle.right").setAttribute("y",t.getY()+1);const e=this.group.querySelector(".handle.progress");e&&e.setAttribute("points",this.get_progress_polygon_points())}update_arrow_position(){this.arrows=this.arrows||[];for(let t of this.arrows)t.update()}}class p{constructor(t,e,n){this.gantt=t,this.from_task=e,this.to_task=n,this.calculate_path(),this.draw()}calculate_path(){let t=this.from_task.$bar.getX()+this.from_task.$bar.getWidth()/2;const e=()=>this.to_task.$bar.getX()<t+this.gantt.options.padding&&t>this.from_task.$bar.getX()+this.gantt.options.padding;for(;e();)t-=10;const n=this.from_task.$bar.getY()+this.gantt.options.bar_height,i=this.to_task.$bar.getX()-this.gantt.options.padding/2,r=this.to_task.$bar.getY()+this.gantt.options.bar_height/2,s=this.from_task.$bar.getY()>this.to_task.$bar.getY(),a=this.gantt.options.arrow_curve,o=s?1:0,h=s?-a:a,l=s?r+this.gantt.options.arrow_curve:r-this.gantt.options.arrow_curve;if(this.path=`\n            M ${t} ${n}\n            V ${l}\n            a ${a} ${a} 0 0 ${o} ${a} ${h}\n            L ${i} ${r}\n            m -5 -5\n            l 5 5\n            l -5 5`,this.to_task.$bar.getX()<this.from_task.$bar.getX()+this.gantt.options.padding){const e=this.gantt.options.padding/2-a,s=this.to_task.$bar.getY()+this.to_task.$bar.getHeight()/2-h,l=this.to_task.$bar.getX()-this.gantt.options.padding;this.path=`\n                M ${t} ${n}\n                v ${e}\n                a ${a} ${a} 0 0 1 -${a} ${a}\n                H ${l}\n                a ${a} ${a} 0 0 ${o} -${a} ${h}\n                V ${s}\n                a ${a} ${a} 0 0 ${o} ${a} ${h}\n                L ${i} ${r}\n                m -5 -5\n                l 5 5\n                l -5 5`}}draw(){this.element=u("path",{d:this.path,"data-from":this.from_task.task.id,"data-to":this.to_task.task.id})}update(){this.calculate_path(),this.element.setAttribute("d",this.path)}}class c{constructor(t,e,n){this.parent=t,this.custom_html=e,this.make(),this.gantt=n}make(){this.parent.innerHTML='\n            <div class="title"></div>\n            <div class="subtitle"></div>\n            <div class="pointer"></div>\n        ',this.hide(),this.title=this.parent.querySelector(".title"),this.subtitle=this.parent.querySelector(".subtitle"),this.pointer=this.parent.querySelector(".pointer")}show(t){if(!t.target_element)throw new Error("target_element is required to show popup");t.position||(t.position="left");const e=t.target_element;if(this.custom_html){let e=this.custom_html(t.task);e+='<div class="pointer"></div>',this.parent.innerHTML=e,this.pointer=this.parent.querySelector(".pointer")}else this.title.innerHTML=t.title,this.subtitle.innerHTML=t.subtitle,this.parent.style.width=this.parent.clientWidth+"px";let n;e instanceof HTMLElement?n=e.getBoundingClientRect():e instanceof SVGElement&&(n=t.target_element.getBBox()),"left"===t.position&&(this.parent.style.left=n.x+(n.width+10)+"px",this.parent.style.top=n.y+"px",this.pointer.style.transform="rotateZ(90deg)",this.pointer.style.left="-7px",this.pointer.style.top="2px"),this.parent.style.opacity=1,this.gantt.trigger_event("popup_show",t.task)}hide(){this.parent.style.opacity=0,this.parent.style.left=0,this.parent.style.top="-1000px"}}const f={QUARTER_DAY:"Quarter Day",HALF_DAY:"Half Day",DAY:"Day",WEEK:"Week",MONTH:"Month",YEAR:"Year"};class g{constructor(t,e,n){this.setup_wrapper(t),this.setup_options(n),this.setup_tasks(e),this.change_view_mode(),this.bind_events()}setup_wrapper(t){let e,n;if("string"==typeof t&&(t=document.querySelector(t)),t instanceof HTMLElement)n=t,e=t.querySelector("svg");else{if(!(t instanceof SVGElement))throw new TypeError("Frappé Gantt only supports usage of a string CSS selector, HTML DOM element or SVG DOM element for the 'element' parameter");e=t}e?(this.$svg=e,this.$svg.classList.add("gantt")):this.$svg=u("svg",{append_to:n,class:"gantt"}),this.$container=document.createElement("div"),this.$container.classList.add("gantt-container");this.$svg.parentElement.appendChild(this.$container),this.$container.appendChild(this.$svg),this.popup_wrapper=document.createElement("div"),this.popup_wrapper.classList.add("popup-wrapper"),this.$container.appendChild(this.popup_wrapper)}setup_options(t){const e={header_height:55,column_width:30,step:24,view_modes:[...Object.values(f)],bar_height:20,bar_corner_radius:3,arrow_curve:5,padding:25,resizing:!0,progress:!0,is_draggable:!0,view_mode:"Day",date_format:"YYYY-MM-DD",popup_trigger:"click",custom_popup_html:null,additional_rows:0,language:"en",sortable:!0};this.options=Object.assign({},e,t)}setup_tasks(t){t.sort(((t,e)=>t.sortIndex<e.sortIndex?-1:t.sortIndex>e.sortIndex?1:0)),this.tasks=t.map(((t,e)=>{if(t._start=o.parse(t.start),t._end=o.parse(t.end),o.diff(t._end,t._start,"year")>10&&(t.end=null),t._index=e,!t.start&&!t.end){const e=o.today();t._start=e,t._end=o.add(e,2,"day")}!t.start&&t.end&&(t._start=o.add(t._end,-2,"day")),t.start&&!t.end&&(t._end=o.add(t._start,2,"day"));if(o.get_date_values(t._end).slice(3).every((t=>0===t))&&(t._end=o.add(t._end,24,"hour")),t.start&&t.end||(t.invalid=!0),"string"==typeof t.dependencies||!t.dependencies){let e=[];t.dependencies&&(e=t.dependencies.split(",").map((t=>t.trim())).filter((t=>t))),t.dependencies=e}return t.id||(t.id=function(t){return t.name+"_"+Math.random().toString(36).slice(2,12)}(t)),t.bg_color||(t.bg_color="#ccc"),t.bar_height||(t.bar_height=this.options.bar_height),t})),this.setup_dependencies()}setup_dependencies(){this.dependency_map={};for(let t of this.tasks)for(let e of t.dependencies)this.dependency_map[e]=this.dependency_map[e]||[],this.dependency_map[e].push(t.id)}refresh(t){this.setup_tasks(t),this.change_view_mode()}change_view_mode(t=this.options.view_mode){this.update_view_scale(t),this.setup_dates(),this.render(),this.trigger_event("view_change",[t])}update_view_scale(t){this.options.view_mode=t,t===f.DAY?(this.options.step=24,this.options.column_width=38):t===f.HALF_DAY?(this.options.step=12,this.options.column_width=38):t===f.QUARTER_DAY?(this.options.step=6,this.options.column_width=38):t===f.WEEK?(this.options.step=168,this.options.column_width=140):t===f.MONTH?(this.options.step=720,this.options.column_width=120):t===f.YEAR&&(this.options.step=8760,this.options.column_width=120)}setup_dates(){this.setup_gantt_dates(),this.setup_date_values()}setup_gantt_dates(){this.gantt_start=this.gantt_end=null;for(let t of this.tasks)(!this.gantt_start||t._start<this.gantt_start)&&(this.gantt_start=t._start),(!this.gantt_end||t._end>this.gantt_end)&&(this.gantt_end=t._end);if(this.gantt_start=o.start_of(this.gantt_start,"day"),this.gantt_end=o.start_of(this.gantt_end,"day"),this.view_is([f.QUARTER_DAY,f.HALF_DAY,f.DAY]))this.gantt_start=o.add(this.gantt_start,-7,"day"),this.gantt_end=o.add(this.gantt_end,31,"day");else if(this.view_is(f.WEEK)){let t=o.add(this.gantt_start,-3,"month");this.gantt_start=o.start_of(t,"month"),this.gantt_end=o.add(this.gantt_end,1,"year")}else if(this.view_is(f.MONTH)){let t=o.add(this.gantt_start,-3,"month");this.gantt_start=o.start_of(t,"month"),this.gantt_start=o.start_of(t,"month"),this.gantt_end=o.add(this.gantt_end,2,"year")}else if(this.view_is(f.YEAR)){let t=o.add(this.gantt_start,-2,"year");this.gantt_start=o.start_of(t,"month"),this.gantt_end=o.add(this.gantt_end,2,"year")}}setup_date_values(){this.dates=[];let t=null;for(;null===t||t<this.gantt_end;)t=t?this.view_is(f.YEAR)?o.add(t,1,"year"):this.view_is(f.WEEK)?o.add(t,7,"day"):this.view_is(f.MONTH)?o.add(t,1,"month"):o.add(t,this.options.step,"hour"):o.clone(this.gantt_start),this.dates.push(t)}bind_events(){this.bind_grid_click(),this.bind_bar_events()}render(){this.clear(),this.setup_layers(),this.make_grid(),this.make_dates(),this.make_bars(),this.make_arrows(),this.map_arrows_on_bars(),this.set_width(),this.set_scroll_position()}setup_layers(){this.layers={};const t=["grid","date","arrow","progress","bar","details"];for(let e of t)this.layers[e]=u("g",{class:e,append_to:this.$svg})}make_grid(){this.make_grid_background(),this.make_grid_rows(),this.make_grid_header(),this.make_grid_ticks(),this.make_grid_highlights()}make_grid_background(){const t=this.dates.length*this.options.column_width,e=this.options.header_height+this.options.padding+(this.options.bar_height+this.options.padding)*(this.tasks.length+this.options.additional_rows);u("rect",{x:0,y:0,width:t,height:e,class:"grid-background",append_to:this.layers.grid}),l.attr(this.$svg,{height:e+this.options.padding+100,width:"100%"})}make_grid_rows(){const t=u("g",{append_to:this.layers.grid}),e=u("g",{append_to:this.layers.grid}),n=this.dates.length*this.options.column_width,i=this.options.bar_height+this.options.padding;let r=this.options.header_height+this.options.padding/2,s=this.tasks.length+this.options.additional_rows;for(let a=0;a<s;a++)u("rect",{x:0,y:r,width:n,height:i,class:"grid-row",append_to:t}),u("line",{x1:0,y1:r+i,x2:n,y2:r+i,class:"row-line",append_to:e}),r+=this.options.bar_height+this.options.padding}make_grid_header(){const t=this.dates.length*this.options.column_width,e=this.options.header_height+10;u("rect",{x:0,y:0,width:t,height:e,class:"grid-header",append_to:this.layers.grid}),u("rect",{x:0,y:e/2-8,width:t,height:1,class:"grid-header-line",append_to:this.layers.grid})}make_grid_ticks(){let t=0,e=this.options.header_height+this.options.padding/2,n=(this.options.bar_height+this.options.padding)*(this.tasks.length+this.options.additional_rows);for(let i of this.dates){let r="tick";this.view_is(f.DAY)&&1===i.getDate()&&(r+=" thick"),this.view_is(f.WEEK)&&i.getDate()>=1&&i.getDate()<8&&(r+=" thick"),this.view_is(f.MONTH)&&i.getMonth()%3==0&&(r+=" thick"),u("path",{d:`M ${t} ${e} v ${n}`,class:r+" date-"+i.getDate()+" month-"+(i.getMonth()+1),append_to:this.layers.grid}),this.view_is(f.MONTH)?t+=this.options.column_width/30*o.get_days_in_month(i):t+=this.options.column_width}}make_grid_highlights(){if(this.view_is(f.DAY)){u("rect",{x:o.diff(o.today(),this.gantt_start,"hour")/this.options.step*this.options.column_width,y:0,width:this.options.column_width,height:(this.options.bar_height+this.options.padding)*(this.tasks.length+this.options.additional_rows)+this.options.header_height+this.options.padding/2,class:"today-highlight",append_to:this.layers.grid})}else if(this.view_is(f.WEEK)||this.view_is(f.MONTH)){const t=o.diff(o.today(),this.gantt_start,"hour")/this.options.step*this.options.column_width,e=this.options.header_height+this.options.padding/2;u("rect",{x:t,y:e,width:2,height:(this.options.bar_height+this.options.padding)*(this.tasks.length+this.options.additional_rows)+this.options.padding/2,class:"today-highlight",append_to:this.layers.grid}),u("circle",{cx:t+1,cy:e-8,r:10,class:"today-highlight-label-bg",append_to:this.layers.grid}),u("text",{x:t+1,y:e-4,innerHTML:o.today().getDate(),class:"today-highlight-label",append_to:this.layers.grid})}}make_dates(){for(let t of this.get_dates_to_draw())if(u("text",{x:t.lower_x,y:t.lower_y,innerHTML:t.lower_text,class:"lower-text",append_to:this.layers.date}),t.upper_text){const e=u("text",{x:t.upper_x,y:t.upper_y,innerHTML:t.upper_text,class:"upper-text",append_to:this.layers.date});e.getBBox().x2>this.layers.grid.getBBox().width&&e.remove()}}get_dates_to_draw(){let t=null;return this.dates.map(((e,n)=>{const i=this.get_date_info(e,t,n);return t=e,i}))}get_date_info(t,e,n){e||(e=o.add(t,1,"year"));const i={"Quarter Day_lower":o.format(t,"HH",this.options.language),"Half Day_lower":o.format(t,"HH",this.options.language),Day_lower:t.getDate()!==e.getDate()?o.format(t,"D",this.options.language):"",Week_lower:t.getMonth()!==e.getMonth()?o.format(t,"D MMM",this.options.language):o.format(t,"D",this.options.language),Month_lower:o.format(t,"MMMM",this.options.language),Year_lower:o.format(t,"YYYY",this.options.language),"Quarter Day_upper":t.getDate()!==e.getDate()?o.format(t,"D MMM",this.options.language):"","Half Day_upper":t.getDate()!==e.getDate()?t.getMonth()!==e.getMonth()?o.format(t,"D MMM",this.options.language):o.format(t,"D",this.options.language):"",Day_upper:t.getMonth()!==e.getMonth()?o.format(t,"MMMM",this.options.language):"",Week_upper:t.getMonth()!==e.getMonth()?o.format(t,"MMMM",this.options.language):"",Month_upper:t.getFullYear()!==e.getFullYear()?o.format(t,"YYYY",this.options.language):"",Year_upper:t.getFullYear()!==e.getFullYear()?o.format(t,"YYYY",this.options.language):""},r=n*this.options.column_width,s=this.options.header_height-4,a=this.options.header_height-34,h={"Quarter Day_lower":4*this.options.column_width/2,"Quarter Day_upper":0,"Half Day_lower":2*this.options.column_width/2,"Half Day_upper":0,Day_lower:this.options.column_width/2,Day_upper:30*this.options.column_width/2,Week_lower:0,Week_upper:4*this.options.column_width/2,Month_lower:this.options.column_width/2,Month_upper:12*this.options.column_width/2,Year_lower:this.options.column_width/2,Year_upper:30*this.options.column_width/2};return{upper_text:i[`${this.options.view_mode}_upper`],lower_text:i[`${this.options.view_mode}_lower`],upper_x:r+h[`${this.options.view_mode}_upper`],upper_y:a-2,lower_x:r+h[`${this.options.view_mode}_lower`],lower_y:s-10}}make_bars(){this.bars=this.tasks.map((t=>{const e=new d(this,t);return this.layers.bar.appendChild(e.group),e}))}make_arrows(){this.arrows=[];for(let t of this.tasks){let e=[];e=t.dependencies.map((e=>{const n=this.get_task(e);if(!n)return;const i=new p(this,this.bars[n._index],this.bars[t._index]);return this.layers.arrow.appendChild(i.element),i})).filter(Boolean),this.arrows=this.arrows.concat(e)}}map_arrows_on_bars(){for(let t of this.bars)t.arrows=this.arrows.filter((e=>e.from_task.task.id===t.task.id||e.to_task.task.id===t.task.id))}set_width(){const t=this.$svg.getBoundingClientRect().width,e=this.$svg.querySelector(".grid .grid-row").getAttribute("width");t<e&&this.$svg.setAttribute("width",e)}set_scroll_position(){const t=this.$svg.parentElement;if(!t)return;const e=o.diff(o.today(),this.gantt_start,"hour")/this.options.step*this.options.column_width-2*this.options.column_width;t.parentElement.scrollLeft=e}bind_grid_click(){l.on(this.$svg,this.options.popup_trigger,".grid-row, .grid-header",(()=>{this.unselect_all(),this.hide_popup()}))}sort_bars(){const t=[];return this.bars?(this.bars=this.bars.sort(((t,e)=>t.$bar.getY()-e.$bar.getY())),this.tasks=this.bars.map(((e,n)=>{const i=e.task;return i._index!==n&&t.push(e),i._index=n,i})),t):t}bind_bar_events(){let t=!1,e=0,n=0,i=!1,r=!1,s=null,a=[];const o=this.options.header_height,h=this.options.header_height+this.tasks.length*(this.options.bar_height+this.options.padding);this.bar_being_dragged=null,l.on(this.$svg,"mousedown",".bar-wrapper, .handle",((o,h)=>{const u=l.closest(".bar-wrapper",h);h.classList.contains("left")?i=!0:h.classList.contains("right")?r=!0:h.classList.contains("bar-wrapper")&&(t=!0),u.classList.add("active"),e=o.offsetX,n=o.offsetY,s=u.getAttribute("data-id");const d=[s,...this.get_all_dependent_tasks(s)];a=d.map((t=>{const e=this.get_bar(t);s===t&&(this.bar_being_dragged=e);const n=e.$bar;return n.ox=n.getX(),n.oy=n.getY(),n.owidth=n.getWidth(),n.finaldx=0,n.finaldy=0,e}))})),l.on(this.$svg,"mousemove",(l=>{if(!(t||i||r))return;const u=l.offsetX-e,d=l.offsetY-n;this.hide_popup();const p=this.bar_being_dragged;if(p.$bar.finaldx=this.get_snap_position(u),i)p.update_bar_position({x:p.$bar.ox+p.$bar.finaldx,width:p.$bar.owidth-p.$bar.finaldx});else if(r)p.update_bar_position({width:p.$bar.owidth+p.$bar.finaldx});else if(t){let t=p.$bar.oy+d;t<o?t=o:t>h&&(t=h),p.update_bar_position({x:p.$bar.ox+p.$bar.finaldx,y:this.options.sortable?t:null})}a.forEach((e=>{if(e.task.id===s)return;const n=e.$bar;n.finaldx=this.get_snap_position(u),this.hide_popup(),(i||t)&&e.update_bar_position({x:n.ox+n.finaldx})})),this.options.sortable&&t&&Math.abs(d-p.$bar.finaldy)>p.height&&this.sort_bars().map((t=>{const e=t.compute_y();t.task.id!==s?t.update_bar_position({y:e}):t.$bar.finaldy=e-t.$bar.oy}))})),document.addEventListener("mouseup",(e=>{const s=e.offsetY-n;if(t||i||r){a.forEach((t=>{t.group.classList.remove("active");t.$bar.finaldx&&(t.date_changed(),t.set_action_completed())}));const t=this.bar_being_dragged.$bar;this.options.sortable&&s!==t.finaldy&&(this.bar_being_dragged.update_bar_position({y:t.oy+t.finaldy}),this.bar_being_dragged.sort_changed())}this.bar_being_dragged=null,t=!1,i=!1,r=!1})),l.on(this.$container,"scroll",(function(t){var e=document.querySelectorAll(".bar-wrapper"),n=[],i=void 0;_this6.layers.date.setAttribute("transform","translate(0,"+t.currentTarget.scrollTop+")"),x_on_scroll_start&&(i=t.currentTarget.scrollLeft-x_on_scroll_start),Array.prototype.forEach.call(e,(function(t,e){n.push(t.getAttribute("data-id"))})),i&&n.map((function(t){return _this6.get_bar(t)})).forEach((function(e){e.update_label_position_on_horizontal_scroll({x:i,sx:t.currentTarget.scrollLeft})})),x_on_scroll_start=t.currentTarget.scrollLeft})),this.bind_bar_progress()}bind_bar_progress(){let t=0,e=0,n=null,i=null,r=null,s=null;0==this.options.static_progress_indicator&&(l.on(this.$svg,"mousedown",".handle.progress",((a,o)=>{n=!0,t=a.offsetX,e=a.offsetY;const h=l.closest(".bar-wrapper",o).getAttribute("data-id");i=this.get_bar(h),r=i.$bar_progress,s=i.$bar,r.finaldx=0,r.owidth=r.getWidth(),r.min_dx=-r.getWidth(),r.max_dx=s.getWidth()-r.getWidth()})),l.on(this.$svg,"mousemove",(e=>{if(!n)return;let s=e.offsetX-t;e.offsetY,s>r.max_dx&&(s=r.max_dx),s<r.min_dx&&(s=r.min_dx);const a=i.$handle_progress;l.attr(r,"width",r.owidth+s),l.attr(a,"points",i.get_progress_polygon_points()),r.finaldx=s})),l.on(this.$svg,"mouseup",(()=>{n=!1,r&&r.finaldx&&(i.progress_changed(),i.set_action_completed())})))}get_all_dependent_tasks(t){let e=[],n=[t];for(;n.length;){const t=n.reduce(((t,e)=>t=t.concat(this.dependency_map[e])),[]);e=e.concat(t),n=t.filter((t=>!n.includes(t)))}return e.filter(Boolean)}get_snap_position(t){let e,n,i=t;return this.view_is(f.WEEK)?(e=t%(this.options.column_width/7),n=i-e+(e<this.options.column_width/14?0:this.options.column_width/7)):this.view_is(f.MONTH)?(e=t%(this.options.column_width/30),n=i-e+(e<this.options.column_width/60?0:this.options.column_width/30)):this.view_is(f.DAY)?(e=t%(this.options.column_width/24),n=i-e+(e<this.options.column_width/48?0:this.options.column_width/24)):(e=t%this.options.column_width,n=i-e+(e<this.options.column_width/2?0:this.options.column_width)),n}unselect_all(){[...this.$svg.querySelectorAll(".bar-wrapper")].forEach((t=>{t.classList.remove("active")}))}view_is(t){return"string"==typeof t?this.options.view_mode===t:!!Array.isArray(t)&&t.some((t=>this.options.view_mode===t))}get_task(t){return this.tasks.find((e=>e.id===t))}get_bar(t){return this.bars.find((e=>e.task.id===t))}show_popup(t){this.popup||(this.popup=new c(this.popup_wrapper,this.options.custom_popup_html,this)),this.popup.show(t)}hide_popup(){this.popup&&this.popup.hide()}trigger_event(t,e){this.options["on_"+t]&&this.options["on_"+t].apply(null,e)}get_oldest_starting_date(){return this.tasks.map((t=>t._start)).reduce(((t,e)=>e<=t?e:t))}clear(){this.$svg.innerHTML=""}}return g.VIEW_MODE=f,g}();
