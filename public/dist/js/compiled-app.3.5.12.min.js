var leantime=leantime||{},themeColor=jQuery("meta[name=theme-color]").attr("content");leantime.companyColor=themeColor;var colorScheme=jQuery("meta[name=color-scheme]").attr("content");leantime.colorScheme=colorScheme;var theme=jQuery("meta[name=theme]").attr("content");leantime.theme=theme;var appURL=jQuery("meta[name=identifier-URL]").attr("content");leantime.appUrl=appURL;var leantimeVersion=jQuery("meta[name=leantime-version]").attr("content");leantime.version=leantimeVersion,leantime.replaceSVGColors=function(){jQuery(document).ready((function(){"#1b75bb"!=leantime.companyColor&&jQuery("svg").children().each((function(){"#1b75bb"==jQuery(this).attr("fill")&&jQuery(this).attr("fill",leantime.companyColor)}))}))},leantime.handleAsyncResponse=function(e){if(void 0!==e&&void 0!==e.result&&void 0!==e.result.html){var t=jQuery(e.result.html);jQuery("body").append(t)}},jQuery.noConflict(),jQuery(document).ready((function(){leantime.replaceSVGColors(),jQuery(".confetti").click((function(){confetti.start()})),tippy("[data-tippy-content]"),""!==jQuery(".login-alert .alert").text()&&jQuery(".login-alert").fadeIn(),document.addEventListener("scroll",(()=>{document.documentElement.dataset.scroll=window.scrollY}))})),htmx.onLoad((function(e){tippy("[data-tippy-content]")})),window.addEventListener("HTMX.ShowNotification",(function(e){jQuery.get(leantime.appUrl+"/notifications/getLatestGrowl",(function(e){let t=JSON.parse(e);t.notification&&"undefined"!==t.notification&&jQuery.growl({message:t.notification,style:t.notificationType})}))})),leantime.editorController=function(){var e=[{start:"*",end:"*",format:"italic"},{start:"_",end:"_",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"__",end:"__",format:"bold"},{start:"~~",end:"~~",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"},{start:"1. ",cmd:"InsertOrderedList",value:{"list-style-type":"decimal"}},{start:"1) ",cmd:"InsertOrderedList",value:{"list-style-type":"decimal"}},{start:"a. ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-alpha"}},{start:"a) ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-alpha"}},{start:"i. ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-roman"}},{start:"i) ",cmd:"InsertOrderedList",value:{"list-style-type":"lower-roman"}},{start:"[ ] ",cmd:"InsertChecklist"},{start:">",format:"blockquote"},{start:"`",end:"`",format:"code"},{start:"```",end:"```",format:"pre"},{start:"~",end:"~",cmd:"createLink"},{start:"---",replacement:"<hr/>"},{start:"--",replacement:"—"},{start:"-",replacement:"—"},{start:"(c)",replacement:"©"}],t={delimiter:"@",delay:20,source:function(e,t,n){"@"===n&&jQuery.getJSON(leantime.appUrl+"/api/users",{projectUsersAccess:"current",query:e},(function(e){let n=[];for(let t=0;t<e.length;t++)n[t]={name:e[t].firstname+" "+e[t].lastname,id:e[t].id,email:e[t].username};t(n)}))},highlighter:function(e){return e.replace(new RegExp("("+this.query+")","ig"),(function(e,t){return"<strong>"+t+"</strong>"}))},insert:function(e){return'<a class="userMention" data-tagged-user-id="'+e.id+'" href="javascript:void(0)"><img src="'+leantime.appUrl+"/api/users?profileImage="+e.id+'" alt="'+e.name+' Image"/>'+e.name.trim()+"</a>&nbsp;"},items:10},n=function(e,t,n){var a,o;(a=new XMLHttpRequest).withCredentials=!1,a.open("POST",leantime.appUrl+"/api/files"),a.onload=function(){a.status<200||a.status>=300?n("HTTP Error: "+a.status):t(a.responseText)},(o=new FormData).append("file",e.blob()),a.send(o)},a=function(e,t,n){window.filePickerCallback=e;var a={afterShowCont:function(){jQuery(".fileModal").nyroModal({callbacks:a})}};jQuery.nmManual(leantime.appUrl+"/files/showAll?modalPopUp=true",{stack:!0,callbacks:a,sizes:{minW:500,minH:500}}),jQuery.nmTop().elts.cont.css("zIndex","1000010"),jQuery.nmTop().elts.bg.css("zIndex","1000010"),jQuery.nmTop().elts.load.css("zIndex","1000010"),jQuery.nmTop().elts.all.find(".nyroModalCloseButton").css("zIndex","1000010")},o=function(e,t){e.on("change",(function(){})),e.on("init",(function(t){var n=e.getDoc().getElementsByClassName("confetti");n&&n.length>0&&n[0].addEventListener("click",(function(){confetti.start()}))})),e.on("focus",(function(){var t=e.getDoc().getElementsByClassName("tinyPlaceholder");if(t.length>0)for(;t[0];)t[0].parentNode.removeChild(t[0])})),e.on("submit",(function(){var t=e.getDoc().getElementsByClassName("tinyPlaceholder");if(t.length>0){for(;t[0];)t[0].remove();e.save()}}))},i=leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",r=leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css";return{initSimpleEditor:function(s){jQuery("textarea.tinymceSimple").tinymce({width:"100%",autoresize_min_height:200,autoresize_max_height:800,skin_url:i,content_css:r,content_style:"body.mce-content-body{ font-size:14px; } img { max-width: 100%; max-height: fit-content; }",plugins:"autoresize autosave imagetools shortlink checklist table emoticons autolink image lists save media searchreplace paste directionality fullscreen noneditable visualchars advlist mention slashcommands textpattern,autosave,imagetools,shortlink,checklist,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advlist,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | link unlink image | checklist bullist numlist | emoticons",browser_spellcheck:!0,toolbar_location:"bottom",branding:!1,statusbar:!1,convert_urls:!0,paste_data_images:!0,menubar:!1,relative_urls:!0,document_base_url:leantime.appUrl+"/",default_link_target:"_blank",table_appearance_options:!1,mentions:t,textpattern_patterns:e,images_upload_handler:n,file_picker_callback:a,setup:o})},initComplexEditor:function(){var i=jQuery("input[name=id]").val();null!=i&&""!=i||(i="new");let r="none";window.leantime.currentProject&&(r=window.leantime.currentProject);var s=window.innerHeight-50-205;jQuery("textarea.complexEditor").tinymce({width:"100%",skin_url:leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",content_css:leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",content_style:"html {text-align:center;} body.mce-content-body{ font-size:14px; } img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,embed,autoresize,shortlink,checklist,bettertable,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advancedTemplate,advlist,codesample,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | formatselect forecolor | alignleft aligncenter alignright | link unlink image media embed emoticons | checklist bullist numlist | table  | codesample | advancedTemplate | restoredraft",autosave_prefix:"leantime-complexEditor-autosave-{path}{query}-{id}-"+r+"-"+i+"-",autosave_restore_when_empty:!1,autosave_retention:"10m",browser_spellcheck:!0,contextmenu:!1,autosave_retention:"120m",autosave_interval:"10s",autosave_ask_before_unload:!1,branding:!1,statusbar:!1,convert_urls:!0,menubar:!1,resizable:!0,templates:leantime.appUrl+"/wiki/templates",body_class:"mce-content-body",paste_data_images:!0,relative_urls:!0,document_base_url:leantime.appUrl+"/",table_appearance_options:!1,min_height:400,max_height:s,default_link_target:"_blank",codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Rust",value:"rust"},{text:"SQL",value:"sql"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"Swift",value:"swift"},{text:"Objective C",value:"objectivec"},{text:"Go",value:"go"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],mentions:t,textpattern_patterns:e,images_upload_handler:n,file_picker_callback:a,setup:o})},initNotesEditor:function(i){var r=jQuery("input[name=id]").val();null==r&&(r="new");let s="none";window.leantime.currentProject&&(s=window.leantime.currentProject);window.innerHeight;jQuery("textarea.notesEditor").tinymce({width:"100%",skin_url:leantime.appUrl+"/dist/css/libs/tinymceSkin/oxide",content_css:leantime.appUrl+"/theme/"+leantime.theme+"/css/"+leantime.colorScheme+".css,"+leantime.appUrl+"/dist/css/editor."+leantime.version+".min.css",content_style:"html {text-align:center;} body.mce-content-body{ font-size:14px; color:var(--secondary-font-color); max-width:none;} img { max-width: 100%; max-height: fit-content; }",plugins:"autosave,imagetools,embed,autoresize,shortlink,checklist,bettertable,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advancedTemplate,advlist,codesample,mention,slashcommands,textpattern",toolbar:"bold italic strikethrough | formatselect forecolor | alignleft aligncenter alignright | link image table emoticons | checklist bullist | advancedTemplate | restoredraft",toolbar_location:"bottom",browser_spellcheck:!0,contextmenu:!1,autosave_prefix:"leantime-complexEditor-autosave-{path}{query}-{id}-"+s+"-"+r+"-",autosave_restore_when_empty:!0,autosave_retention:"120m",autosave_interval:"10s",autosave_ask_before_unload:!1,branding:!1,statusbar:!1,convert_urls:!0,menubar:!1,resizable:!0,templates:leantime.appUrl+"/wiki/templates",body_class:"mce-content-body",paste_data_images:!0,relative_urls:!0,document_base_url:leantime.appUrl+"/",table_appearance_options:!1,min_height:400,default_link_target:"_blank",codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Rust",value:"rust"},{text:"SQL",value:"sql"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"Swift",value:"swift"},{text:"Objective C",value:"objectivec"},{text:"Go",value:"go"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],textpattern_patterns:e,mentions:t,textpattern_patterns:e,images_upload_handler:n,file_picker_callback:a,setup:function(e){o(e),e.on("blur",(function(){e.save(),i()}))}})},initContentEditable:function(r){jQuery(r).tinymce({width:"100%",skin_url:i,inline:!0,plugins:"autosave,imagetools,shortlink,checklist,table,emoticons,autolink,image,lists,save,media,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,advlist,mention,slashcommands,textpattern",toolbar:"",toolbar_location:"bottom",browser_spellcheck:!0,contextmenu:!1,branding:!1,statusbar:!1,convert_urls:!0,paste_data_images:!0,menubar:!1,relative_urls:!0,document_base_url:leantime.appUrl+"/",default_link_target:"_blank",table_appearance_options:!1,mentions:t,textpattern_patterns:e,images_upload_handler:n,file_picker_callback:a,setup:o})}}}(),leantime.snippets={copyUrl:function(e){var t=document.getElementById(e);t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),jQuery.growl({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},copyToClipboard:function(e){navigator.clipboard.writeText(e),jQuery.growl({message:leantime.i18n.__("short_notifications.url_copied"),style:"success"})},initConfettiClick:function(){jQuery(".confetti").click((function(){confetti.start()}))},accordionToggle:function(e){var t=jQuery("#accordion_toggle_"+e).find("i.fa").first(),n="accordion_content-"+e,a="closed";t.hasClass("fa-angle-right")?(t.removeClass("fa-angle-right"),t.addClass("fa-angle-down"),jQuery("#accordion_content-"+e).slideDown("fast"),a="open"):(t.removeClass("fa-angle-down"),t.addClass("fa-angle-right"),jQuery("#accordion_content-"+e).slideUp("fast"),a="closed"),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/submenu",data:{submenu:n,state:a}})},toggleTheme:function(e){var t=jQuery("#themeStyleSheet").attr("href");"light"==e?(t=t.replace("dark.css","light.css"),jQuery("#themeStyleSheet").attr("href",t)):"dark"==e&&(t=t.replace("light.css","dark.css"),jQuery("#themeStyleSheet").attr("href",t))},toggleFont:function(e){jQuery("#fontStyleSetter").html(":root { --primary-font-family: '"+e+"', 'Helvetica Neue', Helvetica, sans-serif; }")},toggleColors:function(e,t){jQuery("#colorSchemeSetter").html(":root { --accent1: "+e+"; --accent2: "+t+"}")},toggleBg:function(e){var t=jQuery("#themeStyleSheet").attr("href");"minimal"==e?(t=t.replace("default","minimal"),jQuery("#themeStyleSheet").attr("href",t)):"default"==e&&(t=t.replace("minimal","default"),jQuery("#themeStyleSheet").attr("href",t))}},leantime.modals={openModal:function(){var e={sizes:{minW:500,minH:200},resizable:!0,autoSizable:!0,callbacks:{beforePostSubmit:function(){jQuery(".showDialogOnLoad").show(),console.log(tinymce.editors.length),tinymce.editors.length>0&&(tinymce.editors.forEach((function(e){e.save(),e.destroy(),e.remove()})),tinymce.EditorManager.remove())},beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),tinymce.editors.length>0&&(tinymce.editors.forEach((function(e){e.save(),e.destroy(),e.remove()})),tinymce.EditorManager.remove())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery(".formModal, .modal").nyroModal(e),tippy("[data-tippy-content]")},beforeClose:function(){try{history.pushState("",document.title,window.location.pathname+window.location.search)}catch(e){console.log("Issue pushing history")}"function"==typeof window.globalModalCallback?window.globalModalCallback():location.reload()}},titleFromIframe:!0},t=window.location.hash.substring(1);(t.includes("showTicket")||t.includes("ideaDialog")||t.includes("articleDialog"))&&(e.sizes.minW=1800,e.sizes.minH=1800);var n=leantime.appUrl.replace(/\/$/,""),a=t.split("/");a.length>2&&"tab"!==a[1]&&jQuery.nmManual(n+""+t,e)},setCustomModalCallback:function(e){"function"==typeof e&&(window.globalModalCallback=e)},closeModal:function(){jQuery.nmTop()&&jQuery.nmTop().close()}},jQuery(document).ready((function(){leantime.modals.openModal()})),window.addEventListener("hashchange",(function(){leantime.modals.openModal()})),window.addEventListener("closeModal",(function(e){leantime.modals.closeModal()})),leantime.dateController=function(){function e(e){return{numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),monthNamesShort:leantime.i18n.__("language.monthNamesShort").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:"true"===leantime.i18n.__("language.isRTL")?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek"),onSelect:e}}function t(e){var t,n=leantime.dateHelper.getFormatFromSettings("dateformat","jquery");try{t=jQuery.datepicker.parseDate(n,e.value)}catch(e){t=null,console.log(e)}return t}return{initDateRangePicker:function(n,a,o){Date.prototype.addDays=function(e){return this.setDate(this.getDate()+e),this},jQuery.datepicker.setDefaults({beforeShow:function(e){if(jQuery(e).attr("readonly"))return!1}});var i=jQuery(n).datepicker(e()).on("change",(function(e){r.datepicker("option","minDate",t(this)),""==jQuery(a).val()&&jQuery(a).val(jQuery(n).val())})),r=jQuery(a).datepicker(e()).on("change",(function(){i.datepicker("option","maxDate",t(this))}))},initModernDateRangePicker:function(e,t,n){var a=jQuery(e).val(),o=jQuery(t).val(),i=a?moment(a,"MM/DD/YYYY"):moment().startOf("month"),r=o?moment(o,"MM/DD/YYYY"):moment().endOf("month");jQuery(e).daterangepicker({autoUpdateInput:!1,opens:"left",linkedCalendars:!0,startDate:i,endDate:r,minDate:moment().subtract(1,"years"),maxDate:moment().add(1,"years"),locale:{format:"MM/DD/YYYY",applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",customRangeLabel:"Custom",firstDay:1},ranges:{Today:[moment().startOf("day"),moment().endOf("day")],"This Week":[moment().startOf("week"),moment().endOf("week")],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last 7 Days":[moment().subtract(6,"days"),moment()]}}),a||jQuery(e).val(i.format("YYYY-MM-DD")),o||jQuery(t).val(r.format("YYYY-MM-DD")),jQuery(e).on("apply.daterangepicker",(function(n,a){jQuery(e).val(a.startDate.format("YYYY-MM-DD")),jQuery(t).val(a.endDate.format("YYYY-MM-DD")),jQuery("#form").submit()})),jQuery(t).on("focus click",(function(t){t.preventDefault(),jQuery(e).data("daterangepicker").show()}))},initDatePicker:function(t,n){jQuery(t).datepicker(e(n))}}}(),leantime.dateHelper=function(){var e={jquery:({},{d:"dd",D:"D",j:"d",l:"DD",N:"",S:"",w:"",z:"o",W:"",F:"MM",m:"mm",M:"M",n:"m",t:"",L:"",o:"yy",Y:"yy",y:"y",a:"",A:"",B:"",g:"",G:"",h:"",H:"",i:"",s:"",u:"",e:"",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"@"}),luxon:({},{d:"dd",D:"ccc",j:"d",l:"cccc",N:"c",S:"",w:"c",z:"o",W:"WW",F:"MMMM",m:"LL",M:"LLL",n:"L",t:"",L:"",o:"kk",Y:"yyyy",y:"yy",a:"a",A:"a",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",v:"SSS",e:"z",I:"",O:"ZZ",P:"ZZ",T:"ZZZ",Z:"",c:"",r:"",U:"X"})},t=function(t,n){let a=e[n],o="";return t.split("").forEach((function(e){o=void 0!==a[e]?o+""+a[e]:o+""+e})),o};return{mapFormat:t,getFormatFromSettings:function(e,n){let a=leantime.i18n.__("language."+e);return t(a,n)}}}(),leantime.wikiController={initTree:function(e,t){jQuery(e).jstree({core:{expand_selected_onload:!0,themes:{dots:!1}},state:{key:"tree_state"},types:{default:{icon:"far fa-file-alt"}},plugins:["wholerow","types","state"]}),jQuery(e).on("ready.jstree",(function(e,n){jQuery(this).jstree("deselect_all"),jQuery(this).jstree("select_node","treenode_"+t,!0),jQuery(this).jstree("save_state")})),jQuery(e).on("activate_node.jstree",(function(e,t){jQuery(this).jstree("save_state"),null!=t&&null!=t.node&&null!=t.node.id&&(window.location.href=t.node.a_attr.href)}))}},leantime.widgetController=function(){var e=[];GridStack.renderCB=function(e,t){t.content&&"undefined"!=typeof DOMPurify&&(e.innerHTML=DOMPurify.sanitize(t.content))};var t=function(){let t=e.save();t.sort(((e,t)=>e.y===t.y?e.x-t.x:e.y-t.y));let n=null;arguments.length>0&&"toggleWidget"===arguments[0].action&&(n={widgetId:arguments[0].widgetId,visible:arguments[0].visible}),t.forEach((function(e){let t=jQuery(e.content).find("[hx-get]").first();e.id=t.attr("id"),e.widgetUrl=t.attr("hx-get"),e.widgetTrigger=t.attr("hx-trigger"),null==e.x&&(e.x=0),e.gridX=e.x,null==e.y&&(e.y=0),e.gridY=e.y,null==e.w&&(e.w=1),e.gridWidth=e.w,null==e.h&&(e.h=1),e.gridHeight=e.h,e.content=""})),jQuery.post(leantime.appUrl+"/widgets/widgetManager",{action:"saveGrid",data:t,visibilityData:n},(function(e,t){}))},n=function(n){n.remove(),e.removeWidget(n,!0),t()},a=function(e){document.querySelector(".grid-stack").gridstack.resizeToContent(e,!1),t()},o=function(e){return'<div class="widgetInner">        <div class="'+("default"==e.widgetBackground?"tw-pb-l":"")+'">\n            <div class="stickyHeader" style="padding:15px; height:50px;  width:100%;">\n               <div class="grid-handler-top tw-h-[40px] tw-cursor-grab tw-float-left tw-mr-sm">\n                    <i class="fa-solid fa-grip-vertical"></i>\n                </div>\n           '+(""!=e.name?'<h5 class="subtitle tw-pb-m tw-float-left tw-mr-sm">'+e.name+"</h5>":"")+'\n            <div class="inlineDropDownContainer tw-float-right">\n                <a href="javascript:void(0);" class="dropdown-toggle ticketDropDown editHeadline" data-toggle="dropdown">\n                    <i class="fa fa-ellipsis-v" aria-hidden="true"></i>\n                </a>\n                <ul class="dropdown-menu">\n                    <li><a href="javascript:void(0)" class="fitContent"><i class="fa-solid fa-up-right-and-down-left-from-center"></i> Resize to fit content</a></li>\n                        <li><a href="javascript:void(0)" class="removeWidget"><i class="fa fa-eye-slash"></i> Hide</a></li>\n                </ul>\n            </div>\n\n        </div>\n <div class="widgetContent tw-px-l">\n             <div hx-get="'+e.widgetUrl+'" hx-trigger="'+e.widgetTrigger+'" id="'+e.id+'"></div>\n        </div>\n       </div>\n        <div class="clear"></div>\n    </div>\n'};return{resizeWidget:a,removeWidget:n,saveGrid:t,initGrid:function(){(e=GridStack.init({margin:"0px 15px 15px 0px",handle:".grid-handler-top",minRow:2,cellHeight:"30px",float:!0,draggable:{handle:".grid-handler-top",appendTo:"body"},lazyLoad:!1,columnOpts:{breakpointForWindow:!0,breakpoints:[{w:700,c:1},{w:950,c:6}]}})).on("dragstop",(function(e,n){t()})),e.on("resizestop",(function(e,n){t()})),jQuery(".grid-stack-item").each((function(){jQuery(this).find(".removeWidget").click((function(){n(jQuery(this).closest(".grid-stack-item")[0])})),jQuery(this).find(".fitContent").click((function(){a(jQuery(this).closest(".grid-stack-item")[0])}))})),jQuery(document).ready((function(){jQuery("#gridBoard").css("opacity",1)}))},toggleWidgetVisibility:function(e,a,i){let r=document.querySelector(".grid-stack").gridstack,s=jQuery(a).is(":checked");!function(e,t){let n=e.gridX||0,a=e.gridY||0,o=e.gridWidth||2,i=e.gridHeight||2;if(t.willItFit({x:n,y:a,width:o,height:i}))return{x:n,y:a};let r=Math.max(...t.engine.nodes.map((e=>e.y+e.h)),0);for(let e=0;e<=r+1;e++)for(let n=0;n<=12-o;n++)if(t.willItFit({newX:n,newY:e,width:o,height:i}))return{x:n,y:e}}(i,r);if(s){const n=document.createElement("div");n.className="grid-stack-item";const a=document.createElement("div");a.className=`grid-stack-item-content tw-p-none ${"default"==i.widgetBackground?"maincontentinner":i.background}`,a.innerHTML=o(i),n.appendChild(a),r.el.appendChild(n),r.makeWidget(n,{x:i.gridX||0,y:i.gridY||50,w:i.gridWidth||2,h:i.gridHeight||2}),htmx.process(n),t({action:"toggleWidget",widgetId:e,visible:s})}else n(jQuery("#"+e).closest(".grid-stack-item")[0])}}}(),leantime.valueCanvasController=function(){var e="value",t=!1,n=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==t&&(t=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery(".valueCanvasModal, #commentForm, #commentForm .deleteComment, .valueCanvasMilestone .deleteMilestone").nyroModal(n())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},a=function(){jQuery(".valueCanvasModal, #commentForm, #commentForm .deleteComment, .valueCanvasMilestone .deleteMilestone").nyroModal(n())};return{setCloseModal:function(){t=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),a()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),a()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,n)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==t.length){var n=t[0],a=t[1];t[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:n,author:a}}).done((function(){jQuery("#userDropdownMenuLink"+n+" span.text span#userImage"+n+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+a),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,status:o}}).done((function(){jQuery("#statusDropdownMenuLink"+a+" span.text").text(n),jQuery("#statusDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,relates:o}}).done((function(){jQuery("#relatesDropdownMenuLink"+a+" span.text").text(n),jQuery("#relatesDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){var e=jQuery("html").height()-320-60,t=.333*e;jQuery("#firstRow div.contentInner").each((function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)})),jQuery("#firstRow .column .contentInner").css("height",t);var n=.333*e;jQuery("#secondRow div.contentInner").each((function(){jQuery(this).height()>n&&(n=jQuery(this).height()+50)})),jQuery("#secondRow .column .contentInner").css("height",n);var a=.333*e;jQuery("#thirdRow div.contentInner").each((function(){jQuery(this).height()>a&&(a=jQuery(this).height()+50)})),jQuery("#thirdRow .column .contentInner").css("height",a)}}}(),leantime.usersService={saveUserPhoto:function(e){leantime.usersRepository.saveUserPhoto(e)}},leantime.usersRepository={saveUserPhoto:function(e){var t=new FormData;t.append("file",e),jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/users",data:t,processData:!1,contentType:!1,success:function(e){jQuery("#save-picture").removeClass("running"),location.reload()},error:function(e){console.log(e)}})},updateUserViewSettings:function(e,t){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/users",data:{patchViewSettings:e,value:t}}).done((function(){}))}},leantime.usersController=function(){var e=function(){jQuery("#profileImg").croppie("destroy"),jQuery("#previousImage").show()};return{readURL:function(t){if(e(),t.files&&t.files[0]){var n=new FileReader,a=jQuery("#profileImg");n.onload=function(e){_uploadResult=a.croppie({enableExif:!0,viewport:{width:175,height:175,type:"circle"},boundary:{width:200,height:200}}),_uploadResult.croppie("bind",{url:e.currentTarget.result}),jQuery("#previousImage").hide()},n.readAsDataURL(t.files[0])}},clearCroppie:e,saveCroppie:function(){jQuery("#save-picture").addClass("running"),jQuery("#profileImg").attr("src",leantime.appUrl+"/images/loaders/loader28.gif"),_uploadResult.croppie("result",{type:"blob",circle:!0}).then((function(e){leantime.usersService.saveUserPhoto(e)}))},initUserTable:function(){jQuery(document).ready((function(){jQuery("#allUsersTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})}))},_initModals:function(){var e={sizes:{minW:400,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".showDialogOnLoad").show(),jQuery(".userImportModal").nyroModal(e)}}};jQuery(".userImportModal").nyroModal(e)},checkPWStrength:function(e){let t,n=document.getElementById(e),a=document.getElementById("pwStrength"),o=new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})"),i=new RegExp("((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))");n.addEventListener("input",(()=>{a.style.display="block",clearTimeout(t),t=setTimeout((()=>{return e=n.value,void(o.test(e)?(a.style.backgroundColor="#107530",a.textContent=leantime.i18n.__("label.strong")):i.test(e)?(a.style.backgroundColor="#C5850D",a.textContent=leantime.i18n.__("label.medium")):(a.style.backgroundColor="#CC6B6B",a.textContent=leantime.i18n.__("label.weak")));var e}),500),0!==n.value.length?a.style.display:a.style.display="none"}))},initUserEditModal:function(){var e={sizes:{minW:900,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".showDialogOnLoad").show(),jQuery(".userEditModal").nyroModal(e)},beforeClose:function(){location.reload()}}};jQuery(".userEditModal").nyroModal(e)}}}(),window.leantime=window.leantime||{},window.leantime.timesheetsExport=window.leantime.timesheetsExport||{},window.leantime.timesheetsExport.resolveCell=function(e,t){return void 0===e.data("order")?t:e.hasClass("js-timesheet-hours")&&"human"===(e.closest("table[data-hours-format]").data("hours-format")||"").toString()?void 0!==e.data("export-display")?e.data("export-display"):e.text().trim():e.data("order")},leantime.timesheetsController=function(){var e=!1,t=function(e){var t=Math.round(60*e);if(0===t)return"0m";var n=Math.floor(t/2400);t%=2400;var a=Math.floor(t/480);t%=480;var o=Math.floor(t/60),i=t%60,r=[];return n>0&&r.push(n+"w"),a>0&&r.push(a+"d"),o>0&&r.push(o+"h"),i>0&&r.push(i+"m"),r.join(" ")};return{initTimesheetsTable:function(e){jQuery(document).ready((function(){var e=jQuery("#allTimesheetsTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},columnDefs:[{targets:5,searchable:!1}],dom:'<"top">rt<"bottom"ilp><"clear">',searching:!0,stateSave:!0,displayLength:100});if(jQuery.fn.dataTable&&jQuery.fn.dataTable.Buttons){var t=new jQuery.fn.dataTable.Buttons(e,{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,footer:!0,exportOptions:{orthogonal:"export",columns:":visible",format:{body:function(e,t,n,a){return void 0!==window.leantime&&void 0!==window.leantime.timesheetsExport&&"function"==typeof window.leantime.timesheetsExport.resolveCell?window.leantime.timesheetsExport.resolveCell(jQuery(a),e):(void 0!==jQuery(a).data("order")&&(e=jQuery(a).data("order")),e)}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container();try{jQuery("#tableButtons").length?jQuery("#tableButtons").empty().append(t):jQuery(e.table().container()).find(".dataTables_length").append(t)}catch(e){}}jQuery("#allTimesheetsTable").on("column-visibility.dt",(function(t,n,a,o){e.draw(!1)})),void 0!==leantime.timesheetSearch&&leantime.timesheetSearch.init(e)}))},initEditTimeModal:function(){var t={sizes:{minW:700,maxW:1e3,minH:1e3},resizable:!1,autoSizable:!1,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),!0===e&&(e=!1,location.reload())},afterShowCont:function(){jQuery(".editTimeModal").nyroModal(t)},beforeClose:function(){location.reload()}},titleFromIframe:!0};jQuery(".editTimeModal").nyroModal(t)},formatHours:function(e){var n=jQuery(".timesheetTable").data("hours-format")||jQuery("#allTimesheetsTable").data("hours-format")||"decimal";return e=parseFloat(e)||0,"decimal"===n?e.toFixed(2):t(e)}}}(),(leantime=leantime||{}).ticketsRepository={updateMilestoneDates:function(e,t,n,a){let o=leantime.dateHelper.getFormatFromSettings("dateformat","luxon"),i=leantime.dateHelper.getFormatFromSettings("timeformat","luxon"),r=luxon.DateTime.fromSQL(t).toFormat(o),s=luxon.DateTime.fromSQL(t).toFormat(i),l=luxon.DateTime.fromSQL(n).toFormat(o),u=luxon.DateTime.fromSQL(n).toFormat(i);jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:e,editFrom:r,editTo:l,timeFrom:s,timeTo:u,sortIndex:a}}).done((function(){}))},updateRemainingHours:function(e,t,n){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:e,hourRemaining:t}}).done((function(){n()}))},updatePlannedHours:function(e,t,n){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:e,planHours:t}}).done((function(){n()}))},updateDueDates:function(e,t,n){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:e,dateToFinish:t}}).done((function(){n()}))},updateEditFromDates:function(e,t,n){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:e,editFrom:t}}).done((function(){n()}))},updateEditToDates:function(e,t,n){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:e,editTo:t}}).done((function(){n()}))}},leantime.ticketsController=function(){function e(){let e=[];jQuery(".sortableTicketList").each((function(t){jQuery(this).find(".column").each((function(t){void 0===e[t]&&(e[t]=0);var n=jQuery(this).find(".moveable:visible").length;e[t]+=n}))})),jQuery(".widgettitle .count").each((function(t){var n=e[t];void 0===n&&(n=0),jQuery(this).text(n)}))}return{toggleFilterBar:function(){jQuery(".filterBar").toggle()},initGanttChart:function(e,t,n){function a(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}jQuery(document).ready((function(){if(!1===n)var o=new Gantt("#gantt",e,{header_height:55,column_width:20,step:24,view_modes:["Day","Week","Month"],bar_height:40,static_progress_indicator:!0,bar_corner_radius:10,arrow_curve:10,padding:20,view_mode:"Month",date_format:leantime.i18n.__("language.momentJSDate"),language:leantime.i18n.__("language.code").slice(0,2),additional_rows:5,custom_popup_html:function(e){var t=e._end,n=(new Date(t),jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),new Date(t))),o='<div class="details-container" style="min-width:600px;"> ';return void 0!==e.projectName&&(o+="<h3><b>"+e.projectName+"</b></h3>"),o+="<small>"+e.type+" #"+e.id+" </small>","milestone"===e.type?o+='<h4><a href="#/tickets/editMilestone/'+e.id+'" >'+a(e.name)+"</a></h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+n+"</strong><br /> "+Math.round(e.progress)+'%</p> <a href="#/tickets/editMilestone/'+e.id+'" ><span class="fa fa-map"></span> '+leantime.i18n.__("links.edit_milestone")+'</a> | <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+e.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":o+='<h4><a href="#/tickets/showTicket/'+e.id+'">'+a(e.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+e.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",o+="</div>"},on_click:function(e){},on_date_change:function(e,t,n){leantime.ticketsRepository.updateMilestoneDates(e.id,t,n,e._index+1)},on_sort_change:function(e){for(var t={action:"ganttSort",payload:{}},n=0;n<e.length;n++)t.payload[e[n].id]=e[n]._index+1;jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/tickets",data:t})},on_progress_change:function(e,t){},on_view_change:function(e){leantime.usersRepository.updateUserViewSettings("roadmap",e)},on_popup_show:function(e){}});else o=new Gantt("#gantt",e,{readonlyGantt:!0,resizing:!1,progress:!1,is_draggable:!1,custom_popup_html:function(e){var t=e._end,n=(new Date(t),jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),new Date(t))),o='<div class="details-container" style="min-width:600px;"> ';return void 0!==e.projectName&&(o+="<h3><b>"+e.projectName+"</b></h3>"),o+="<small>"+e.type+" #"+e.id+" </small>","milestone"===e.type?o+="<h4>"+a(e.name)+"</h4><br /> <p>"+leantime.i18n.__("text.expected_to_finish_by")+" <strong>"+n+"</strong><br /> "+Math.round(e.progress)+'%</p> <a href="'+leantime.appUrl+"/tickets/showKanban?milestone="+e.id+'"><span class="fa-pushpin"></span> '+leantime.i18n.__("links.view_todos")+"</a> ":o+='<h4><a href="#/tickets/showTicket/'+e.id+'">'+a(e.name)+'</a></h4><br /> <a href="#/tickets/showTicket/'+e.id+'"><span class="fa fa-thumb-tack"></span> '+leantime.i18n.__("links.edit_todo")+"</a> ",o+="</div>"},on_click:function(e){},on_date_change:function(e,t,n){},on_progress_change:function(e,t){},on_view_change:function(e){leantime.usersRepository.updateUserViewSettings("roadmap",e)}});jQuery("#ganttTimeControl").on("click","a",(function(){var e=jQuery(this),t=e.attr("data-value");o.change_view_mode(t),e.parent().parent().find("a").removeClass("active"),e.addClass("active");var n=e.text();jQuery(".viewText").text(n)})),o.change_view_mode(t)}))},updateRemainingHours:function(e,t){var n=jQuery(e).val();leantime.ticketsRepository.updateRemainingHours(t,n,(function(){jQuery.growl({message:leantime.i18n.__("short_notifications.remaining_hours_updated"),style:"success"})}))},updatePlannedHours:function(e,t){var n=jQuery(e).val();leantime.ticketsRepository.updatePlannedHours(t,n,(function(){jQuery.growl({message:leantime.i18n.__("short_notifications.planned_hours_updated"),style:"success"})}))},initTimeSheetChart:function(e,t,n,a){var o=document.getElementById(a).getContext("2d");new Chart(o,{type:"line",data:{labels:e,datasets:[{label:leantime.i18n.__("label.booked_hours"),backgroundColor:"rgba(201,48,44, 0.5)",borderColor:"rgb(201,48,44)",data:t},{label:leantime.i18n.__("label.planned_hours"),backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgb(54, 162, 235)",data:n}]},options:{scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.booked_hours")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.planned_hours")},ticks:{beginAtZero:!0}}}}})},initTicketTabs:function(){jQuery(document).ready((function(){let e=new URL(window.location.href),t=e.searchParams.get("tab"),n=0;t&&(n=jQuery(".ticketTabs").find('a[href="#'+t+'"]').parent().index()),jQuery(".ticketTabs").tabs({create:function(e,t){jQuery(".ticketTabs").css("visibility","visible")},activate:function(t,n){e=new URL(window.location.href),e.searchParams.set("tab",n.newPanel[0].id),window.history.replaceState(null,null,e)},load:function(){},enable:function(){},active:n})}))},initTicketSearchSubmit:function(e){jQuery("#ticketSearch").on("submit",(function(t){t.preventDefault();var n=jQuery("#projectIdInput").val(),a=jQuery("#userSelect").val(),o=jQuery("#milestoneSelect").val(),i=jQuery("#termInput").val(),r=jQuery("#sprintSelect").val(),s=jQuery("#typeSelect").val(),l=jQuery("#prioritySelect").val(),u=jQuery("#statusSelect").val(),d=jQuery("#sortBySelect").val(),c=jQuery("input[name='groupBy']:checked").val(),m=jQuery("input[name='showTasks']:checked").val(),p="?search=true";""!=n&&null!=n&&(p=p+"&projectId="+n),""!=a&&null!=a&&(p=p+"&users="+a),""!=o&&null!=o&&(p=p+"&milestone="+o),""!=i&&null!=i&&(p=p+"&term="+i),""!=r&&null!=r&&(p=p+"&sprint="+r),""!=s&&null!=s&&(p=p+"&type="+s),""!=l&&null!=l&&(p=p+"&priority="+l),""!=u&&null!=u&&(p=p+"&status="+u),""!=d&&null!=d&&(p=p+"&sort="+d),""!=c&&null!=c&&(p=p+"&groupBy="+c),""!=m&&null!=m&&(p=p+"&showTasks="+m);var y=e+p;window.location.href=y}))},initTicketKanban:function(t){var n=t;jQuery(".sortableTicketList.kanbanBoard .ticketBox").hover((function(){jQuery(this).css("background","var(--kanban-card-hover)")}),(function(){jQuery(this).css("background","var(--kanban-card-bg)")}));jQuery(".sortableTicketList").each((function(){var t=this;jQuery(t).find(".contentInner").sortable({connectWith:".contentInner",items:"> .moveable",tolerance:"intersect",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,cancel:".portlet-toggle,:input,a,input",distance:10,start:function(e,t){var n,a,o;t.item.addClass("tilt"),n=t.item,a=n.position().left,o=function(e){e.pageX+5>a?(n.addClass("right"),n.removeClass("left")):e.pageX<a+5?(n.addClass("left"),n.removeClass("right")):(n.removeClass("left"),n.removeClass("right")),a=e.pageX},jQuery("html").bind("mousemove",o),n.data("move_handler",o)},stop:function(a,o){o.item.removeClass("tilt"),jQuery("html").unbind("mousemove",o.item.data("move_handler")),o.item.removeData("move_handler"),e();for(var i={action:"kanbanSort",payload:{},handler:o.item[0].id},r=0;r<n.length;r++)jQuery(t).find(".contentInner.status_"+n[r]).length&&(i.payload[n[r]]=jQuery(t).find(".contentInner.status_"+n[r]).sortable("serialize"));jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/tickets",data:i}).done((function(e){leantime.handleAsyncResponse(e);var t=o.item.attr("id");if(t){var n=jQuery("#"+t),a=n.find('.submit_button:contains("Unpin")');a.length&&a.html('<i class="fa fa-thumbtack" style=""></i> Pin Ticket'),n.removeClass("pinned-ticket"),n.find(".fa-thumbtack[data-tippy-content]").remove()}}))}})})),jQuery(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>"),jQuery(".portlet-toggle").click((function(){var e=jQuery(this);e.toggleClass("ui-icon-minusthick ui-icon-plusthick"),e.closest(".portlet").find(".portlet-content").toggle()}))},initTicketsTable:function(e){function t(e){return!isNaN(parseFloat(e))&&isFinite(e)}jQuery(document).ready((function(){var e=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom">p<"clear">',searching:!1,stateSave:!0,displayLength:100,order:[],columnDefs:[{visible:!1,targets:10},{visible:!1,targets:11},{target:"no-sort",orderable:!1}],footerCallback:function(e,n,a,o,i){var r=this.api(),s=r.column(10).data().reduce((function(e,n){return!1===t(e)&&(e=jQuery(e).val()),!1===t(n)&&(n=jQuery(n).val()),isNaN(e)&&(e=0),isNaN(n)&&(n=0),parseFloat(e)+parseFloat(n)}),0),l=r.column(11).data().reduce((function(e,n){return!1===t(e)&&(e=jQuery(e).val()),!1===t(n)&&(n=jQuery(n).val()),isNaN(e)&&(e=0),isNaN(n)&&(n=0),parseFloat(e)+parseFloat(n)}),0),u=r.column(12).data().reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0);jQuery(r.column(9).footer()).html("Total"),jQuery(r.column(10).footer()).html(s),jQuery(r.column(11).footer()).html(l),jQuery(r.column(12).footer()).html(u)}});new jQuery.fn.dataTable.Buttons(e.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(e,t,n,a){return void 0!==jQuery(a).data("order")&&(e=jQuery(a).data("order")),e}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(jQuery("#tableButtons"));e.table(0).on("column-visibility",(function(t,n,a,o){for(var i=1;i<e.tables().context.length;i++)e.tables(i).column(a).visible(o);e.draw()})),jQuery(".ticketTable input").on("change",(function(t,n,a,o){jQuery(this).parent().attr("data-order",jQuery(this).val()),e.draw()}))}))},initEffortDropdown:function(){var e={.5:"< 2min",1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"};jQuery(".effortDropdown .dropdown-menu a").unbind().on("click",(function(){var t=jQuery(this).attr("data-value").split("_");if(2===t.length){var n=t[0],a=t[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:n,storypoints:a}}).done((function(){jQuery("#effortDropdownMenuLink"+n+" span.text").text(e[a]),jQuery.growl({message:leantime.i18n.__("short_notifications.effort_updated"),style:"success"})}))}}))},initPriorityDropdown:function(){var e={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Lowest"};jQuery(".priorityDropdown .dropdown-menu a").unbind().on("click",(function(){var t=jQuery(this).attr("data-value").split("_");if(2===t.length){var n=t[0],a=t[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:n,priority:a}}).done((function(){jQuery("#priorityDropdownMenuLink"+n+" span.text").text(e[a]),jQuery("#priorityDropdownMenuLink"+n).removeClass("priority-bg-1 priority-bg-2 priority-bg-3 priority-bg-4 priority-bg-5"),jQuery("#priorityDropdownMenuLink"+n).addClass("priority-bg-"+a),jQuery("#priorityDropdownMenuLink"+n).parents(".ticketBox").removeClass("priority-border-1 priority-border-2 priority-border-3 priority-border-4 priority-border-5"),jQuery("#priorityDropdownMenuLink"+n).parents(".ticketBox").addClass("priority-border-"+a),jQuery.growl({message:leantime.i18n.__("short_notifications.priority_updated"),style:"success"})}))}}))},initMilestoneDropdown:function(){jQuery(".milestoneDropdown .dropdown-menu a").unbind().on("click",(function(){var e=jQuery(this).attr("data-value").split("_"),t=jQuery(this).attr("data-label");if(3===e.length){var n=e[0],a=e[1],o=e[2];jQuery("#milestoneDropdownMenuLink"+n+" span.text").append(" ..."),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:n,milestoneid:a}}).done((function(){jQuery("#milestoneDropdownMenuLink"+n+" span.text").text(t),jQuery("#milestoneDropdownMenuLink"+n).css("backgroundColor",o),jQuery.growl({message:leantime.i18n.__("short_notifications.milestone_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery(".statusDropdown .dropdown-menu a").unbind().on("click",(function(){var e=jQuery(this).attr("data-value").split("_"),t=jQuery(this).attr("data-label");if(3==e.length){var n=e[0],a=e[1],o=e[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:n,status:a}}).done((function(e){jQuery("#statusDropdownMenuLink"+n+" span.text").text(t),jQuery("#statusDropdownMenuLink"+n).removeClass().addClass(o+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated"),style:"success"}),leantime.handleAsyncResponse(e)}))}}))},initUserDropdown:function(){jQuery(".userDropdown .dropdown-menu a").unbind().on("click",(function(){var e=jQuery(this).attr("data-value").split("_"),t=jQuery(this).attr("data-label");if(3===e.length){var n=e[0],a=e[1];e[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:n,editorId:a}}).done((function(){jQuery("#userDropdownMenuLink"+n+" span.text span#userImage"+n+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+a),jQuery("#userDropdownMenuLink"+n+" span.text span#user"+n).text(t),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initSprintDropdown:function(){jQuery(".sprintDropdown .dropdown-menu a").unbind().on("click",(function(){var e=jQuery(this).attr("data-value").split("_"),t=jQuery(this).attr("data-label");if(2==e.length){var n=e[0],a=e[1];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:n,sprint:a}}).done((function(){jQuery("#sprintDropdownMenuLink"+n+" span.text").text(t),jQuery.growl({message:leantime.i18n.__("short_notifications.sprint_updated"),style:"success"})}))}}))},initToolTips:function(){jQuery('[data-toggle="tooltip"]').tooltip()},initTagsInput:function(){jQuery("#tags").tagsInput({autocomplete_url:leantime.appUrl+"/api/tags"}),jQuery("#tags_tag").on("focusout",(function(){let e=jQuery(this).val();""!=e&&jQuery("#tags").addTag(e)}))},initMilestoneDatesAsyncUpdate:function(){var e=leantime.dateHelper.getFormatFromSettings("dateformat","jquery");jQuery(".milestoneEditFromAsync").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:"true"===leantime.i18n.__("language.isRTL")?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",(function(){var e=jQuery(this).val(),n=jQuery(this).attr("data-id");jQuery(".toDateTicket-"+n).datepicker("option","minDate",t(this));jQuery(".toDateTicket-"+n).val();leantime.ticketsRepository.updateEditFromDates(n,e,(function(){jQuery.growl({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})}))})),jQuery(".milestoneEditToAsync").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:"true"===leantime.i18n.__("language.isRTL")?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",(function(){var e=jQuery(this).attr("data-id");jQuery(".fromDateTicket-"+e).datepicker("option","maxDate",t(this));var n=jQuery(this).val();jQuery(".fromDateTicket-"+e).val();leantime.ticketsRepository.updateEditToDates(e,n,(function(){jQuery.growl({message:leantime.i18n.__("short_notifications.date_updated"),style:"success"})}))}));function t(t){var n;try{n=jQuery.datepicker.parseDate(e,t.value)}catch(e){n=null}return n}},initAsyncInputChange:function(){jQuery(".asyncInputUpdate").on("change",(function(){var e=jQuery(this).attr("data-label").split("-");if(2==e.length){var t=e[0],n=e[1],a=jQuery(this).val();jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:n,[t]:a}}).done((function(){jQuery.growl({message:leantime.i18n.__("notifications.subtask_saved"),style:"success"})}))}}))},initDueDateTimePickers:function(){jQuery(".date-picker-form-control .reset-button").on("click",(function(){const e=jQuery(this).attr("data-id");jQuery("#due-date-picker-"+e).val(leantime.i18n.__("text.anytime")),leantime.ticketsRepository.updateDueDates(e,null,(function(){jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})}))})),leantime.dateController.initDatePicker(".quickDueDates, .duedates",(function(e,t){var n=t.currentDay,a=t.currentMonth,o=t.currentYear,i=new Date(o,a,n),r=jQuery.datepicker.formatDate(leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),i),s=jQuery(this).attr("data-id");leantime.ticketsRepository.updateDueDates(s,r,(function(){jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated"),style:"success"})}))}))},setUpKanbanColumns:function(){jQuery(document).ready((function(){e(),jQuery(".filterBar .row-fluid").css("opacity","1"),jQuery(".sortableTicketList").each((function(){let e=250,t=jQuery(this).attr("id");jQuery(this).find(".column .contentInner").each((function(){jQuery(this).height()>e&&(e=jQuery(this).height())})),jQuery("#"+t+" .column .contentInner").css("height",e)}))}))},initKanbanSearch:function(){jQuery(document).ready((function(){window.leantime&&leantime.kanbanSearch&&"function"==typeof leantime.kanbanSearch.init&&leantime.kanbanSearch.init({inputSelector:"#kanbanSearch",wrapperSelector:"#kanbanSearchWrapper"})}))},addCommentTimesheetContent:function(e,t){var n="Discussion on To-Do #"+t+":\n\r"+jQuery("#commentText-"+e).text();jQuery('li a[href*="timesheet"]').click(),jQuery("#timesheet #description").val(n)},initMilestoneTable:function(e){jQuery(document).ready((function(){var e=jQuery(".ticketTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"><"clear">',searching:!1,stateSave:!0,displayLength:100,order:[],columnDefs:[{visible:!1,targets:7},{visible:!1,targets:8},{target:"no-sort",orderable:!1}]});new jQuery.fn.dataTable.Buttons(e.table(0),{buttons:[{extend:"csvHtml5",title:leantime.i18n.__("label.filename_fileexport"),charset:"utf-8",bom:!0,exportOptions:{format:{body:function(e,t,n,a){return void 0!==jQuery(a).data("order")&&(e=jQuery(a).data("order")),e}}}},{extend:"colvis",columns:":not(.noVis)"}]}).container().appendTo(jQuery("#tableButtons"));e.table(0).on("column-visibility",(function(t,n,a,o){for(var i=1;i<e.tables().context.length;i++)e.tables(i).column(a).visible(o);e.draw()})),jQuery(".ticketTable input").on("change",(function(t,n,a,o){jQuery(this).parent().attr("data-order",jQuery(this).val()),e.draw()}))}))},initMilestoneDates:function(){var e=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),t=jQuery("#milestoneEditFrom").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:"true"===leantime.i18n.__("language.isRTL")?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",(function(){n.datepicker("option","minDate",a(this))})),n=jQuery("#milestoneEditTo").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:"true"===leantime.i18n.__("language.isRTL")?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",(function(){t.datepicker("option","maxDate",a(this))}));function a(t){var n;try{n=jQuery.datepicker.parseDate(e,t.value)}catch(e){n=null}return n}},initTicketsList:function(e){jQuery(document).ready((function(){jQuery(".listStyleTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")},buttons:{colvis:leantime.i18n.__("datatables.buttons.colvis"),csv:leantime.i18n.__("datatables.buttons.download")}},dom:'<"top">rt<"bottom"<"center"p>><"clear">',searching:!1,stateSave:!0,displayLength:25,order:[],fnDrawCallback:function(e){e._iDisplayLength>e.fnRecordsDisplay()?jQuery(e.nTableWrapper).find(".dataTables_paginate").hide():jQuery(e.nTableWrapper).find(".dataTables_paginate").show()}})}))},loadTicketToContainer:function(e,t){function n(e){jQuery(e).find("form").each((function(){jQuery(this).on("submit",(function(t){t.preventDefault(),jQuery("textarea.complexEditor").length>0&&null!==jQuery("textarea.complexEditor").tinymce()&&(jQuery("textarea.complexEditor").tinymce().save(),jQuery("textarea.complexEditor").tinymce().remove()),jQuery(e).html("<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px'/></div>");var a=jQuery(this).serialize();jQuery.ajax({url:jQuery(this).attr("action"),data:a,type:"post",success:function(t){jQuery(e).html(t),n(e)},error:function(){}})}))}))}jQuery("textarea.complexEditor").length>0&&null!==jQuery("textarea.complexEditor").tinymce()&&(jQuery("textarea.complexEditor").tinymce().save(),jQuery("textarea.complexEditor").tinymce().remove()),jQuery(".ticketRows").removeClass("active"),jQuery("#row-"+e).addClass("active"),jQuery(t).html("<div class='center'><img src='"+leantime.appUrl+"/dist/images/svg/loading-animation.svg' width='100px' /></div>"),jQuery.get(leantime.appUrl+"/tickets/showTicket/"+e,(function(e){jQuery(t).html(e),n(t)}))},initTicketSearchUrlBuilder:function(e){var t=jQuery("#projectIdInput").val(),n=jQuery("#userSelect").val(),a=jQuery("#milestoneSelect").val(),o=jQuery("#termInput").val(),i=jQuery("#sprintSelect").val(),r=jQuery("#typeSelect").val(),s=jQuery("#prioritySelect").val(),l=jQuery("#statusSelect").val(),u=jQuery("#sortBySelect").val(),d=jQuery("input[name='groupBy']:checked").val(),c="?search=true";""!=t&&null!=t&&(c=c+"&projectId="+t),""!=n&&null!=n&&(c=c+"&users="+n),""!=a&&null!=a&&(c=c+"&milestone="+a),""!=o&&null!=o&&(c=c+"&term="+o),""!=i&&null!=i&&(c=c+"&sprint="+i),""!=r&&null!=r&&(c=c+"&type="+r),""!=s&&null!=s&&(c=c+"&priority="+s),""!=l&&null!=l&&(c=c+"&status="+l),""!=u&&null!=u&&(c=c+"&sort="+u),""!=d&&null!=d&&(c=c+"&groupBy="+d);var m=e+c;window.location.href=m},initSprintDates:function(){Date.prototype.addDays=function(e){return this.setDate(this.getDate()+e),this},jQuery.datepicker.setDefaults({beforeShow:function(e){if(jQuery(e).attr("readonly"))return!1}});var e=leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),t=jQuery("#sprintStart").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:"true"===leantime.i18n.__("language.isRTL")?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",(function(){n.datepicker("option","minDate",a(this));var e=a(this).addDays(13);n.datepicker("setDate",e)})),n=jQuery("#sprintEnd").datepicker({defaultDate:"+1w",numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:"true"===leantime.i18n.__("language.isRTL")?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",(function(){t.datepicker("option","maxDate",a(this))}));function a(t){var n;try{n=jQuery.datepicker.parseDate(e,t.value)}catch(e){n=null}return n}},initSimpleColorPicker:function(){jQuery("input.simpleColorPicker").simpleColorPicker({colors:["#821219","#BB1B25","#75BB1B","#4B7811","#fdab3d","#1bbbb1","#006d9f","#124F7D","#082236","#5F0F40","#bb1b75","#F26CA7","#BB611B","#aaaaaa","#4c4c4c"],onChangeColor:function(e){jQuery(this).css("background",e),jQuery(this).css("color","#fff")}});var e=jQuery("input.simpleColorPicker").val();""!=e&&jQuery("input.simpleColorPicker").css("background",e)}}}(),leantime.swotCanvasController=function(){var e="swot",t=!1,n=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==t&&(t=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery(".swotCanvasModal, #commentForm, #commentForm .deleteComment, .swotCanvasMilestone .deleteMilestone").nyroModal(n())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},a=function(){jQuery(".swotCanvasModal, #commentForm, #commentForm .deleteComment, .swotCanvasMilestone .deleteMilestone").nyroModal(n())};return{setCloseModal:function(){t=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),a()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),a()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,n)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==t.length){var n=t[0],a=t[1];t[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:n,author:a}}).done((function(){jQuery("#userDropdownMenuLink"+n+" span.text span#userImage"+n+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+a),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,status:o}}).done((function(){jQuery("#statusDropdownMenuLink"+a+" span.text").text(n),jQuery("#statusDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,relates:o}}).done((function(){jQuery("#relatesDropdownMenuLink"+a+" span.text").text(n),jQuery("#relatesDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){var e=jQuery("html").height()-320-40-25,t=e/2;jQuery("#firstRow div.contentInner").each((function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)})),jQuery("#firstRow .column .contentInner").css("height",t);var n=e/2;jQuery("#secondRow div.contentInner").each((function(){jQuery(this).height()>n&&(n=jQuery(this).height()+50)})),jQuery("#secondRow .column .contentInner").css("height",n)}}}(),leantime.sqCanvasController=function(){var e=!1,t=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==e&&(e=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery(".sqCanvasModal, #commentForm, #commentForm .deleteComment, .sqCanvasMilestone .deleteMilestone").nyroModal(t())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery(".sqCanvasModal, #commentForm, #commentForm .deleteComment, .sqCanvasMilestone .deleteMilestone").nyroModal(t())};return{setCloseModal:function(){e=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,t)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==e.length){var t=e[0],n=e[1];e[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"sqcanvas",data:{id:t,author:n}}).done((function(){jQuery("#userDropdownMenuLink"+t+" span.text span#userImage"+t+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+n),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("/"),t=jQuery(this).attr("data-label");if(2==e.length){var n=e[0],a=e[1],o=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"sqcanvas",data:{id:n,status:a}}).done((function(){jQuery("#statusDropdownMenuLink"+n+" span.text").text(t),jQuery("#statusDropdownMenuLink"+n).removeClass().addClass(o+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("/"),t=jQuery(this).attr("data-label");if(2==e.length){var n=e[0],a=e[1],o=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"sqcanvas",data:{id:n,relates:a}}).done((function(){jQuery("#relatesDropdownMenuLink"+n+" span.text").text(t),jQuery("#relatesDropdownMenuLink"+n).removeClass().addClass(o+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){}}}(),leantime.smCanvasController=function(){var e=!1,t=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==e&&(e=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery(".smCanvasModal, #commentForm, #commentForm .deleteComment, .smCanvasMilestone .deleteMilestone").nyroModal(t())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery(".smCanvasModal, #commentForm, #commentForm .deleteComment, .smCanvasMilestone .deleteMilestone").nyroModal(t())};return{setCloseModal:function(){e=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,t)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==e.length){var t=e[0],n=e[1];e[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"smcanvas",data:{id:t,author:n}}).done((function(){jQuery("#userDropdownMenuLink"+t+" span.text span#userImage"+t+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+n),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("/"),t=jQuery(this).attr("data-label");if(2==e.length){var n=e[0],a=e[1],o=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"smcanvas",data:{id:n,status:a}}).done((function(){jQuery("#statusDropdownMenuLink"+n+" span.text").text(t),jQuery("#statusDropdownMenuLink"+n).removeClass().addClass(o+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("/"),t=jQuery(this).attr("data-label");if(2==e.length){var n=e[0],a=e[1],o=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"smcanvas",data:{id:n,relates:a}}).done((function(){jQuery("#relatesDropdownMenuLink"+n+" span.text").text(t),jQuery("#relatesDropdownMenuLink"+n).removeClass().addClass(o+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){}}}(),leantime.settingService={saveLogo:function(e){leantime.settingRepository.saveLogo(e)}},leantime.settingRepository={saveLogo:function(e){var t=new FormData;t.append("file",e),jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/setting",data:t,processData:!1,contentType:!1,success:function(e){jQuery("#save-logo").removeClass("running"),location.reload()},error:function(e){console.log(e)}})}},leantime.settingController=function(){var e,t=function(){jQuery("#logoImg").croppie("destroy"),jQuery("#previousImage").show()};return{readURL:function(n){if(t(),n.files&&n.files[0]){var a=new FileReader,o=jQuery("#logoImg");a.onload=function(t){(e=o.croppie({enableExif:!0,enforceBoundary:!1,viewport:{width:220,height:40,type:"square"},boundary:{width:400,height:200}})).croppie("bind",{url:t.currentTarget.result}),jQuery("#previousImage").hide()},a.readAsDataURL(n.files[0])}},clearCroppie:t,saveCroppie:function(){jQuery("#save-logo").addClass("running"),jQuery("#logoImg").attr("src",leantime.appUrl+"/images/loaders/loader28.gif"),e.croppie("result",{type:"blob",circle:!1,size:"original",quality:1}).then((function(e){leantime.settingService.saveLogo(e)}))}}}(),leantime.sbCanvasController=function(){var e=!1,t=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==e&&(e=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery(".sbCanvasModal, #commentForm, #commentForm .deleteComment, .sbCanvasMilestone .deleteMilestone").nyroModal(t())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery(".sbCanvasModal, #commentForm, #commentForm .deleteComment, .sbCanvasMilestone .deleteMilestone").nyroModal(t())};return{setCloseModal:function(){e=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,t)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==e.length){var t=e[0],n=e[1];e[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"sbcanvas",data:{id:t,author:n}}).done((function(){jQuery("#userDropdownMenuLink"+t+" span.text span#userImage"+t+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+n),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("/"),t=jQuery(this).attr("data-label");if(2==e.length){var n=e[0],a=e[1],o=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"sbcanvas",data:{id:n,status:a}}).done((function(){jQuery("#statusDropdownMenuLink"+n+" span.text").text(t),jQuery("#statusDropdownMenuLink"+n).removeClass().addClass(o+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("/"),t=jQuery(this).attr("data-label");if(2==e.length){var n=e[0],a=e[1],o=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"sbcanvas",data:{id:n,relates:a}}).done((function(){jQuery("#relatesDropdownMenuLink"+n+" span.text").text(t),jQuery("#relatesDropdownMenuLink"+n).removeClass().addClass(o+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){var e=0;jQuery("#stakeholderRow div.contentInner").each((function(){jQuery(this).height()>e&&(e=jQuery(this).height()+35)}));var t=0;jQuery("#financialsRow div.contentInner").each((function(){jQuery(this).height()>t&&(t=jQuery(this).height()+35)}));var n=0;jQuery("#culturechangeRow div.contentInner").each((function(){jQuery(this).height()>n&&(n=jQuery(this).height()+35)})),jQuery("#stakeholderRow .column .contentInner").css("height",e),jQuery("#financialsRow .column .contentInner").css("height",t),jQuery("#culturechangeRow .column .contentInner").css("height",n)}}}(),leantime.risksCanvasController=function(){var e="risks",t=!1,n=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==t&&(t=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery(".risksCanvasModal, #commentForm, #commentForm .deleteComment, .risksCanvasMilestone .deleteMilestone").nyroModal(n())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},a=function(){jQuery(".risksCanvasModal, #commentForm, #commentForm .deleteComment, .risksCanvasMilestone .deleteMilestone").nyroModal(n())};return{setCloseModal:function(){t=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),a()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),a()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,n)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==t.length){var n=t[0],a=t[1];t[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:n,author:a}}).done((function(){jQuery("#userDropdownMenuLink"+n+" span.text span#userImage"+n+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+a),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,status:o}}).done((function(){jQuery("#statusDropdownMenuLink"+a+" span.text").text(n),jQuery("#statusDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,relates:o}}).done((function(){jQuery("#relatesDropdownMenuLink"+a+" span.text").text(n),jQuery("#relatesDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){var e=jQuery("html").height()-320-40,t=e/2;jQuery("#firstRow div.contentInner").each((function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)})),jQuery("#firstRow .column .contentInner").css("height",t);var n=e/2;jQuery("#secondRow div.contentInner").each((function(){jQuery(this).height()>n&&(n=jQuery(this).height()+50)})),jQuery("#secondRow .column .contentInner").css("height",n)}}}(),leantime.retrosCanvasController=function(){var e="retros",t=!1,n=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==t&&(t=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+e+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+e+"CanvasMilestone .deleteMilestone").nyroModal(n())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},a=function(){jQuery("."+e+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+e+"CanvasMilestone .deleteMilestone").nyroModal(n())};return{setCloseModal:function(){t=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),a()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),a()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,n)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==t.length){var n=t[0],a=t[1];t[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:n,author:a}}).done((function(){jQuery("#userDropdownMenuLink"+n+" span.text span#userImage"+n+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+a),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,status:o}}).done((function(){jQuery("#statusDropdownMenuLink"+a+" span.text").text(n),jQuery("#statusDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,relates:o}}).done((function(){jQuery("#relatesDropdownMenuLink"+a+" span.text").text(n),jQuery("#relatesDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){var e=(jQuery("html").height()-320-20)/1;jQuery("#firstRow div.contentInner").each((function(){jQuery(this).height()>e&&(e=jQuery(this).height()+50)})),jQuery("#firstRow .column .contentInner").css("height",e)}}}(),leantime.reactionsController={addReactions:function(e,t,n,a){jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/reactions",data:{action:"add",module:e,moduleId:t,reaction:n}}).done((function(){a()}))},removeReaction:function(e,t,n,a){jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/reactions",data:{action:"remove",module:e,moduleId:t,reaction:n}}).done((function(){a()}))}},leantime.projectsController=function(){function e(){jQuery("#sortableTicketKanban .column").each((function(){var e=jQuery(this).find(".moveable").length;jQuery(this).find(" .count").text(e)}))}var t=function(){jQuery(".projectDateFrom, .projectDateTo").datepicker({dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:"true"===leantime.i18n.__("language.isRTL")?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader")})},n=function(){jQuery("#profileImg").croppie("destroy"),jQuery("#previousImage").show()};return{initDates:t,initProjectTabs:function(){jQuery(".projectTabs").tabs()},initProgressBar:function(e){jQuery("#progressbar").progressbar({value:e})},initProjectTable:function(){jQuery(document).ready((function(){jQuery("#allProjectsTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})}))},initDuplicateProjectModal:function(){var e={sizes:{minW:450,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".showDialogOnLoad").show(),t(),jQuery(".duplicateProjectModal, .formModal").nyroModal(e)},beforeClose:function(){location.reload()}}};jQuery(".duplicateProjectModal").nyroModal(e)},initTodoStatusSortable:function(e){var t=1;jQuery(e).find("input.sorter").each((function(e){jQuery(this).val(t),t++})),jQuery(e).sortable({stop:function(n,a){t=1,jQuery(e).find("input.sorter").each((function(e){jQuery(this).val(t),t++}))}})},initSelectFields:function(){jQuery(document).ready((function(){jQuery("#todosettings select.colorChosen").on("chosen:ready",(function(e,t){var n=jQuery(this).attr("id").replace("-","_");jQuery("#"+n+"_chosen a span").removeClass(),jQuery("#"+n+"_chosen a span").addClass(t.selected)})).chosen({disable_search_threshold:10}),jQuery("#todosettings select.colorChosen").on("change",(function(e,t){var n=jQuery(this).attr("id").replace("-","_");jQuery("#"+n+"_chosen a span").removeClass(),jQuery("#"+n+"_chosen a span").addClass(t.selected)}))}))},removeStatus:function(e){jQuery("#todostatus-"+e).parent().remove()},addToDoStatus:function(e){var t=-1;jQuery("#todosettings ul .statusList").each((function(){var e=jQuery(this).find(".labelKey").val();parseInt(e)>=parseInt(t)&&(t=e)}));var n=parseInt(t)+1,a=jQuery(".newStatusTpl").clone();a.html((function(e,t){return updatedContent=t.replaceAll("XXNEWKEYXX",n)})),jQuery("#todoStatusList").append("<li>"+a.html()+"</li>"),jQuery("#todosettings select.colorChosen").chosen("destroy"),leantime.projectsController.initSelectFields(),jQuery("#todoStatusList").sortable("destroy"),leantime.projectsController.initTodoStatusSortable("#todoStatusList")},saveCroppie:function(){jQuery("#save-picture").addClass("running"),jQuery("#profileImg").attr("src",leantime.appUrl+"/images/loaders/loader28.gif"),_uploadResult.croppie("result",{type:"blob",circle:!1}).then((function(e){var t=new FormData;t.append("file",e),jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/projects",data:t,processData:!1,contentType:!1,success:function(e){jQuery("#save-picture").removeClass("running"),location.reload()},error:function(e){console.log(e)}})}))},clearCroppie:n,readURL:function(e){if(n(),e.files&&e.files[0]){var t=new FileReader,a=jQuery("#projectAvatar");t.onload=function(e){_uploadResult=a.croppie({enableExif:!0,viewport:{width:200,height:200,type:"rectangle"},boundary:{width:250,height:250}}),_uploadResult.croppie("bind",{url:e.currentTarget.result}),jQuery("#previousImage").hide()},t.readAsDataURL(e.files[0])}},initGanttChart:function(e,t,n){function a(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}jQuery(document).ready((function(){if(!1===n)var o=new Gantt("#gantt",e,{header_height:55,column_width:20,step:24,view_modes:["Day","Week","Month"],bar_height:40,static_progress_indicator:!0,bar_corner_radius:10,arrow_curve:10,padding:20,view_mode:"Month",date_format:leantime.i18n.__("language.momentJSDate"),language:"en",additional_rows:5,custom_popup_html:function(e){e._end;var t='<div class="details-container" style="min-width:600px;"> ';return void 0!==e.projectName&&(t+="<h3><b>"+e.name+"</b></h3>"),t+="<h4>"+a(e.name)+"</a></h4><br /> ",t+="</div>"},on_click:function(e){},on_date_change:function(e,t,n){var a=e.id.split("-");let o=0,i="";a.length>1?"ticket"==a[0]?(o=a[1],i="ticket"):"pgm"==a[0]&&(o=a[1],i="project"):o=a,"ticket"==i?leantime.ticketsRepository.updateMilestoneDates(o,t,n,e._index+1):jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/projects",data:{id:o,start:t,end:n,sortIndex:e._index+1}}).done((function(){}))},on_sort_change:function(e){for(var t={action:"ganttSort",payload:{}},n=0;n<e.length;n++)t.payload[e[n].id]=e[n]._index+1;jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/projects",data:t})},on_progress_change:function(e,t){},on_view_change:function(e){leantime.usersRepository.updateUserViewSettings("projectGantt",e)},on_popup_show:function(e){}});else o=new Gantt("#gantt",e,{readonlyGantt:!0,resizing:!1,progress:!1,is_draggable:!1,custom_popup_html:function(e){task._end;var t='<div class="details-container" style="min-width:600px;"> ';return void 0!==task.projectName&&(t+="<h3><b>"+e.name+"</b></h3>"),t+="<h4>"+a(e.name)+"</a></h4><br /> ",t+="</div>"},on_click:function(e){},on_date_change:function(e,t,n){},on_progress_change:function(e,t){},on_view_change:function(e){leantime.usersRepository.updateUserViewSettings("projectGantt",e)}});jQuery("#ganttTimeControl").on("click","a",(function(){var e=jQuery(this),t=e.attr("data-value");o.change_view_mode(t),e.parent().parent().find("a").removeClass("active"),e.addClass("active");var n=e.text();jQuery(".viewText").text(n)})),o.change_view_mode(t)}))},setUpKanbanColumns:function(){jQuery(document).ready((function(){e(),jQuery(".filterBar .row-fluid").css("opacity","1");var t=jQuery("html").height()-250;jQuery("#sortableProjectKanban .column .contentInner").each((function(){jQuery(this).height()>t&&(t=jQuery(this).height())})),t+=50,jQuery("#sortableProjectKanban .column .contentInner").css("min-height",t)}))},initProjectsKanban:function(t){jQuery("#sortableProjectKanban .projectBox").hover((function(){jQuery(this).css("background","var(--kanban-card-hover)")}),(function(){jQuery(this).css("background","var(--kanban-card-bg)")}));jQuery("#sortableProjectKanban .contentInner").sortable({connectWith:".contentInner",items:"> .moveable",tolerance:"intersect",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,cancel:".portlet-toggle,:input,a,input",distance:25,start:function(e,t){var n,a,o;t.item.addClass("tilt"),n=t.item,a=n.position().left,o=function(e){e.pageX>=a?(n.addClass("right"),n.removeClass("left")):(n.addClass("left"),n.removeClass("right")),a=e.pageX},jQuery("html").bind("mousemove",o),n.data("move_handler",o)},stop:function(n,a){a.item.removeClass("tilt"),jQuery("html").unbind("mousemove",a.item.data("move_handler")),a.item.removeData("move_handler"),e();for(var o={action:"sortIndex",payload:{},handler:a.item[0].id},i=0;i<t.length;i++)jQuery(".contentInner.status_"+t[i]).length&&(o.payload[t[i]]=jQuery(".contentInner.status_"+t[i]).sortable("serialize"));jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/projects",data:o})}}),jQuery(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>"),jQuery(".portlet-toggle").click((function(){var e=jQuery(this);e.toggleClass("ui-icon-minusthick ui-icon-plusthick"),e.closest(".portlet").find(".portlet-content").toggle()}))},favoriteProject:function(e,t){jQuery(t).addClass("go"),jQuery(t).hasClass("isFavorite")?leantime.reactionsController.removeReaction("project",e,"favorite",(function(){jQuery(t).find("i").removeClass("fa-solid").addClass("fa-regular"),jQuery(t).removeClass("isFavorite")})):leantime.reactionsController.addReactions("project",e,"favorite",(function(){jQuery(t).find("i").removeClass("fa-regular").addClass("fa-solid"),jQuery(t).addClass("isFavorite")}))}}}(),leantime.obmCanvasController=function(){var e="obm",t=!1,n=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==t&&(t=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery(".obmCanvasModal, #commentForm, #commentForm .deleteComment, .obmCanvasMilestone .deleteMilestone").nyroModal(n())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},a=function(){jQuery(".obmCanvasModal, #commentForm, #commentForm .deleteComment, .obmCanvasMilestone .deleteMilestone").nyroModal(n())};return{setCloseModal:function(){t=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),a()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),a()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,n)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==t.length){var n=t[0],a=t[1];t[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:n,author:a}}).done((function(){jQuery("#userDropdownMenuLink"+n+" span.text span#userImage"+n+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+a),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,status:o}}).done((function(){jQuery("#statusDropdownMenuLink"+a+" span.text").text(n),jQuery("#statusDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,relates:o}}).done((function(){jQuery("#relatesDropdownMenuLink"+a+" span.text").text(n),jQuery("#relatesDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){var e=jQuery("html").height()-320-60,t=.6666*e;jQuery("#firstRow div.contentInner").each((function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}));var n=.5*t;jQuery("#firstRowTop div.contentInner").each((function(){jQuery(this).height()>n&&(n=jQuery(this).height()+50)}));var a=.5*t;jQuery("#firstRowBottom div.contentInner").each((function(){jQuery(this).height()>a&&(a=jQuery(this).height()+50)})),n+a+25>t&&(t=n+a+50);var o=.333*e;jQuery("#secondRow div.contentInner").each((function(){jQuery(this).height()>o&&(o=jQuery(this).height()+50)})),jQuery("#firstRow .column .contentInner").css("height",t),jQuery("#firstRowTop div.contentInner").css("height",n),jQuery("#firstRowBottom div.contentInner").css("height",a),jQuery("#secondRow .column .contentInner").css("height",o)}}}(),leantime.minempathyCanvasController=function(){var e="minempathy",t=!1,n=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==t&&(t=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+e+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+e+"CanvasMilestone .deleteMilestone").nyroModal(n())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},a=function(){jQuery("."+e+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+e+"CanvasMilestone .deleteMilestone").nyroModal(n())};return{setCloseModal:function(){t=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),a()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),a()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,n)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==t.length){var n=t[0],a=t[1];t[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:n,author:a}}).done((function(){jQuery("#userDropdownMenuLink"+n+" span.text span#userImage"+n+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+a),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,status:o}}).done((function(){jQuery("#statusDropdownMenuLink"+a+" span.text").text(n),jQuery("#statusDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,relates:o}}).done((function(){jQuery("#relatesDropdownMenuLink"+a+" span.text").text(n),jQuery("#relatesDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){var e=jQuery("html").height()-320-60,t=e/3;jQuery("#firstRow div.contentInner").each((function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)})),jQuery("#firstRow .column .contentInner").css("height",t);var n=e/3;jQuery("#secondRow div.contentInner").each((function(){jQuery(this).height()>n&&(n=jQuery(this).height()+50)})),jQuery("#secondRow .column .contentInner").css("height",n);var a=e/3;jQuery("#thirdRow div.contentInner").each((function(){jQuery(this).height()>a&&(a=jQuery(this).height()+50)})),jQuery("#thirdRow .column .contentInner").css("height",a)}}}(),(leantime=leantime||{}).menuRepository={updateUserMenuSettings:function(e){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/sessions",data:{menuState:e}}).done((function(){}))}},leantime.menuController=function(){let e=function(e,t,n){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/submenu",data:{submenu:n+"-projectSelectorlist-group-"+e,state:t}})};return{toggleSubmenu:function(e){if(""!==e){var t="";"none"==jQuery("#submenu-"+e).css("display")?(jQuery("#submenu-"+e).css("display","block"),jQuery("#submenu-icon-"+e).removeClass("fa-angle-right"),jQuery("#submenu-icon-"+e).addClass("fa-angle-down"),t="open"):(jQuery("#submenu-"+e).css("display","none"),jQuery("#submenu-icon-"+e).removeClass("fa-angle-down"),jQuery("#submenu-icon-"+e).addClass("fa-angle-right"),t="closed"),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/submenu",data:{submenu:e,state:t}})}},initProjectSelector:function(){jQuery(".project-select").chosen(),jQuery(document).on("click",".projectselector.dropdown-menu",(function(e){e.stopPropagation()}));let e=localStorage.getItem("currentMenuTab");activeTabIndex=void 0===e?0:jQuery(".projectSelectorTabs").find('a[href="#'+e+'"]').parent().index(),jQuery(".projectSelectorTabs").tabs({create:function(e,t){},activate:function(e,t){localStorage.setItem("currentMenuTab",t.newPanel[0].id)},load:function(){},enable:function(){},active:activeTabIndex})},initLeftMenuHamburgerButton:function(){window.innerWidth<576&&(jQuery(".mainwrapper").removeClass("menuopen"),jQuery(".mainwrapper").addClass("menuclosed")),jQuery(".barmenu").click((function(){jQuery(".mainwrapper").hasClass("menuopen")?(jQuery(".mainwrapper").removeClass("menuopen"),jQuery(".mainwrapper").addClass("menuclosed"),leantime.menuRepository.updateUserMenuSettings("closed")):(jQuery(".mainwrapper").removeClass("menuclosed"),jQuery(".mainwrapper").addClass("menuopen"),leantime.menuRepository.updateUserMenuSettings("open"))}))},updateGroupDropdownSetting:e,toggleProjectDropDownList:function(t,n="",a){"closed"===n?(jQuery("#"+a+"-toggler-"+t).removeClass("closed"),jQuery("#"+a+"-toggler-"+t).removeClass("open"),jQuery("#"+a+"-toggler-"+t).addClass("open")):"open"===n&&(jQuery("#"+a+"-toggler-"+t).removeClass("open"),jQuery("#"+a+"-toggler-"+t).removeClass("closed"),jQuery("#"+a+"-toggler-"+t).addClass("closed")),jQuery("#"+a+"-toggler-"+t).hasClass("open")?(jQuery("#"+a+"-toggler-"+t).removeClass("open"),jQuery("#"+a+"-toggler-"+t).addClass("closed"),jQuery("#"+a+"-toggler-"+t).find("i").removeClass("fa-angle-down"),jQuery("#"+a+"-toggler-"+t).find("i").addClass("fa-angle-right"),jQuery("#"+a+"-projectSelectorlist-group-"+t).addClass("closed"),jQuery("#"+a+"-projectSelectorlist-group-"+t).removeClass("open"),e(t,"closed",a)):(jQuery("#"+a+"-toggler-"+t).removeClass("closed"),jQuery("#"+a+"-toggler-"+t).addClass("open"),jQuery("#"+a+"-toggler-"+t).find("i").removeClass("fa-angle-right"),jQuery("#"+a+"-toggler-"+t).find("i").addClass("fa-angle-down"),jQuery("#"+a+"-projectSelectorlist-group-"+t).addClass("open"),jQuery("#"+a+"-projectSelectorlist-group-"+t).removeClass("closed"),e(t,"open",a))}}}(),leantime.leanCanvasController=function(){var e="lean",t=!1,n=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==t&&(t=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery(".leanCanvasModal, #commentForm, #commentForm .deleteComment, .leanCanvasMilestone .deleteMilestone").nyroModal(n())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},a=function(){jQuery(".leanCanvasModal, #commentForm, #commentForm .deleteComment, .leanCanvasMilestone .deleteMilestone").nyroModal(n())};return{setCloseModal:function(){t=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),a()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),a()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,n)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==t.length){var n=t[0],a=t[1];t[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:n,author:a}}).done((function(){jQuery("#userDropdownMenuLink"+n+" span.text span#userImage"+n+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+a),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,status:o}}).done((function(){jQuery("#statusDropdownMenuLink"+a+" span.text").text(n),jQuery("#statusDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,relates:o}}).done((function(){jQuery("#relatesDropdownMenuLink"+a+" span.text").text(n),jQuery("#relatesDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){var e=jQuery("html").height()-320-60,t=.333*e;jQuery("#firstRow div.contentInner").each((function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)})),jQuery("#firstRow .column .contentInner").css("height",t);var n=.333*e;jQuery("#secondRow div.contentInner").each((function(){jQuery(this).height()>n&&(n=jQuery(this).height()+50)})),jQuery("#secondRow .column .contentInner").css("height",n);var a=.333*e;jQuery("#thirdRow div.contentInner").each((function(){jQuery(this).height()>a&&(a=jQuery(this).height()+50)})),jQuery("#thirdRow .column .contentInner").css("height",a)}}}(),leantime.lbmCanvasController=function(){var e="lbm",t=!1,n=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==t&&(t=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery(".lbmCanvasModal, #commentForm, #commentForm .deleteComment, .lbmCanvasMilestone .deleteMilestone").nyroModal(n())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},a=function(){jQuery(".lbmCanvasModal, #commentForm, #commentForm .deleteComment, .lbmCanvasMilestone .deleteMilestone").nyroModal(n())};return{setCloseModal:function(){t=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),a()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),a()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,n)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==t.length){var n=t[0],a=t[1];t[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:n,author:a}}).done((function(){jQuery("#userDropdownMenuLink"+n+" span.text span#userImage"+n+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+a),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,status:o}}).done((function(){jQuery("#statusDropdownMenuLink"+a+" span.text").text(n),jQuery("#statusDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,relates:o}}).done((function(){jQuery("#relatesDropdownMenuLink"+a+" span.text").text(n),jQuery("#relatesDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){var e=jQuery("html").height()-320-40,t=.666*e;jQuery("#firstRow div.contentInner").each((function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)})),jQuery("#firstRow .column .contentInner").css("height",t);var n=.333*e;jQuery("#secondRow div.contentInner").each((function(){jQuery(this).height()>n&&(n=jQuery(this).height()+50)})),jQuery("#secondRow .column .contentInner").css("height",n)}}}(),leantime.insightsCanvasController=function(){var e="insights",t=!1,n=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==t&&(t=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+e+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+e+"CanvasMilestone .deleteMilestone").nyroModal(n())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},a=function(){jQuery("."+e+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+e+"CanvasMilestone .deleteMilestone").nyroModal(n())};return{setCloseModal:function(){t=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),a()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),a()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,n)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==t.length){var n=t[0],a=t[1];t[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:n,author:a}}).done((function(){jQuery("#userDropdownMenuLink"+n+" span.text span#userImage"+n+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+a),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,status:o}}).done((function(){jQuery("#statusDropdownMenuLink"+a+" span.text").text(n),jQuery("#statusDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,relates:o}}).done((function(){jQuery("#relatesDropdownMenuLink"+a+" span.text").text(n),jQuery("#relatesDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){var e=(jQuery("html").height()-320-20)/1;jQuery("#firstRow div.contentInner").each((function(){jQuery(this).height()>e&&(e=jQuery(this).height()+50)})),jQuery("#firstRow .column .contentInner").css("height",e)}}}(),leantime.ideasController=function(){var e=!1,t=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==e&&(e=!1,location.reload())},afterShowCont:function(){jQuery(".ideaModal, #commentForm, #commentForm .deleteComment, .leanCanvasMilestone .deleteMilestone").nyroModal(t())}}}},n=function(){jQuery(".ideaModal, #commentForm, #commentForm .deleteComment, .leanCanvasMilestone .deleteMilestone").nyroModal(t())};return{setCloseModal:function(){e=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,t)},initMasonryWall:function(){var e=jQuery("#ideaMason").packery({itemSelector:".ticketBox",columnWidth:260,isResizable:!0});e.imagesLoaded().progress((function(){e.packery("layout")}));var t=e.find(".ticketBox").draggable({start:function(e,t){var n,a,o;t.helper.addClass("tilt"),n=t.helper,a=n.position().left,o=function(e){e.pageX>=a?(n.addClass("right"),n.removeClass("left")):(n.addClass("left"),n.removeClass("right")),a=e.pageX},jQuery("html").bind("mousemove",o),n.data("move_handler",o)},stop:function(e,t){t.helper.removeClass("tilt"),jQuery("html").unbind("mousemove",t.helper.data("move_handler")),t.helper.removeData("move_handler")}});e.packery("bindUIDraggableEvents",t),e.on("dragItemPositioned",(function(){var t=[],n=e.packery("getItemElements");jQuery(n).each((function(e,n){var a=e+1,o=jQuery(n).attr("data-value");t.push({id:o,sortIndex:a})})),jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/ideas",data:{action:"ideaSort",payload:t}})}))},initBoardControlModal:function(){},initWallImageModals:function(){jQuery(".mainIdeaContent img").each((function(){jQuery(this).wrap("<a href='"+jQuery(this).attr("src")+"' class='imageModal'></a>")})),jQuery(".imageModal").nyroModal()},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==e.length){var t=e[0],n=e[1];e[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/ideas",data:{id:t,author:n}}).done((function(){jQuery("#userDropdownMenuLink"+t+" span.text span#userImage"+t+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+n),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated")})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("_"),t=jQuery(this).attr("data-label");if(3==e.length){var n=e[0],a=e[1],o=e[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/ideas",data:{id:n,box:a}}).done((function(){jQuery("#statusDropdownMenuLink"+n+" span.text").text(t),jQuery("#statusDropdownMenuLink"+n).removeClass().addClass(o+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},setKanbanHeights:function(){var e=jQuery("html").height()-320;jQuery("#sortableIdeaKanban .column .contentInner").css("height",e)},initIdeaKanban:function(e){jQuery("#sortableIdeaKanban").disableSelection(),jQuery("#sortableIdeaKanban .ticketBox").hover((function(){jQuery(this).css("background","var(--kanban-card-hover)")}),(function(){jQuery(this).css("background","var(--kanban-card-bg)")})),jQuery("#sortableIdeaKanban .contentInner").sortable({connectWith:".contentInner",items:"> .moveable",tolerance:"pointer",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,cancel:".portlet-toggle",start:function(e,t){var n,a,o;t.item.addClass("tilt"),n=t.item,a=n.position().left,o=function(e){e.pageX>=a?(n.addClass("right"),n.removeClass("left")):(n.addClass("left"),n.removeClass("right")),a=e.pageX},jQuery("html").bind("mousemove",o),n.data("move_handler",o)},stop:function(e,t){t.item.removeClass("tilt"),jQuery("html").unbind("mousemove",t.item.data("move_handler")),t.item.removeData("move_handler")},update:function(t,n){for(var a={action:"statusUpdate",payload:{}},o=0;o<e.length;o++)jQuery(".contentInner.status_"+e[o]).length&&(a.payload[e[o]]=jQuery(".contentInner.status_"+e[o]).sortable("serialize"));jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/ideas",data:a})}}),jQuery(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>"),jQuery(".portlet-toggle").click((function(){var e=jQuery(this);e.toggleClass("ui-icon-minusthick ui-icon-plusthick"),e.closest(".portlet").find(".portlet-content").toggle()}))}}}(),leantime.tourFactory=function(){var e=function(e){return new Shepherd.Tour({useModalOverlay:!0,defaultStepOptions:{classes:"shepherd-theme-arrows",scrollTo:!1,cancelIcon:{enabled:!0}},tourName:e})},t=function(e){leantime.helperRepository.updateUserModalSettings(e),"undefined"!=typeof _paq&&_paq.push(["trackEvent","Tour","Completed",e])},n=function(e){return{myWorkDashboard:[{id:"welcome-step",title:"👋 Welcome to the Dashboard Tour",text:"Let's start with a few basics to get you up to speed on the navigation and different elements inside Leantime."},{id:"top-nav-step",title:"Work Modes",text:"The top navigation shows you the current 'work mode' you're in. You can be inside a project, your personal work area, or in the company mode.",attachTo:{element:".work-modes",on:"bottom"}},{id:"menu-step",title:"Left Navigation",text:"The left navigation breaks down the current work mode and gives you access to different areas. Everything presented here is part of the currently selected work mode above.",attachTo:{element:".leftpanel",on:"right"}},{id:"my-menu",title:"My Profile Bar",text:"Here you'll find links to your account as well as notifications and latest news about Leantime.",attachTo:{element:".headmenu.pull-right",on:"bottom"}},{id:"dashboard-widgets",title:"Your Dashboard Widgets",text:"Your dashboard is broken up into various widgets showing you focused information about your work.",attachTo:{element:".primaryContent",on:"top"}},{id:"dashboard-widgets-dandd",title:"Customize Your Dashboard",text:"Widgets can be resized and moved around using the drag and drop functionality.",attachTo:{element:"#widget_wrapper_todos .grid-handler-top",on:"bottom"}},{id:"my-todo-widget",title:"My To-Dos",text:"The My To-Do widget shows you all the tasks that are currently assigned to you.",attachTo:{element:"#widget_wrapper_todos",on:"top"}},{id:"my-todo-widget2",title:"Group To-Dos",text:"You can use the dropdowns here to filter your tasks by project or group them by priority, status, project, or dates.",attachTo:{element:"#yourToDoContainer > .clear",on:"bottom"}},{id:"my-todo-widget4",title:"Sort To-Dos",text:"Each To-Do can be dragged and dropped to change its order. You can also drag and drop a task to the calendar to schedule it.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child",on:"bottom"}},{id:"my-todo-widget-timer",title:"Start the Timer",text:"When you're ready to start working on a task, just click the start timer button.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .timerContainer",on:"bottom"}},{id:"my-todo-widget-complete",title:"Complete a Task",text:"Once a task is complete, you can mark it as done by clicking the status dropdown.",attachTo:{element:"#yourToDoContainer .sortable-item:first-child .statusDropdown",on:"bottom"}},{id:"my-todo-widget-add",title:"Add More Tasks",text:"You can add more tasks by clicking the plus button in each section, or by using the 3-dot menu next to each task.",attachTo:{element:"#yourToDoContainer .fa-circle-plus",on:"bottom"}},{id:"finish",title:"Congratulations!",text:"You've completed the My Work dashboard tour. Head to <a href='"+leantime.appUrl+"/dashboard/show'>your project</a> to learn more about project management in Leantime."}],projectDashboard:[{id:"left-nav",title:"Project Menu",text:"The project menu organizes your project into different sections: <strong>Data Room</strong> - to host all your files and information, <strong>Think</strong> - to strategize, ideate and define, <strong>Make</strong> - to manage goals, milestones and tasks.",attachTo:{element:".leftmenu ul",on:"left"}},{id:"project-selector",title:"Project Selector",text:"Use the project selector to jump between projects. The left menu shows everything related to your current project.",attachTo:{element:".bigProjectSelector",on:"bottom"}},{id:"project-checklist",title:"Checklist",text:"The project checklist is a quick reference to see if your project contains all the necessary information for successful execution.",attachTo:{element:"#progressForm",on:"bottom"}},{id:"project-status",title:"Quick Status Updates",text:"You can use status updates to quickly share the progress of your project with your team using red, yellow and green colors. The status will be visible across the application.",attachTo:{element:".project-updates",on:"left"}},{id:"project-progress",title:"Progress",text:"The project progress indicator shows you how much work you have completed. It accounts for various task sizes, team velocity, and project milestones.",attachTo:{element:".project-progress",on:"left"}},{id:"latest-tasks",title:"Latest Tasks",text:"The list of latest tasks shows you the most recent tasks added to your project and can be used as a project inbox.",attachTo:{element:".latest-todos",on:"left"}},{id:"teams",title:"Team",text:"The team box shows you the members of this project.",attachTo:{element:".team-container",on:"top"}},{id:"finished",title:"Congratulations!",text:"You've completed the project dashboard tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>To-Dos</a> to learn more about the various ways to manage your tasks in Leantime."}],kanbanBoard:[{id:"kanban-overview",title:"Your Kanban Board",text:"This is your Kanban board. It helps you visualize your work and limit work-in-progress.",attachTo:{element:".kanban-board-wrapper",on:"top"}},{id:"kanban-columns",title:"Work Flow",text:"Tasks move from left to right as they progress. Drag and drop cards to update their status.",attachTo:{element:".column",on:"right"}},{id:"kanban-columns2",title:"Flexible Columns",text:"Using the 3-dot menu, you can add or remove columns and rename them.",attachTo:{element:".column .widgettitle .inlineDropDownContainer",on:"right"}},{id:"kanban-filter",title:"Filter Tasks",text:"You can filter your tasks by various fields like priority, status, project, or dates.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"kanban-group",title:"Swimlanes",text:"Additionally, you can group your tasks to create Kanban swimlanes. This helps you visualize your work by team members, priority, or milestones.",attachTo:{element:".filterWrapper > .btn-group",on:"bottom"}},{id:"kanban-sprints",title:"Sprints",text:"If you manage your work in sprints, you can use the dropdown here to select, create, and update sprints.",attachTo:{element:".pageheader .dropdown",on:"bottom"}},{id:"kanban-congrats",title:"Congratulations!",text:"This concludes the Kanban tour. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Milestones</a> to learn how to create and manage milestones in Leantime."}],milestoneView:[{id:"milestone-overview",title:"Milestones",text:"Milestones help you track major outcomes and project phases.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-drag",title:"Drag & Sort",text:"Each bar represents one milestone. You can drag them along the timeline, reorder, and resize them. Everything you do on this screen updates the timing of your milestones.",attachTo:{element:".gantt-wrapper",on:"top"}},{id:"milestone-filter",title:"Filter",text:"You can filter your milestones and also view tasks that are part of them.",attachTo:{element:".filterWrapper > .btn",on:"bottom"}},{id:"milestone-timeframes",title:"Timeframes",text:"You can change the timeframe of the timeline view to see more of the year or dive deep into a daily breakdown.",attachTo:{element:".col-md-4 .pull-right",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the milestone tour. Head to the <a href='"+leantime.appUrl+"/goalcanvas/dashboard'>Goals</a> to learn how to create and manage goals in Leantime."}],goalsView:[{id:"goals-overview",title:"Goals",text:"Goals help you track measurable impact on your projects."},{id:"goal-parts",title:"Objectives & Metrics",text:"Each goal is made up of an Objective (what you're trying to accomplish) and a Metric (how you'll measure it).",attachTo:{element:".ticketBox",on:"top"}},{id:"goal-progress",title:"Goal Progress",text:"As you update your goal metrics, the progress bar will show you how far along you are.",attachTo:{element:".ticketBox > .row > .col-md-12 .progress",on:"bottom"}},{id:"milestone-connection",title:"Milestones & Goals",text:"You can connect goals to milestones to track the task-level progress of your goals. This helps identify gaps in your project plan.",attachTo:{element:".ticketBox.fixed",on:"bottom"}},{id:"milestone-congrats",title:"Congratulations!",text:"This concludes the goals tour. Milestones, Goals, and To-Dos are the basic building blocks in Leantime. Use them to break down your work into manageable chunks. Head to the <a href='"+leantime.appUrl+"/tickets/showKanban'>Kanban Board</a> to review your tasks."}]}[e]||[]},a=function(a){const o=e(a),i=n(a);return i.forEach(((e,n)=>{const r=0===n,s=n===i.length-1,l=[];r||l.push({text:leantime.i18n.__("tour.back"),classes:"shepherd-button-secondary",action:o.back}),s?l.push({text:leantime.i18n.__("tour.finish"),action:function(){t(a),confetti(),o.complete()}}):l.push({text:leantime.i18n.__("tour.next"),action:o.next}),s||l.unshift({text:leantime.i18n.__("tour.cancel"),classes:"shepherd-button-secondary",action:o.cancel}),o.addStep({...e,buttons:l})})),o.on("complete",(function(){t(a)})),o};return{createTour:e,buildTour:a,startTour:function(e){const t=a(e);return t.start(),t},getTourDefinition:n}}(),(leantime=leantime||{}).helperRepository={updateUserModalSettings:function(e,t=!1){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/users",data:{settings:e,permanent:t?1:0,patchModalSettings:1}}).done((function(){}))},startingTour:function(){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/sessions",data:{tourActive:1}}).done((function(){}))},stopTour:function(){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/sessions",data:{tourActive:0}}).done((function(){}))}},leantime.helperController={showHelperModal:function(e,t,n){jQuery(document).ready((function(){jQuery.nmManual(leantime.appUrl+"/help/showOnboardingDialog?module="+e,{sizes:{minW:t||200,minH:n||500},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){leantime.replaceSVGColors()},afterShowCont:function(){htmx.process(".nyroModalCont")}}})}))},hideAndKeepHidden:function(e){leantime.helperRepository.updateUserModalSettings(e),leantime.modals.setCustomModalCallback((function(){})),leantime.modals.closeModal()},setDontShowAgain:function(e,t){t?leantime.helperRepository.updateUserModalSettings(e,!0):leantime.helperRepository.updateUserModalSettings(e,!1)},closeModal:function(){leantime.modals.setCustomModalCallback((function(){})),leantime.modals.closeModal()},startMyWorkDashboardTour:function(){return leantime.modals.setCustomModalCallback((function(){})),leantime.modals.closeModal(),leantime.tourFactory.startTour("myWorkDashboard")},startProjectDashboardTour:function(){return leantime.modals.setCustomModalCallback((function(){})),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("projectDashboard"),leantime.tourFactory.startTour("projectDashboard")},startKanbanTour:function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("kanbanBoard"),leantime.tourFactory.startTour("kanbanBoard")},startMilestoneTour:function(){return jQuery.nmTop()&&jQuery.nmTop().close(),leantime.helperRepository.updateUserModalSettings("milestoneView"),leantime.tourFactory.startTour("milestoneView")},startGoalTour:function(){return leantime.modals.setCustomModalCallback((function(){})),leantime.modals.closeModal(),leantime.helperRepository.updateUserModalSettings("goals"),leantime.tourFactory.startTour("goalsView")},firstLoginModal:function(){jQuery(document).ready((function(){var e={sizes:{minW:700,minH:250},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".showDialogOnLoad").show(),jQuery(".onboardingModal").nyroModal(e)},beforeClose:function(){location.reload()}}};jQuery(".onboardingModal").nyroModal(e),jQuery.nmManual(leantime.appUrl+"/help/firstLogin",e)}))}},leantime.firstTaskController={initFirstTaskForm:function(){jQuery(document).ready((function(){const e=jQuery("#firstTaskOnboarding");e.length>0&&(e.on("submit",(function(t){t.preventDefault();const n=jQuery("#firstTask");if(""===n.val().trim())return n.addClass("error"),!1;n.removeClass("error"),leantime.confettiHelper.celebrateSuccess(),setTimeout((function(){e[0].submit()}),1500)})),jQuery("#firstTask").on("input",(function(){jQuery(this).removeClass("error")})))}))}},jQuery(document).ready((function(){leantime.firstTaskController.initFirstTaskForm()})),leantime.confettiHelper=function(){var e=function(e){const t={particleCount:100,spread:70,origin:{y:.6},disableForReducedMotion:!0,...e};"function"==typeof confetti?confetti(t):console.error("Confetti library not loaded")};return{triggerConfetti:e,celebrateSuccess:function(){e({particleCount:150,spread:90,origin:{y:.8},colors:["#26a69a","#00bcd4","#4caf50","#8bc34a","#cddc39"]}),setTimeout((function(){e({particleCount:80,spread:120,origin:{y:.7},colors:["#ff9800","#ff5722","#f44336","#e91e63","#9c27b0"]})}),500)}}}(),leantime.goalCanvasController=function(){var e="goal",t=!1,n=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==t&&(t=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery(".goalCanvasModal, #commentForm, #commentForm .deleteComment, .goalCanvasMilestone .deleteMilestone").nyroModal(n())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},a=function(){jQuery(".goalCanvasModal, #commentForm, #commentForm .deleteComment, .goalCanvasMilestone .deleteMilestone").nyroModal(n())};return{setCloseModal:function(){t=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),a()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),a()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,n)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==t.length){var n=t[0],a=t[1];t[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:n,author:a}}).done((function(){jQuery("#userDropdownMenuLink"+n+" span.text span#userImage"+n+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+a),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,status:o}}).done((function(){jQuery("#statusDropdownMenuLink"+a+" span.text").text(n),jQuery("#statusDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,relates:o}}).done((function(){jQuery("#relatesDropdownMenuLink"+a+" span.text").text(n),jQuery("#relatesDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){jQuery("html").height()},initProgressChart:function(e,t,n){var a={type:"doughnut",data:{datasets:[{data:[t,n],backgroundColor:[leantime.dashboardController.chartColors.green,leantime.dashboardController.chartColors.grey],label:leantime.i18n.__("label.project_done")}],labels:[t+"%"]},options:{maintainAspectRatio:!0,responsive:!0,plugins:{legend:{position:"none"},title:{display:!1,text:"Complete"}},animation:{animateScale:!0,animateRotate:!0}}},o=document.getElementById(e).getContext("2d");_progressChart=new Chart(o,a)}}}();var SNAKE=SNAKE||{};window.SNAKE=SNAKE,SNAKE.addEventListener=window.addEventListener?function(e,t,n,a){e.addEventListener(t,n,a)}:window.attachEvent?function(e,t,n){e.attachEvent("on"+t,n)}:void 0,SNAKE.removeEventListener=window.removeEventListener?function(e,t,n,a){e.removeEventListener(t,n,a)}:window.detachEvent?function(e,t,n){e.detachEvent("on"+t,n)}:void 0,SNAKE.Snake=SNAKE.Snake||function(){var e=[],t=function(){this.elm=null,this.elmStyle=null,this.row=-1,this.col=-1,this.xPos=-1e3,this.yPos=-1e3,this.next=null,this.prev=null};return function(n){if(n&&n.playingBoard){void 0===localStorage.jsSnakeHighScore&&localStorage.setItem("jsSnakeHighScore",0);var a=this,o=n.playingBoard,i=1,r=-1,s=!0,l=!0,u=-1,d=[0,1,0,-1],c=[-1,0,1,0],m=[],p=[],y=80,h=!1,g=!1,f=document.getElementById("selectMode");f&&f.addEventListener("change",(function(e){var t=(e=e||{}).target?parseInt(e.target.value):75;(isNaN(t)||t<25)&&(t=75),y=t,setTimeout((function(){document.getElementById("game-area").focus()}),10)})),a.snakeBody={},a.snakeBody.b0=new t,a.snakeBody.b0.row=n.startRow||1,a.snakeBody.b0.col=n.startCol||1,a.snakeBody.b0.xPos=a.snakeBody.b0.row*o.getBlockWidth(),a.snakeBody.b0.yPos=a.snakeBody.b0.col*o.getBlockHeight(),a.snakeBody.b0.elm=j(),a.snakeBody.b0.elmStyle=a.snakeBody.b0.elm.style,o.getBoardContainer().appendChild(a.snakeBody.b0.elm),a.snakeBody.b0.elm.style.left=a.snakeBody.b0.xPos+"px",a.snakeBody.b0.elm.style.top=a.snakeBody.b0.yPos+"px",a.snakeBody.b0.next=a.snakeBody.b0,a.snakeBody.b0.prev=a.snakeBody.b0,a.snakeLength=1,a.snakeHead=a.snakeBody.b0,a.snakeTail=a.snakeBody.b0,a.snakeHead.elm.className=a.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),a.snakeHead.elm.id="snake-snakehead-alive",a.snakeHead.elm.className+=" snake-snakebody-alive",a.setPaused=function(e){g=e},a.getPaused=function(){return g},a.handleArrowKeys=function(e){if(h||g&&!n.premoveOnPause)return;a.snakeLength;let t=-1;switch(e){case 37:case 65:t=3;break;case 38:case 87:t=0;break;case 39:case 68:t=1;break;case 40:case 83:t=2}u!==i&&(r=t),(2!==Math.abs(t-i)&&(s||g)||l)&&(u=t,s=!1,l=!1)},a.go=function(){var e=a.snakeHead,t=a.snakeTail,n=o.grid;if(!0!==g){if(a.snakeTail=t.prev,a.snakeHead=t,n[t.row]&&n[t.row][t.col]&&(n[t.row][t.col]=0),-1!==u&&(i=u,-1!==r&&(u=r,r=-1)),s=!0,t.col=e.col+d[i],t.row=e.row+c[i],t.xPos=e.xPos+m[i],t.yPos=e.yPos+p[i],t.elmStyle||(t.elmStyle=t.elm.style),t.elmStyle.left=t.xPos+"px",t.elmStyle.top=t.yPos+"px",a.snakeLength>1&&(t.elm.id="snake-snakehead-alive",e.elm.id=""),0===n[t.row][t.col])n[t.row][t.col]=1,setTimeout((function(){a.go()}),y);else if(n[t.row][t.col]>0)a.handleDeath();else if(n[t.row][t.col]===o.getGridFoodValue()){if(n[t.row][t.col]=1,!a.eatFood())return void a.handleWin();setTimeout((function(){a.go()}),y)}}else setTimeout((function(){a.go()}),y)},a.eatFood=function(){e.length<=5&&v(10);for(var t,n=e.splice(0,5),i=n.length,r=a.snakeTail;i--;)t="b"+a.snakeLength++,a.snakeBody[t]=n[i],a.snakeBody[t].prev=r,a.snakeBody[t].elm.className=a.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),a.snakeBody[t].elm.className+=" snake-snakebody-alive",r.next=a.snakeBody[t],r=a.snakeBody[t];if(a.snakeTail=a.snakeBody[t],a.snakeTail.next=a.snakeHead,a.snakeHead.prev=a.snakeTail,!o.foodEaten())return!1;var s=document.getElementById("selectMode");return 0==s.options[s.selectedIndex].text.localeCompare("Rush")&&(y>30?y-=5:y=30),!0},a.handleDeath=function(){var e=document.getElementById("selectMode").value;y=parseInt(e),Q(o.handleDeath)},a.handleWin=function(){Q(o.handleWin)},a.rebirth=function(){h=!1,s=!0,l=!0,r=-1},a.reset=function(){if(!1!==h){for(var t,i=[],r=a.snakeHead.next;r!==a.snakeHead;)t=r.next,r.prev=null,r.next=null,i.push(r),r=t;a.snakeHead.next=a.snakeHead,a.snakeHead.prev=a.snakeHead,a.snakeTail=a.snakeHead,a.snakeLength=1;for(var s=0;s<i.length;s++)i[s].elm.style.left="-1000px",i[s].elm.style.top="-1000px",i[s].elm.className=a.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),i[s].elm.className+=" snake-snakebody-alive";e.concat(i),a.snakeHead.elm.className=a.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),a.snakeHead.elm.className+=" snake-snakebody-alive",a.snakeHead.elm.id="snake-snakehead-alive",a.snakeHead.row=n.startRow||1,a.snakeHead.col=n.startCol||1,a.snakeHead.xPos=a.snakeHead.row*o.getBlockWidth(),a.snakeHead.yPos=a.snakeHead.col*o.getBlockHeight(),a.snakeHead.elm.style.left=a.snakeHead.xPos+"px",a.snakeHead.elm.style.top=a.snakeHead.yPos+"px"}},v(10),m[0]=0,m[1]=o.getBlockWidth(),m[2]=0,m[3]=-1*o.getBlockWidth(),p[0]=-1*o.getBlockHeight(),p[1]=0,p[2]=o.getBlockHeight(),p[3]=0}function j(){var e=document.createElement("div");return e.className="snake-snakebody-block",e.style.left="-1000px",e.style.top="-1000px",e.style.width=o.getBlockWidth()+"px",e.style.height=o.getBlockHeight()+"px",e}function v(n){for(var a,i=j(),r=1;r<n;r++)(a=new t).elm=i.cloneNode(!0),a.elmStyle=a.elm.style,o.getBoardContainer().appendChild(a.elm),e[e.length]=a;(a=new t).elm=i,o.getBoardContainer().appendChild(a.elm),e[e.length]=a}function Q(e){var t;t=localStorage.jsSnakeHighScore,a.snakeLength>t&&(alert("Congratulations! You have beaten your previous high score, which was "+t+"."),localStorage.setItem("jsSnakeHighScore",a.snakeLength)),a.snakeHead.elm.style.zIndex=function(e){var t,n=0,a=0;for(t in e)e[t].elm.currentStyle?a=parseFloat(e[t].elm.style["z-index"],10):window.getComputedStyle&&(a=parseFloat(document.defaultView.getComputedStyle(e[t].elm,null).getPropertyValue("z-index"),10)),!isNaN(a)&&a>n&&(n=a);return n+1}(a.snakeBody),a.snakeHead.elm.className=a.snakeHead.elm.className.replace(/\bsnake-snakebody-alive\b/,""),a.snakeHead.elm.className+=" snake-snakebody-dead",h=!0,e()}}}(),SNAKE.Food=SNAKE.Food||function(){var e=0;function t(e,t){return Math.floor(Math.random()*(t+1-e))+e}return function(n){if(n&&n.playingBoard){var a,o,i=n.playingBoard,r=e++,s=document.createElement("div");s.setAttribute("id","snake-food-"+r),s.className="snake-food-block",s.style.width=i.getBlockWidth()+"px",s.style.height=i.getBlockHeight()+"px",s.style.left="-1000px",s.style.top="-1000px",i.getBoardContainer().appendChild(s),this.getFoodElement=function(){return s},this.randomlyPlaceFood=function(){i.grid[a]&&i.grid[a][o]===i.getGridFoodValue()&&(i.grid[a][o]=0);for(var e=0,n=0,r=0,l=i.grid.length-1,u=i.grid[0].length-1;0!==i.grid[e][n];)if(e=t(1,l),n=t(1,u),++r>2e4)return!1;return i.grid[e][n]=i.getGridFoodValue(),a=e,o=n,s.style.top=e*i.getBlockHeight()+"px",s.style.left=n*i.getBlockWidth()+"px",!0}}}}(),SNAKE.Board=SNAKE.Board||function(){var e=0;function t(e){var t,n=0,a=0;for(t in e)e[t].elm.currentStyle?a=parseFloat(e[t].elm.style["z-index"],10):window.getComputedStyle&&(a=parseFloat(document.defaultView.getComputedStyle(e[t].elm,null).getPropertyValue("z-index"),10)),!isNaN(a)&&a>n&&(n=a);return n+1}return function(n){var a,o,i,r,s,l,u,d,c,m,p,y,h=this,g=e++,f=n||{},j=1,v=!1;function Q(){(s=document.createElement("div")).setAttribute("id","playingField"),s.className="snake-playing-field",SNAKE.addEventListener(s,"click",(function(){r.focus()}),!1),(y=document.createElement("div")).className="snake-pause-screen",y.innerHTML="<div style='padding:10px;'>[Paused]<p/>Press [space] to unpause.</div>",(l=document.createElement("div")).className="snake-panel-component",l.innerHTML="<a href='http://patorjk.com/blog/software/' class='snake-link'>more patorjk.com apps</a> - <a href='https://github.com/patorjk/JavaScript-Snake' class='snake-link'>source code</a> - <a href='https://www.youtube.com/channel/UCpcCLm9y6CsjHUrCvJHYHUA' class='snake-link'>pat's youtube</a>",(u=document.createElement("div")).className="snake-panel-component",u.innerHTML="Length: 1",(d=document.createElement("div")).className="snake-panel-component",d.innerHTML="Highscore: "+(localStorage.jsSnakeHighScore||0),c=function(){var e=document.createElement("div");e.id="sbWelcome"+g,e.className="snake-welcome-dialog";var t=document.createElement("div"),n="";f.fullScreen&&(n="On Windows, press F11 to play in Full Screen mode.");t.innerHTML="JavaScript Snake<p></p>Use the <strong>arrow keys</strong> on your keyboard to play the game. "+n+"<p></p>";var a=document.createElement("button");a.appendChild(document.createTextNode("Play Game"));var o=function(){SNAKE.removeEventListener(window,"keyup",i,!1),e.style.display="none",h.setBoardState(1),h.getBoardContainer().focus()},i=function(e){if(!e)e=window.event;var t=e.which?e.which:e.keyCode;32!==t&&13!==t||o()};return SNAKE.addEventListener(window,"keyup",i,!1),SNAKE.addEventListener(a,"click",o,!1),e.appendChild(t),e.appendChild(a),e}(),m=w("You died :(","sbTryAgain","snake-try-again-dialog"),p=w("You win! :D","sbWin","snake-win-dialog"),SNAKE.addEventListener(r,"keyup",(function(e){if(!e)e=window.event;return e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1}),!1),r.className="snake-game-container",y.style.zIndex=1e4,r.appendChild(y),r.appendChild(s),r.appendChild(l),r.appendChild(u),r.appendChild(d),r.appendChild(c),r.appendChild(m),r.appendChild(p),o=new SNAKE.Snake({playingBoard:h,startRow:2,startCol:2,premoveOnPause:f.premoveOnPause}),a=new SNAKE.Food({playingBoard:h}),c.style.zIndex=1e3}function w(e,t,n){var a=document.createElement("div");a.id=t+g,a.className=n;var o=document.createElement("div");o.innerHTML="JavaScript Snake<p></p>"+e+"<p></p>";var i=document.createElement("button");i.appendChild(document.createTextNode("Play Again?"));var r=function(){a.style.display="none",h.resetBoard(),h.setBoardState(1),h.getBoardContainer().focus()};return SNAKE.addEventListener(window,"keyup",(function(e){if(0===j&&"block"===a.style.display){if(!e)e=window.event;var t=e.which?e.which:e.keyCode;32!==t&&13!==t||r()}}),!0),SNAKE.addEventListener(i,"click",r,!1),a.appendChild(o),a.appendChild(i),a}function _(e){var n=Math.max(t(o.snakeBody),t({tmp:{elm:a.getFoodElement()}}));r.removeChild(e),r.appendChild(e),e.style.zIndex=n,e.style.display="block",h.setBoardState(0)}h.grid=[],h.setPaused=function(e){v=e,o.setPaused(e),y.style.display=v?"block":"none"},h.getPaused=function(){return v},h.resetBoard=function(){SNAKE.removeEventListener(r,"keydown",i,!1),o.reset(),u.innerHTML="Length: 1",h.setupPlayingField()},h.getBoardState=function(){return j},h.setBoardState=function(e){j=e},h.getGridFoodValue=function(){return-1},h.getPlayingFieldElement=function(){return s},h.setBoardContainer=function(e){"string"==typeof e&&(e=document.getElementById(e)),e!==r&&(r=e,s=null,h.setupPlayingField())},h.getBoardContainer=function(){return r},h.getBlockWidth=function(){return 20},h.getBlockHeight=function(){return 20},h.setupPlayingField=function(){var e,t,n,c,m,p;s||Q(),!0===f.fullScreen?(n=0,c=0,p=0,"number"==typeof window.innerWidth?p=window.innerWidth:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?p=document.documentElement.clientWidth:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(p=document.body.clientWidth),e=p-20,m=0,"number"==typeof window.innerHeight?m=window.innerHeight:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?m=document.documentElement.clientHeight:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(m=document.body.clientHeight),t=m-20):(n=f.top,c=f.left,e=f.width,t=f.height);var y=2*h.getBlockWidth()+e%h.getBlockWidth(),g=Math.min(250*h.getBlockWidth()-y,e-y),j=3*h.getBlockHeight()+t%h.getBlockHeight(),v=Math.min(250*h.getBlockHeight()-j,t-j);r.style.left=c+"px",r.style.top=n+"px",r.style.width=e+"px",r.style.height=t+"px",s.style.left=h.getBlockWidth()+"px",s.style.top=h.getBlockHeight()+"px",s.style.width=g+"px",s.style.height=v+"px";var w=j-h.getBlockHeight(),_=h.getBlockHeight()+v+Math.round((w-30)/2)+"px";l.style.top=_,l.style.width="450px",l.style.left=Math.round(e/2)-Math.round(225)+"px",u.style.top=_,u.style.left="30px",d.style.top=_,d.style.left=e-140+"px",l.style.display=e<700?"none":"block",h.grid=[];for(var b=g/h.getBlockWidth()+2,k=v/h.getBlockHeight()+2,x=0;x<k;x++){h.grid[x]=[];for(var C=0;C<b;C++)h.grid[x][C]=0===C||0===x||C===b-1||x===k-1?1:0}a.randomlyPlaceFood(),i=function(e){if(!e)e=window.event;var t=e.which?e.which:e.keyCode;if(1===h.getBoardState()){if(!(t>=37&&t<=40)&&87!==t&&65!==t&&83!==t&&68!==t)return;SNAKE.removeEventListener(r,"keydown",i,!1),i=function(e){if(!e)e=window.event;var t=e.which?e.which:e.keyCode;return 32===t&&0!=h.getBoardState()&&h.setPaused(!h.getPaused()),o.handleArrowKeys(t),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1},SNAKE.addEventListener(r,"keydown",i,!1),o.rebirth(),o.handleArrowKeys(t),h.setBoardState(2),o.go()}return e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1},SNAKE.addEventListener(r,"keydown",i,!1)},h.foodEaten=function(){return u.innerHTML="Length: "+o.snakeLength,o.snakeLength>localStorage.jsSnakeHighScore&&(localStorage.setItem("jsSnakeHighScore",o.snakeLength),d.innerHTML="Highscore: "+localStorage.jsSnakeHighScore),!!a.randomlyPlaceFood()},h.handleDeath=function(){_(m)},h.handleWin=function(){_(p)},f.fullScreen=void 0!==f.fullScreen&&f.fullScreen,f.top=void 0===f.top?0:f.top,f.left=void 0===f.left?0:f.left,f.width=void 0===f.width?400:f.width,f.height=void 0===f.height?400:f.height,f.premoveOnPause=void 0!==f.premoveOnPause&&f.premoveOnPause,f.fullScreen&&SNAKE.addEventListener(window,"resize",(function(){h.setupPlayingField()}),!1),h.setBoardState(0),f.boardContainer&&h.setBoardContainer(f.boardContainer)}}(),leantime.emCanvasController=function(){var e=!1,t=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==e&&(e=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery(".emCanvasModal, #commentForm, #commentForm .deleteComment, .emCanvasMilestone .deleteMilestone").nyroModal(t())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery(".emCanvasModal, #commentForm, #commentForm .deleteComment, .emCanvasMilestone .deleteMilestone").nyroModal(t())};return{setCloseModal:function(){e=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,t)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==e.length){var t=e[0],n=e[1];e[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"emcanvas",data:{id:t,author:n}}).done((function(){jQuery("#userDropdownMenuLink"+t+" span.text span#userImage"+t+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+n),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("/"),t=jQuery(this).attr("data-label");if(2==e.length){var n=e[0],a=e[1],o=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"emcanvas",data:{id:n,status:a}}).done((function(){jQuery("#statusDropdownMenuLink"+n+" span.text").text(t),jQuery("#statusDropdownMenuLink"+n).removeClass().addClass(o+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("/"),t=jQuery(this).attr("data-label");if(2==e.length){var n=e[0],a=e[1],o=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"emcanvas",data:{id:n,relates:a}}).done((function(){jQuery("#relatesDropdownMenuLink"+n+" span.text").text(t),jQuery("#relatesDropdownMenuLink"+n).removeClass().addClass(o+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){var e=jQuery("html").height()-320-80-150,t=e/4;jQuery("#firstRow div.contentInner").each((function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)})),jQuery("#firstRow .column .contentInner").css("height",t);var n=e/4;jQuery("#secondRow div.contentInner").each((function(){jQuery(this).height()>n&&(n=jQuery(this).height()+50)})),jQuery("#secondRow .column .contentInner").css("height",n);var a=e/4;jQuery("#thirdRow div.contentInner").each((function(){jQuery(this).height()>a&&(a=jQuery(this).height()+50)})),jQuery("#thirdRow .column .contentInner").css("height",a);var o=e/4;jQuery("#fourthRow div.contentInner").each((function(){jQuery(this).height()>o&&(o=jQuery(this).height()+50)})),jQuery("#fourthRow .column .contentInner").css("height",o)}}}(),leantime.eaCanvasController=function(){var e=!1,t=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==e&&(e=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery(".eaCanvasModal, #commentForm, #commentForm .deleteComment, .eaCanvasMilestone .deleteMilestone").nyroModal(t())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery(".eaCanvasModal, #commentForm, #commentForm .deleteComment, .eaCanvasMilestone .deleteMilestone").nyroModal(t())};return{setCloseModal:function(){e=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,t)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==e.length){var t=e[0],n=e[1];e[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"eacanvas",data:{id:t,author:n}}).done((function(){jQuery("#userDropdownMenuLink"+t+" span.text span#userImage"+t+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+n),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("/"),t=jQuery(this).attr("data-label");if(2==e.length){var n=e[0],a=e[1],o=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"eacanvas",data:{id:n,status:a}}).done((function(){jQuery("#statusDropdownMenuLink"+n+" span.text").text(t),jQuery("#statusDropdownMenuLink"+n).removeClass().addClass(o+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("/"),t=jQuery(this).attr("data-label");if(2==e.length){var n=e[0],a=e[1],o=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"eacanvas",data:{id:n,relates:a}}).done((function(){jQuery("#relatesDropdownMenuLink"+n+" span.text").text(t),jQuery("#relatesDropdownMenuLink"+n).removeClass().addClass(o+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){var e=jQuery("html").height()-320-40,t=e/2;jQuery("#firstRow div.contentInner").each((function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)})),jQuery("#firstRow .column .contentInner").css("height",t);var n=e/2;jQuery("#secondRow div.contentInner").each((function(){jQuery(this).height()>n&&(n=jQuery(this).height()+50)})),jQuery("#secondRow .column .contentInner").css("height",n)}}}(),leantime.dbmCanvasController=function(){var e="dbm",t=!1,n=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==t&&(t=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery(".dbmCanvasModal, #commentForm, #commentForm .deleteComment, .dbmCanvasMilestone .deleteMilestone").nyroModal(n())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},a=function(){jQuery(".dbmCanvasModal, #commentForm, #commentForm .deleteComment, .dbmCanvasMilestone .deleteMilestone").nyroModal(n())};return{setCloseModal:function(){t=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),a()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),a()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,n)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==t.length){var n=t[0],a=t[1];t[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:n,author:a}}).done((function(){jQuery("#userDropdownMenuLink"+n+" span.text span#userImage"+n+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+a),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,status:o}}).done((function(){jQuery("#statusDropdownMenuLink"+a+" span.text").text(n),jQuery("#statusDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,relates:o}}).done((function(){jQuery("#relatesDropdownMenuLink"+a+" span.text").text(n),jQuery("#relatesDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){var e=jQuery("html").height()-320-60,t=.375*e;jQuery("#firstRow div.contentInner").each((function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)}));var n=.375*e;jQuery("#secondRow div.contentInner").each((function(){jQuery(this).height()>n&&(n=jQuery(this).height()+50)}));var a=.5*n;jQuery("#secondRowTop div.contentInner").each((function(){jQuery(this).height()>a&&(a=jQuery(this).height()+50)}));var o=.5*n;jQuery("#secondRowBottom div.contentInner").each((function(){jQuery(this).height()>o&&(o=jQuery(this).height()+50)})),a+o+25>n&&(n=a+o+50);var i=.25*e;jQuery("#thirdRow div.contentInner").each((function(){jQuery(this).height()>i&&(i=jQuery(this).height()+50)})),jQuery("#firstRow .column .contentInner").css("height",t),jQuery("#secondRow .column .contentInner").css("height",n),jQuery("#secondRowTop .column .contentInner").css("height",a),jQuery("#secondRowBottom .column .contentInner").css("height",o),jQuery("#thirdRow .column .contentInner").css("height",i)}}}(),leantime.dashboardController=function(){var e={};e="dark"==leantime.theme?{red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(56, 56, 56)"}:{red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"};return{chartColors:e,initBurndown:function(e,t,n){moment.locale(leantime.i18n.__("language.code"));var a={type:"line",data:{labels:e,datasets:[{label:leantime.i18n.__("label.ideal"),backgroundColor:leantime.dashboardController.chartColors.blue,borderColor:leantime.dashboardController.chartColors.blue,data:t,fill:!1,lineTension:0},{label:"Actual",backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:n,fill:!1,lineTension:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},plugins:{legend:{position:"bottom"},title:{display:!1,text:"Line Chart"},tooltips:{mode:"index",intersect:!1}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0}}}}},o=document.getElementById("sprintBurndown").getContext("2d");return _burndownChart=new Chart(o,a),_burndownChart},initChartButtonClick:function(e,t,n,a,o){jQuery("#"+e).click((function(e){o.data.datasets[0].data=n,o.data.datasets[1].data=a,o.options.scales.y.title.text=t,jQuery(".chartButtons").removeClass("active"),jQuery(this).addClass("active"),o.update()}))},initBacklogBurndown:function(e,t){moment.locale(leantime.i18n.__("language.code"));var n={type:"line",data:{labels:e,datasets:[{label:leantime.i18n.__("label.done_todos"),backgroundColor:leantime.dashboardController.chartColors.green,borderColor:leantime.dashboardController.chartColors.green,data:t.done.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.progress_todos"),backgroundColor:leantime.dashboardController.chartColors.yellow,borderColor:leantime.dashboardController.chartColors.yellow,data:t.progress.data,fill:!0,lineTension:0,pointRadius:0},{label:leantime.i18n.__("label.new_todos"),backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:t.open.data,fill:!0,lineTension:0,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!0},elements:{point:{pointStyle:"line",radius:"0"}},plugins:{tooltips:{mode:"index",intersect:!1},legend:{position:"bottom"},title:{display:!1,text:"Line Chart"}},scales:{x:{display:!0,title:{display:!0,text:leantime.i18n.__("label.date")},type:"time",time:{unit:"day"}},y:{display:!0,title:{display:!0,text:leantime.i18n.__("label.num_tickets")},ticks:{beginAtZero:!0},stacked:!0}}}},a=document.getElementById("backlogBurndown").getContext("2d");return _burndownChart=new Chart(a,n),_burndownChart},initBacklogChartButtonClick:function(e,t,n,a){jQuery("#"+e).click((function(e){a.data.datasets[0].data=t.done.data,a.data.datasets[1].data=t.progress.data,a.data.datasets[2].data=t.open.data,a.options.scales.y.title.text=n,jQuery(".backlogChartButtons").removeClass("active"),jQuery(this).addClass("active"),a.update()}))},initProgressChart:function(e,t,n){var a={type:"doughnut",data:{datasets:[{data:[t,n],backgroundColor:[leantime.dashboardController.chartColors.green,leantime.dashboardController.chartColors.grey],label:leantime.i18n.__("label.project_done")}],labels:[t+"% Done",n+"% Open"]},options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:""}},animation:{animateScale:!0,animateRotate:!0}}},o=document.getElementById(e).getContext("2d");new Chart(o,a)},prepareHiddenDueDate:function(){var e=moment().startOf("week").add(5,"days");jQuery("#dateToFinish").val(e.format("YYYY-MM-DD"))},initDueDateTimePickers:function(){jQuery(document).ready((function(){jQuery(".duedates").datepicker({dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:"true"===leantime.i18n.__("language.isRTL")?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),onClose:function(e){var t;""==e&&jQuery(this).val(leantime.i18n.__("text.anytime"));var n=moment(e,leantime.i18n.__("language.momentJSDate")).format("YYYY-MM-DD HH:mm:ss"),a=jQuery(this).attr("data-id");t=n,leantime.ticketsRepository.updateDueDates(a,t,(function(){jQuery.growl({message:leantime.i18n.__("short_notifications.duedate_updated")})}))}})}))}}}(),leantime.cpCanvasController=function(){var e=!1,t=function(){return{sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==e&&(e=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery(".cpCanvasModal, #commentForm, #commentForm .deleteComment, .cpCanvasMilestone .deleteMilestone").nyroModal(t())},beforeClose:function(){location.reload()}},titleFromIframe:!0}},n=function(){jQuery(".cpCanvasModal, #commentForm, #commentForm .deleteComment, .cpCanvasMilestone .deleteMilestone").nyroModal(anvasoptions())};return{setCloseModal:function(){e=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),n()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),n()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,t)},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==e.length){var t=e[0],n=e[1];e[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"cpcanvas",data:{id:t,author:n}}).done((function(){jQuery("#userDropdownMenuLink"+t+" span.text span#userImage"+t+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+n),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("/"),t=jQuery(this).attr("data-label");if(2==e.length){var n=e[0],a=e[1],o=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"cpcanvas",data:{id:n,status:a}}).done((function(){jQuery("#statusDropdownMenuLink"+n+" span.text").text(t),jQuery("#statusDropdownMenuLink"+n).removeClass().addClass(o+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var e=jQuery(this).attr("data-value").split("/"),t=jQuery(this).attr("data-label");if(2==e.length){var n=e[0],a=e[1],o=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+"cpcanvas",data:{id:n,relates:a}}).done((function(){jQuery("#relatesDropdownMenuLink"+n+" span.text").text(t),jQuery("#relatesDropdownMenuLink"+n).removeClass().addClass(o+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setRowHeights:function(){var e=jQuery("html").height()-320-80-125,t=e/4;jQuery("#firstRow div.contentInner").each((function(){jQuery(this).height()>t&&(t=jQuery(this).height()+50)})),jQuery("#firstRow .column .contentInner").css("height",t);var n=e/4;jQuery("#secondRow div.contentInner").each((function(){jQuery(this).height()>n&&(n=jQuery(this).height()+50)})),jQuery("#secondRow .column .contentInner").css("height",n);var a=e/4;jQuery("#thirdRow div.contentInner").each((function(){jQuery(this).height()>a&&(a=jQuery(this).height()+50)})),jQuery("#thirdRow .column .contentInner").css("height",a);var o=e/4;jQuery("#fourthRow div.contentInner").each((function(){jQuery(this).height()>o&&(o=jQuery(this).height()+50)})),jQuery("#fourthRow .column .contentInner").css("height",o)}}}(),leantime.commentsController={enableCommenterForms:function(){jQuery(".commentBox").show(),jQuery("#comments .replies .commentBox").hide(),jQuery(".deleteComment, .replyButton").show(),jQuery(".commentReply .tinymceSimple").tinymce().getBody().setAttribute("contenteditable","true"),jQuery(".commentReply .tox-editor-header").show(),jQuery(".commenterFields input").prop("readonly",!1),jQuery(".commenterFields input").prop("disabled",!1),jQuery(".commenterFields textarea").prop("readonly",!1),jQuery(".commenterFields textarea").prop("disabled",!1)},toggleCommentBoxes:function(e){0==e?jQuery("#mainToggler").hide():jQuery("#mainToggler").show(),jQuery(".commentBox textarea").remove(),jQuery(".commentBox").hide("fast",(function(){})),jQuery("#comment"+e+" .commentReply").prepend('<textarea rows="5" cols="75" name="text" class="tinymceSimple"></textarea>'),leantime.editorController.initSimpleEditor(),jQuery("#comment"+e).show("fast"),jQuery("#father").val(e)}},leantime.clientsController={initDates:function(){jQuery(".projectDateFrom, .projectDateTo").datepicker({dateFormat:leantime.i18n.__("language.dateformat"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:"true"===leantime.i18n.__("language.isRTL")?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader")})},initClientTabs:function(){jQuery(".clientTabs").tabs()},initClientTable:function(){jQuery(document).ready((function(){jQuery("#allClientsTable").DataTable({language:{decimal:leantime.i18n.__("datatables.decimal"),emptyTable:leantime.i18n.__("datatables.emptyTable"),info:leantime.i18n.__("datatables.info"),infoEmpty:leantime.i18n.__("datatables.infoEmpty"),infoFiltered:leantime.i18n.__("datatables.infoFiltered"),infoPostFix:leantime.i18n.__("datatables.infoPostFix"),thousands:leantime.i18n.__("datatables.thousands"),lengthMenu:leantime.i18n.__("datatables.lengthMenu"),loadingRecords:leantime.i18n.__("datatables.loadingRecords"),processing:leantime.i18n.__("datatables.processing"),search:leantime.i18n.__("datatables.search"),zeroRecords:leantime.i18n.__("datatables.zeroRecords"),paginate:{first:leantime.i18n.__("datatables.first"),last:leantime.i18n.__("datatables.last"),next:leantime.i18n.__("datatables.next"),previous:leantime.i18n.__("datatables.previous")},aria:{sortAscending:leantime.i18n.__("datatables.sortAscending"),sortDescending:leantime.i18n.__("datatables.sortDescending")}},dom:'<"top">rt<"bottom"ilp><"clear">',searching:!1,displayLength:100})}))}},leantime.canvasController=function(){var e="",t=!1,n={sizes:{minW:700,minH:1e3},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==t&&(t=!1,location.reload())},afterShowCont:function(){window.htmx.process(".nyroModalCont"),jQuery("."+e+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+e+"CanvasMilestone .deleteMilestone").nyroModal(n)},beforeClose:function(){location.reload()}},titleFromIframe:!0},a=function(){jQuery("."+e+"CanvasModal, #commentForm, #commentForm .deleteComment, ."+e+"CanvasMilestone .deleteMilestone").nyroModal(n)};return{setCanvasName:function(t){e=t},initFilterBar:function(){jQuery(window).bind("load",(function(){jQuery(".loading").fadeOut(),jQuery(".filterBar .row-fluid").css("opacity","1")}))},initCanvasLinks:function(){jQuery(".addCanvasLink").nyroModal(),jQuery(".editCanvasLink").click((function(){jQuery("#editCanvas").modal("show")})),jQuery(".cloneCanvasLink").click((function(){jQuery("#cloneCanvas").modal("show")})),jQuery(".mergeCanvasLink").click((function(){jQuery("#mergeCanvas").modal("show")})),jQuery(".importCanvasLink").click((function(){jQuery("#importCanvas").modal("show")}))},initUserDropdown:function(){jQuery("body").on("click",".userDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("_");jQuery(this).attr("data-label");if(3==t.length){var n=t[0],a=t[1];t[2];jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:n,author:a}}).done((function(){jQuery("#userDropdownMenuLink"+n+" span.text span#userImage"+n+" img").attr("src",leantime.appUrl+"/api/users?profileImage="+a),jQuery.growl({message:leantime.i18n.__("short_notifications.user_updated"),style:"success"})}))}}))},initStatusDropdown:function(){jQuery("body").on("click",".statusDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,status:o}}).done((function(){jQuery("#statusDropdownMenuLink"+a+" span.text").text(n),jQuery("#statusDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left status "),jQuery.growl({message:leantime.i18n.__("short_notifications.status_updated")})}))}}))},initRelatesDropdown:function(){jQuery("body").on("click",".relatesDropdown .dropdown-menu a",(function(){var t=jQuery(this).attr("data-value").split("/"),n=jQuery(this).attr("data-label");if(2==t.length){var a=t[0],o=t[1],i=jQuery(this).attr("class");jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/"+e+"canvas",data:{id:a,relates:o}}).done((function(){jQuery("#relatesDropdownMenuLink"+a+" span.text").text(n),jQuery("#relatesDropdownMenuLink"+a).removeClass().addClass(i+" dropdown-toggle f-left relates "),jQuery.growl({message:leantime.i18n.__("short_notifications.relates_updated")})}))}}))},setCloseModal:function(){t=!0},toggleMilestoneSelectors:function(e){"existing"==e&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),a()),"new"==e&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),a()),"hide"==e&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(e){jQuery.nmManual(e,n)}}}(),leantime.calendarController={initCalendar:function(e){var t=new Date,n=(t.getDate(),t.getMonth(),t.getFullYear(),jQuery("body").height()-260),a=jQuery("#calendar").fullCalendar({timeZone:leantime.i18n.__("usersettings.timezone"),height:n,header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay,listDay"},titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:leantime.i18n.__("language.columnFormatMonth"),week:leantime.i18n.__("language.columnFormatWeek"),day:leantime.i18n.__("language.columnFormatday")},timeFormat:{"":leantime.dateHelper.getFormatFromSettings("timeformat","luxon")},isRTL:"false"==leantime.i18n.__("language.isRTL")?0:1,firstDay:leantime.i18n.__("language.firstDayOfWeek"),monthNames:leantime.i18n.__("language.monthNames").split(","),monthNamesShort:leantime.i18n.__("language.monthNamesShort").split(","),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),buttonText:{prev:"&laquo;",next:"&raquo;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:leantime.i18n.__("buttons.today"),month:leantime.i18n.__("buttons.month"),week:leantime.i18n.__("buttons.week"),day:leantime.i18n.__("buttons.day")},select:function(e,t,n){var o=prompt(leantime.i18n.__("label.event_title"));o&&a.fullCalendar("renderEvent",{title:o,start:e,end:t,allDay:n},!0),a.fullCalendar("unselect")},events:e,eventColor:"#0866c6"})},initEventDatepickers:function(){jQuery(document).ready((function(){Date.prototype.addDays=function(e){return this.setDate(this.getDate()+e),this},jQuery.datepicker.setDefaults({beforeShow:function(e){if(jQuery(e).attr("readonly"))return!1}});var e=leantime.dateHelper.getFormatFromSettings("dateformat","jquery");function t(t){var n;try{n=jQuery.datepicker.parseDate(e,t.value)}catch(e){n=null,console.log(e)}return n}from=jQuery("#event_date_from").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:"true"===leantime.i18n.__("language.isRTL")?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",(function(e){to.datepicker("option","minDate",t(this)),""==jQuery("#event_date_to").val()&&jQuery("#event_date_to").val(jQuery("#event_date_from").val())})),to=jQuery("#event_date_to").datepicker({numberOfMonths:1,dateFormat:leantime.dateHelper.getFormatFromSettings("dateformat","jquery"),dayNames:leantime.i18n.__("language.dayNames").split(","),dayNamesMin:leantime.i18n.__("language.dayNamesMin").split(","),dayNamesShort:leantime.i18n.__("language.dayNamesShort").split(","),monthNames:leantime.i18n.__("language.monthNames").split(","),currentText:leantime.i18n.__("language.currentText"),closeText:leantime.i18n.__("language.closeText"),buttonText:leantime.i18n.__("language.buttonText"),isRTL:"true"===leantime.i18n.__("language.isRTL")?1:0,nextText:leantime.i18n.__("language.nextText"),prevText:leantime.i18n.__("language.prevText"),weekHeader:leantime.i18n.__("language.weekHeader"),firstDay:leantime.i18n.__("language.firstDayOfWeek")}).on("change",(function(){from.datepicker("option","maxDate",t(this))}))}))},initExportModal:function(){var e={sizes:{minW:400,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){jQuery(".formModal").nyroModal(e)},beforeClose:function(){location.reload()}},titleFromIframe:!0};jQuery(".exportModal").nyroModal(e)},initWidgetCalendar:function(e,t){let n=document.querySelector(e),a=leantime.dateHelper.getFormatFromSettings("dateformat","luxon"),o=leantime.dateHelper.getFormatFromSettings("timeformat","luxon");const i=new FullCalendar.Calendar(n,{timeZone:leantime.i18n.__("usersettings.timezone"),height:"calc(100% - 65px)",stickyHeaderDates:!0,initialView:t,eventStartEditable:!0,dayHeaderFormat:a,eventTimeFormat:o,slotLabelFormat:o,views:{multiMonthOneMonth:{type:"multiMonth",duration:{months:1},multiMonthTitleFormat:{month:"long",year:"numeric"},dayHeaderFormat:{weekday:"short"}},timeGridDay:{dayHeaders:!1},listWeek:{listDayFormat:{weekday:"long"},listDaySideFormat:leantime.dateHelper.getFormatFromSettings("dateformat","luxon")}},droppable:!0,eventSources:eventSources,editable:!0,headerToolbar:!1,nowIndicator:!0,bootstrapFontAwesome:{close:"fa-times",prev:"fa-chevron-left",next:"fa-chevron-right",prevYear:"fa-angle-double-left",nextYear:"fa-angle-double-right"},eventDrop:function(e){"ticket"==e.event.extendedProps.enitityType?jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:e.event.extendedProps.enitityId,editFrom:luxon.DateTime.fromJSDate(e.event.start).toFormat(a),timeFrom:luxon.DateTime.fromJSDate(e.event.start).toFormat(o),editTo:luxon.DateTime.fromJSDate(e.event.end).toFormat(a),timeTo:luxon.DateTime.fromJSDate(e.event.end).toFormat(o)}}):"event"==e.event.extendedProps.enitityType&&jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/calendar",data:{id:e.event.extendedProps.enitityId,dateFrom:e.event.startStr,dateTo:e.event.endStr}})},eventResize:function(e){"ticket"==e.event.extendedProps.enitityType?jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:e.event.extendedProps.enitityId,editFrom:luxon.DateTime.fromJSDate(e.event.start).toFormat(a),timeFrom:luxon.DateTime.fromJSDate(e.event.start).toFormat(o),editTo:luxon.DateTime.fromJSDate(e.event.end).toFormat(a),timeTo:luxon.DateTime.fromJSDate(e.event.end).toFormat(o)}}):"event"==e.event.extendedProps.enitityType&&jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/calendar",data:{id:e.event.extendedProps.enitityId,dateFrom:e.event.startStr,dateTo:e.event.endStr}})},eventReceive:function(e){jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/tickets",data:{id:e.event.id,editFrom:luxon.DateTime.fromJSDate(e.event.start).toFormat(a),timeFrom:luxon.DateTime.fromJSDate(e.event.start).toFormat(o),editTo:luxon.DateTime.fromJSDate(e.event.end).toFormat(a),timeTo:luxon.DateTime.fromJSDate(e.event.end).toFormat(o)}})},eventDragStart:function(e){},eventDidMount:function(e){!1===e.isDraggable&&jQuery(e.el).addClass("locked"),null!=e.event.extendedProps.location&&""!=e.event.extendedProps.location&&0==e.event.extendedProps.location.indexOf("http")&&(jQuery(e.el).attr("href",e.event.extendedProps.location),jQuery(e.el).attr("target","_blank"))}});function r(e){var t=e;t&&new FullCalendar.ThirdPartyDraggable(t,{itemSelector:".draggable-todo",mirrorClass:"dragging-mirror",eventDragMinDistance:10,mirrorSelector:function(e){return e.closest(".ticketBox")},eventData:function(e){let t=jQuery(e).data("event");return{id:t.id,title:t.title,color:t.color,enitityType:"ticket",duration:"01:00",url:t.url}}}),i.scrollToTime(Date.now())}jQuery(document).ready((function(){jQuery("#yourToDoContainer").length>0&&r(jQuery("#yourToDoContainer")[0]),i.setOption("locale",leantime.i18n.__("language.code")),i.render(),i.scrollToTime(Date.now()),jQuery(".minCalendar .fc-prev-button").click((function(){i.prev(),i.getCurrentData()})),jQuery(".minCalendar .fc-next-button").click((function(){i.next()})),jQuery(".minCalendar .fc-today-button").click((function(){i.today()})),jQuery(".minCalendar .calendarViewSelect").on("click",(function(e){console.log(jQuery(this).data("value")),i.changeView(jQuery(this).data("value")),jQuery.ajax({type:"PATCH",url:leantime.appUrl+"/api/submenu",data:{submenu:"dashboardCalendarView",state:jQuery(this).data("value")}})})),jQuery(".day-button").on("click",(function(){const e=jQuery(this).data("date");i.gotoDate(e),jQuery(".day-button").removeClass("active"),jQuery(this).addClass("active")})),i.scrollToTime(Date.now())})),htmx.onLoad((function(e){return"yourToDoContainer"==e.id&&r(e),n}))}},leantime.authController={makeInputReadonly:function(e){void 0===typeof e&&(e="body"),jQuery(e).find("input").not(".filterBar input").prop("readonly",!0),jQuery(e).find("input").not(".filterBar input").prop("disabled",!0),jQuery(e).find("select").not(".filterBar select, .mainSprintSelector").prop("readonly",!0),jQuery(e).find("select").not(".filterBar select, .mainSprintSelector").prop("disabled",!0),jQuery(e).find("textarea").not(".filterBar textarea").prop("disabled",!0),jQuery(e).find("a.delete").remove(),jQuery(e).find(".quickAddLink").hide(),jQuery(e).find(".complexEditor").length&&jQuery(e).find(".complexEditor").each((function(e){jQuery(this).tinymce()&&jQuery(this).tinymce().getBody().setAttribute("contenteditable","false")})),jQuery(e).find(".tinymceSimple").length&&jQuery(e).find(".tinymceSimple").each((function(e){jQuery(this).tinymce()&&jQuery(this).tinymce().getBody().setAttribute("contenteditable","false")})),jQuery(e).find(".tox-editor-header").hide(),jQuery(e).find(".tox-statusbar").hide(),jQuery(e).find(".ticketDropdown a").removeAttr("data-toggle"),jQuery("#mainToggler").hide(),jQuery(".commentBox").hide(),jQuery(".deleteComment, .replyButton").hide(),jQuery(e).find(".dropdown i").removeClass("fa-caret-down")}};
