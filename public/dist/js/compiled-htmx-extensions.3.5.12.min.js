(()=>{var e={20:()=>{htmx.defineExtension("preload",{onEvent:function(e,t){if("htmx:afterProcessNode"===e){var r=function(e,t){if(null!=e)return e.getAttribute(t)||e.getAttribute("data-"+t)||r(e.parentElement,t)},n=function(e){var t=function(t){e.preloadAlways||(e.preloadState="DONE"),"true"==r(e,"preload-images")&&(document.createElement("div").innerHTML=t)};return function(){if("READY"===e.preloadState){var r=e.getAttribute("hx-get")||e.getAttribute("data-hx-get");if(r)htmx.ajax("GET",r,{source:e,handler:function(e,r){t(r.xhr.responseText)}});else if(e.getAttribute("href")){var n=new XMLHttpRequest;return n.open("GET",e.getAttribute("href")),n.onload=function(){t(n.responseText)},void n.send()}}}},a=function(e){if(e.getAttribute("href")+e.getAttribute("hx-get")+e.getAttribute("data-hx-get")=="")return;if(void 0!==e.preloadState)return;var t=r(e,"preload")||"mousedown";const a=-1!==t.indexOf("always");switch(a&&(t=t.replace("always","").trim()),e.addEventListener(t,(function(r){"PAUSE"===e.preloadState&&(e.preloadState="READY","mouseover"===t?window.setTimeout(n(e),100):n(e)())})),t){case"mouseover":e.addEventListener("touchstart",n(e)),e.addEventListener("mouseout",(function(t){t.target===e&&"READY"===e.preloadState&&(e.preloadState="PAUSE")}));break;case"mousedown":e.addEventListener("touchstart",n(e))}e.preloadState="PAUSE",e.preloadAlways=a,htmx.trigger(e,"preload:init")};t.target.querySelectorAll("[preload]").forEach((function(e){a(e),e.querySelectorAll("a,[hx-get],[data-hx-get]").forEach(a)}))}}})},549:()=>{!function(){var e=null;function t(t,r){if(t&&t.indexOf("<head")>-1){const m=document.createElement("html");var n=t.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"").match(/(<head(\s[^>]*>|>)([\s\S]*?)<\/head>)/im);if(n){var a=[],o=[],i=[],s=[];m.innerHTML=n;var u=m.querySelector("head"),l=document.head;if(null==u)return;var c=new Map;for(const e of u.children)c.set(e.outerHTML,e);var d=e.getAttributeValue(u,"hx-head")||r;for(const t of l.children){var f=c.has(t.outerHTML),h="re-eval"===t.getAttribute("hx-head"),g="true"===e.getAttributeValue(t,"hx-preserve");f||g?h?o.push(t):(c.delete(t.outerHTML),i.push(t)):"append"===d?h&&(o.push(t),s.push(t)):!1!==e.triggerEvent(document.body,"htmx:removingHeadElement",{headElement:t})&&o.push(t)}s.push(...c.values());for(const t of s){var v=document.createRange().createContextualFragment(t.outerHTML);!1!==e.triggerEvent(document.body,"htmx:addingHeadElement",{headElement:v})&&(l.appendChild(v),a.push(v))}for(const t of o)!1!==e.triggerEvent(document.body,"htmx:removingHeadElement",{headElement:t})&&l.removeChild(t);e.triggerEvent(document.body,"htmx:afterHeadMerge",{added:a,kept:i,removed:o})}}}htmx.defineExtension("head-support",{init:function(r){e=r,htmx.on("htmx:afterSwap",(function(r){var n=r.detail.xhr.response;e.triggerEvent(document.body,"htmx:beforeHeadMerge",r.detail)&&t(n,r.detail.boosted?"merge":"append")})),htmx.on("htmx:historyRestore",(function(r){e.triggerEvent(document.body,"htmx:beforeHeadMerge",r.detail)&&(r.detail.cacheMiss?t(r.detail.serverResponse,"merge"):t(r.detail.item.head,"merge"))})),htmx.on("htmx:historyItemCreated",(function(e){e.detail.item.head=document.head.outerHTML}))}})}()},944:()=>{!function(){var e;function t(e){return new EventSource(e,{withCredentials:!0})}function r(e){return e.trim().split(/\s+/)}function n(t){s(t,"sse-swap").forEach((function(n){var a=e.getClosestMatch(n,c);if(null==a)return null;var o=e.getInternalData(a).sseEventSource,s=e.getAttributeValue(n,"sse-swap");if(s)var l=s.split(",");else l=function(t){var n=e.getAttributeValue(t,"hx-sse"),a=[];if(null!=n)for(var o=r(n),i=0;i<o.length;i++){var s=o[i].split(/:(.+)/);"swap"===s[0]&&a.push(s[1])}return a}(n);for(var d=0;d<l.length;d++){var f=l[d].trim(),h=function(r){i(a)||(e.bodyContains(n)?e.triggerEvent(t,"htmx:sseBeforeMessage",r)&&(u(n,r.data),e.triggerEvent(t,"htmx:sseMessage",r)):o.removeEventListener(f,h))};e.getInternalData(n).sseEventListener=h,o.addEventListener(f,h)}})),s(t,"hx-trigger").forEach((function(t){var r=e.getClosestMatch(t,c);if(null==r)return null;e.getInternalData(r).sseEventSource;var n=e.getAttributeValue(t,"hx-trigger");if(null!=n&&"sse:"==n.slice(0,4)){n=n.substr(4)}}))}function a(t,a){if(null==t)return null;s(t,"sse-connect").forEach((function(t){var r=e.getAttributeValue(t,"sse-connect");null!=r&&o(t,r,a)})),s(t,"hx-sse").forEach((function(t){var n=function(t){var n=e.getAttributeValue(t,"hx-sse");if(n)for(var a=r(n),o=0;o<a.length;o++){var i=a[o].split(/:(.+)/);if("connect"===i[0])return i[1]}}(t);null!=n&&o(t,n,a)})),n(t)}function o(t,r,n){var o=htmx.createEventSource(r);o.onerror=function(r){if(e.triggerErrorEvent(t,"htmx:sseError",{error:r,source:o}),!i(t)&&o.readyState===EventSource.CLOSED){n=n||0;var s=Math.random()*(2^n)*500;window.setTimeout((function(){a(t,Math.min(7,n+1))}),s)}},o.onopen=function(r){e.triggerEvent(t,"htmx:sseOpen",{source:o})},e.getInternalData(t).sseEventSource=o}function i(t){if(!e.bodyContains(t)){var r=e.getInternalData(t).sseEventSource;if(null!=r)return r.close(),!0}return!1}function s(t,r){var n=[];return e.hasAttribute(t,r)&&n.push(t),t.querySelectorAll("["+r+"], [data-"+r+"]").forEach((function(e){n.push(e)})),n}function u(t,r){e.withExtensions(t,(function(e){r=e.transformResponse(r,null,t)}));var n=e.getSwapSpecification(t),a=e.getTarget(t),o=e.makeSettleInfo(t);e.selectAndSwap(n.swapStyle,a,t,r,o),o.elts.forEach((function(t){t.classList&&t.classList.add(htmx.config.settlingClass),e.triggerEvent(t,"htmx:beforeSettle")})),n.settleDelay>0?setTimeout(l(o),n.settleDelay):l(o)()}function l(t){return function(){t.tasks.forEach((function(e){e.call()})),t.elts.forEach((function(t){t.classList&&t.classList.remove(htmx.config.settlingClass),e.triggerEvent(t,"htmx:afterSettle")}))}}function c(t){return null!=e.getInternalData(t).sseEventSource}htmx.defineExtension("sse",{init:function(r){e=r,null==htmx.createEventSource&&(htmx.createEventSource=t)},onEvent:function(t,r){var n=r.target||r.detail.elt;switch(t){case"htmx:beforeCleanupElement":var o=e.getInternalData(n);return void(o.sseEventSource&&o.sseEventSource.close());case"htmx:afterProcessNode":a(n)}}})}()}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r(549),r(20),r(944)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2pzL2NvbXBpbGVkLWh0bXgtZXh0ZW5zaW9ucy4zLjUuMTIubWluLmpzIiwibWFwcGluZ3MiOiJxQkFJQUEsS0FBS0MsZ0JBQWdCLFVBQVcsQ0FFL0JDLFFBQVMsU0FBU0MsRUFBTUMsR0FHdkIsR0FBYSwwQkFBVEQsRUFBSixDQU9BLElBQUlFLEVBQU8sU0FBU0MsRUFBTUMsR0FDekIsR0FBWUMsTUFBUkYsRUFDSixPQUFPQSxFQUFLRyxhQUFhRixJQUFhRCxFQUFLRyxhQUFhLFFBQVVGLElBQWFGLEVBQUtDLEVBQUtJLGNBQWVILEVBQ3pHLEVBSUlJLEVBQU8sU0FBU0wsR0FJbkIsSUFBSU0sRUFBTyxTQUFTQyxHQUNkUCxFQUFLUSxnQkFDVFIsRUFBS1MsYUFBZSxRQUdlLFFBQWhDVixFQUFLQyxFQUFNLG9CQUNkVSxTQUFTQyxjQUFjLE9BQU9DLFVBQVlMLEVBRTVDLEVBRUEsT0FBTyxXQUdOLEdBQTBCLFVBQXRCUCxFQUFLUyxhQUFULENBUUEsSUFBSUksRUFBUWIsRUFBS0csYUFBYSxXQUFhSCxFQUFLRyxhQUFhLGVBQzdELEdBQUlVLEVBQ0huQixLQUFLb0IsS0FBSyxNQUFPRCxFQUFPLENBQ3ZCRSxPQUFRZixFQUNSZ0IsUUFBUSxTQUFTQyxFQUFLQyxHQUNyQlosRUFBS1ksRUFBS0MsSUFBSUMsYUFDZixTQVFGLEdBQUlwQixFQUFLRyxhQUFhLFFBQVMsQ0FDOUIsSUFBSWtCLEVBQUksSUFBSUMsZUFJWixPQUhBRCxFQUFFRSxLQUFLLE1BQU92QixFQUFLRyxhQUFhLFNBQ2hDa0IsRUFBRUcsT0FBUyxXQUFZbEIsRUFBS2UsRUFBRUQsYUFBYyxPQUM1Q0MsRUFBRUksTUFFSCxDQTFCQSxDQTJCRCxDQUNELEVBSUlDLEVBQU8sU0FBUzFCLEdBR25CLEdBQUlBLEVBQUtHLGFBQWEsUUFBVUgsRUFBS0csYUFBYSxVQUFZSCxFQUFLRyxhQUFhLGdCQUFrQixHQUNqRyxPQUlELFFBQTBCRCxJQUF0QkYsRUFBS1MsYUFDUixPQUlELElBQUlrQixFQUFLNUIs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dEJBRyxFQUFRLEtBQ1JBLEVBQVEsSUFDUkEsRUFBUSxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGVhbnRpbWUvLi9ub2RlX21vZHVsZXMvaHRteC5vcmcvZGlzdC9leHQvcHJlbG9hZC5qcyIsIndlYnBhY2s6Ly9sZWFudGltZS8uL25vZGVfbW9kdWxlcy9odG14Lm9yZy9kaXN0L2V4dC9oZWFkLXN1cHBvcnQuanMiLCJ3ZWJwYWNrOi8vbGVhbnRpbWUvLi9ub2RlX21vZHVsZXMvaHRteC5vcmcvZGlzdC9leHQvc3NlLmpzIiwid2VicGFjazovL2xlYW50aW1lL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2xlYW50aW1lLy4vcHVibGljL2Fzc2V0cy9qcy9hcHAvaHRteC1leHRlbnNpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgYWRkcyB0aGUgXCJwcmVsb2FkXCIgZXh0ZW5zaW9uIHRvIGh0bXguICBCeSBkZWZhdWx0LCB0aGlzIHdpbGwgXG4vLyBwcmVsb2FkIHRoZSB0YXJnZXRzIG9mIGFueSB0YWdzIHdpdGggYGhyZWZgIG9yIGBoeC1nZXRgIGF0dHJpYnV0ZXMgXG4vLyBpZiB0aGV5IGFsc28gaGF2ZSBhIGBwcmVsb2FkYCBhdHRyaWJ1dGUgYXMgd2VsbC4gIFNlZSBkb2N1bWVudGF0aW9uXG4vLyBmb3IgbW9yZSBkZXRhaWxzXG5odG14LmRlZmluZUV4dGVuc2lvbihcInByZWxvYWRcIiwge1xuXG5cdG9uRXZlbnQ6IGZ1bmN0aW9uKG5hbWUsIGV2ZW50KSB7XG5cblx0XHQvLyBPbmx5IHRha2UgYWN0aW9ucyBvbiBcImh0bXg6YWZ0ZXJQcm9jZXNzTm9kZVwiXG5cdFx0aWYgKG5hbWUgIT09IFwiaHRteDphZnRlclByb2Nlc3NOb2RlXCIpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBTT01FIEhFTFBFUiBGVU5DVElPTlMgV0UnTEwgTkVFRCBBTE9ORyBUSEUgV0FZXG5cblx0XHQvLyBhdHRyIGdldHMgdGhlIGNsb3Nlc3Qgbm9uLWVtcHR5IHZhbHVlIGZyb20gdGhlIGF0dHJpYnV0ZS5cblx0XHR2YXIgYXR0ciA9IGZ1bmN0aW9uKG5vZGUsIHByb3BlcnR5KSB7XG5cdFx0XHRpZiAobm9kZSA9PSB1bmRlZmluZWQpIHtyZXR1cm4gdW5kZWZpbmVkO31cblx0XHRcdHJldHVybiBub2RlLmdldEF0dHJpYnV0ZShwcm9wZXJ0eSkgfHwgbm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLVwiICsgcHJvcGVydHkpIHx8IGF0dHIobm9kZS5wYXJlbnRFbGVtZW50LCBwcm9wZXJ0eSlcblx0XHR9XG5cdFx0XG5cdFx0Ly8gbG9hZCBoYW5kbGVzIHRoZSBhY3R1YWwgSFRUUCBmZXRjaCwgYW5kIHVzZXMgaHRteC5hamF4IGluIGNhc2VzIHdoZXJlIHdlJ3JlIFxuXHRcdC8vIHByZWxvYWRpbmcgYW4gaHRteCByZXNvdXJjZSAodGhpcyBzZW5kcyB0aGUgc2FtZSBIVFRQIGhlYWRlcnMgYXMgYSByZWd1bGFyIGh0bXggcmVxdWVzdClcblx0XHR2YXIgbG9hZCA9IGZ1bmN0aW9uKG5vZGUpIHtcblxuXHRcdFx0Ly8gQ2FsbGVkIGFmdGVyIGEgc3VjY2Vzc2Z1bCBBSkFYIHJlcXVlc3QsIHRvIG1hcmsgdGhlXG5cdFx0XHQvLyBjb250ZW50IGFzIGxvYWRlZCAoYW5kIHByZXZlbnQgYWRkaXRpb25hbCBBSkFYIGNhbGxzLilcblx0XHRcdHZhciBkb25lID0gZnVuY3Rpb24oaHRtbCkge1xuXHRcdFx0XHRpZiAoIW5vZGUucHJlbG9hZEFsd2F5cykge1xuXHRcdFx0XHRcdG5vZGUucHJlbG9hZFN0YXRlID0gXCJET05FXCJcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChhdHRyKG5vZGUsIFwicHJlbG9hZC1pbWFnZXNcIikgPT0gXCJ0cnVlXCIpIHtcblx0XHRcdFx0XHRkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLmlubmVySFRNTCA9IGh0bWwgLy8gY3JlYXRlIGFuZCBwb3B1bGF0ZSBhIG5vZGUgdG8gbG9hZCBsaW5rZWQgcmVzb3VyY2VzLCB0b28uXG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdC8vIElmIHRoaXMgdmFsdWUgaGFzIGFscmVhZHkgYmVlbiBsb2FkZWQsIHRoZW4gZG8gbm90IHRyeSBhZ2Fpbi5cblx0XHRcdFx0aWYgKG5vZGUucHJlbG9hZFN0YXRlICE9PSBcIlJFQURZXCIpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBIWC1HRVQgLSB1c2UgYnVpbHQtaW4gaHRteC5hamF4IGZ1bmN0aW9uXG5cdFx0XHRcdC8vIHNvIHRoYXQgaGVhZGVycyBtYXRjaCBvdGhlciBodG14IHJlcXVlc3RzLCB0aGVuIHNldCBcblx0XHRcdFx0Ly8gbm9kZS5wcmVsb2FkU3RhdGUgPSBUUlVFIHNvIHRoYXQgcmVxdWVzdHMgYXJlIG5vdCBkdXBsaWNhdGVkXG5cdFx0XHRcdC8vIGluIHRoZSBmdXR1cmVcblx0XHRcdFx0dmFyIGh4R2V0ID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJoeC1nZXRcIikgfHwgbm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWh4LWdldFwiKVxuXHRcdFx0XHRpZiAoaHhHZXQpIHtcblx0XHRcdFx0XHRodG14LmFqYXgoXCJHRVRcIiwgaHhHZXQsIHtcblx0XHRcdFx0XHRcdHNvdXJjZTogbm9kZSxcblx0XHRcdFx0XHRcdGhhbmRsZXI6ZnVuY3Rpb24oZWx0LCBpbmZvKSB7XG5cdFx0XHRcdFx0XHRcdGRvbmUoaW5mby54aHIucmVzcG9uc2VUZXh0KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBPdGhlcndpc2UsIHBlcmZvcm0gYSBzdGFuZGFyZCB4aHIgcmVxdWVzdCwgdGhlbiBzZXQgXG5cdFx0XHRcdC8vIG5vZGUucHJlbG9hZFN0YXRlID0gVFJVRSBzbyB0aGF0IHJlcXVlc3RzIGFyZSBub3QgZHVwbGljYXRlZCBcblx0XHRcdFx0Ly8gaW4gdGhlIGZ1dHVyZS5cblx0XHRcdFx0aWYgKG5vZGUuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSkge1xuXHRcdFx0XHRcdHZhciByID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdFx0XHRcdFx0ci5vcGVuKFwiR0VUXCIsIG5vZGUuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSk7XG5cdFx0XHRcdFx0ci5vbmxvYWQgPSBmdW5jdGlvbigpIHtkb25lKHIucmVzcG9uc2VUZXh0KTt9O1xuXHRcdFx0XHRcdHIuc2VuZCgpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFRoaXMgZnVuY3Rpb24gcHJvY2Vzc2VzIGEgc3BlY2lmaWMgbm9kZSBhbmQgc2V0cyB1cCBldmVudCBoYW5kbGVycy5cblx0XHQvLyBXZSdsbCBzZWFyY2ggZm9yIG5vZGVzIGFuZCB1c2UgaXQgYmVsb3cuXG5cdFx0dmFyIGluaXQgPSBmdW5jdGlvbihub2RlKSB7XG5cblx0XHRcdC8vIElmIHRoaXMgbm9kZSBET0VTIE5PVCBpbmNsdWRlIGEgXCJHRVRcIiB0cmFuc2FjdGlvbiwgdGhlbiB0aGVyZSdzIG5vdGhpbmcgdG8gZG8gaGVyZS5cblx0XHRcdGlmIChub2RlLmdldEF0dHJpYnV0ZShcImhyZWZcIikgKyBub2RlLmdldEF0dHJpYnV0ZShcImh4LWdldFwiKSArIG5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1oeC1nZXRcIikgPT0gXCJcIikge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEd1YXJhbnRlZSB0aGF0IHdlIG9ubHkgaW5pdGlhbGl6ZSBlYWNoIG5vZGUgb25jZS5cblx0XHRcdGlmIChub2RlLnByZWxvYWRTdGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gR2V0IGV2ZW50IG5hbWUgZnJvbSBjb25maWcuXG5cdFx0XHR2YXIgb24gPSBhdHRyKG5vZGUsIFwicHJlbG9hZFwiKSB8fCBcIm1vdXNlZG93blwiXG5cdFx0XHRjb25zdCBhbHdheXMgPSBvbi5pbmRleE9mKFwiYWx3YXlzXCIpICE9PSAtMVxuXHRcdFx0aWYgKGFsd2F5cykge1xuXHRcdFx0XHRvbiA9IG9uLnJlcGxhY2UoJ2Fsd2F5cycsICcnKS50cmltKClcblx0XHRcdH1cblx0XHRcdFx0XHRcdFxuXHRcdFx0Ly8gRkFMTCBUSFJPVUdIIHRvIGhlcmUgbWVhbnMgd2UgbmVlZCB0byBhZGQgYW4gRXZlbnRMaXN0ZW5lclxuXHRcblx0XHRcdC8vIEFwcGx5IHRoZSBsaXN0ZW5lciB0byB0aGUgbm9kZVxuXHRcdFx0bm9kZS5hZGRFdmVudExpc3RlbmVyKG9uLCBmdW5jdGlvbihldnQpIHtcblx0XHRcdFx0aWYgKG5vZGUucHJlbG9hZFN0YXRlID09PSBcIlBBVVNFXCIpIHsgLy8gT25seSBhZGQgb25lIGV2ZW50IGxpc3RlbmVyXG5cdFx0XHRcdFx0bm9kZS5wcmVsb2FkU3RhdGUgPSBcIlJFQURZXCI7IC8vIFJlcXVpcmVkIGZvciB0aGUgYGxvYWRgIGZ1bmN0aW9uIHRvIHRyaWdnZXJcblxuXHRcdFx0XHRcdC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIFwibW91c2VvdmVyXCIgZXZlbnRzLiAgV2FpdCAxMDBtcyBiZWZvcmUgdHJpZ2dlcmluZyBsb2FkLlxuXHRcdFx0XHRcdGlmIChvbiA9PT0gXCJtb3VzZW92ZXJcIikge1xuXHRcdFx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQobG9hZChub2RlKSwgMTAwKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0bG9hZChub2RlKSgpIC8vIGFsbCBvdGhlciBldmVudHMgdHJpZ2dlciBpbW1lZGlhdGVseS5cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cblx0XHRcdC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIGNlcnRhaW4gYnVpbHQtaW4gZXZlbnQgaGFuZGxlcnNcblx0XHRcdHN3aXRjaCAob24pIHtcblxuXHRcdFx0XHRjYXNlIFwibW91c2VvdmVyXCI6XG5cdFx0XHRcdFx0Ly8gTWlycm9yIGB0b3VjaHN0YXJ0YCBldmVudHMgKGZpcmVzIGltbWVkaWF0ZWx5KVxuXHRcdFx0XHRcdG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgbG9hZChub2RlKSk7XG5cblx0XHRcdFx0XHQvLyBXSGhlbiB0aGUgbW91c2UgbGVhdmVzLCBpbW1lZGlhdGVseSBkaXNhYmxlIHRoZSBwcmVsb2FkXG5cdFx0XHRcdFx0bm9kZS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgZnVuY3Rpb24oZXZ0KSB7XG5cdFx0XHRcdFx0XHRpZiAoKGV2dC50YXJnZXQgPT09IG5vZGUpICYmIChub2RlLnByZWxvYWRTdGF0ZSA9PT0gXCJSRUFEWVwiKSkge1xuXHRcdFx0XHRcdFx0XHRub2RlLnByZWxvYWRTdGF0ZSA9IFwiUEFVU0VcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgXCJtb3VzZWRvd25cIjpcblx0XHRcdFx0XHQgLy8gTWlycm9yIGB0b3VjaHN0YXJ0YCBldmVudHMgKGZpcmVzIGltbWVkaWF0ZWx5KVxuXHRcdFx0XHRcdG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgbG9hZChub2RlKSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1hcmsgdGhlIG5vZGUgYXMgcmVhZHkgdG8gcnVuLlxuXHRcdFx0bm9kZS5wcmVsb2FkU3RhdGUgPSBcIlBBVVNFXCI7XG5cdFx0XHRub2RlLnByZWxvYWRBbHdheXMgPSBhbHdheXM7XG5cdFx0XHRodG14LnRyaWdnZXIobm9kZSwgXCJwcmVsb2FkOmluaXRcIikgLy8gVGhpcyBldmVudCBjYW4gYmUgdXNlZCB0byBsb2FkIGNvbnRlbnQgaW1tZWRpYXRlbHkuXG5cdFx0fVxuXG5cdFx0Ly8gU2VhcmNoIGZvciBhbGwgY2hpbGQgbm9kZXMgdGhhdCBoYXZlIGEgXCJwcmVsb2FkXCIgYXR0cmlidXRlXG5cdFx0ZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbcHJlbG9hZF1cIikuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7XG5cblx0XHRcdC8vIEluaXRpYWxpemUgdGhlIG5vZGUgd2l0aCB0aGUgXCJwcmVsb2FkXCIgYXR0cmlidXRlXG5cdFx0XHRpbml0KG5vZGUpXG5cblx0XHRcdC8vIEluaXRpYWxpemUgYWxsIGNoaWxkIGVsZW1lbnRzIHRoYXQgYXJlIGFuY2hvcnMgb3IgaGF2ZSBgaHgtZ2V0YCAodXNlIHdpdGggY2FyZSlcblx0XHRcdG5vZGUucXVlcnlTZWxlY3RvckFsbChcImEsW2h4LWdldF0sW2RhdGEtaHgtZ2V0XVwiKS5mb3JFYWNoKGluaXQpXG5cdFx0fSlcblx0fVxufSlcbiIsIi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gaGVhZC1zdXBwb3J0LmpzXG4vL1xuLy8gQW4gZXh0ZW5zaW9uIHRvIGh0bXggMS4wIHRvIGFkZCBoZWFkIHRhZyBtZXJnaW5nLlxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4oZnVuY3Rpb24oKXtcblxuICAgIHZhciBhcGkgPSBudWxsO1xuXG4gICAgZnVuY3Rpb24gbG9nKCkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWVyZ2VIZWFkKG5ld0NvbnRlbnQsIGRlZmF1bHRNZXJnZVN0cmF0ZWd5KSB7XG5cbiAgICAgICAgaWYgKG5ld0NvbnRlbnQgJiYgbmV3Q29udGVudC5pbmRleE9mKCc8aGVhZCcpID4gLTEpIHtcbiAgICAgICAgICAgIGNvbnN0IGh0bWxEb2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHRtbFwiKTtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBzdmdzIHRvIGF2b2lkIGNvbmZsaWN0c1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRXaXRoU3Znc1JlbW92ZWQgPSBuZXdDb250ZW50LnJlcGxhY2UoLzxzdmcoXFxzW14+XSo+fD4pKFtcXHNcXFNdKj8pPFxcL3N2Zz4vZ2ltLCAnJyk7XG4gICAgICAgICAgICAvLyBleHRyYWN0IGhlYWQgdGFnXG4gICAgICAgICAgICB2YXIgaGVhZFRhZyA9IGNvbnRlbnRXaXRoU3Znc1JlbW92ZWQubWF0Y2goLyg8aGVhZChcXHNbXj5dKj58PikoW1xcc1xcU10qPyk8XFwvaGVhZD4pL2ltKTtcblxuICAgICAgICAgICAgLy8gaWYgdGhlICBoZWFkIHRhZyBleGlzdHMuLi5cbiAgICAgICAgICAgIGlmIChoZWFkVGFnKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgYWRkZWQgPSBbXVxuICAgICAgICAgICAgICAgIHZhciByZW1vdmVkID0gW11cbiAgICAgICAgICAgICAgICB2YXIgcHJlc2VydmVkID0gW11cbiAgICAgICAgICAgICAgICB2YXIgbm9kZXNUb0FwcGVuZCA9IFtdXG5cbiAgICAgICAgICAgICAgICBodG1sRG9jLmlubmVySFRNTCA9IGhlYWRUYWc7XG4gICAgICAgICAgICAgICAgdmFyIG5ld0hlYWRUYWcgPSBodG1sRG9jLnF1ZXJ5U2VsZWN0b3IoXCJoZWFkXCIpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SGVhZCA9IGRvY3VtZW50LmhlYWQ7XG5cbiAgICAgICAgICAgICAgICBpZiAobmV3SGVhZFRhZyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBwdXQgYWxsIG5ldyBoZWFkIGVsZW1lbnRzIGludG8gYSBNYXAsIGJ5IHRoZWlyIG91dGVySFRNTFxuICAgICAgICAgICAgICAgICAgICB2YXIgc3JjVG9OZXdIZWFkTm9kZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbmV3SGVhZENoaWxkIG9mIG5ld0hlYWRUYWcuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyY1RvTmV3SGVhZE5vZGVzLnNldChuZXdIZWFkQ2hpbGQub3V0ZXJIVE1MLCBuZXdIZWFkQ2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICAgICAgICAgIC8vIGRldGVybWluZSBtZXJnZSBzdHJhdGVneVxuICAgICAgICAgICAgICAgIHZhciBtZXJnZVN0cmF0ZWd5ID0gYXBpLmdldEF0dHJpYnV0ZVZhbHVlKG5ld0hlYWRUYWcsIFwiaHgtaGVhZFwiKSB8fCBkZWZhdWx0TWVyZ2VTdHJhdGVneTtcblxuICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgY3VycmVudCBoZWFkXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjdXJyZW50SGVhZEVsdCBvZiBjdXJyZW50SGVhZC5jaGlsZHJlbikge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjdXJyZW50IGhlYWQgZWxlbWVudCBpcyBpbiB0aGUgbWFwXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbk5ld0NvbnRlbnQgPSBzcmNUb05ld0hlYWROb2Rlcy5oYXMoY3VycmVudEhlYWRFbHQub3V0ZXJIVE1MKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzUmVBcHBlbmRlZCA9IGN1cnJlbnRIZWFkRWx0LmdldEF0dHJpYnV0ZShcImh4LWhlYWRcIikgPT09IFwicmUtZXZhbFwiO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXNQcmVzZXJ2ZWQgPSBhcGkuZ2V0QXR0cmlidXRlVmFsdWUoY3VycmVudEhlYWRFbHQsIFwiaHgtcHJlc2VydmVcIikgPT09IFwidHJ1ZVwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5OZXdDb250ZW50IHx8IGlzUHJlc2VydmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNSZUFwcGVuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBjdXJyZW50IHZlcnNpb24gYW5kIGxldCB0aGUgbmV3IHZlcnNpb24gcmVwbGFjZSBpdCBhbmQgcmUtZXhlY3V0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWQucHVzaChjdXJyZW50SGVhZEVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgZWxlbWVudCBhbHJlYWR5IGV4aXN0cyBhbmQgc2hvdWxkIG5vdCBiZSByZS1hcHBlbmRlZCwgc28gcmVtb3ZlIGl0IGZyb21cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbmV3IGNvbnRlbnQgbWFwLCBwcmVzZXJ2aW5nIGl0IGluIHRoZSBET01cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNUb05ld0hlYWROb2Rlcy5kZWxldGUoY3VycmVudEhlYWRFbHQub3V0ZXJIVE1MKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVzZXJ2ZWQucHVzaChjdXJyZW50SGVhZEVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVyZ2VTdHJhdGVneSA9PT0gXCJhcHBlbmRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBhcHBlbmRpbmcgYW5kIHRoaXMgZXhpc3RpbmcgZWxlbWVudCBpcyBub3QgbmV3IGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzbyBpZiBhbmQgb25seSBpZiBpdCBpcyBtYXJrZWQgZm9yIHJlLWFwcGVuZCBkbyB3ZSBkbyBhbnl0aGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1JlQXBwZW5kZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKGN1cnJlbnRIZWFkRWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXNUb0FwcGVuZC5wdXNoKGN1cnJlbnRIZWFkRWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSBtZXJnZSwgd2UgcmVtb3ZlIHRoaXMgY29udGVudCBzaW5jZSBpdCBpcyBub3QgaW4gdGhlIG5ldyBoZWFkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwaS50cmlnZ2VyRXZlbnQoZG9jdW1lbnQuYm9keSwgXCJodG14OnJlbW92aW5nSGVhZEVsZW1lbnRcIiwge2hlYWRFbGVtZW50OiBjdXJyZW50SGVhZEVsdH0pICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVkLnB1c2goY3VycmVudEhlYWRFbHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFB1c2ggdGhlIHRyZW1haW5pbmcgbmV3IGhlYWQgZWxlbWVudHMgaW4gdGhlIE1hcCBpbnRvIHRoZVxuICAgICAgICAgICAgICAgIC8vIG5vZGVzIHRvIGFwcGVuZCB0byB0aGUgaGVhZCB0YWdcbiAgICAgICAgICAgICAgICBub2Rlc1RvQXBwZW5kLnB1c2goLi4uc3JjVG9OZXdIZWFkTm9kZXMudmFsdWVzKCkpO1xuICAgICAgICAgICAgICAgIGxvZyhcInRvIGFwcGVuZDogXCIsIG5vZGVzVG9BcHBlbmQpO1xuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuZXdOb2RlIG9mIG5vZGVzVG9BcHBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nKFwiYWRkaW5nOiBcIiwgbmV3Tm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdFbHQgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChuZXdOb2RlLm91dGVySFRNTCk7XG4gICAgICAgICAgICAgICAgICAgIGxvZyhuZXdFbHQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXBpLnRyaWdnZXJFdmVudChkb2N1bWVudC5ib2R5LCBcImh0bXg6YWRkaW5nSGVhZEVsZW1lbnRcIiwge2hlYWRFbGVtZW50OiBuZXdFbHR9KSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRIZWFkLmFwcGVuZENoaWxkKG5ld0VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRlZC5wdXNoKG5ld0VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgYWxsIHJlbW92ZWQgZWxlbWVudHMsIGFmdGVyIHdlIGhhdmUgYXBwZW5kZWQgdGhlIG5ldyBlbGVtZW50cyB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIGFkZGl0aW9uYWwgbmV0d29yayByZXF1ZXN0cyBmb3IgdGhpbmdzIGxpa2Ugc3R5bGUgc2hlZXRzXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByZW1vdmVkRWxlbWVudCBvZiByZW1vdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcGkudHJpZ2dlckV2ZW50KGRvY3VtZW50LmJvZHksIFwiaHRteDpyZW1vdmluZ0hlYWRFbGVtZW50XCIsIHtoZWFkRWxlbWVudDogcmVtb3ZlZEVsZW1lbnR9KSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRIZWFkLnJlbW92ZUNoaWxkKHJlbW92ZWRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGFwaS50cmlnZ2VyRXZlbnQoZG9jdW1lbnQuYm9keSwgXCJodG14OmFmdGVySGVhZE1lcmdlXCIsIHthZGRlZDogYWRkZWQsIGtlcHQ6IHByZXNlcnZlZCwgcmVtb3ZlZDogcmVtb3ZlZH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaHRteC5kZWZpbmVFeHRlbnNpb24oXCJoZWFkLXN1cHBvcnRcIiwge1xuICAgICAgICBpbml0OiBmdW5jdGlvbihhcGlSZWYpIHtcbiAgICAgICAgICAgIC8vIHN0b3JlIGEgcmVmZXJlbmNlIHRvIHRoZSBpbnRlcm5hbCBBUEkuXG4gICAgICAgICAgICBhcGkgPSBhcGlSZWY7XG5cbiAgICAgICAgICAgIGh0bXgub24oJ2h0bXg6YWZ0ZXJTd2FwJywgZnVuY3Rpb24oZXZ0KXtcbiAgICAgICAgICAgICAgICB2YXIgc2VydmVyUmVzcG9uc2UgPSBldnQuZGV0YWlsLnhoci5yZXNwb25zZTtcbiAgICAgICAgICAgICAgICBpZiAoYXBpLnRyaWdnZXJFdmVudChkb2N1bWVudC5ib2R5LCBcImh0bXg6YmVmb3JlSGVhZE1lcmdlXCIsIGV2dC5kZXRhaWwpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lcmdlSGVhZChzZXJ2ZXJSZXNwb25zZSwgZXZ0LmRldGFpbC5ib29zdGVkID8gXCJtZXJnZVwiIDogXCJhcHBlbmRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgaHRteC5vbignaHRteDpoaXN0b3J5UmVzdG9yZScsIGZ1bmN0aW9uKGV2dCl7XG4gICAgICAgICAgICAgICAgaWYgKGFwaS50cmlnZ2VyRXZlbnQoZG9jdW1lbnQuYm9keSwgXCJodG14OmJlZm9yZUhlYWRNZXJnZVwiLCBldnQuZGV0YWlsKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZ0LmRldGFpbC5jYWNoZU1pc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlSGVhZChldnQuZGV0YWlsLnNlcnZlclJlc3BvbnNlLCBcIm1lcmdlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VIZWFkKGV2dC5kZXRhaWwuaXRlbS5oZWFkLCBcIm1lcmdlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgaHRteC5vbignaHRteDpoaXN0b3J5SXRlbUNyZWF0ZWQnLCBmdW5jdGlvbihldnQpe1xuICAgICAgICAgICAgICAgIHZhciBoaXN0b3J5SXRlbSA9IGV2dC5kZXRhaWwuaXRlbTtcbiAgICAgICAgICAgICAgICBoaXN0b3J5SXRlbS5oZWFkID0gZG9jdW1lbnQuaGVhZC5vdXRlckhUTUw7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSk7XG5cbn0pKCkiLCIvKlxuU2VydmVyIFNlbnQgRXZlbnRzIEV4dGVuc2lvblxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuVGhpcyBleHRlbnNpb24gYWRkcyBzdXBwb3J0IGZvciBTZXJ2ZXIgU2VudCBFdmVudHMgdG8gaHRteC4gIFNlZSAvd3d3L2V4dGVuc2lvbnMvc3NlLm1kIGZvciB1c2FnZSBpbnN0cnVjdGlvbnMuXG5cbiovXG5cbihmdW5jdGlvbigpIHtcblxuXHQvKiogQHR5cGUge2ltcG9ydChcIi4uL2h0bXhcIikuSHRteEludGVybmFsQXBpfSAqL1xuXHR2YXIgYXBpO1xuXG5cdGh0bXguZGVmaW5lRXh0ZW5zaW9uKFwic3NlXCIsIHtcblxuXHRcdC8qKlxuXHRcdCAqIEluaXQgc2F2ZXMgdGhlIHByb3ZpZGVkIHJlZmVyZW5jZSB0byB0aGUgaW50ZXJuYWwgSFRNWCBBUEkuXG5cdFx0ICogXG5cdFx0ICogQHBhcmFtIHtpbXBvcnQoXCIuLi9odG14XCIpLkh0bXhJbnRlcm5hbEFwaX0gYXBpIFxuXHRcdCAqIEByZXR1cm5zIHZvaWRcblx0XHQgKi9cblx0XHRpbml0OiBmdW5jdGlvbihhcGlSZWYpIHtcblx0XHRcdC8vIHN0b3JlIGEgcmVmZXJlbmNlIHRvIHRoZSBpbnRlcm5hbCBBUEkuXG5cdFx0XHRhcGkgPSBhcGlSZWY7XG5cblx0XHRcdC8vIHNldCBhIGZ1bmN0aW9uIGluIHRoZSBwdWJsaWMgQVBJIGZvciBjcmVhdGluZyBuZXcgRXZlbnRTb3VyY2Ugb2JqZWN0c1xuXHRcdFx0aWYgKGh0bXguY3JlYXRlRXZlbnRTb3VyY2UgPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGh0bXguY3JlYXRlRXZlbnRTb3VyY2UgPSBjcmVhdGVFdmVudFNvdXJjZTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogb25FdmVudCBoYW5kbGVzIGFsbCBldmVudHMgcGFzc2VkIHRvIHRoaXMgZXh0ZW5zaW9uLlxuXHRcdCAqIFxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxuXHRcdCAqIEBwYXJhbSB7RXZlbnR9IGV2dCBcblx0XHQgKiBAcmV0dXJucyB2b2lkXG5cdFx0ICovXG5cdFx0b25FdmVudDogZnVuY3Rpb24obmFtZSwgZXZ0KSB7XG5cblx0XHRcdHZhciBwYXJlbnQgPSBldnQudGFyZ2V0IHx8IGV2dC5kZXRhaWwuZWx0O1xuXHRcdFx0c3dpdGNoIChuYW1lKSB7XG5cblx0XHRcdFx0Y2FzZSBcImh0bXg6YmVmb3JlQ2xlYW51cEVsZW1lbnRcIjpcblx0XHRcdFx0XHR2YXIgaW50ZXJuYWxEYXRhID0gYXBpLmdldEludGVybmFsRGF0YShwYXJlbnQpXG5cdFx0XHRcdFx0Ly8gVHJ5IHRvIHJlbW92ZSByZW1vdmUgYW4gRXZlbnRTb3VyY2Ugd2hlbiBlbGVtZW50cyBhcmUgcmVtb3ZlZFxuXHRcdFx0XHRcdGlmIChpbnRlcm5hbERhdGEuc3NlRXZlbnRTb3VyY2UpIHtcblx0XHRcdFx0XHRcdGludGVybmFsRGF0YS5zc2VFdmVudFNvdXJjZS5jbG9zZSgpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybjtcblxuXHRcdFx0XHQvLyBUcnkgdG8gY3JlYXRlIEV2ZW50U291cmNlcyB3aGVuIGVsZW1lbnRzIGFyZSBwcm9jZXNzZWRcblx0XHRcdFx0Y2FzZSBcImh0bXg6YWZ0ZXJQcm9jZXNzTm9kZVwiOlxuXHRcdFx0XHRcdGVuc3VyZUV2ZW50U291cmNlT25FbGVtZW50KHBhcmVudCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHQvLyBIRUxQRVIgRlVOQ1RJT05TXG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cblxuXHQvKipcblx0ICogY3JlYXRlRXZlbnRTb3VyY2UgaXMgdGhlIGRlZmF1bHQgbWV0aG9kIGZvciBjcmVhdGluZyBuZXcgRXZlbnRTb3VyY2Ugb2JqZWN0cy5cblx0ICogaXQgaXMgaG9pc3RlZCBpbnRvIGh0bXguY29uZmlnLmNyZWF0ZUV2ZW50U291cmNlIHRvIGJlIG92ZXJyaWRkZW4gYnkgdGhlIHVzZXIsIGlmIG5lZWRlZC5cblx0ICogXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgXG5cdCAqIEByZXR1cm5zIEV2ZW50U291cmNlXG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVFdmVudFNvdXJjZSh1cmwpIHtcblx0XHRyZXR1cm4gbmV3IEV2ZW50U291cmNlKHVybCwgeyB3aXRoQ3JlZGVudGlhbHM6IHRydWUgfSk7XG5cdH1cblxuXHRmdW5jdGlvbiBzcGxpdE9uV2hpdGVzcGFjZSh0cmlnZ2VyKSB7XG5cdFx0cmV0dXJuIHRyaWdnZXIudHJpbSgpLnNwbGl0KC9cXHMrLyk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRMZWdhY3lTU0VVUkwoZWx0KSB7XG5cdFx0dmFyIGxlZ2FjeVNTRVZhbHVlID0gYXBpLmdldEF0dHJpYnV0ZVZhbHVlKGVsdCwgXCJoeC1zc2VcIik7XG5cdFx0aWYgKGxlZ2FjeVNTRVZhbHVlKSB7XG5cdFx0XHR2YXIgdmFsdWVzID0gc3BsaXRPbldoaXRlc3BhY2UobGVnYWN5U1NFVmFsdWUpO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIHZhbHVlID0gdmFsdWVzW2ldLnNwbGl0KC86KC4rKS8pO1xuXHRcdFx0XHRpZiAodmFsdWVbMF0gPT09IFwiY29ubmVjdFwiKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHZhbHVlWzFdO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0TGVnYWN5U1NFU3dhcHMoZWx0KSB7XG5cdFx0dmFyIGxlZ2FjeVNTRVZhbHVlID0gYXBpLmdldEF0dHJpYnV0ZVZhbHVlKGVsdCwgXCJoeC1zc2VcIik7XG5cdFx0dmFyIHJldHVybkFyciA9IFtdO1xuXHRcdGlmIChsZWdhY3lTU0VWYWx1ZSAhPSBudWxsKSB7XG5cdFx0XHR2YXIgdmFsdWVzID0gc3BsaXRPbldoaXRlc3BhY2UobGVnYWN5U1NFVmFsdWUpO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIHZhbHVlID0gdmFsdWVzW2ldLnNwbGl0KC86KC4rKS8pO1xuXHRcdFx0XHRpZiAodmFsdWVbMF0gPT09IFwic3dhcFwiKSB7XG5cdFx0XHRcdFx0cmV0dXJuQXJyLnB1c2godmFsdWVbMV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiByZXR1cm5BcnI7XG5cdH1cblxuXHQvKipcblx0ICogcmVnaXN0ZXJTU0UgbG9va3MgZm9yIGF0dHJpYnV0ZXMgdGhhdCBjYW4gY29udGFpbiBzc2UgZXZlbnRzLCByaWdodCBcblx0ICogbm93IGh4LXRyaWdnZXIgYW5kIHNzZS1zd2FwIGFuZCBhZGRzIGxpc3RlbmVycyBiYXNlZCBvbiB0aGVzZSBhdHRyaWJ1dGVzIHRvb1xuXHQgKiB0aGUgY2xvc2VzdCBldmVudCBzb3VyY2Vcblx0ICpcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWx0XG5cdCAqL1xuXHRmdW5jdGlvbiByZWdpc3RlclNTRShlbHQpIHtcblx0XHQvLyBBZGQgbWVzc2FnZSBoYW5kbGVycyBmb3IgZXZlcnkgYHNzZS1zd2FwYCBhdHRyaWJ1dGVcblx0XHRxdWVyeUF0dHJpYnV0ZU9uVGhpc09yQ2hpbGRyZW4oZWx0LCBcInNzZS1zd2FwXCIpLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG5cdFx0XHQvLyBGaW5kIGNsb3Nlc3QgZXhpc3RpbmcgZXZlbnQgc291cmNlXG5cdFx0XHR2YXIgc291cmNlRWxlbWVudCA9IGFwaS5nZXRDbG9zZXN0TWF0Y2goY2hpbGQsIGhhc0V2ZW50U291cmNlKTtcblx0XHRcdGlmIChzb3VyY2VFbGVtZW50ID09IG51bGwpIHtcblx0XHRcdFx0Ly8gYXBpLnRyaWdnZXJFcnJvckV2ZW50KGVsdCwgXCJodG14Om5vU1NFU291cmNlRXJyb3JcIilcblx0XHRcdFx0cmV0dXJuIG51bGw7IC8vIG5vIGV2ZW50c291cmNlIGluIHBhcmVudGFnZSwgb3JwaGFuZWQgZWxlbWVudFxuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZXQgaW50ZXJuYWxEYXRhIGFuZCBzb3VyY2Vcblx0XHRcdHZhciBpbnRlcm5hbERhdGEgPSBhcGkuZ2V0SW50ZXJuYWxEYXRhKHNvdXJjZUVsZW1lbnQpO1xuXHRcdFx0dmFyIHNvdXJjZSA9IGludGVybmFsRGF0YS5zc2VFdmVudFNvdXJjZTtcblxuXHRcdFx0dmFyIHNzZVN3YXBBdHRyID0gYXBpLmdldEF0dHJpYnV0ZVZhbHVlKGNoaWxkLCBcInNzZS1zd2FwXCIpO1xuXHRcdFx0aWYgKHNzZVN3YXBBdHRyKSB7XG5cdFx0XHRcdHZhciBzc2VFdmVudE5hbWVzID0gc3NlU3dhcEF0dHIuc3BsaXQoXCIsXCIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFyIHNzZUV2ZW50TmFtZXMgPSBnZXRMZWdhY3lTU0VTd2FwcyhjaGlsZCk7XG5cdFx0XHR9XG5cblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3NlRXZlbnROYW1lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgc3NlRXZlbnROYW1lID0gc3NlRXZlbnROYW1lc1tpXS50cmltKCk7XG5cdFx0XHRcdHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cblx0XHRcdFx0XHQvLyBJZiB0aGUgc291cmNlIGlzIG1pc3NpbmcgdGhlbiBjbG9zZSBTU0Vcblx0XHRcdFx0XHRpZiAobWF5YmVDbG9zZVNTRVNvdXJjZShzb3VyY2VFbGVtZW50KSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIElmIHRoZSBib2R5IG5vIGxvbmdlciBjb250YWlucyB0aGUgZWxlbWVudCwgcmVtb3ZlIHRoZSBsaXN0ZW5lclxuXHRcdFx0XHRcdGlmICghYXBpLmJvZHlDb250YWlucyhjaGlsZCkpIHtcblx0XHRcdFx0XHRcdHNvdXJjZS5yZW1vdmVFdmVudExpc3RlbmVyKHNzZUV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIHN3YXAgdGhlIHJlc3BvbnNlIGludG8gdGhlIERPTSBhbmQgdHJpZ2dlciBhIG5vdGlmaWNhdGlvblxuXHRcdFx0XHRcdGlmKCFhcGkudHJpZ2dlckV2ZW50KGVsdCwgXCJodG14OnNzZUJlZm9yZU1lc3NhZ2VcIiwgZXZlbnQpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHN3YXAoY2hpbGQsIGV2ZW50LmRhdGEpO1xuXHRcdFx0XHRcdGFwaS50cmlnZ2VyRXZlbnQoZWx0LCBcImh0bXg6c3NlTWVzc2FnZVwiLCBldmVudCk7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gUmVnaXN0ZXIgdGhlIG5ldyBsaXN0ZW5lclxuXHRcdFx0XHRhcGkuZ2V0SW50ZXJuYWxEYXRhKGNoaWxkKS5zc2VFdmVudExpc3RlbmVyID0gbGlzdGVuZXI7XG5cdFx0XHRcdHNvdXJjZS5hZGRFdmVudExpc3RlbmVyKHNzZUV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gQWRkIG1lc3NhZ2UgaGFuZGxlcnMgZm9yIGV2ZXJ5IGBoeC10cmlnZ2VyPVwic3NlOipcImAgYXR0cmlidXRlXG5cdFx0cXVlcnlBdHRyaWJ1dGVPblRoaXNPckNoaWxkcmVuKGVsdCwgXCJoeC10cmlnZ2VyXCIpLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHtcblx0XHRcdC8vIEZpbmQgY2xvc2VzdCBleGlzdGluZyBldmVudCBzb3VyY2Vcblx0XHRcdHZhciBzb3VyY2VFbGVtZW50ID0gYXBpLmdldENsb3Nlc3RNYXRjaChjaGlsZCwgaGFzRXZlbnRTb3VyY2UpO1xuXHRcdFx0aWYgKHNvdXJjZUVsZW1lbnQgPT0gbnVsbCkge1xuXHRcdFx0XHQvLyBhcGkudHJpZ2dlckVycm9yRXZlbnQoZWx0LCBcImh0bXg6bm9TU0VTb3VyY2VFcnJvclwiKVxuXHRcdFx0XHRyZXR1cm4gbnVsbDsgLy8gbm8gZXZlbnRzb3VyY2UgaW4gcGFyZW50YWdlLCBvcnBoYW5lZCBlbGVtZW50XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNldCBpbnRlcm5hbERhdGEgYW5kIHNvdXJjZVxuXHRcdFx0dmFyIGludGVybmFsRGF0YSA9IGFwaS5nZXRJbnRlcm5hbERhdGEoc291cmNlRWxlbWVudCk7XG5cdFx0XHR2YXIgc291cmNlID0gaW50ZXJuYWxEYXRhLnNzZUV2ZW50U291cmNlO1xuXG5cdFx0XHR2YXIgc3NlRXZlbnROYW1lID0gYXBpLmdldEF0dHJpYnV0ZVZhbHVlKGNoaWxkLCBcImh4LXRyaWdnZXJcIik7XG5cdFx0XHRpZiAoc3NlRXZlbnROYW1lID09IG51bGwpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPbmx5IHByb2Nlc3MgaHgtdHJpZ2dlcnMgZm9yIGV2ZW50cyB3aXRoIHRoZSBcInNzZTpcIiBwcmVmaXhcblx0XHRcdGlmIChzc2VFdmVudE5hbWUuc2xpY2UoMCwgNCkgIT0gXCJzc2U6XCIpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyByZW1vdmUgdGhlIHNzZTogcHJlZml4IGZyb20gaGVyZSBvbiBvdXRcblx0XHRcdHNzZUV2ZW50TmFtZSA9IHNzZUV2ZW50TmFtZS5zdWJzdHIoNCk7XG5cblx0XHRcdHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAobWF5YmVDbG9zZVNTRVNvdXJjZShzb3VyY2VFbGVtZW50KSkge1xuXHRcdFx0XHRcdHJldHVyblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCFhcGkuYm9keUNvbnRhaW5zKGNoaWxkKSkge1xuXHRcdFx0XHRcdHNvdXJjZS5yZW1vdmVFdmVudExpc3RlbmVyKHNzZUV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogZW5zdXJlRXZlbnRTb3VyY2VPbkVsZW1lbnQgY3JlYXRlcyBhIG5ldyBFdmVudFNvdXJjZSBjb25uZWN0aW9uIG9uIHRoZSBwcm92aWRlZCBlbGVtZW50LlxuXHQgKiBJZiBhIHVzYWJsZSBFdmVudFNvdXJjZSBhbHJlYWR5IGV4aXN0cywgdGhlbiBpdCBpcyByZXR1cm5lZC4gIElmIG5vdCwgdGhlbiBhIG5ldyBFdmVudFNvdXJjZVxuXHQgKiBpcyBjcmVhdGVkIGFuZCBzdG9yZWQgaW4gdGhlIGVsZW1lbnQncyBpbnRlcm5hbERhdGEuXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsdFxuXHQgKiBAcGFyYW0ge251bWJlcn0gcmV0cnlDb3VudFxuXHQgKiBAcmV0dXJucyB7RXZlbnRTb3VyY2UgfCBudWxsfVxuXHQgKi9cblx0ZnVuY3Rpb24gZW5zdXJlRXZlbnRTb3VyY2VPbkVsZW1lbnQoZWx0LCByZXRyeUNvdW50KSB7XG5cblx0XHRpZiAoZWx0ID09IG51bGwpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdC8vIGhhbmRsZSBleHRlbnNpb24gc291cmNlIGNyZWF0aW9uIGF0dHJpYnV0ZVxuXHRcdHF1ZXJ5QXR0cmlidXRlT25UaGlzT3JDaGlsZHJlbihlbHQsIFwic3NlLWNvbm5lY3RcIikuZm9yRWFjaChmdW5jdGlvbihjaGlsZCkge1xuXHRcdFx0dmFyIHNzZVVSTCA9IGFwaS5nZXRBdHRyaWJ1dGVWYWx1ZShjaGlsZCwgXCJzc2UtY29ubmVjdFwiKTtcblx0XHRcdGlmIChzc2VVUkwgPT0gbnVsbCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGVuc3VyZUV2ZW50U291cmNlKGNoaWxkLCBzc2VVUkwsIHJldHJ5Q291bnQpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gaGFuZGxlIGxlZ2FjeSBzc2UsIHJlbW92ZSBmb3IgSFRNWDJcblx0XHRxdWVyeUF0dHJpYnV0ZU9uVGhpc09yQ2hpbGRyZW4oZWx0LCBcImh4LXNzZVwiKS5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSB7XG5cdFx0XHR2YXIgc3NlVVJMID0gZ2V0TGVnYWN5U1NFVVJMKGNoaWxkKTtcblx0XHRcdGlmIChzc2VVUkwgPT0gbnVsbCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGVuc3VyZUV2ZW50U291cmNlKGNoaWxkLCBzc2VVUkwsIHJldHJ5Q291bnQpO1xuXHRcdH0pO1xuXG5cdFx0cmVnaXN0ZXJTU0UoZWx0KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGVuc3VyZUV2ZW50U291cmNlKGVsdCwgdXJsLCByZXRyeUNvdW50KSB7XG5cdFx0dmFyIHNvdXJjZSA9IGh0bXguY3JlYXRlRXZlbnRTb3VyY2UodXJsKTtcblxuXHRcdHNvdXJjZS5vbmVycm9yID0gZnVuY3Rpb24oZXJyKSB7XG5cblx0XHRcdC8vIExvZyBhbiBlcnJvciBldmVudFxuXHRcdFx0YXBpLnRyaWdnZXJFcnJvckV2ZW50KGVsdCwgXCJodG14OnNzZUVycm9yXCIsIHsgZXJyb3I6IGVyciwgc291cmNlOiBzb3VyY2UgfSk7XG5cblx0XHRcdC8vIElmIHBhcmVudCBubyBsb25nZXIgZXhpc3RzIGluIHRoZSBkb2N1bWVudCwgdGhlbiBjbGVhbiB1cCB0aGlzIEV2ZW50U291cmNlXG5cdFx0XHRpZiAobWF5YmVDbG9zZVNTRVNvdXJjZShlbHQpKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gT3RoZXJ3aXNlLCB0cnkgdG8gcmVjb25uZWN0IHRoZSBFdmVudFNvdXJjZVxuXHRcdFx0aWYgKHNvdXJjZS5yZWFkeVN0YXRlID09PSBFdmVudFNvdXJjZS5DTE9TRUQpIHtcblx0XHRcdFx0cmV0cnlDb3VudCA9IHJldHJ5Q291bnQgfHwgMDtcblx0XHRcdFx0dmFyIHRpbWVvdXQgPSBNYXRoLnJhbmRvbSgpICogKDIgXiByZXRyeUNvdW50KSAqIDUwMDtcblx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ZW5zdXJlRXZlbnRTb3VyY2VPbkVsZW1lbnQoZWx0LCBNYXRoLm1pbig3LCByZXRyeUNvdW50ICsgMSkpO1xuXHRcdFx0XHR9LCB0aW1lb3V0KTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0c291cmNlLm9ub3BlbiA9IGZ1bmN0aW9uKGV2dCkge1xuXHRcdFx0YXBpLnRyaWdnZXJFdmVudChlbHQsIFwiaHRteDpzc2VPcGVuXCIsIHsgc291cmNlOiBzb3VyY2UgfSk7XG5cdFx0fVxuXG5cdFx0YXBpLmdldEludGVybmFsRGF0YShlbHQpLnNzZUV2ZW50U291cmNlID0gc291cmNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIG1heWJlQ2xvc2VTU0VTb3VyY2UgY29uZmlybXMgdGhhdCB0aGUgcGFyZW50IGVsZW1lbnQgc3RpbGwgZXhpc3RzLlxuXHQgKiBJZiBub3QsIHRoZW4gYW55IGFzc29jaWF0ZWQgU1NFIHNvdXJjZSBpcyBjbG9zZWQgYW5kIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRydWUuXG5cdCAqIFxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbHQgXG5cdCAqIEByZXR1cm5zIGJvb2xlYW5cblx0ICovXG5cdGZ1bmN0aW9uIG1heWJlQ2xvc2VTU0VTb3VyY2UoZWx0KSB7XG5cdFx0aWYgKCFhcGkuYm9keUNvbnRhaW5zKGVsdCkpIHtcblx0XHRcdHZhciBzb3VyY2UgPSBhcGkuZ2V0SW50ZXJuYWxEYXRhKGVsdCkuc3NlRXZlbnRTb3VyY2U7XG5cdFx0XHRpZiAoc291cmNlICE9IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRzb3VyY2UuY2xvc2UoKTtcblx0XHRcdFx0Ly8gc291cmNlID0gbnVsbFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIHF1ZXJ5QXR0cmlidXRlT25UaGlzT3JDaGlsZHJlbiByZXR1cm5zIGFsbCBub2RlcyB0aGF0IGNvbnRhaW4gdGhlIHJlcXVlc3RlZCBhdHRyaWJ1dGVOYW1lLCBJTkNMVURJTkcgVEhFIFBST1ZJREVEIFJPT1QgRUxFTUVOVC5cblx0ICogXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsdCBcblx0ICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZU5hbWUgXG5cdCAqL1xuXHRmdW5jdGlvbiBxdWVyeUF0dHJpYnV0ZU9uVGhpc09yQ2hpbGRyZW4oZWx0LCBhdHRyaWJ1dGVOYW1lKSB7XG5cblx0XHR2YXIgcmVzdWx0ID0gW107XG5cblx0XHQvLyBJZiB0aGUgcGFyZW50IGVsZW1lbnQgYWxzbyBjb250YWlucyB0aGUgcmVxdWVzdGVkIGF0dHJpYnV0ZSwgdGhlbiBhZGQgaXQgdG8gdGhlIHJlc3VsdHMgdG9vLlxuXHRcdGlmIChhcGkuaGFzQXR0cmlidXRlKGVsdCwgYXR0cmlidXRlTmFtZSkpIHtcblx0XHRcdHJlc3VsdC5wdXNoKGVsdCk7XG5cdFx0fVxuXG5cdFx0Ly8gU2VhcmNoIGFsbCBjaGlsZCBub2RlcyB0aGF0IG1hdGNoIHRoZSByZXF1ZXN0ZWQgYXR0cmlidXRlXG5cdFx0ZWx0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbXCIgKyBhdHRyaWJ1dGVOYW1lICsgXCJdLCBbZGF0YS1cIiArIGF0dHJpYnV0ZU5hbWUgKyBcIl1cIikuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7XG5cdFx0XHRyZXN1bHQucHVzaChub2RlKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWx0XG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50IFxuXHQgKi9cblx0ZnVuY3Rpb24gc3dhcChlbHQsIGNvbnRlbnQpIHtcblxuXHRcdGFwaS53aXRoRXh0ZW5zaW9ucyhlbHQsIGZ1bmN0aW9uKGV4dGVuc2lvbikge1xuXHRcdFx0Y29udGVudCA9IGV4dGVuc2lvbi50cmFuc2Zvcm1SZXNwb25zZShjb250ZW50LCBudWxsLCBlbHQpO1xuXHRcdH0pO1xuXG5cdFx0dmFyIHN3YXBTcGVjID0gYXBpLmdldFN3YXBTcGVjaWZpY2F0aW9uKGVsdCk7XG5cdFx0dmFyIHRhcmdldCA9IGFwaS5nZXRUYXJnZXQoZWx0KTtcblx0XHR2YXIgc2V0dGxlSW5mbyA9IGFwaS5tYWtlU2V0dGxlSW5mbyhlbHQpO1xuXG5cdFx0YXBpLnNlbGVjdEFuZFN3YXAoc3dhcFNwZWMuc3dhcFN0eWxlLCB0YXJnZXQsIGVsdCwgY29udGVudCwgc2V0dGxlSW5mbyk7XG5cblx0XHRzZXR0bGVJbmZvLmVsdHMuZm9yRWFjaChmdW5jdGlvbihlbHQpIHtcblx0XHRcdGlmIChlbHQuY2xhc3NMaXN0KSB7XG5cdFx0XHRcdGVsdC5jbGFzc0xpc3QuYWRkKGh0bXguY29uZmlnLnNldHRsaW5nQ2xhc3MpO1xuXHRcdFx0fVxuXHRcdFx0YXBpLnRyaWdnZXJFdmVudChlbHQsICdodG14OmJlZm9yZVNldHRsZScpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gSGFuZGxlIHNldHRsZSB0YXNrcyAod2l0aCBkZWxheSBpZiByZXF1ZXN0ZWQpXG5cdFx0aWYgKHN3YXBTcGVjLnNldHRsZURlbGF5ID4gMCkge1xuXHRcdFx0c2V0VGltZW91dChkb1NldHRsZShzZXR0bGVJbmZvKSwgc3dhcFNwZWMuc2V0dGxlRGVsYXkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkb1NldHRsZShzZXR0bGVJbmZvKSgpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBkb1NldHRsZSBtaXJyb3JzIG11Y2ggb2YgdGhlIGZ1bmN0aW9uYWxpdHkgaW4gaHRteCB0aGF0IFxuXHQgKiBzZXR0bGVzIGVsZW1lbnRzIGFmdGVyIHRoZWlyIGNvbnRlbnQgaGFzIGJlZW4gc3dhcHBlZC5cblx0ICogVE9ETzogdGhpcyBzaG91bGQgYmUgcHVibGlzaGVkIGJ5IGh0bXgsIGFuZCBub3QgZHVwbGljYXRlZCBoZXJlXG5cdCAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vaHRteFwiKS5IdG14U2V0dGxlSW5mb30gc2V0dGxlSW5mbyBcblx0ICogQHJldHVybnMgKCkgPT4gdm9pZFxuXHQgKi9cblx0ZnVuY3Rpb24gZG9TZXR0bGUoc2V0dGxlSW5mbykge1xuXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0c2V0dGxlSW5mby50YXNrcy5mb3JFYWNoKGZ1bmN0aW9uKHRhc2spIHtcblx0XHRcdFx0dGFzay5jYWxsKCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0c2V0dGxlSW5mby5lbHRzLmZvckVhY2goZnVuY3Rpb24oZWx0KSB7XG5cdFx0XHRcdGlmIChlbHQuY2xhc3NMaXN0KSB7XG5cdFx0XHRcdFx0ZWx0LmNsYXNzTGlzdC5yZW1vdmUoaHRteC5jb25maWcuc2V0dGxpbmdDbGFzcyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YXBpLnRyaWdnZXJFdmVudChlbHQsICdodG14OmFmdGVyU2V0dGxlJyk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBoYXNFdmVudFNvdXJjZShub2RlKSB7XG5cdFx0cmV0dXJuIGFwaS5nZXRJbnRlcm5hbERhdGEobm9kZSkuc3NlRXZlbnRTb3VyY2UgIT0gbnVsbDtcblx0fVxuXG59KSgpO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsInJlcXVpcmUoJ2h0bXgub3JnL2Rpc3QvZXh0L2hlYWQtc3VwcG9ydCcpO1xucmVxdWlyZSgnaHRteC5vcmcvZGlzdC9leHQvcHJlbG9hZCcpO1xucmVxdWlyZSgnaHRteC5vcmcvZGlzdC9leHQvc3NlJyk7XG4iXSwibmFtZXMiOlsiaHRteCIsImRlZmluZUV4dGVuc2lvbiIsIm9uRXZlbnQiLCJuYW1lIiwiZXZlbnQiLCJhdHRyIiwibm9kZSIsInByb3BlcnR5IiwidW5kZWZpbmVkIiwiZ2V0QXR0cmlidXRlIiwicGFyZW50RWxlbWVudCIsImxvYWQiLCJkb25lIiwiaHRtbCIsInByZWxvYWRBbHdheXMiLCJwcmVsb2FkU3RhdGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJoeEdldCIsImFqYXgiLCJzb3VyY2UiLCJoYW5kbGVyIiwiZWx0IiwiaW5mbyIsInhociIsInJlc3BvbnNlVGV4dCIsInIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbmxvYWQiLCJzZW5kIiwiaW5pdCIsIm9uIiwiYWx3YXlzIiwiaW5kZXhPZiIsInJlcGxhY2UiLCJ0cmltIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJ0YXJnZXQiLCJ0cmlnZ2VyIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJhcGkiLCJtZXJnZUhlYWQiLCJuZXdDb250ZW50IiwiZGVmYXVsdE1lcmdlU3RyYXRlZ3kiLCJodG1sRG9jIiwiaGVhZFRhZyIsIm1hdGNoIiwiYWRkZWQiLCJyZW1vdmVkIiwicHJlc2VydmVkIiwibm9kZXNUb0FwcGVuZCIsIm5ld0hlYWRUYWciLCJxdWVyeVNlbGVjdG9yIiwiY3VycmVudEhlYWQiLCJoZWFkIiwic3JjVG9OZXdIZWFkTm9kZXMiLCJNYXAiLCJuZXdIZWFkQ2hpbGQiLCJjaGlsZHJlbiIsInNldCIsIm91dGVySFRNTCIsIm1lcmdlU3RyYXRlZ3kiLCJnZXRBdHRyaWJ1dGVWYWx1ZSIsImN1cnJlbnRIZWFkRWx0IiwiaW5OZXdDb250ZW50IiwiaGFzIiwiaXNSZUFwcGVuZGVkIiwiaXNQcmVzZXJ2ZWQiLCJwdXNoIiwiZGVsZXRlIiwidHJpZ2dlckV2ZW50IiwiYm9keSIsImhlYWRFbGVtZW50IiwidmFsdWVzIiwibmV3Tm9kZSIsIm5ld0VsdCIsImNyZWF0ZVJhbmdlIiwiY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50IiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmVkRWxlbWVudCIsInJlbW92ZUNoaWxkIiwia2VwdCIsImFwaVJlZiIsInNlcnZlclJlc3BvbnNlIiwiZGV0YWlsIiwicmVzcG9uc2UiLCJib29zdGVkIiwiY2FjaGVNaXNzIiwiaXRlbSIsImNyZWF0ZUV2ZW50U291cmNlIiwidXJsIiwiRXZlbnRTb3VyY2UiLCJ3aXRoQ3JlZGVudGlhbHMiLCJzcGxpdE9uV2hpdGVzcGFjZSIsInNwbGl0IiwicmVnaXN0ZXJTU0UiLCJxdWVyeUF0dHJpYnV0ZU9uVGhpc09yQ2hpbGRyZW4iLCJjaGlsZCIsInNvdXJjZUVsZW1lbnQiLCJnZXRDbG9zZXN0TWF0Y2giLCJoYXNFdmVudFNvdXJjZSIsImdldEludGVybmFsRGF0YSIsInNzZUV2ZW50U291cmNlIiwic3NlU3dhcEF0dHIiLCJzc2VFdmVudE5hbWVzIiwibGVnYWN5U1NFVmFsdWUiLCJyZXR1cm5BcnIiLCJpIiwibGVuZ3RoIiwidmFsdWUiLCJnZXRMZWdhY3lTU0VTd2FwcyIsInNzZUV2ZW50TmFtZSIsImxpc3RlbmVyIiwibWF5YmVDbG9zZVNTRVNvdXJjZSIsImJvZHlDb250YWlucyIsInN3YXAiLCJkYXRhIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNzZUV2ZW50TGlzdGVuZXIiLCJzbGljZSIsInN1YnN0ciIsImVuc3VyZUV2ZW50U291cmNlT25FbGVtZW50IiwicmV0cnlDb3VudCIsInNzZVVSTCIsImVuc3VyZUV2ZW50U291cmNlIiwiZ2V0TGVnYWN5U1NFVVJMIiwib25lcnJvciIsImVyciIsInRyaWdnZXJFcnJvckV2ZW50IiwiZXJyb3IiLCJyZWFkeVN0YXRlIiwiQ0xPU0VEIiwidGltZW91dCIsIk1hdGgiLCJyYW5kb20iLCJtaW4iLCJvbm9wZW4iLCJjbG9zZSIsImF0dHJpYnV0ZU5hbWUiLCJyZXN1bHQiLCJoYXNBdHRyaWJ1dGUiLCJjb250ZW50Iiwid2l0aEV4dGVuc2lvbnMiLCJleHRlbnNpb24iLCJ0cmFuc2Zvcm1SZXNwb25zZSIsInN3YXBTcGVjIiwiZ2V0U3dhcFNwZWNpZmljYXRpb24iLCJnZXRUYXJnZXQiLCJzZXR0bGVJbmZvIiwibWFrZVNldHRsZUluZm8iLCJzZWxlY3RBbmRTd2FwIiwic3dhcFN0eWxlIiwiZWx0cyIsImNsYXNzTGlzdCIsImFkZCIsImNvbmZpZyIsInNldHRsaW5nQ2xhc3MiLCJzZXR0bGVEZWxheSIsImRvU2V0dGxlIiwidGFza3MiLCJ0YXNrIiwiY2FsbCIsInJlbW92ZSIsInBhcmVudCIsImludGVybmFsRGF0YSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwicmVxdWlyZSJdLCJzb3VyY2VSb290IjoiIn0=